!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/au-eva/",n(n.s=27)}({0:function(t,e,n){"use strict";(function(t){function r(t,e,n){if(e){if(e.innerError&&n)return e;var r="\n------------------------------------------------\n";t+=r+"Inner Error:\n","string"==typeof e?t+="Message: "+e:(e.message?t+="Message: "+e.message:t+="Unknown Inner Error Type. Displaying Inner Error as JSON:\n "+JSON.stringify(e,null,"  "),e.stack&&(t+="\nInner Error Stack:\n"+e.stack,t+="\nEnd Inner Error Stack")),t+=r}var i=new Error(t);return e&&(i.innerError=e),i}n.d(e,"a",(function(){return r})),n.d(e,"c",(function(){return i})),n.d(e,"d",(function(){return o})),n.d(e,"b",(function(){return a})),n.d(e,"f",(function(){return s})),n.d(e,"e",(function(){return c}));var i={},o={noop:function(){},eachModule:function(){},moduleName:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){return t}))};o.global="undefined"!=typeof self?self:void 0!==t?t:new Function("return this")();var a={},s=!1;function c(t){s||(s=!0,"function"!=typeof Object.getPropertyDescriptor&&(Object.getPropertyDescriptor=function(t,e){for(var n=Object.getOwnPropertyDescriptor(t,e),r=Object.getPrototypeOf(t);void 0===n&&null!==r;)n=Object.getOwnPropertyDescriptor(r,e),r=Object.getPrototypeOf(r);return n}),t(o,i,a))}}).call(this,n(11))},1:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return u})),n.d(e,"c",(function(){return l})),n.d(e,"d",(function(){return g}));var r=n(0),i=(Object.assign,"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t});function o(t){return t&&("function"==typeof t||"object"===(void 0===t?"undefined":i(t)))}var a={resource:"aurelia:resource",paramTypes:"design:paramtypes",propertyType:"design:type",properties:"design:properties",get:function(t,e,n){if(o(e)){var r=a.getOwn(t,e,n);return void 0===r?a.get(t,Object.getPrototypeOf(e),n):r}},getOwn:function(t,e,n){if(o(e))return Reflect.getOwnMetadata(t,e,n)},define:function(t,e,n,r){Reflect.defineMetadata(t,e,n,r)},getOrCreateOwn:function(t,e,n,r){var i=a.getOwn(t,n,r);return void 0===i&&(i=new e,Reflect.defineMetadata(t,i,n,r)),i}},s=new Map,c=Object.freeze({moduleId:void 0,moduleMember:void 0}),u=function(){function t(t,e){this.moduleId=t,this.moduleMember=e}return t.get=function(e){var n=s.get(e);return void 0===n&&r.d.eachModule((function(r,o){if("object"===(void 0===o?"undefined":i(o)))for(var a in o)try{if(o[a]===e)return s.set(e,n=new t(r,a)),!0}catch(t){}return o===e&&(s.set(e,n=new t(r,"default")),!0)})),n||c},t.set=function(t,e){s.set(t,e)},t}();function l(t){var e=Object.keys(t);return function(n){var r=function(n){for(var r="function"==typeof n?n.prototype:n,i=e.length;i--;){var o=e[i];Object.defineProperty(r,o,{value:t[o],writable:!0})}};return n?r(n):r}}function h(){return!0}function d(){}function p(t){return void 0===t?t={}:"function"==typeof t&&(t={validate:t}),t.validate||(t.validate=h),t.compose||(t.compose=d),t}function f(t){return function(e){return!0===t(e)}}function v(t,e){return function(n){var r=e(n);if(!0!==r)throw new Error(r||t+" was not correctly implemented.")}}function g(t,e){e=p(e);var n=function n(r){var i="function"==typeof r?r.prototype:r;e.compose(i),n.assert(i),Object.defineProperty(i,"protocol:"+t,{enumerable:!1,configurable:!1,writable:!1,value:!0})};return n.validate=f(e.validate),n.assert=v(t,e.validate),n}g.create=function(t,e){e=p(e);var n="protocol:"+t,r=function(n){var r=g(t,e);return n?r(n):r};return r.decorates=function(t){return!0===t[n]},r.validate=f(e.validate),r.assert=v(t,e.validate),r}},10:function(t,e,n){"use strict";n.d(e,"b",(function(){return s})),n.d(e,"a",(function(){return c}));var r=n(8),i=n(1),o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(t,e){this.src=t,this.name=e},s=function(){function t(t){this.templateIsLoaded=!1,this.factoryIsReady=!1,this.resources=null,this.dependencies=null,this.address=t,this.onReady=null,this._template=null,this._factory=null}return t.prototype.addDependency=function(t,e){var n="string"==typeof t?Object(r.d)(t,this.address):i.a.get(t).moduleId;this.dependencies.push(new a(n,e))},o(t,[{key:"template",get:function(){return this._template},set:function(t){var e,n=this.address,i=void 0,o=void 0,s=void 0;this._template=t,this.templateIsLoaded=!0,e=t.content.querySelectorAll("require"),s=this.dependencies=new Array(e.length);for(var c=0,u=e.length;c<u;++c){if(!(o=(i=e[c]).getAttribute("from")))throw new Error("<require> element in "+n+' has no "from" attribute.');s[c]=new a(Object(r.d)(o,n),i.getAttribute("as")),i.parentNode&&i.parentNode.removeChild(i)}}},{key:"factory",get:function(){return this._factory},set:function(t){this._factory=t,this.factoryIsReady=!0}}]),t}(),c=function(){function t(){this.templateRegistry={}}return t.prototype.map=function(t,e){throw new Error("Loaders must implement map(id, source).")},t.prototype.normalizeSync=function(t,e){throw new Error("Loaders must implement normalizeSync(moduleId, relativeTo).")},t.prototype.normalize=function(t,e){throw new Error("Loaders must implement normalize(moduleId: string, relativeTo: string): Promise<string>.")},t.prototype.loadModule=function(t){throw new Error("Loaders must implement loadModule(id).")},t.prototype.loadAllModules=function(t){throw new Error("Loader must implement loadAllModules(ids).")},t.prototype.loadTemplate=function(t){throw new Error("Loader must implement loadTemplate(url).")},t.prototype.loadText=function(t){throw new Error("Loader must implement loadText(url).")},t.prototype.applyPluginToUrl=function(t,e){throw new Error("Loader must implement applyPluginToUrl(url, pluginName).")},t.prototype.addPlugin=function(t,e){throw new Error("Loader must implement addPlugin(pluginName, implementation).")},t.prototype.getOrCreateTemplateRegistryEntry=function(t){return this.templateRegistry[t]||(this.templateRegistry[t]=new s(t))},t}()},11:function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},12:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(4);class i{constructor(t){this.acctList=[],this.listTotal=0,this.id=t}sortAcctList(){this.acctList.sort((t,e)=>t.compareTo(e))}reindexAcctList(){for(let t=0;t<=this.acctList.length-1;t++)this.acctList[t].intraSideIndex=t}refresh(){this.sortAcctList(),this.reindexAcctList(),this.listTotal=0;for(let t of this.acctList)t instanceof r.a&&(t.refresh(),this.listTotal+=t.endingBalance)}clone(){let t=new i(this.id);for(let e of this.acctList){let n=e.clone();t.acctList.push(n)}return t.listTotal=this.listTotal,t}}},13:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return st})),n.d(e,"b",(function(){return D})),n.d(e,"c",(function(){return m}));var r=n(5),i=n(6),o=n(18),a=n(23),s=n("aurelia-event-aggregator"),c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var u=function(){function e(t){this.plan=null,this.options={},Object.assign(this,t),this.params=this.params||{},this.viewPortInstructions={};var e=[],n=this;do{var r=Object.assign({},n.params);n.config&&n.config.hasChildRouter&&delete r[n.getWildCardName()],e.unshift(r),n=n.parentInstruction}while(n);var i=Object.assign.apply(Object,[{},this.queryParams].concat(e));this.lifecycleArgs=[i,this.config,this]}return e.prototype.getAllInstructions=function(){var t=[this],e=this.viewPortInstructions;for(var n in e){var r=e[n].childNavigationInstruction;r&&t.push.apply(t,r.getAllInstructions())}return t},e.prototype.getAllPreviousInstructions=function(){return this.getAllInstructions().map((function(t){return t.previousInstruction})).filter((function(t){return t}))},e.prototype.addViewPortInstruction=function(t,e,n,r){var i,o="string"==typeof t?t:t.name,a=this.lifecycleArgs,s=Object.assign({},a[1],{currentViewPort:o});return i="string"==typeof t?{name:t,strategy:e,moduleId:n,component:r,childRouter:r.childRouter,lifecycleArgs:[a[0],s,a[2]]}:{name:o,strategy:t.strategy,component:t.component,moduleId:t.moduleId,childRouter:t.component.childRouter,lifecycleArgs:[a[0],s,a[2]]},this.viewPortInstructions[o]=i},e.prototype.getWildCardName=function(){var t=this.config.route,e=t.lastIndexOf("*");return t.substr(e+1)},e.prototype.getWildcardPath=function(){var t=this.getWildCardName(),e=this.params[t]||"",n=this.queryString;return n&&(e+="?"+n),e},e.prototype.getBaseUrl=function(){var t=this,e=encodeURI,n=decodeURI(this.fragment);if(""===n){var r=this.router.routes.find((function(e){return e.name===t.config.name&&""!==e.route}));r&&(n=r.route)}if(!this.params)return e(n);var i=this.getWildCardName(),o=this.params[i]||"";return e(o?n.substr(0,n.lastIndexOf(o)):n)},e.prototype._commitChanges=function(e){var n=this,r=this.router;r.currentInstruction=this;var i=this.previousInstruction;i&&(i.config.navModel.isActive=!1),this.config.navModel.isActive=!0,r.refreshNavigation();var o=[],a=[],s=this.viewPortInstructions,c=function(n){var i=s[n],c=r.viewPorts[n];if(!c)throw new Error("There was no router-view found in the view for "+i.moduleId+".");var u=i.childNavigationInstruction;"replace"===i.strategy?u&&u.parentCatchHandler?o.push(u._commitChanges(e)):(e&&a.push({viewPort:c,viewPortInstruction:i}),o.push(c.process(i,e).then((function(){return u?u._commitChanges(e):t.resolve()})))):u&&o.push(u._commitChanges(e))};for(var u in s)c(u);return t.all(o).then((function(){return a.forEach((function(t){return t.viewPort.swap(t.viewPortInstruction)})),null})).then((function(){return l(n)}))},e.prototype._updateTitle=function(){var t=this.router,e=this._buildTitle(t.titleSeparator);e&&t.history.setTitle(e)},e.prototype._buildTitle=function(t){void 0===t&&(t=" | ");var e="",n=[],r=this.config.navModel.title,i=this.router,o=this.viewPortInstructions;for(var a in r&&(e=i.transformTitle(r)),o){var s=o[a].childNavigationInstruction;if(s){var c=s._buildTitle(t);c&&n.push(c)}}return n.length&&(e=n.join(t)+(e?t:"")+e),i.title&&(e+=(e?t:"")+i.transformTitle(i.title)),e},e}(),l=function(t){t.previousInstruction=null,t.plan=null},h=function(){function t(t,e){this.isActive=!1,this.title=null,this.href=null,this.relativeHref=null,this.settings={},this.config=null,this.router=t,this.relativeHref=e}return t.prototype.setTitle=function(t){this.title=t,this.isActive&&this.router.updateTitle()},t}();function d(t,e,n){return void 0===n&&(n=!1),e||"#"===t[0]||(t="#"+t),e&&n&&(t=t.substring(1,t.length)),t}function p(t,e,n,r){if(g.test(t))return t;var i="";return e.length&&"/"!==e[0]&&(i+="/"),(i+=e).length&&"/"===i[i.length-1]||"/"===t[0]||(i+="/"),i.length&&"/"===i[i.length-1]&&"/"===t[0]&&(i=i.substring(0,i.length-1)),d(i+t,n,r)}function f(t){var e=[];if(Array.isArray(t.route))for(var n=0,r=t.route.length;n<r;++n){var i=Object.assign({},t);i.route=t.route[n],e.push(i)}else e.push(Object.assign({},t));return e}var v=/^#?\//,g=/^([a-z][a-z0-9+\-.]*:)?\/\//i,y=function(){function t(){this.instructions=[],this.options={},this.pipelineSteps=[]}return t.prototype.addPipelineStep=function(t,e){if(null==e)throw new Error("Pipeline step cannot be null or undefined.");return this.pipelineSteps.push({name:t,step:e}),this},t.prototype.addAuthorizeStep=function(t){return this.addPipelineStep("authorize",t)},t.prototype.addPreActivateStep=function(t){return this.addPipelineStep("preActivate",t)},t.prototype.addPreRenderStep=function(t){return this.addPipelineStep("preRender",t)},t.prototype.addPostRenderStep=function(t){return this.addPipelineStep("postRender",t)},t.prototype.fallbackRoute=function(t){return this._fallbackRoute=t,this},t.prototype.map=function(t){var e=this;return Array.isArray(t)?(t.forEach((function(t){return e.map(t)})),this):this.mapRoute(t)},t.prototype.useViewPortDefaults=function(t){return this.viewPortDefaults=t,this},t.prototype.mapRoute=function(t){return this.instructions.push((function(e){for(var n,r=f(t),i=0,o=r.length;i<o;++i){var a=r[i];a.settings=a.settings||{},n||(n=e.createNavModel(a)),e.addRoute(a,n)}})),this},t.prototype.mapUnknownRoutes=function(t){return this.unknownRouteConfig=t,this},t.prototype.exportToRouter=function(t){for(var e=this.instructions,n=0,r=e.length;n<r;++n)e[n](t);var i=this,o=i.title,a=i.titleSeparator,s=i.unknownRouteConfig,c=i._fallbackRoute,u=i.viewPortDefaults;o&&(t.title=o),a&&(t.titleSeparator=a),s&&t.handleUnknownRoutes(s),c&&(t.fallbackRoute=c),u&&t.useViewPortDefaults(u),Object.assign(t.options,this.options);var l=this.pipelineSteps,h=l.length;if(h){if(!t.isRoot)throw new Error("Pipeline steps can only be added to the root router");var d=t.pipelineProvider;for(n=0,r=h;n<r;++n){var p=l[n],f=p.name,v=p.step;d.addStep(f,v)}}},t}(),m=function(){function e(t,e){var n=this;this.parent=null,this.options={},this.viewPortDefaults={},this.transformTitle=function(t){return n.parent?n.parent.transformTitle(t):t},this.container=t,this.history=e,this.reset()}return e.prototype.reset=function(){var e=this;this.viewPorts={},this.routes=[],this.baseUrl="",this.isConfigured=!1,this.isNavigating=!1,this.isExplicitNavigation=!1,this.isExplicitNavigationBack=!1,this.isNavigatingFirst=!1,this.isNavigatingNew=!1,this.isNavigatingRefresh=!1,this.isNavigatingForward=!1,this.isNavigatingBack=!1,this.couldDeactivate=!1,this.navigation=[],this.currentInstruction=null,this.viewPortDefaults={},this._fallbackOrder=100,this._recognizer=new a.a,this._childRecognizer=new a.a,this._configuredPromise=new t((function(t){e._resolveConfiguredPromise=t}))},Object.defineProperty(e.prototype,"isRoot",{get:function(){return!this.parent},enumerable:!0,configurable:!0}),e.prototype.registerViewPort=function(t,e){e=e||"default",this.viewPorts[e]=t},e.prototype.ensureConfigured=function(){return this._configuredPromise},e.prototype.configure=function(e){var n=this;this.isConfigured=!0;var r,i=e;return"function"==typeof e&&(i=e(r=new y)),t.resolve(i).then((function(t){t&&t.exportToRouter&&(r=t),r.exportToRouter(n),n.isConfigured=!0,n._resolveConfiguredPromise()}))},e.prototype.navigate=function(t,e){return!this.isConfigured&&this.parent?this.parent.navigate(t,e):(this.isExplicitNavigation=!0,this.history.navigate(function(t,e,n){return v.test(t)?d(t,n):p(t,e,n)}(t,this.baseUrl,this.history._hasPushState),e))},e.prototype.navigateToRoute=function(t,e,n){var r=this.generate(t,e);return this.navigate(r,n)},e.prototype.navigateBack=function(){this.isExplicitNavigationBack=!0,this.history.navigateBack()},e.prototype.createChild=function(t){var n=new e(t||this.container.createChild(),this.history);return n.parent=this,n},e.prototype.generate=function(t,e,n){void 0===e&&(e={}),void 0===n&&(n={});var r="childRoute"in e?this._childRecognizer:this._recognizer;if(!r.hasRoute(t)){if(this.parent)return this.parent.generate(t,e,n);throw new Error("A route with name '"+t+"' could not be found. Check that `name: '"+t+"'` was specified in the route's config.")}var i=p(r.generate(t,e),this.baseUrl,this.history._hasPushState,n.absolute);return n.absolute?""+this.history.getAbsoluteRoot()+i:i},e.prototype.createNavModel=function(t){var e=new h(this,"href"in t?t.href:t.route);return e.title=t.title,e.order=t.nav,e.href=t.href,e.settings=t.settings,e.config=t,e},e.prototype.addRoute=function(t,e){if(Array.isArray(t.route)){f(t).forEach(this.addRoute.bind(this))}else{w(t),"viewPorts"in t||t.navigationStrategy||(t.viewPorts={default:{moduleId:t.moduleId,view:t.view}}),e||(e=this.createNavModel(t)),this.routes.push(t);var n=t.route;"/"===n.charAt(0)&&(n=n.substr(1));var r=!0===t.caseSensitive,i=this._recognizer.add({path:n,handler:t,caseSensitive:r});if(n){var o=t.settings;delete t.settings;var a=JSON.parse(JSON.stringify(t));t.settings=o,a.route=n+"/*childRoute",a.hasChildRouter=!0,this._childRecognizer.add({path:a.route,handler:a,caseSensitive:r}),a.navModel=e,a.settings=t.settings,a.navigationStrategy=t.navigationStrategy}t.navModel=e;var s=this.navigation;if((e.order||0===e.order)&&-1===s.indexOf(e)){if(!e.href&&""!==e.href&&(i.types.dynamics||i.types.stars))throw new Error('Invalid route config for "'+t.route+'" : dynamic routes must specify an "href:" to be included in the navigation model.');"number"!=typeof e.order&&(e.order=++this._fallbackOrder),s.push(e),s.sort((function(t,e){return t.order-e.order}))}}},e.prototype.hasRoute=function(t){return!!(this._recognizer.hasRoute(t)||this.parent&&this.parent.hasRoute(t))},e.prototype.hasOwnRoute=function(t){return this._recognizer.hasRoute(t)},e.prototype.handleUnknownRoutes=function(t){var e=this;if(!t)throw new Error("Invalid unknown route handler");this.catchAllHandler=function(n){return e._createRouteConfig(t,n).then((function(t){return n.config=t,n}))}},e.prototype.updateTitle=function(){var t=this.parent;if(t)return t.updateTitle();var e=this.currentInstruction;e&&e._updateTitle()},e.prototype.refreshNavigation=function(){for(var t=this.navigation,e=0,n=t.length;e<n;e++){var r=t[e];r.config.href?r.href=d(r.config.href,this.history._hasPushState):r.href=p(r.relativeHref,this.baseUrl,this.history._hasPushState)}},e.prototype.useViewPortDefaults=function(t){var e=t;for(var n in e){var r=e[n];this.viewPortDefaults[n]={moduleId:r.moduleId}}},e.prototype._refreshBaseUrl=function(){var t=this.parent;t&&(this.baseUrl=b(t,t.currentInstruction))},e.prototype._createNavigationInstruction=function(e,n){void 0===e&&(e=""),void 0===n&&(n=null);var r=e,i="",o=e.indexOf("?");-1!==o&&(r=e.substr(0,o),i=e.substr(o+1));var a=this._recognizer.recognize(e);a&&a.length||(a=this._childRecognizer.recognize(e));var s,c={fragment:r,queryString:i,config:null,parentInstruction:n,previousInstruction:this.currentInstruction,router:this,options:{compareQueryParams:this.options.compareQueryParams}};if(a&&a.length){var l=a[0],h=new u(Object.assign({},c,{params:l.params,queryParams:l.queryParams||a.queryParams,config:l.config||l.handler}));s="function"==typeof l.handler?_(h,l.handler,l):l.handler&&"function"==typeof l.handler.navigationStrategy?_(h,l.handler.navigationStrategy,l.handler):t.resolve(h)}else if(this.catchAllHandler){h=new u(Object.assign({},c,{params:{path:r},queryParams:a?a.queryParams:{},config:null}));s=_(h,this.catchAllHandler)}else if(this.parent){var d=this._parentCatchAllHandler(this.parent);if(d){var p=this._findParentInstructionFromRouter(d,n);h=new u(Object.assign({},c,{params:{path:r},queryParams:a?a.queryParams:{},router:d,parentInstruction:p,parentCatchHandler:!0,config:null}));s=_(h,d.catchAllHandler)}}return s&&n&&(this.baseUrl=b(this.parent,n)),s||t.reject(new Error("Route not found: "+e))},e.prototype._findParentInstructionFromRouter=function(t,e){return e.router===t?(e.fragment=t.baseUrl,e):e.parentInstruction?this._findParentInstructionFromRouter(t,e.parentInstruction):void 0},e.prototype._parentCatchAllHandler=function(t){return t.catchAllHandler?t:!!t.parent&&this._parentCatchAllHandler(t.parent)},e.prototype._createRouteConfig=function(e,n){var r=this;return t.resolve(e).then((function(t){return"string"==typeof t?{moduleId:t}:"function"==typeof t?t(n):t})).then((function(t){return"string"==typeof t?{moduleId:t}:t})).then((function(t){return t.route=n.params.path,w(t),t.navModel||(t.navModel=r.createNavModel(t)),t}))},e}(),b=function(t,e){return""+(t.baseUrl||"")+(e.getBaseUrl()||"")},w=function(t){if("object"!=typeof t)throw new Error("Invalid Route Config");if("string"!=typeof t.route){var e=t.name||"(no name)";throw new Error('Invalid Route Config for "'+e+'": You must specify a "route:" pattern.')}if(!("redirect"in t||t.moduleId||t.navigationStrategy||t.viewPorts))throw new Error('Invalid Route Config for "'+t.route+'": You must specify a "moduleId:", "redirect:", "navigationStrategy:", or "viewPorts:".')},_=function(e,n,r){return t.resolve(n.call(r,e)).then((function(){return"viewPorts"in e.config||(e.config.viewPorts={default:{moduleId:e.config.moduleId}}),e}))},x=function(e,n){return function(e){return t.resolve({status:n,output:e,completed:"completed"===n})}},E=function(){function t(){this.steps=[]}return t.prototype.addStep=function(t){var e;if("function"==typeof t)e=t;else{if("function"==typeof t.getSteps){for(var n=t.getSteps(),r=0,i=n.length;r<i;r++)this.addStep(n[r]);return this}e=t.run.bind(t)}return this.steps.push(e),this},t.prototype.run=function(t){return function(t,e){var n=-1,r=function(){if(!(++n<e.length))return r.complete();var i=e[n];try{return i(t,r)}catch(t){return r.reject(t)}};return r.complete=x(r,"completed"),r.cancel=x(r,"canceled"),r.reject=x(r,"rejected"),r}(t,this.steps)()},t}();function C(t){return t&&"function"==typeof t.navigate}var S=function(){function t(t,e){void 0===e&&(e={}),this.url=t,this.options=Object.assign({trigger:!0,replace:!0},e),this.shouldContinueProcessing=!1}return t.prototype.setRouter=function(t){this.router=t},t.prototype.navigate=function(t){(this.options.useAppRouter?t:this.router||t).navigate(this.url,this.options)},t}();!function(){function t(t,e,n){void 0===e&&(e={}),void 0===n&&(n={}),this.route=t,this.params=e,this.options=Object.assign({trigger:!0,replace:!0},n),this.shouldContinueProcessing=!1}t.prototype.setRouter=function(t){this.router=t},t.prototype.navigate=function(t){(this.options.useAppRouter?t:this.router||t).navigateToRoute(this.route,this.params,this.options)}}();function k(e,n){var r=e.config;if("redirect"in r)return T(e);var i=e.previousInstruction,o=e.router.viewPortDefaults;if(i)return I(e,i,o,n);var a={},s=r.viewPorts;for(var c in s){var u=s[c];null===u.moduleId&&c in o&&(u=o[c]),a[c]={name:c,strategy:"replace",config:u}}return t.resolve(a)}var A,T=function(e){var n=e.config,r=e.router;return r._createNavigationInstruction(n.redirect).then((function(n){var i={},o=e.params,a=n.params;for(var s in a){var c=a[s];"string"==typeof c&&":"===c[0]?(c=c.slice(1))in o&&(i[s]=o[c]):i[s]=a[s]}var u=r.generate(n.config,i,e.options);for(var s in o)u=u.replace(":"+s,o[s]);var l=e.queryString;return l&&(u+="?"+l),t.resolve(new S(u))}))},I=function(e,n,r,i){var o={},a=e.config,s=O(n,e),c=[],u=n.viewPortInstructions,l=function(n){var l=u[n],h=l.component,d=a.viewPorts,p=n in d?d[n]:l;null===p.moduleId&&n in r&&(p=r[n]);var f=R(e,l,p,s,i),v=o[n]={name:n,config:p,prevComponent:h,prevModuleId:l.moduleId,strategy:f};if("replace"!==f&&l.childRouter){var g=e.getWildcardPath(),y=l.childRouter._createNavigationInstruction(g,e).then((function(e){return v.childNavigationInstruction=e,k(e,"invoke-lifecycle"===v.strategy).then((function(n){return n instanceof S?t.reject(n):(e.plan=n,null)}))}));c.push(y)}};for(var h in u)l(h);return t.all(c).then((function(){return o}))},R=function(t,e,n,r,i){var o=t.config,a=e.component.viewModel;return e.moduleId!==n.moduleId?"replace":"determineActivationStrategy"in a?a.determineActivationStrategy.apply(a,t.lifecycleArgs):o.activationStrategy?o.activationStrategy:r||i?"invoke-lifecycle":"no-change"},O=function(t,e){var n=t.params,r=e.params,i=e.config.hasChildRouter?e.getWildCardName():null;for(var o in r)if(o!==i&&n[o]!==r[o])return!0;for(var o in n)if(o!==i&&n[o]!==r[o])return!0;if(!e.options.compareQueryParams)return!1;var a=t.queryParams,s=e.queryParams;for(var o in s)if(a[o]!==s[o])return!0;for(var o in a)if(a[o]!==s[o])return!0;return!1},N=function(){function t(){}return t.prototype.run=function(t,e){return k(t).then((function(n){return n instanceof S?e.cancel(n):(t.plan=n,e())})).catch(e.cancel)},t}(),L=function(e,n){var r=j(n).map((function(t){return B(e,t.navigationInstruction,t.viewPortPlan)}));return t.all(r)},j=function(t,e){void 0===e&&(e=[]);var n=t.plan;for(var r in n){var i=n[r],o=i.childNavigationInstruction;if("replace"===i.strategy)e.push({viewPortPlan:i,navigationInstruction:t}),o&&j(o,e);else{var a=t.addViewPortInstruction({name:r,strategy:i.strategy,moduleId:i.prevModuleId,component:i.prevComponent});o&&(a.childNavigationInstruction=o,j(o,e))}}return e},B=function(e,n,r){var i=r.config,o=i?i.moduleId:null;return M(e,n,i).then((function(i){var a=n.addViewPortInstruction({name:r.name,strategy:r.strategy,moduleId:o,component:i}),s=i.childRouter;if(s){var c=n.getWildcardPath();return s._createNavigationInstruction(c,n).then((function(n){return r.childNavigationInstruction=n,k(n).then((function(r){return r instanceof S?t.reject(r):(n.plan=r,a.childNavigationInstruction=n,L(e,n))}))}))}}))},M=function(e,n,r){var i=n.router,o=n.lifecycleArgs;return t.resolve().then((function(){return e.loadRoute(i,r,n)})).then((function(t){var e=t.viewModel,n=t.childContainer;if(t.router=i,t.config=r,"configureRouter"in e){var a=n.getChildRouter();return t.childRouter=a,a.configure((function(t){return e.configureRouter(t,a,o[0],o[1],o[2])})).then((function(){return t}))}return t}))},D=function(){function t(){}return t.prototype.loadRoute=function(t,e,n){throw new Error('Route loaders must implement "loadRoute(router, config, navigationInstruction)".')},t}(),P=function(){function t(t){this.routeLoader=t}return t.inject=function(){return[D]},t.prototype.run=function(t,e){return L(this.routeLoader,t).then(e,e.cancel)},t}(),F=function(){function t(){}return t.prototype.run=function(t,e){return t._commitChanges(!0).then((function(){return t._updateTitle(),e()}))},t}();!function(t){t.NoChange="no-change",t.InvokeLifecycle="invoke-lifecycle",t.Replace="replace"}(A||(A={}));var V,q,G,U="invoke-lifecycle",H="replace",z=function(t,e,n,r){var i=t.plan,o=$(i,e),a=o.length;function s(t){return r||J(t)?c():n.cancel(t)}function c(){if(a--)try{var r=o[a][e](t);return Y(r,s,n.cancel)}catch(t){return n.cancel(t)}return t.router.couldDeactivate=!0,n()}return c()},$=function(t,e,n){for(var r in void 0===n&&(n=[]),t){var i=t[r],o=i.prevComponent;if((i.strategy===U||i.strategy===H)&&o){var a=o.viewModel;e in a&&n.push(a)}i.strategy===H&&o?W(o,e,n):i.childNavigationInstruction&&$(i.childNavigationInstruction.plan,e,n)}return n},W=function(t,e,n){var r=t.childRouter;if(r&&r.currentInstruction){var i=r.currentInstruction.viewPortInstructions;for(var o in i){var a=i[o].component,s=a.viewModel;e in s&&n.push(s),W(a,e,n)}}},Q=function(t,e,n,r){var i=K(t,e),o=i.length,a=-1;function s(){var t;if(++a<o)try{var c=i[a],u=(t=c.viewModel)[e].apply(t,c.lifecycleArgs);return Y(u,(function(t){return function(t,e){return r||J(t,e)?s():n.cancel(t)}(t,c.router)}),n.cancel)}catch(t){return n.cancel(t)}return n()}return s()},K=function(t,e,n,r){void 0===n&&(n=[]);var i=t.plan;return Object.keys(i).forEach((function(o){var a=i[o],s=t.viewPortInstructions[o],c=s.component,u=c.viewModel;(a.strategy===U||a.strategy===H)&&e in u&&n.push({viewModel:u,lifecycleArgs:s.lifecycleArgs,router:r});var l=a.childNavigationInstruction;l&&K(l,e,n,c.childRouter||r)})),n},J=function(t,e){return!(t instanceof Error)&&(C(t)?("function"==typeof t.setRouter&&t.setRouter(e),!!t.shouldContinueProcessing):void 0===t||t)},X=function(){function t(t){this._subscribed=!0,this._subscription=t(this),this._subscribed||this.unsubscribe()}return Object.defineProperty(t.prototype,"subscribed",{get:function(){return this._subscribed},enumerable:!0,configurable:!0}),t.prototype.unsubscribe=function(){this._subscribed&&this._subscription&&this._subscription.unsubscribe(),this._subscribed=!1},t}(),Y=function(e,n,r){if(e&&"function"==typeof e.then)return t.resolve(e).then(n).catch(r);if(e&&"function"==typeof e.subscribe){var i=e;return new X((function(t){return i.subscribe({next:function(){t.subscribed&&(t.unsubscribe(),n(e))},error:function(e){t.subscribed&&(t.unsubscribe(),r(e))},complete:function(){t.subscribed&&(t.unsubscribe(),n(e))}})}))}try{return n(e)}catch(t){return r(t)}},Z=function(){function t(){}return t.prototype.run=function(t,e){return z(t,"canDeactivate",e)},t}(),tt=function(){function t(){}return t.prototype.run=function(t,e){return Q(t,"canActivate",e)},t}(),et=function(){function t(){}return t.prototype.run=function(t,e){return z(t,"deactivate",e,!0)},t}(),nt=function(){function t(){}return t.prototype.run=function(t,e){return Q(t,"activate",e,!0)},t}(),rt=function(){function t(t,e,n){this.steps=[],this.container=t,this.slotName=e,this.slotAlias=n}return t.prototype.getSteps=function(){var t=this;return this.steps.map((function(e){return t.container.get(e)}))},t}(),it=function(){function t(t){this.container=t,this.steps=[N,Z,P,ot(t,"authorize"),tt,ot(t,"preActivate","modelbind"),et,nt,ot(t,"preRender","precommit"),F,ot(t,"postRender","postcomplete")]}return t.inject=function(){return[i.a]},t.prototype.createPipeline=function(t){var e=this;void 0===t&&(t=!0);var n=new E;return this.steps.forEach((function(r){(t||r!==Z)&&n.addStep(e.container.get(r))})),n},t.prototype._findStep=function(t){return this.steps.find((function(e){return e.slotName===t||e.slotAlias===t}))},t.prototype.addStep=function(t,e){var n=this._findStep(t);if(!n)throw new Error("Invalid pipeline slot name: "+t+".");var r=n.steps;r.includes(e)||r.push(e)},t.prototype.removeStep=function(t,e){var n=this._findStep(t);if(n){var r=n.steps;r.splice(r.indexOf(e),1)}},t.prototype._clearSteps=function(t){void 0===t&&(t="");var e=this._findStep(t);e&&(e.steps=[])},t.prototype.reset=function(){this._clearSteps("authorize"),this._clearSteps("preActivate"),this._clearSteps("preRender"),this._clearSteps("postRender")},t}(),ot=function(t,e,n){return new rt(t,e,n)},at=Object(r.getLogger)("app-router"),st=function(e){function n(t,n,r,i){var o=e.call(this,t,n)||this;return o.pipelineProvider=r,o.events=i,o}return function(t,e){function n(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(n,e),n.inject=function(){return[i.a,o.a,it,s.a]},n.prototype.reset=function(){e.prototype.reset.call(this),this.maxInstructionCount=10,this._queue?this._queue.length=0:this._queue=[]},n.prototype.loadUrl=function(t){var e=this;return this._createNavigationInstruction(t).then((function(t){return e._queueInstruction(t)})).catch((function(t){at.error(t),lt(e)}))},n.prototype.registerViewPort=function(n,r){var i=this,o=n;if(e.prototype.registerViewPort.call(this,o,r),this.isActive)this._dequeueInstruction();else{var a=this._findViewModel(o);if("configureRouter"in a){if(!this.isConfigured){var s=this._resolveConfiguredPromise;return this._resolveConfiguredPromise=function(){},this.configure((function(e){return t.resolve(a.configureRouter(e,i)).then((function(){return e}))})).then((function(){i.activate(),s()}))}}else this.activate()}return t.resolve()},n.prototype.activate=function(t){this.isActive||(this.isActive=!0,this.options=Object.assign({routeHandler:this.loadUrl.bind(this)},this.options,t),this.history.activate(this.options),this._dequeueInstruction())},n.prototype.deactivate=function(){this.isActive=!1,this.history.deactivate()},n.prototype._queueInstruction=function(e){var n=this;return new t((function(t){e.resolve=t,n._queue.unshift(e),n._dequeueInstruction()}))},n.prototype._dequeueInstruction=function(e){var n=this;return void 0===e&&(e=0),t.resolve().then((function(){if(!n.isNavigating||e){var t=n._queue.shift();if(n._queue.length=0,t){n.isNavigating=!0;var r=n.history.getState("NavigationTracker"),i=n.currentNavigationTracker;r||i?r?i?i<r?n.isNavigatingForward=!0:i>r&&(n.isNavigatingBack=!0):n.isNavigatingRefresh=!0:n.isNavigatingNew=!0:(n.isNavigatingFirst=!0,n.isNavigatingNew=!0),r||(r=Date.now(),n.history.setState("NavigationTracker",r)),n.currentNavigationTracker=r,t.previousInstruction=n.currentInstruction;var o=n.maxInstructionCount;if(e){if(e===o-1)return at.error(e+1+" navigation instructions have been attempted without success. Restoring last known good location."),lt(n),n._dequeueInstruction(e+1);if(e>o)throw new Error("Maximum navigation attempts exceeded. Giving up.")}else n.events.publish("router:navigation:processing",{instruction:t});return n.pipelineProvider.createPipeline(!n.couldDeactivate).run(t).then((function(r){return ct(t,r,e,n)})).catch((function(t){return{output:t instanceof Error?t:new Error(t)}})).then((function(r){return ut(t,r,!!e,n)}))}}}))},n.prototype._findViewModel=function(t){if(this.container.viewModel)return this.container.viewModel;if(t.container)for(var e=t.container;e;){if(e.viewModel)return this.container.viewModel=e.viewModel,e.viewModel;e=e.parent}},n}(m),ct=function(e,n,r,i){n&&"completed"in n&&"output"in n||((n=n||{}).output=new Error("Expected router pipeline to return a navigation result, but got ["+JSON.stringify(n)+"] instead."));var o=null,a=null;return C(n.output)?a=n.output.navigate(i):(o=n,n.completed||(n.output instanceof Error&&at.error(n.output.toString()),lt(i))),t.resolve(a).then((function(t){return i._dequeueInstruction(r+1)})).then((function(t){return o||t||n}))},ut=function(t,e,n,r){t.resolve(e);var i=r.events,o={instruction:t,result:e};if(n)i.publish("router:navigation:child:complete",o);else{r.isNavigating=!1,r.isExplicitNavigation=!1,r.isExplicitNavigationBack=!1,r.isNavigatingFirst=!1,r.isNavigatingNew=!1,r.isNavigatingRefresh=!1,r.isNavigatingForward=!1,r.isNavigatingBack=!1,r.couldDeactivate=!1;var a=void 0;if(e.output instanceof Error)a="router:navigation:error";else if(e.completed){var s=t.queryString?"?"+t.queryString:"";r.history.previousLocation=t.fragment+s,a="router:navigation:success"}else a="router:navigation:canceled";i.publish(a,o),i.publish("router:navigation:complete",o)}return e},lt=function(t){var e=t.history.previousLocation;e?t.navigate(e,{trigger:!1,replace:!0}):t.fallbackRoute?t.navigate(t.fallbackRoute,{trigger:!0,replace:!0}):at.error("Router navigation failed, and no previous location or fallbackRoute could be restored.")};!function(t){t.Completed="completed",t.Canceled="canceled",t.Rejected="rejected",t.Running="running"}(V||(V={})),function(t){t.Processing="router:navigation:processing",t.Error="router:navigation:error",t.Canceled="router:navigation:canceled",t.Complete="router:navigation:complete",t.Success="router:navigation:success",t.ChildComplete="router:navigation:child:complete"}(q||(q={})),function(t){t.Authorize="authorize",t.PreActivate="preActivate",t.PreRender="preRender",t.PostRender="postRender"}(G||(G={}))}).call(this,n(7))},14:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(0),i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function o(t){return function(){var e=setTimeout(r,0),n=setInterval(r,50);function r(){clearTimeout(e),clearInterval(n),t()}}}var a=function(){function t(){var t,e,n,i,a,s=this;this.flushing=!1,this.longStacks=!1,this.microTaskQueue=[],this.microTaskQueueCapacity=1024,this.taskQueue=[],r.c.mutationObserver?this.requestFlushMicroTaskQueue=(t=function(){return s.flushMicroTaskQueue()},e=r.b.createMutationObserver(t),n="a",i=r.b.createTextNode("a"),(a=Object.create(null)).a="b",a.b="a",e.observe(i,{characterData:!0}),function(){i.data=n=a[n]}):this.requestFlushMicroTaskQueue=o((function(){return s.flushMicroTaskQueue()})),this.requestFlushTaskQueue=o((function(){return s.flushTaskQueue()}))}return t.prototype._flushQueue=function(t,e){var n=0,r=void 0;try{for(this.flushing=!0;n<t.length;)if(r=t[n],this.longStacks&&(this.stack="string"==typeof r.stack?r.stack:void 0),r.call(),++n>e){for(var o=0,a=t.length-n;o<a;o++)t[o]=t[o+n];t.length-=n,n=0}}catch(t){!function(t,e,n){n&&e.stack&&"object"===(void 0===t?"undefined":i(t))&&null!==t&&(t.stack=s(t.stack)+e.stack),"onError"in e?e.onError(t):setTimeout((function(){throw t}),0)}(t,r,this.longStacks)}finally{this.flushing=!1}},t.prototype.queueMicroTask=function(t){this.microTaskQueue.length<1&&this.requestFlushMicroTaskQueue(),this.longStacks&&(t.stack=this.prepareQueueStack("\nEnqueued in MicroTaskQueue by:\n")),this.microTaskQueue.push(t)},t.prototype.queueTask=function(t){this.taskQueue.length<1&&this.requestFlushTaskQueue(),this.longStacks&&(t.stack=this.prepareQueueStack("\nEnqueued in TaskQueue by:\n")),this.taskQueue.push(t)},t.prototype.flushTaskQueue=function(){var t=this.taskQueue;this.taskQueue=[],this._flushQueue(t,Number.MAX_VALUE)},t.prototype.flushMicroTaskQueue=function(){var t=this.microTaskQueue;this._flushQueue(t,this.microTaskQueueCapacity),t.length=0},t.prototype.prepareQueueStack=function(t){var e=t+function(t){return t.replace(/^[\s\S]*?\bqueue(Micro)?Task\b[^\n]*\n/,"")}(function(){var t=new Error;if(t.stack)return t.stack;try{throw t}catch(t){return t.stack}}());return"string"==typeof this.stack&&(e=s(e)+this.stack),e},t}();function s(t){var e=t.lastIndexOf("flushMicroTaskQueue");return e<0&&(e=t.lastIndexOf("flushTaskQueue"))<0?t:(e=t.lastIndexOf("\n",e))<0?t:t.substr(0,e)}},15:function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var c,u=[],l=!1,h=-1;function d(){l&&c&&(l=!1,c.length?u=c.concat(u):h=-1,u.length&&p())}function p(){if(!l){var t=s(d);l=!0;for(var e=u.length;e;){for(c=u,u=[];++h<e;)c&&c[h].run();h=-1,e=u.length}c=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function v(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new f(t,e)),1!==u.length||l||s(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},16:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));class r{constructor(t,e,n,r){this.totalChangesAssets=0,this.totalChangesEquities=0,this.bchgList=[],this.id=t,this.parentJrnl=e,this.date=n,this.intraDateSorter=r}compareToInJrnl(t){return this.date==t.date?this.intraDateSorter>t.intraDateSorter?1:-1:this.date>t.date?1:-1}sortBchgList(){this.bchgList.sort((t,e)=>t.compareToInTran(e))}refresh(){this.totalChangesAssets=0,this.totalChangesEquities=0;let t=0;for(let e of this.bchgList)if(e.intraTranIndex=t++,e.targetAcct)switch(e.targetAcct.parentFaeSide.id){case"Assets":this.totalChangesAssets+=e.amt;break;case"Equities":this.totalChangesEquities+=e.amt;break;default:throw new Error(`acct.parentFaeSide.id has invalid value: "${e.targetAcct.parentFaeSide.id}"`)}}register(){this.parentJrnl.tranList.push(this);for(let t of this.bchgList)t.registerToAcct(),t.targetAcct.refresh()}unregister(){for(let t of this.bchgList)t.unregisterFromAcct();this.bchgList=[];let t=this.parentJrnl.tranList.findIndex(t=>t.id==this.id);this.parentJrnl.tranList.splice(t,1)}clone(){let t=new r(this.id,this.parentJrnl,this.date,this.intraDateSorter);t.totalChangesAssets=this.totalChangesAssets,t.totalChangesEquities=this.totalChangesEquities;for(let e of this.bchgList){let n=e.clone(t,e.targetAcct);t.bchgList.push(n)}return t}}},17:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return a}));var r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t};function i(e,n){void 0===n&&(n={present:!0,interval:50,timeout:5e3});var i=!1;return n=r({present:!0,interval:50,timeout:5e3},n),t.race([new t((function(t,e){return setTimeout((function(){i=!0,e(new Error(n.present?"Element not found":"Element not removed"))}),n.timeout)})),function r(){var o=e(),a=null!==o&&(!(o instanceof NodeList)&&!o.jquery||o.length>0);return!n.present==!a||i?t.resolve(o):new t((function(t){return setTimeout(t,n.interval)})).then(r)}()])}function o(t,e){return i((function(){return document.querySelector(t)}),e)}function a(t,e){return i((function(){return document.querySelectorAll(t)}),e)}}).call(this,n(7))},18:function(t,e,n){"use strict";function r(t){throw new Error("History must implement "+t+"().")}n.d(e,"a",(function(){return i}));var i=function(){function t(){}return t.prototype.activate=function(t){r("activate")},t.prototype.deactivate=function(){r("deactivate")},t.prototype.getAbsoluteRoot=function(){r("getAbsoluteRoot")},t.prototype.navigate=function(t,e){r("navigate")},t.prototype.navigateBack=function(){r("navigateBack")},t.prototype.setTitle=function(t){r("setTitle")},t.prototype.setState=function(t,e){r("setState")},t.prototype.getState=function(t){r("getState")},t.prototype.getHistoryIndex=function(){r("getHistoryIndex")},t.prototype.go=function(t){r("go")},t}()},19:function(t,e,n){(function(e,n,r,i){var o;o=function(){var t,o,a;return function t(e,n,r){function i(a,s){if(!n[a]){if(!e[a]){var c="function"==typeof _dereq_&&_dereq_;if(!s&&c)return c(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[a]={exports:{}};e[a][0].call(l.exports,(function(t){var n=e[a][1][t];return i(n||t)}),l,l.exports,t,e,n,r)}return n[a].exports}for(var o="function"==typeof _dereq_&&_dereq_,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,e,n){"use strict";e.exports=function(t){var e=t._SomePromiseArray;function n(t){var n=new e(t),r=n.promise();return n.setHowMany(1),n.setUnwrap(),n.init(),r}t.any=function(t){return n(t)},t.prototype.any=function(){return n(this)}}},{}],2:[function(t,n,r){"use strict";var i;try{throw new Error}catch(t){i=t}var o=t("./schedule"),a=t("./queue");function s(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new a(16),this._normalQueue=new a(16),this._haveDrainedQueues=!1;var t=this;this.drainQueues=function(){t._drainQueues()},this._schedule=o}function c(t){for(;t.length()>0;)u(t)}function u(t){var e=t.shift();if("function"!=typeof e)e._settlePromises();else{var n=t.shift(),r=t.shift();e.call(n,r)}}s.prototype.setScheduler=function(t){var e=this._schedule;return this._schedule=t,this._customScheduler=!0,e},s.prototype.hasCustomScheduler=function(){return this._customScheduler},s.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},s.prototype.fatalError=function(t,n){n?(e.stderr.write("Fatal "+(t instanceof Error?t.stack:t)+"\n"),e.exit(2)):this.throwLater(t)},s.prototype.throwLater=function(t,e){if(1===arguments.length&&(e=t,t=function(){throw e}),"undefined"!=typeof setTimeout)setTimeout((function(){t(e)}),0);else try{this._schedule((function(){t(e)}))}catch(t){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},s.prototype.invokeLater=function(t,e,n){this._lateQueue.push(t,e,n),this._queueTick()},s.prototype.invoke=function(t,e,n){this._normalQueue.push(t,e,n),this._queueTick()},s.prototype.settlePromises=function(t){this._normalQueue._pushOne(t),this._queueTick()},s.prototype._drainQueues=function(){c(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,c(this._lateQueue)},s.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},s.prototype._reset=function(){this._isTickUsed=!1},n.exports=s,n.exports.firstLineError=i},{"./queue":26,"./schedule":29}],3:[function(t,e,n){"use strict";e.exports=function(t,e,n,r){var i=!1,o=function(t,e){this._reject(e)},a=function(t,e){e.promiseRejectionQueued=!0,e.bindingPromise._then(o,o,null,this,t)},s=function(t,e){0==(50397184&this._bitField)&&this._resolveCallback(e.target)},c=function(t,e){e.promiseRejectionQueued||this._reject(t)};t.prototype.bind=function(o){i||(i=!0,t.prototype._propagateFrom=r.propagateFromFunction(),t.prototype._boundValue=r.boundValueFunction());var u=n(o),l=new t(e);l._propagateFrom(this,1);var h=this._target();if(l._setBoundTo(u),u instanceof t){var d={promiseRejectionQueued:!1,promise:l,target:h,bindingPromise:u};h._then(e,a,void 0,l,d),u._then(s,c,void 0,l,d),l._setOnCancel(u)}else l._resolveCallback(h);return l},t.prototype._setBoundTo=function(t){void 0!==t?(this._bitField=2097152|this._bitField,this._boundTo=t):this._bitField=-2097153&this._bitField},t.prototype._isBound=function(){return 2097152==(2097152&this._bitField)},t.bind=function(e,n){return t.resolve(n).bind(e)}}},{}],4:[function(t,e,r){"use strict";var i;void 0!==n&&(i=n);var o=t("./promise")();o.noConflict=function(){try{n===o&&(n=i)}catch(t){}return o},e.exports=o},{"./promise":22}],5:[function(t,e,n){"use strict";var r=Object.create;if(r){var i=r(null),o=r(null);i[" size"]=o[" size"]=0}e.exports=function(e){var n=t("./util"),r=n.canEvaluate;function i(t){return function(t,r){var i;if(null!=t&&(i=t[r]),"function"!=typeof i){var o="Object "+n.classString(t)+" has no method '"+n.toString(r)+"'";throw new e.TypeError(o)}return i}(t,this.pop()).apply(t,this)}function o(t){return t[this]}function a(t){var e=+this;return e<0&&(e=Math.max(0,e+t.length)),t[e]}n.isIdentifier,e.prototype.call=function(t){var e=[].slice.call(arguments,1);return e.push(t),this._then(i,void 0,void 0,e,void 0)},e.prototype.get=function(t){var e;if("number"==typeof t)e=a;else if(r){var n=(void 0)(t);e=null!==n?n:o}else e=o;return this._then(e,void 0,void 0,t,void 0)}}},{"./util":36}],6:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){var o=t("./util"),a=o.tryCatch,s=o.errorObj,c=e._async;e.prototype.break=e.prototype.cancel=function(){if(!i.cancellation())return this._warn("cancellation is disabled");for(var t=this,e=t;t._isCancellable();){if(!t._cancelBy(e)){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}var n=t._cancellationParent;if(null==n||!n._isCancellable()){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}t._isFollowing()&&t._followee().cancel(),t._setWillBeCancelled(),e=t,t=n}},e.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},e.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},e.prototype._cancelBy=function(t){return t===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},e.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},e.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),c.invoke(this._cancelPromises,this,void 0))},e.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},e.prototype._unsetOnCancel=function(){this._onCancelField=void 0},e.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},e.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},e.prototype._doInvokeOnCancel=function(t,e){if(o.isArray(t))for(var n=0;n<t.length;++n)this._doInvokeOnCancel(t[n],e);else if(void 0!==t)if("function"==typeof t){if(!e){var r=a(t).call(this._boundValue());r===s&&(this._attachExtraTrace(r.e),c.throwLater(r.e))}}else t._resultCancelled(this)},e.prototype._invokeOnCancel=function(){var t=this._onCancel();this._unsetOnCancel(),c.invoke(this._doInvokeOnCancel,this,t)},e.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},e.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(t,e,n){"use strict";e.exports=function(e){var n=t("./util"),r=t("./es5").keys,i=n.tryCatch,o=n.errorObj;return function(t,a,s){return function(c){var u=s._boundValue();t:for(var l=0;l<t.length;++l){var h=t[l];if(h===Error||null!=h&&h.prototype instanceof Error){if(c instanceof h)return i(a).call(u,c)}else if("function"==typeof h){var d=i(h).call(u,c);if(d===o)return d;if(d)return i(a).call(u,c)}else if(n.isObject(c)){for(var p=r(h),f=0;f<p.length;++f){var v=p[f];if(h[v]!=c[v])continue t}return i(a).call(u,c)}}return e}}}},{"./es5":13,"./util":36}],8:[function(t,e,n){"use strict";e.exports=function(t){var e=!1,n=[];function r(){this._trace=new r.CapturedTrace(i())}function i(){var t=n.length-1;if(t>=0)return n[t]}return t.prototype._promiseCreated=function(){},t.prototype._pushContext=function(){},t.prototype._popContext=function(){return null},t._peekContext=t.prototype._peekContext=function(){},r.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,n.push(this._trace))},r.prototype._popContext=function(){if(void 0!==this._trace){var t=n.pop(),e=t._promiseCreated;return t._promiseCreated=null,e}return null},r.CapturedTrace=null,r.create=function(){if(e)return new r},r.deactivateLongStackTraces=function(){},r.activateLongStackTraces=function(){var n=t.prototype._pushContext,o=t.prototype._popContext,a=t._peekContext,s=t.prototype._peekContext,c=t.prototype._promiseCreated;r.deactivateLongStackTraces=function(){t.prototype._pushContext=n,t.prototype._popContext=o,t._peekContext=a,t.prototype._peekContext=s,t.prototype._promiseCreated=c,e=!1},e=!0,t.prototype._pushContext=r.prototype._pushContext,t.prototype._popContext=r.prototype._popContext,t._peekContext=t.prototype._peekContext=i,t.prototype._promiseCreated=function(){var t=this._peekContext();t&&null==t._promiseCreated&&(t._promiseCreated=this)}},r}},{}],9:[function(t,n,r){"use strict";n.exports=function(n,r,i,o){var a,s,c,u,l=n._async,h=t("./errors").Warning,d=t("./util"),p=t("./es5"),f=d.canAttachTrace,v=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,g=/\((?:timers\.js):\d+:\d+\)/,y=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,m=null,b=null,w=!1,_=!(0==d.env("BLUEBIRD_DEBUG")),x=!(0==d.env("BLUEBIRD_WARNINGS")||!_&&!d.env("BLUEBIRD_WARNINGS")),E=!(0==d.env("BLUEBIRD_LONG_STACK_TRACES")||!_&&!d.env("BLUEBIRD_LONG_STACK_TRACES")),C=0!=d.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(x||!!d.env("BLUEBIRD_W_FORGOTTEN_RETURN"));!function(){var t=[];function e(){for(var e=0;e<t.length;++e)t[e]._notifyUnhandledRejection();r()}function r(){t.length=0}u=function(n){t.push(n),setTimeout(e,1)},p.defineProperty(n,"_unhandledRejectionCheck",{value:e}),p.defineProperty(n,"_unhandledRejectionClear",{value:r})}(),n.prototype.suppressUnhandledRejections=function(){var t=this._target();t._bitField=-1048577&t._bitField|524288},n.prototype._ensurePossibleRejectionHandled=function(){0==(524288&this._bitField)&&(this._setRejectionIsUnhandled(),u(this))},n.prototype._notifyUnhandledRejectionIsHandled=function(){Q("rejectionHandled",a,void 0,this)},n.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},n.prototype._returnedNonUndefined=function(){return 0!=(268435456&this._bitField)},n.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var t=this._settledValue();this._setUnhandledRejectionIsNotified(),Q("unhandledRejection",s,t,this)}},n.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},n.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},n.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},n.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},n.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-1048577&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},n.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},n.prototype._warn=function(t,e,n){return H(t,e,n||this)},n.onPossiblyUnhandledRejection=function(t){var e=n._getContext();s=d.contextBind(e,t)},n.onUnhandledRejectionHandled=function(t){var e=n._getContext();a=d.contextBind(e,t)};var S=function(){};n.longStackTraces=function(){if(l.haveItemsQueued()&&!nt.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!nt.longStackTraces&&J()){var t=n.prototype._captureStackTrace,e=n.prototype._attachExtraTrace,i=n.prototype._dereferenceTrace;nt.longStackTraces=!0,S=function(){if(l.haveItemsQueued()&&!nt.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");n.prototype._captureStackTrace=t,n.prototype._attachExtraTrace=e,n.prototype._dereferenceTrace=i,r.deactivateLongStackTraces(),nt.longStackTraces=!1},n.prototype._captureStackTrace=q,n.prototype._attachExtraTrace=G,n.prototype._dereferenceTrace=U,r.activateLongStackTraces()}},n.hasLongStackTraces=function(){return nt.longStackTraces&&J()};var k={unhandledrejection:{before:function(){var t=d.global.onunhandledrejection;return d.global.onunhandledrejection=null,t},after:function(t){d.global.onunhandledrejection=t}},rejectionhandled:{before:function(){var t=d.global.onrejectionhandled;return d.global.onrejectionhandled=null,t},after:function(t){d.global.onrejectionhandled=t}}},A=function(){var t=function(t,e){if(!t)return!d.global.dispatchEvent(e);var n;try{return n=t.before(),!d.global.dispatchEvent(e)}finally{t.after(n)}};try{if("function"==typeof CustomEvent){var e=new CustomEvent("CustomEvent");return d.global.dispatchEvent(e),function(e,n){e=e.toLowerCase();var r=new CustomEvent(e,{detail:n,cancelable:!0});return p.defineProperty(r,"promise",{value:n.promise}),p.defineProperty(r,"reason",{value:n.reason}),t(k[e],r)}}return"function"==typeof Event?(e=new Event("CustomEvent"),d.global.dispatchEvent(e),function(e,n){e=e.toLowerCase();var r=new Event(e,{cancelable:!0});return r.detail=n,p.defineProperty(r,"promise",{value:n.promise}),p.defineProperty(r,"reason",{value:n.reason}),t(k[e],r)}):((e=document.createEvent("CustomEvent")).initCustomEvent("testingtheevent",!1,!0,{}),d.global.dispatchEvent(e),function(e,n){e=e.toLowerCase();var r=document.createEvent("CustomEvent");return r.initCustomEvent(e,!1,!0,n),t(k[e],r)})}catch(t){}return function(){return!1}}(),T=d.isNode?function(){return e.emit.apply(e,arguments)}:d.global?function(t){var e="on"+t.toLowerCase(),n=d.global[e];return!!n&&(n.apply(d.global,[].slice.call(arguments,1)),!0)}:function(){return!1};function I(t,e){return{promise:e}}var R={promiseCreated:I,promiseFulfilled:I,promiseRejected:I,promiseResolved:I,promiseCancelled:I,promiseChained:function(t,e,n){return{promise:e,child:n}},warning:function(t,e){return{warning:e}},unhandledRejection:function(t,e,n){return{reason:e,promise:n}},rejectionHandled:I},O=function(t){var e=!1;try{e=T.apply(null,arguments)}catch(t){l.throwLater(t),e=!0}var n=!1;try{n=A(t,R[t].apply(null,arguments))}catch(t){l.throwLater(t),n=!0}return n||e};function N(){return!1}function L(t,e,n){var r=this;try{t(e,n,(function(t){if("function"!=typeof t)throw new TypeError("onCancel must be a function, got: "+d.toString(t));r._attachCancellationCallback(t)}))}catch(t){return t}}function j(t){if(!this._isCancellable())return this;var e=this._onCancel();void 0!==e?d.isArray(e)?e.push(t):this._setOnCancel([e,t]):this._setOnCancel(t)}function B(){return this._onCancelField}function M(t){this._onCancelField=t}function D(){this._cancellationParent=void 0,this._onCancelField=void 0}function P(t,e){if(0!=(1&e)){this._cancellationParent=t;var n=t._branchesRemainingToCancel;void 0===n&&(n=0),t._branchesRemainingToCancel=n+1}0!=(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)}n.config=function(t){if("longStackTraces"in(t=Object(t))&&(t.longStackTraces?n.longStackTraces():!t.longStackTraces&&n.hasLongStackTraces()&&S()),"warnings"in t){var e=t.warnings;nt.warnings=!!e,C=nt.warnings,d.isObject(e)&&"wForgottenReturn"in e&&(C=!!e.wForgottenReturn)}if("cancellation"in t&&t.cancellation&&!nt.cancellation){if(l.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");n.prototype._clearCancellationData=D,n.prototype._propagateFrom=P,n.prototype._onCancel=B,n.prototype._setOnCancel=M,n.prototype._attachCancellationCallback=j,n.prototype._execute=L,F=P,nt.cancellation=!0}if("monitoring"in t&&(t.monitoring&&!nt.monitoring?(nt.monitoring=!0,n.prototype._fireEvent=O):!t.monitoring&&nt.monitoring&&(nt.monitoring=!1,n.prototype._fireEvent=N)),"asyncHooks"in t&&d.nodeSupportsAsyncResource){var r=nt.asyncHooks,a=!!t.asyncHooks;r!==a&&(nt.asyncHooks=a,a?i():o())}return n},n.prototype._fireEvent=N,n.prototype._execute=function(t,e,n){try{t(e,n)}catch(t){return t}},n.prototype._onCancel=function(){},n.prototype._setOnCancel=function(t){},n.prototype._attachCancellationCallback=function(t){},n.prototype._captureStackTrace=function(){},n.prototype._attachExtraTrace=function(){},n.prototype._dereferenceTrace=function(){},n.prototype._clearCancellationData=function(){},n.prototype._propagateFrom=function(t,e){};var F=function(t,e){0!=(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)};function V(){var t=this._boundTo;return void 0!==t&&t instanceof n?t.isFulfilled()?t.value():void 0:t}function q(){this._trace=new tt(this._peekContext())}function G(t,e){if(f(t)){var n=this._trace;if(void 0!==n&&e&&(n=n._parent),void 0!==n)n.attachExtraTrace(t);else if(!t.__stackCleaned__){var r=$(t);d.notEnumerableProp(t,"stack",r.message+"\n"+r.stack.join("\n")),d.notEnumerableProp(t,"__stackCleaned__",!0)}}}function U(){this._trace=void 0}function H(t,e,r){if(nt.warnings){var i,o=new h(t);if(e)r._attachExtraTrace(o);else if(nt.longStackTraces&&(i=n._peekContext()))i.attachExtraTrace(o);else{var a=$(o);o.stack=a.message+"\n"+a.stack.join("\n")}O("warning",o)||W(o,"",!0)}}function z(t){for(var e=[],n=0;n<t.length;++n){var r=t[n],i="    (No stack trace)"===r||m.test(r),o=i&&X(r);i&&!o&&(w&&" "!==r.charAt(0)&&(r="    "+r),e.push(r))}return e}function $(t){var e=t.stack,n=t.toString();return e="string"==typeof e&&e.length>0?function(t){for(var e=t.stack.replace(/\s+$/g,"").split("\n"),n=0;n<e.length;++n){var r=e[n];if("    (No stack trace)"===r||m.test(r))break}return n>0&&"SyntaxError"!=t.name&&(e=e.slice(n)),e}(t):["    (No stack trace)"],{message:n,stack:"SyntaxError"==t.name?e:z(e)}}function W(t,e,n){if("undefined"!=typeof console){var r;if(d.isObject(t)){var i=t.stack;r=e+b(i,t)}else r=e+String(t);"function"==typeof c?c(r,n):"function"!=typeof console.log&&"object"!=typeof console.log||console.log(r)}}function Q(t,e,n,r){var i=!1;try{"function"==typeof e&&(i=!0,"rejectionHandled"===t?e(r):e(n,r))}catch(t){l.throwLater(t)}"unhandledRejection"===t?O(t,n,r)||i||W(n,"Unhandled rejection "):O(t,r)}function K(t){var e;if("function"==typeof t)e="[function "+(t.name||"anonymous")+"]";else{if(e=t&&"function"==typeof t.toString?t.toString():d.toString(t),/\[object [a-zA-Z0-9$_]+\]/.test(e))try{e=JSON.stringify(t)}catch(t){}0===e.length&&(e="(empty array)")}return"(<"+function(t){return t.length<41?t:t.substr(0,38)+"..."}(e)+">, no stack trace)"}function J(){return"function"==typeof et}var X=function(){return!1},Y=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;function Z(t){var e=t.match(Y);if(e)return{fileName:e[1],line:parseInt(e[2],10)}}function tt(t){this._parent=t,this._promisesCreated=0;var e=this._length=1+(void 0===t?0:t._length);et(this,tt),e>32&&this.uncycle()}d.inherits(tt,Error),r.CapturedTrace=tt,tt.prototype.uncycle=function(){var t=this._length;if(!(t<2)){for(var e=[],n={},r=0,i=this;void 0!==i;++r)e.push(i),i=i._parent;for(r=(t=this._length=r)-1;r>=0;--r){var o=e[r].stack;void 0===n[o]&&(n[o]=r)}for(r=0;r<t;++r){var a=n[e[r].stack];if(void 0!==a&&a!==r){a>0&&(e[a-1]._parent=void 0,e[a-1]._length=1),e[r]._parent=void 0,e[r]._length=1;var s=r>0?e[r-1]:this;a<t-1?(s._parent=e[a+1],s._parent.uncycle(),s._length=s._parent._length+1):(s._parent=void 0,s._length=1);for(var c=s._length+1,u=r-2;u>=0;--u)e[u]._length=c,c++;return}}}},tt.prototype.attachExtraTrace=function(t){if(!t.__stackCleaned__){this.uncycle();for(var e=$(t),n=e.message,r=[e.stack],i=this;void 0!==i;)r.push(z(i.stack.split("\n"))),i=i._parent;!function(t){for(var e=t[0],n=1;n<t.length;++n){for(var r=t[n],i=e.length-1,o=e[i],a=-1,s=r.length-1;s>=0;--s)if(r[s]===o){a=s;break}for(s=a;s>=0;--s){var c=r[s];if(e[i]!==c)break;e.pop(),i--}e=r}}(r),function(t){for(var e=0;e<t.length;++e)(0===t[e].length||e+1<t.length&&t[e][0]===t[e+1][0])&&(t.splice(e,1),e--)}(r),d.notEnumerableProp(t,"stack",function(t,e){for(var n=0;n<e.length-1;++n)e[n].push("From previous event:"),e[n]=e[n].join("\n");return n<e.length&&(e[n]=e[n].join("\n")),t+"\n"+e.join("\n")}(n,r)),d.notEnumerableProp(t,"__stackCleaned__",!0)}};var et=function(){var t=/^\s*at\s*/,e=function(t,e){return"string"==typeof t?t:void 0!==e.name&&void 0!==e.message?e.toString():K(e)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,m=t,b=e;var n=Error.captureStackTrace;return X=function(t){return v.test(t)},function(t,e){Error.stackTraceLimit+=6,n(t,e),Error.stackTraceLimit-=6}}var r,i=new Error;if("string"==typeof i.stack&&i.stack.split("\n")[0].indexOf("stackDetection@")>=0)return m=/@/,b=e,w=!0,function(t){t.stack=(new Error).stack};try{throw new Error}catch(t){r="stack"in t}return"stack"in i||!r||"number"!=typeof Error.stackTraceLimit?(b=function(t,e){return"string"==typeof t?t:"object"!=typeof e&&"function"!=typeof e||void 0===e.name||void 0===e.message?K(e):e.toString()},null):(m=t,b=e,function(t){Error.stackTraceLimit+=6;try{throw new Error}catch(e){t.stack=e.stack}Error.stackTraceLimit-=6})}();"undefined"!=typeof console&&void 0!==console.warn&&(c=function(t){console.warn(t)},d.isNode&&e.stderr.isTTY?c=function(t,e){var n=e?"[33m":"[31m";console.warn(n+t+"[0m\n")}:d.isNode||"string"!=typeof(new Error).stack||(c=function(t,e){console.warn("%c"+t,e?"color: darkorange":"color: red")}));var nt={warnings:x,longStackTraces:!1,cancellation:!1,monitoring:!1,asyncHooks:!1};return E&&n.longStackTraces(),{asyncHooks:function(){return nt.asyncHooks},longStackTraces:function(){return nt.longStackTraces},warnings:function(){return nt.warnings},cancellation:function(){return nt.cancellation},monitoring:function(){return nt.monitoring},propagateFromFunction:function(){return F},boundValueFunction:function(){return V},checkForgottenReturns:function(t,e,n,r,i){if(void 0===t&&null!==e&&C){if(void 0!==i&&i._returnedNonUndefined())return;if(0==(65535&r._bitField))return;n&&(n+=" ");var o="",a="";if(e._trace){for(var s=e._trace.stack.split("\n"),c=z(s),u=c.length-1;u>=0;--u){var l=c[u];if(!g.test(l)){var h=l.match(y);h&&(o="at "+h[1]+":"+h[2]+":"+h[3]+" ");break}}if(c.length>0){var d=c[0];for(u=0;u<s.length;++u)if(s[u]===d){u>0&&(a="\n"+s[u-1]);break}}}var p="a promise was created in a "+n+"handler "+o+"but was not returned from it, see http://goo.gl/rRqMUw"+a;r._warn(p,!0,e)}},setBounds:function(t,e){if(J()){for(var n,r,i=(t.stack||"").split("\n"),o=(e.stack||"").split("\n"),a=-1,s=-1,c=0;c<i.length;++c)if(u=Z(i[c])){n=u.fileName,a=u.line;break}for(c=0;c<o.length;++c){var u;if(u=Z(o[c])){r=u.fileName,s=u.line;break}}a<0||s<0||!n||!r||n!==r||a>=s||(X=function(t){if(v.test(t))return!0;var e=Z(t);return!!(e&&e.fileName===n&&a<=e.line&&e.line<=s)})}},warn:H,deprecated:function(t,e){var n=t+" is deprecated and will be removed in a future version.";return e&&(n+=" Use "+e+" instead."),H(n)},CapturedTrace:tt,fireDomEvent:A,fireGlobalEvent:T}}},{"./errors":12,"./es5":13,"./util":36}],10:[function(t,e,n){"use strict";e.exports=function(t){function e(){return this.value}function n(){throw this.reason}t.prototype.return=t.prototype.thenReturn=function(n){return n instanceof t&&n.suppressUnhandledRejections(),this._then(e,void 0,void 0,{value:n},void 0)},t.prototype.throw=t.prototype.thenThrow=function(t){return this._then(n,void 0,void 0,{reason:t},void 0)},t.prototype.catchThrow=function(t){if(arguments.length<=1)return this._then(void 0,n,void 0,{reason:t},void 0);var e=arguments[1],r=function(){throw e};return this.caught(t,r)},t.prototype.catchReturn=function(n){if(arguments.length<=1)return n instanceof t&&n.suppressUnhandledRejections(),this._then(void 0,e,void 0,{value:n},void 0);var r=arguments[1];r instanceof t&&r.suppressUnhandledRejections();var i=function(){return r};return this.caught(n,i)}}},{}],11:[function(t,e,n){"use strict";e.exports=function(t,e){var n=t.reduce,r=t.all;function i(){return r(this)}t.prototype.each=function(t){return n(this,t,e,0)._then(i,void 0,void 0,this,void 0)},t.prototype.mapSeries=function(t){return n(this,t,e,e)},t.each=function(t,r){return n(t,r,e,0)._then(i,void 0,void 0,t,void 0)},t.mapSeries=function(t,r){return n(t,r,e,e)}}},{}],12:[function(t,e,n){"use strict";var r,i,o=t("./es5"),a=o.freeze,s=t("./util"),c=s.inherits,u=s.notEnumerableProp;function l(t,e){function n(r){if(!(this instanceof n))return new n(r);u(this,"message","string"==typeof r?r:e),u(this,"name",t),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return c(n,Error),n}var h=l("Warning","warning"),d=l("CancellationError","cancellation error"),p=l("TimeoutError","timeout error"),f=l("AggregateError","aggregate error");try{r=TypeError,i=RangeError}catch(t){r=l("TypeError","type error"),i=l("RangeError","range error")}for(var v="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),g=0;g<v.length;++g)"function"==typeof Array.prototype[v[g]]&&(f.prototype[v[g]]=Array.prototype[v[g]]);o.defineProperty(f.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),f.prototype.isOperational=!0;var y=0;function m(t){if(!(this instanceof m))return new m(t);u(this,"name","OperationalError"),u(this,"message",t),this.cause=t,this.isOperational=!0,t instanceof Error?(u(this,"message",t.message),u(this,"stack",t.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}f.prototype.toString=function(){var t=Array(4*y+1).join(" "),e="\n"+t+"AggregateError of:\n";y++,t=Array(4*y+1).join(" ");for(var n=0;n<this.length;++n){for(var r=this[n]===this?"[Circular AggregateError]":this[n]+"",i=r.split("\n"),o=0;o<i.length;++o)i[o]=t+i[o];e+=(r=i.join("\n"))+"\n"}return y--,e},c(m,Error);var b=Error.__BluebirdErrorTypes__;b||(b=a({CancellationError:d,TimeoutError:p,OperationalError:m,RejectionError:m,AggregateError:f}),o.defineProperty(Error,"__BluebirdErrorTypes__",{value:b,writable:!1,enumerable:!1,configurable:!1})),e.exports={Error:Error,TypeError:r,RangeError:i,CancellationError:b.CancellationError,OperationalError:b.OperationalError,TimeoutError:b.TimeoutError,AggregateError:b.AggregateError,Warning:h}},{"./es5":13,"./util":36}],13:[function(t,e,n){var r=function(){"use strict";return void 0===this}();if(r)e.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:r,propertyIsWritable:function(t,e){var n=Object.getOwnPropertyDescriptor(t,e);return!(n&&!n.writable&&!n.set)}};else{var i={}.hasOwnProperty,o={}.toString,a={}.constructor.prototype,s=function(t){var e=[];for(var n in t)i.call(t,n)&&e.push(n);return e};e.exports={isArray:function(t){try{return"[object Array]"===o.call(t)}catch(t){return!1}},keys:s,names:s,defineProperty:function(t,e,n){return t[e]=n.value,t},getDescriptor:function(t,e){return{value:t[e]}},freeze:function(t){return t},getPrototypeOf:function(t){try{return Object(t).constructor.prototype}catch(t){return a}},isES5:r,propertyIsWritable:function(){return!0}}}},{}],14:[function(t,e,n){"use strict";e.exports=function(t,e){var n=t.map;t.prototype.filter=function(t,r){return n(this,t,r,e)},t.filter=function(t,r,i){return n(t,r,i,e)}}},{}],15:[function(t,e,n){"use strict";e.exports=function(e,n,r){var i=t("./util"),o=e.CancellationError,a=i.errorObj,s=t("./catch_filter")(r);function c(t,e,n){this.promise=t,this.type=e,this.handler=n,this.called=!1,this.cancelPromise=null}function u(t){this.finallyHandler=t}function l(t,e){return null!=t.cancelPromise&&(arguments.length>1?t.cancelPromise._reject(e):t.cancelPromise._cancel(),t.cancelPromise=null,!0)}function h(){return p.call(this,this.promise._target()._settledValue())}function d(t){if(!l(this,t))return a.e=t,a}function p(t){var i=this.promise,s=this.handler;if(!this.called){this.called=!0;var c=this.isFinallyHandler()?s.call(i._boundValue()):s.call(i._boundValue(),t);if(c===r)return c;if(void 0!==c){i._setReturnedNonUndefined();var p=n(c,i);if(p instanceof e){if(null!=this.cancelPromise){if(p._isCancelled()){var f=new o("late cancellation observer");return i._attachExtraTrace(f),a.e=f,a}p.isPending()&&p._attachCancellationCallback(new u(this))}return p._then(h,d,void 0,this,void 0)}}}return i.isRejected()?(l(this),a.e=t,a):(l(this),t)}return c.prototype.isFinallyHandler=function(){return 0===this.type},u.prototype._resultCancelled=function(){l(this.finallyHandler)},e.prototype._passThrough=function(t,e,n,r){return"function"!=typeof t?this.then():this._then(n,r,void 0,new c(this,e,t),void 0)},e.prototype.lastly=e.prototype.finally=function(t){return this._passThrough(t,0,p,p)},e.prototype.tap=function(t){return this._passThrough(t,1,p)},e.prototype.tapCatch=function(t){var n=arguments.length;if(1===n)return this._passThrough(t,1,void 0,p);var r,o=new Array(n-1),a=0;for(r=0;r<n-1;++r){var c=arguments[r];if(!i.isObject(c))return e.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+i.classString(c)));o[a++]=c}o.length=a;var u=arguments[r];return this._passThrough(s(o,u,this),1,void 0,p)},c}},{"./catch_filter":7,"./util":36}],16:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,a){var s=t("./errors").TypeError,c=t("./util"),u=c.errorObj,l=c.tryCatch,h=[];function d(t,n,i,o){if(a.cancellation()){var s=new e(r),c=this._finallyPromise=new e(r);this._promise=s.lastly((function(){return c})),s._captureStackTrace(),s._setOnCancel(this)}else(this._promise=new e(r))._captureStackTrace();this._stack=o,this._generatorFunction=t,this._receiver=n,this._generator=void 0,this._yieldHandlers="function"==typeof i?[i].concat(h):h,this._yieldedPromise=null,this._cancellationPhase=!1}c.inherits(d,o),d.prototype._isResolved=function(){return null===this._promise},d.prototype._cleanup=function(){this._promise=this._generator=null,a.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},d.prototype._promiseCancelled=function(){if(!this._isResolved()){var t;if(void 0!==this._generator.return)this._promise._pushContext(),t=l(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var n=new e.CancellationError("generator .return() sentinel");e.coroutine.returnSentinel=n,this._promise._attachExtraTrace(n),this._promise._pushContext(),t=l(this._generator.throw).call(this._generator,n),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(t)}},d.prototype._promiseFulfilled=function(t){this._yieldedPromise=null,this._promise._pushContext();var e=l(this._generator.next).call(this._generator,t);this._promise._popContext(),this._continue(e)},d.prototype._promiseRejected=function(t){this._yieldedPromise=null,this._promise._attachExtraTrace(t),this._promise._pushContext();var e=l(this._generator.throw).call(this._generator,t);this._promise._popContext(),this._continue(e)},d.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof e){var t=this._yieldedPromise;this._yieldedPromise=null,t.cancel()}},d.prototype.promise=function(){return this._promise},d.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},d.prototype._continue=function(t){var n=this._promise;if(t===u)return this._cleanup(),this._cancellationPhase?n.cancel():n._rejectCallback(t.e,!1);var r=t.value;if(!0===t.done)return this._cleanup(),this._cancellationPhase?n.cancel():n._resolveCallback(r);var o=i(r,this._promise);if(o instanceof e||null!==(o=function(t,n,r){for(var o=0;o<n.length;++o){r._pushContext();var a=l(n[o])(t);if(r._popContext(),a===u){r._pushContext();var s=e.reject(u.e);return r._popContext(),s}var c=i(a,r);if(c instanceof e)return c}return null}(o,this._yieldHandlers,this._promise))){var a=(o=o._target())._bitField;0==(50397184&a)?(this._yieldedPromise=o,o._proxy(this,null)):0!=(33554432&a)?e._async.invoke(this._promiseFulfilled,this,o._value()):0!=(16777216&a)?e._async.invoke(this._promiseRejected,this,o._reason()):this._promiseCancelled()}else this._promiseRejected(new s("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",String(r))+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")))},e.coroutine=function(t,e){if("function"!=typeof t)throw new s("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var n=Object(e).yieldHandler,r=d,i=(new Error).stack;return function(){var e=t.apply(this,arguments),o=new r(void 0,void 0,n,i),a=o.promise();return o._generator=e,o._promiseFulfilled(void 0),a}},e.coroutine.addYieldHandler=function(t){if("function"!=typeof t)throw new s("expecting a function but got "+c.classString(t));h.push(t)},e.spawn=function(t){if(a.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof t)return n("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var r=new d(t,this),i=r.promise();return r._run(e.spawn),i}}},{"./errors":12,"./util":36}],17:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o){var a=t("./util");a.canEvaluate,a.tryCatch,a.errorObj,e.join=function(){var t,e=arguments.length-1;e>0&&"function"==typeof arguments[e]&&(t=arguments[e]);var r=[].slice.call(arguments);t&&r.pop();var i=new n(r).promise();return void 0!==t?i.spread(t):i}}},{"./util":36}],18:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,a){var s=t("./util"),c=s.tryCatch,u=s.errorObj,l=e._async;function h(t,n,r,i){this.constructor$(t),this._promise._captureStackTrace();var a=e._getContext();if(this._callback=s.contextBind(a,n),this._preservedValues=i===o?new Array(this.length()):null,this._limit=r,this._inFlight=0,this._queue=[],l.invoke(this._asyncInit,this,void 0),s.isArray(t))for(var c=0;c<t.length;++c){var u=t[c];u instanceof e&&u.suppressUnhandledRejections()}}function d(t,n,i,o){if("function"!=typeof n)return r("expecting a function but got "+s.classString(n));var a=0;if(void 0!==i){if("object"!=typeof i||null===i)return e.reject(new TypeError("options argument must be an object but it is "+s.classString(i)));if("number"!=typeof i.concurrency)return e.reject(new TypeError("'concurrency' must be a number but it is "+s.classString(i.concurrency)));a=i.concurrency}return new h(t,n,a="number"==typeof a&&isFinite(a)&&a>=1?a:0,o).promise()}s.inherits(h,n),h.prototype._asyncInit=function(){this._init$(void 0,-2)},h.prototype._init=function(){},h.prototype._promiseFulfilled=function(t,n){var r=this._values,o=this.length(),s=this._preservedValues,l=this._limit;if(n<0){if(r[n=-1*n-1]=t,l>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(l>=1&&this._inFlight>=l)return r[n]=t,this._queue.push(n),!1;null!==s&&(s[n]=t);var h=this._promise,d=this._callback,p=h._boundValue();h._pushContext();var f=c(d).call(p,t,n,o),v=h._popContext();if(a.checkForgottenReturns(f,v,null!==s?"Promise.filter":"Promise.map",h),f===u)return this._reject(f.e),!0;var g=i(f,this._promise);if(g instanceof e){var y=(g=g._target())._bitField;if(0==(50397184&y))return l>=1&&this._inFlight++,r[n]=g,g._proxy(this,-1*(n+1)),!1;if(0==(33554432&y))return 0!=(16777216&y)?(this._reject(g._reason()),!0):(this._cancel(),!0);f=g._value()}r[n]=f}return++this._totalResolved>=o&&(null!==s?this._filter(r,s):this._resolve(r),!0)},h.prototype._drainQueue=function(){for(var t=this._queue,e=this._limit,n=this._values;t.length>0&&this._inFlight<e;){if(this._isResolved())return;var r=t.pop();this._promiseFulfilled(n[r],r)}},h.prototype._filter=function(t,e){for(var n=e.length,r=new Array(n),i=0,o=0;o<n;++o)t[o]&&(r[i++]=e[o]);r.length=i,this._resolve(r)},h.prototype.preservedValues=function(){return this._preservedValues},e.prototype.map=function(t,e){return d(this,t,e,null)},e.map=function(t,e,n,r){return d(t,e,n,r)}}},{"./util":36}],19:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o){var a=t("./util"),s=a.tryCatch;e.method=function(t){if("function"!=typeof t)throw new e.TypeError("expecting a function but got "+a.classString(t));return function(){var r=new e(n);r._captureStackTrace(),r._pushContext();var i=s(t).apply(this,arguments),a=r._popContext();return o.checkForgottenReturns(i,a,"Promise.method",r),r._resolveFromSyncValue(i),r}},e.attempt=e.try=function(t){if("function"!=typeof t)return i("expecting a function but got "+a.classString(t));var r,c=new e(n);if(c._captureStackTrace(),c._pushContext(),arguments.length>1){o.deprecated("calling Promise.try with more than 1 argument");var u=arguments[1],l=arguments[2];r=a.isArray(u)?s(t).apply(l,u):s(t).call(l,u)}else r=s(t)();var h=c._popContext();return o.checkForgottenReturns(r,h,"Promise.try",c),c._resolveFromSyncValue(r),c},e.prototype._resolveFromSyncValue=function(t){t===a.errorObj?this._rejectCallback(t.e,!1):this._resolveCallback(t,!0)}}},{"./util":36}],20:[function(t,e,n){"use strict";var r=t("./util"),i=r.maybeWrapAsError,o=t("./errors").OperationalError,a=t("./es5"),s=/^(?:name|message|stack|cause)$/;function c(t){var e;if(function(t){return t instanceof Error&&a.getPrototypeOf(t)===Error.prototype}(t)){(e=new o(t)).name=t.name,e.message=t.message,e.stack=t.stack;for(var n=a.keys(t),i=0;i<n.length;++i){var c=n[i];s.test(c)||(e[c]=t[c])}return e}return r.markAsOriginatingFromRejection(t),t}e.exports=function(t,e){return function(n,r){if(null!==t){if(n){var o=c(i(n));t._attachExtraTrace(o),t._reject(o)}else if(e){var a=[].slice.call(arguments,1);t._fulfill(a)}else t._fulfill(r);t=null}}}},{"./errors":12,"./es5":13,"./util":36}],21:[function(t,e,n){"use strict";e.exports=function(e){var n=t("./util"),r=e._async,i=n.tryCatch,o=n.errorObj;function a(t,e){if(!n.isArray(t))return s.call(this,t,e);var a=i(e).apply(this._boundValue(),[null].concat(t));a===o&&r.throwLater(a.e)}function s(t,e){var n=this._boundValue(),a=void 0===t?i(e).call(n,null):i(e).call(n,null,t);a===o&&r.throwLater(a.e)}function c(t,e){if(!t){var n=new Error(t+"");n.cause=t,t=n}var a=i(e).call(this._boundValue(),t);a===o&&r.throwLater(a.e)}e.prototype.asCallback=e.prototype.nodeify=function(t,e){if("function"==typeof t){var n=s;void 0!==e&&Object(e).spread&&(n=a),this._then(n,c,void 0,this,t)}return this}}},{"./util":36}],22:[function(t,n,r){"use strict";n.exports=function(){var r=function(){return new m("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},i=function(){return new L.PromiseInspection(this._target())},o=function(t){return L.reject(new m(t))};function a(){}var s={},c=t("./util");c.setReflectHandler(i);var u=function(){var t=e.domain;return void 0===t?null:t},l=function(){return{domain:u(),async:null}},h=c.isNode&&c.nodeSupportsAsyncResource?t("async_hooks").AsyncResource:null,d=function(){return{domain:u(),async:new h("Bluebird::Promise")}},p=c.isNode?l:function(){return null};c.notEnumerableProp(L,"_getContext",p);var f=t("./es5"),v=t("./async"),g=new v;f.defineProperty(L,"_async",{value:g});var y=t("./errors"),m=L.TypeError=y.TypeError;L.RangeError=y.RangeError;var b=L.CancellationError=y.CancellationError;L.TimeoutError=y.TimeoutError,L.OperationalError=y.OperationalError,L.RejectionError=y.OperationalError,L.AggregateError=y.AggregateError;var w=function(){},_={},x={},E=t("./thenables")(L,w),C=t("./promise_array")(L,w,E,o,a),S=t("./context")(L),k=S.create,A=t("./debuggability")(L,S,(function(){p=d,c.notEnumerableProp(L,"_getContext",d)}),(function(){p=l,c.notEnumerableProp(L,"_getContext",l)})),T=(A.CapturedTrace,t("./finally")(L,E,x)),I=t("./catch_filter")(x),R=t("./nodeback"),O=c.errorObj,N=c.tryCatch;function L(t){t!==w&&function(t,e){if(null==t||t.constructor!==L)throw new m("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!=typeof e)throw new m("expecting a function but got "+c.classString(e))}(this,t),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(t),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function j(t){this.promise._resolveCallback(t)}function B(t){this.promise._rejectCallback(t,!1)}function M(t){var e=new L(w);e._fulfillmentHandler0=t,e._rejectionHandler0=t,e._promise0=t,e._receiver0=t}return L.prototype.toString=function(){return"[object Promise]"},L.prototype.caught=L.prototype.catch=function(t){var e=arguments.length;if(e>1){var n,r=new Array(e-1),i=0;for(n=0;n<e-1;++n){var a=arguments[n];if(!c.isObject(a))return o("Catch statement predicate: expecting an object but got "+c.classString(a));r[i++]=a}if(r.length=i,"function"!=typeof(t=arguments[n]))throw new m("The last argument to .catch() must be a function, got "+c.toString(t));return this.then(void 0,I(r,t,this))}return this.then(void 0,t)},L.prototype.reflect=function(){return this._then(i,i,void 0,this,void 0)},L.prototype.then=function(t,e){if(A.warnings()&&arguments.length>0&&"function"!=typeof t&&"function"!=typeof e){var n=".then() only accepts functions but was passed: "+c.classString(t);arguments.length>1&&(n+=", "+c.classString(e)),this._warn(n)}return this._then(t,e,void 0,void 0,void 0)},L.prototype.done=function(t,e){this._then(t,e,void 0,void 0,void 0)._setIsFinal()},L.prototype.spread=function(t){return"function"!=typeof t?o("expecting a function but got "+c.classString(t)):this.all()._then(t,void 0,void 0,_,void 0)},L.prototype.toJSON=function(){var t={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(t.fulfillmentValue=this.value(),t.isFulfilled=!0):this.isRejected()&&(t.rejectionReason=this.reason(),t.isRejected=!0),t},L.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new C(this).promise()},L.prototype.error=function(t){return this.caught(c.originatesFromRejection,t)},L.getNewLibraryCopy=n.exports,L.is=function(t){return t instanceof L},L.fromNode=L.fromCallback=function(t){var e=new L(w);e._captureStackTrace();var n=arguments.length>1&&!!Object(arguments[1]).multiArgs,r=N(t)(R(e,n));return r===O&&e._rejectCallback(r.e,!0),e._isFateSealed()||e._setAsyncGuaranteed(),e},L.all=function(t){return new C(t).promise()},L.cast=function(t){var e=E(t);return e instanceof L||((e=new L(w))._captureStackTrace(),e._setFulfilled(),e._rejectionHandler0=t),e},L.resolve=L.fulfilled=L.cast,L.reject=L.rejected=function(t){var e=new L(w);return e._captureStackTrace(),e._rejectCallback(t,!0),e},L.setScheduler=function(t){if("function"!=typeof t)throw new m("expecting a function but got "+c.classString(t));return g.setScheduler(t)},L.prototype._then=function(t,e,n,r,i){var o=void 0!==i,a=o?i:new L(w),s=this._target(),u=s._bitField;o||(a._propagateFrom(this,3),a._captureStackTrace(),void 0===r&&0!=(2097152&this._bitField)&&(r=0!=(50397184&u)?this._boundValue():s===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,a));var l=p();if(0!=(50397184&u)){var h,d,f=s._settlePromiseCtx;0!=(33554432&u)?(d=s._rejectionHandler0,h=t):0!=(16777216&u)?(d=s._fulfillmentHandler0,h=e,s._unsetRejectionIsUnhandled()):(f=s._settlePromiseLateCancellationObserver,d=new b("late cancellation observer"),s._attachExtraTrace(d),h=e),g.invoke(f,s,{handler:c.contextBind(l,h),promise:a,receiver:r,value:d})}else s._addCallbacks(t,e,a,r,l);return a},L.prototype._length=function(){return 65535&this._bitField},L.prototype._isFateSealed=function(){return 0!=(117506048&this._bitField)},L.prototype._isFollowing=function(){return 67108864==(67108864&this._bitField)},L.prototype._setLength=function(t){this._bitField=-65536&this._bitField|65535&t},L.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},L.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},L.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},L.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},L.prototype._isFinal=function(){return(4194304&this._bitField)>0},L.prototype._unsetCancelled=function(){this._bitField=-65537&this._bitField},L.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},L.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},L.prototype._setAsyncGuaranteed=function(){if(!g.hasCustomScheduler()){var t=this._bitField;this._bitField=t|(536870912&t)>>2^134217728}},L.prototype._setNoAsyncGuarantee=function(){this._bitField=-134217729&(536870912|this._bitField)},L.prototype._receiverAt=function(t){var e=0===t?this._receiver0:this[4*t-4+3];if(e!==s)return void 0===e&&this._isBound()?this._boundValue():e},L.prototype._promiseAt=function(t){return this[4*t-4+2]},L.prototype._fulfillmentHandlerAt=function(t){return this[4*t-4+0]},L.prototype._rejectionHandlerAt=function(t){return this[4*t-4+1]},L.prototype._boundValue=function(){},L.prototype._migrateCallback0=function(t){t._bitField;var e=t._fulfillmentHandler0,n=t._rejectionHandler0,r=t._promise0,i=t._receiverAt(0);void 0===i&&(i=s),this._addCallbacks(e,n,r,i,null)},L.prototype._migrateCallbackAt=function(t,e){var n=t._fulfillmentHandlerAt(e),r=t._rejectionHandlerAt(e),i=t._promiseAt(e),o=t._receiverAt(e);void 0===o&&(o=s),this._addCallbacks(n,r,i,o,null)},L.prototype._addCallbacks=function(t,e,n,r,i){var o=this._length();if(o>=65531&&(o=0,this._setLength(0)),0===o)this._promise0=n,this._receiver0=r,"function"==typeof t&&(this._fulfillmentHandler0=c.contextBind(i,t)),"function"==typeof e&&(this._rejectionHandler0=c.contextBind(i,e));else{var a=4*o-4;this[a+2]=n,this[a+3]=r,"function"==typeof t&&(this[a+0]=c.contextBind(i,t)),"function"==typeof e&&(this[a+1]=c.contextBind(i,e))}return this._setLength(o+1),o},L.prototype._proxy=function(t,e){this._addCallbacks(void 0,void 0,e,t,null)},L.prototype._resolveCallback=function(t,e){if(0==(117506048&this._bitField)){if(t===this)return this._rejectCallback(r(),!1);var n=E(t,this);if(!(n instanceof L))return this._fulfill(t);e&&this._propagateFrom(n,2);var i=n._target();if(i!==this){var o=i._bitField;if(0==(50397184&o)){var a=this._length();a>0&&i._migrateCallback0(this);for(var s=1;s<a;++s)i._migrateCallbackAt(this,s);this._setFollowing(),this._setLength(0),this._setFollowee(n)}else if(0!=(33554432&o))this._fulfill(i._value());else if(0!=(16777216&o))this._reject(i._reason());else{var c=new b("late cancellation observer");i._attachExtraTrace(c),this._reject(c)}}else this._reject(r())}},L.prototype._rejectCallback=function(t,e,n){var r=c.ensureErrorObject(t),i=r===t;if(!i&&!n&&A.warnings()){var o="a promise was rejected with a non-error: "+c.classString(t);this._warn(o,!0)}this._attachExtraTrace(r,!!e&&i),this._reject(t)},L.prototype._resolveFromExecutor=function(t){if(t!==w){var e=this;this._captureStackTrace(),this._pushContext();var n=!0,r=this._execute(t,(function(t){e._resolveCallback(t)}),(function(t){e._rejectCallback(t,n)}));n=!1,this._popContext(),void 0!==r&&e._rejectCallback(r,!0)}},L.prototype._settlePromiseFromHandler=function(t,e,n,r){var i=r._bitField;if(0==(65536&i)){var o;r._pushContext(),e===_?n&&"number"==typeof n.length?o=N(t).apply(this._boundValue(),n):(o=O).e=new m("cannot .spread() a non-array: "+c.classString(n)):o=N(t).call(e,n);var a=r._popContext();0==(65536&(i=r._bitField))&&(o===x?r._reject(n):o===O?r._rejectCallback(o.e,!1):(A.checkForgottenReturns(o,a,"",r,this),r._resolveCallback(o)))}},L.prototype._target=function(){for(var t=this;t._isFollowing();)t=t._followee();return t},L.prototype._followee=function(){return this._rejectionHandler0},L.prototype._setFollowee=function(t){this._rejectionHandler0=t},L.prototype._settlePromise=function(t,e,n,r){var o=t instanceof L,s=this._bitField,c=0!=(134217728&s);0!=(65536&s)?(o&&t._invokeInternalOnCancel(),n instanceof T&&n.isFinallyHandler()?(n.cancelPromise=t,N(e).call(n,r)===O&&t._reject(O.e)):e===i?t._fulfill(i.call(n)):n instanceof a?n._promiseCancelled(t):o||t instanceof C?t._cancel():n.cancel()):"function"==typeof e?o?(c&&t._setAsyncGuaranteed(),this._settlePromiseFromHandler(e,n,r,t)):e.call(n,r,t):n instanceof a?n._isResolved()||(0!=(33554432&s)?n._promiseFulfilled(r,t):n._promiseRejected(r,t)):o&&(c&&t._setAsyncGuaranteed(),0!=(33554432&s)?t._fulfill(r):t._reject(r))},L.prototype._settlePromiseLateCancellationObserver=function(t){var e=t.handler,n=t.promise,r=t.receiver,i=t.value;"function"==typeof e?n instanceof L?this._settlePromiseFromHandler(e,r,i,n):e.call(r,i,n):n instanceof L&&n._reject(i)},L.prototype._settlePromiseCtx=function(t){this._settlePromise(t.promise,t.handler,t.receiver,t.value)},L.prototype._settlePromise0=function(t,e,n){var r=this._promise0,i=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(r,t,i,e)},L.prototype._clearCallbackDataAtIndex=function(t){var e=4*t-4;this[e+2]=this[e+3]=this[e+0]=this[e+1]=void 0},L.prototype._fulfill=function(t){var e=this._bitField;if(!((117506048&e)>>>16)){if(t===this){var n=r();return this._attachExtraTrace(n),this._reject(n)}this._setFulfilled(),this._rejectionHandler0=t,(65535&e)>0&&(0!=(134217728&e)?this._settlePromises():g.settlePromises(this),this._dereferenceTrace())}},L.prototype._reject=function(t){var e=this._bitField;if(!((117506048&e)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=t,this._isFinal())return g.fatalError(t,c.isNode);(65535&e)>0?g.settlePromises(this):this._ensurePossibleRejectionHandled()}},L.prototype._fulfillPromises=function(t,e){for(var n=1;n<t;n++){var r=this._fulfillmentHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,e)}},L.prototype._rejectPromises=function(t,e){for(var n=1;n<t;n++){var r=this._rejectionHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,e)}},L.prototype._settlePromises=function(){var t=this._bitField,e=65535&t;if(e>0){if(0!=(16842752&t)){var n=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,n,t),this._rejectPromises(e,n)}else{var r=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,r,t),this._fulfillPromises(e,r)}this._setLength(0)}this._clearCancellationData()},L.prototype._settledValue=function(){var t=this._bitField;return 0!=(33554432&t)?this._rejectionHandler0:0!=(16777216&t)?this._fulfillmentHandler0:void 0},"undefined"!=typeof Symbol&&Symbol.toStringTag&&f.defineProperty(L.prototype,Symbol.toStringTag,{get:function(){return"Object"}}),L.defer=L.pending=function(){return A.deprecated("Promise.defer","new Promise"),{promise:new L(w),resolve:j,reject:B}},c.notEnumerableProp(L,"_makeSelfResolutionError",r),t("./method")(L,w,E,o,A),t("./bind")(L,w,E,A),t("./cancel")(L,C,o,A),t("./direct_resolve")(L),t("./synchronous_inspection")(L),t("./join")(L,C,E,w,g),L.Promise=L,L.version="3.7.2",t("./call_get.js")(L),t("./generators.js")(L,o,w,E,a,A),t("./map.js")(L,C,o,E,w,A),t("./nodeify.js")(L),t("./promisify.js")(L,w),t("./props.js")(L,C,E,o),t("./race.js")(L,w,E,o),t("./reduce.js")(L,C,o,E,w,A),t("./settle.js")(L,C,A),t("./some.js")(L,C,o),t("./timers.js")(L,w,A),t("./using.js")(L,o,E,k,w,A),t("./any.js")(L),t("./each.js")(L,w),t("./filter.js")(L,w),c.toFastProperties(L),c.toFastProperties(L.prototype),M({a:1}),M({b:2}),M({c:3}),M(1),M((function(){})),M(void 0),M(!1),M(new L(w)),A.setBounds(v.firstLineError,c.lastLineError),L}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36,async_hooks:void 0}],23:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o){var a=t("./util");function s(t){var r=this._promise=new e(n);t instanceof e&&(r._propagateFrom(t,3),t.suppressUnhandledRejections()),r._setOnCancel(this),this._values=t,this._length=0,this._totalResolved=0,this._init(void 0,-2)}return a.isArray,a.inherits(s,o),s.prototype.length=function(){return this._length},s.prototype.promise=function(){return this._promise},s.prototype._init=function t(n,o){var s=r(this._values,this._promise);if(s instanceof e){var c=(s=s._target())._bitField;if(this._values=s,0==(50397184&c))return this._promise._setAsyncGuaranteed(),s._then(t,this._reject,void 0,this,o);if(0==(33554432&c))return 0!=(16777216&c)?this._reject(s._reason()):this._cancel();s=s._value()}if(null!==(s=a.asArray(s)))0!==s.length?this._iterate(s):-5===o?this._resolveEmptyArray():this._resolve(function(t){switch(t){case-2:return[];case-3:return{};case-6:return new Map}}(o));else{var u=i("expecting an array or an iterable object but got "+a.classString(s)).reason();this._promise._rejectCallback(u,!1)}},s.prototype._iterate=function(t){var n=this.getActualLength(t.length);this._length=n,this._values=this.shouldCopyValues()?new Array(n):this._values;for(var i=this._promise,o=!1,a=null,s=0;s<n;++s){var c=r(t[s],i);a=c instanceof e?(c=c._target())._bitField:null,o?null!==a&&c.suppressUnhandledRejections():null!==a?0==(50397184&a)?(c._proxy(this,s),this._values[s]=c):o=0!=(33554432&a)?this._promiseFulfilled(c._value(),s):0!=(16777216&a)?this._promiseRejected(c._reason(),s):this._promiseCancelled(s):o=this._promiseFulfilled(c,s)}o||i._setAsyncGuaranteed()},s.prototype._isResolved=function(){return null===this._values},s.prototype._resolve=function(t){this._values=null,this._promise._fulfill(t)},s.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},s.prototype._reject=function(t){this._values=null,this._promise._rejectCallback(t,!1)},s.prototype._promiseFulfilled=function(t,e){return this._values[e]=t,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},s.prototype._promiseCancelled=function(){return this._cancel(),!0},s.prototype._promiseRejected=function(t){return this._totalResolved++,this._reject(t),!0},s.prototype._resultCancelled=function(){if(!this._isResolved()){var t=this._values;if(this._cancel(),t instanceof e)t.cancel();else for(var n=0;n<t.length;++n)t[n]instanceof e&&t[n].cancel()}},s.prototype.shouldCopyValues=function(){return!0},s.prototype.getActualLength=function(t){return t},s}},{"./util":36}],24:[function(t,e,n){"use strict";e.exports=function(e,n){var r={},i=t("./util"),o=t("./nodeback"),a=i.withAppended,s=i.maybeWrapAsError,c=i.canEvaluate,u=t("./errors").TypeError,l={__isPromisified__:!0},h=new RegExp("^(?:"+["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"].join("|")+")$"),d=function(t){return i.isIdentifier(t)&&"_"!==t.charAt(0)&&"constructor"!==t};function p(t){return!h.test(t)}function f(t){try{return!0===t.__isPromisified__}catch(t){return!1}}function v(t,e,n){var r=i.getDataPropertyOrDefault(t,e+n,l);return!!r&&f(r)}function g(t,e,n,r){for(var o=i.inheritedDataKeys(t),a=[],s=0;s<o.length;++s){var c=o[s],l=t[c],h=r===d||d(c);"function"!=typeof l||f(l)||v(t,c,e)||!r(c,l,t,h)||a.push(c,l)}return function(t,e,n){for(var r=0;r<t.length;r+=2){var i=t[r];if(n.test(i))for(var o=i.replace(n,""),a=0;a<t.length;a+=2)if(t[a]===o)throw new u("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",e))}}(a,e,n),a}var y=c?void 0:function(t,c,u,l,h,d){var p=function(){return this}(),f=t;function v(){var i=c;c===r&&(i=this);var u=new e(n);u._captureStackTrace();var l="string"==typeof f&&this!==p?this[f]:t,h=o(u,d);try{l.apply(i,a(arguments,h))}catch(t){u._rejectCallback(s(t),!0,!0)}return u._isFateSealed()||u._setAsyncGuaranteed(),u}return"string"==typeof f&&(t=l),i.notEnumerableProp(v,"__isPromisified__",!0),v};function m(t,e,n,o,a){for(var s=new RegExp(e.replace(/([$])/,"\\$")+"$"),c=g(t,e,s,n),u=0,l=c.length;u<l;u+=2){var h=c[u],d=c[u+1],p=h+e;if(o===y)t[p]=y(h,r,h,d,e,a);else{var f=o(d,(function(){return y(h,r,h,d,e,a)}));i.notEnumerableProp(f,"__isPromisified__",!0),t[p]=f}}return i.toFastProperties(t),t}e.promisify=function(t,e){if("function"!=typeof t)throw new u("expecting a function but got "+i.classString(t));if(f(t))return t;var n=function(t,e,n){return y(t,e,void 0,t,null,n)}(t,void 0===(e=Object(e)).context?r:e.context,!!e.multiArgs);return i.copyDescriptors(t,n,p),n},e.promisifyAll=function(t,e){if("function"!=typeof t&&"object"!=typeof t)throw new u("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");var n=!!(e=Object(e)).multiArgs,r=e.suffix;"string"!=typeof r&&(r="Async");var o=e.filter;"function"!=typeof o&&(o=d);var a=e.promisifier;if("function"!=typeof a&&(a=y),!i.isIdentifier(r))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var s=i.inheritedDataKeys(t),c=0;c<s.length;++c){var l=t[s[c]];"constructor"!==s[c]&&i.isClass(l)&&(m(l.prototype,r,o,a,n),m(l,r,o,a,n))}return m(t,r,o,a,n)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){var o,a=t("./util"),s=a.isObject,c=t("./es5");"function"==typeof Map&&(o=Map);var u=function(){var t=0,e=0;function n(n,r){this[t]=n,this[t+e]=r,t++}return function(r){e=r.size,t=0;var i=new Array(2*r.size);return r.forEach(n,i),i}}();function l(t){var e,n=!1;if(void 0!==o&&t instanceof o)e=u(t),n=!0;else{var r=c.keys(t),i=r.length;e=new Array(2*i);for(var a=0;a<i;++a){var s=r[a];e[a]=t[s],e[a+i]=s}}this.constructor$(e),this._isMap=n,this._init$(void 0,n?-6:-3)}function h(t){var n,o=r(t);return s(o)?(n=o instanceof e?o._then(e.props,void 0,void 0,void 0,void 0):new l(o).promise(),o instanceof e&&n._propagateFrom(o,2),n):i("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}a.inherits(l,n),l.prototype._init=function(){},l.prototype._promiseFulfilled=function(t,e){if(this._values[e]=t,++this._totalResolved>=this._length){var n;if(this._isMap)n=function(t){for(var e=new o,n=t.length/2|0,r=0;r<n;++r){var i=t[n+r],a=t[r];e.set(i,a)}return e}(this._values);else{n={};for(var r=this.length(),i=0,a=this.length();i<a;++i)n[this._values[i+r]]=this._values[i]}return this._resolve(n),!0}return!1},l.prototype.shouldCopyValues=function(){return!1},l.prototype.getActualLength=function(t){return t>>1},e.prototype.props=function(){return h(this)},e.props=function(t){return h(t)}}},{"./es5":13,"./util":36}],26:[function(t,e,n){"use strict";function r(t){this._capacity=t,this._length=0,this._front=0}r.prototype._willBeOverCapacity=function(t){return this._capacity<t},r.prototype._pushOne=function(t){var e=this.length();this._checkCapacity(e+1),this[this._front+e&this._capacity-1]=t,this._length=e+1},r.prototype.push=function(t,e,n){var r=this.length()+3;if(this._willBeOverCapacity(r))return this._pushOne(t),this._pushOne(e),void this._pushOne(n);var i=this._front+r-3;this._checkCapacity(r);var o=this._capacity-1;this[i+0&o]=t,this[i+1&o]=e,this[i+2&o]=n,this._length=r},r.prototype.shift=function(){var t=this._front,e=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length--,e},r.prototype.length=function(){return this._length},r.prototype._checkCapacity=function(t){this._capacity<t&&this._resizeTo(this._capacity<<1)},r.prototype._resizeTo=function(t){var e=this._capacity;this._capacity=t,function(t,e,n,r,i){for(var o=0;o<i;++o)n[o+r]=t[o+e],t[o+e]=void 0}(this,0,this,e,this._front+this._length&e-1)},e.exports=r},{}],27:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){var o=t("./util");function a(t,s){var c,u=r(t);if(u instanceof e)return(c=u).then((function(t){return a(t,c)}));if(null===(t=o.asArray(t)))return i("expecting an array or an iterable object but got "+o.classString(t));var l=new e(n);void 0!==s&&l._propagateFrom(s,3);for(var h=l._fulfill,d=l._reject,p=0,f=t.length;p<f;++p){var v=t[p];(void 0!==v||p in t)&&e.cast(v)._then(h,d,void 0,l,null)}return l}e.race=function(t){return a(t,void 0)},e.prototype.race=function(){return a(this,void 0)}}},{"./util":36}],28:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,a){var s=t("./util"),c=s.tryCatch;function u(t,n,r,i){this.constructor$(t);var a=e._getContext();this._fn=s.contextBind(a,n),void 0!==r&&(r=e.resolve(r))._attachCancellationCallback(this),this._initialValue=r,this._currentCancellable=null,this._eachValues=i===o?Array(this._length):0===i?null:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function l(t,e){this.isFulfilled()?e._resolve(t):e._reject(t)}function h(t,e,n,i){return"function"!=typeof e?r("expecting a function but got "+s.classString(e)):new u(t,e,n,i).promise()}function d(t){this.accum=t,this.array._gotAccum(t);var n=i(this.value,this.array._promise);return n instanceof e?(this.array._currentCancellable=n,n._then(p,void 0,void 0,this,void 0)):p.call(this,n)}function p(t){var n,r=this.array,i=r._promise,o=c(r._fn);i._pushContext(),(n=void 0!==r._eachValues?o.call(i._boundValue(),t,this.index,this.length):o.call(i._boundValue(),this.accum,t,this.index,this.length))instanceof e&&(r._currentCancellable=n);var s=i._popContext();return a.checkForgottenReturns(n,s,void 0!==r._eachValues?"Promise.each":"Promise.reduce",i),n}s.inherits(u,n),u.prototype._gotAccum=function(t){void 0!==this._eachValues&&null!==this._eachValues&&t!==o&&this._eachValues.push(t)},u.prototype._eachComplete=function(t){return null!==this._eachValues&&this._eachValues.push(t),this._eachValues},u.prototype._init=function(){},u.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},u.prototype.shouldCopyValues=function(){return!1},u.prototype._resolve=function(t){this._promise._resolveCallback(t),this._values=null},u.prototype._resultCancelled=function(t){if(t===this._initialValue)return this._cancel();this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof e&&this._currentCancellable.cancel(),this._initialValue instanceof e&&this._initialValue.cancel())},u.prototype._iterate=function(t){var n,r;this._values=t;var i=t.length;void 0!==this._initialValue?(n=this._initialValue,r=0):(n=e.resolve(t[0]),r=1),this._currentCancellable=n;for(var o=r;o<i;++o){var a=t[o];a instanceof e&&a.suppressUnhandledRejections()}if(!n.isRejected())for(;r<i;++r){var s={accum:null,value:t[r],index:r,length:i,array:this};n=n._then(d,void 0,void 0,s,void 0),0==(127&r)&&n._setNoAsyncGuarantee()}void 0!==this._eachValues&&(n=n._then(this._eachComplete,void 0,void 0,this,void 0)),n._then(l,l,void 0,n,this)},e.prototype.reduce=function(t,e){return h(this,t,e,null)},e.reduce=function(t,e,n,r){return h(t,e,n,r)}}},{"./util":36}],29:[function(t,n,o){"use strict";var a,s,c,u,l,h=t("./util"),d=h.getNativePromise();if(h.isNode&&"undefined"==typeof MutationObserver){var p=r.setImmediate,f=e.nextTick;a=h.isRecentNode?function(t){p.call(r,t)}:function(t){f.call(e,t)}}else if("function"==typeof d&&"function"==typeof d.resolve){var v=d.resolve();a=function(t){v.then(t)}}else a="undefined"!=typeof MutationObserver&&("undefined"==typeof window||!window.navigator||!window.navigator.standalone&&!window.cordova)&&"classList"in document.documentElement?(s=document.createElement("div"),c={attributes:!0},u=!1,l=document.createElement("div"),new MutationObserver((function(){s.classList.toggle("foo"),u=!1})).observe(l,c),function(t){var e=new MutationObserver((function(){e.disconnect(),t()}));e.observe(s,c),u||(u=!0,l.classList.toggle("foo"))}):void 0!==i?function(t){i(t)}:"undefined"!=typeof setTimeout?function(t){setTimeout(t,0)}:function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")};n.exports=a},{"./util":36}],30:[function(t,e,n){"use strict";e.exports=function(e,n,r){var i=e.PromiseInspection;function o(t){this.constructor$(t)}t("./util").inherits(o,n),o.prototype._promiseResolved=function(t,e){return this._values[t]=e,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},o.prototype._promiseFulfilled=function(t,e){var n=new i;return n._bitField=33554432,n._settledValueField=t,this._promiseResolved(e,n)},o.prototype._promiseRejected=function(t,e){var n=new i;return n._bitField=16777216,n._settledValueField=t,this._promiseResolved(e,n)},e.settle=function(t){return r.deprecated(".settle()",".reflect()"),new o(t).promise()},e.allSettled=function(t){return new o(t).promise()},e.prototype.settle=function(){return e.settle(this)}}},{"./util":36}],31:[function(t,e,n){"use strict";e.exports=function(e,n,r){var i=t("./util"),o=t("./errors").RangeError,a=t("./errors").AggregateError,s=i.isArray,c={};function u(t){this.constructor$(t),this._howMany=0,this._unwrap=!1,this._initialized=!1}function l(t,e){if((0|e)!==e||e<0)return r("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var n=new u(t),i=n.promise();return n.setHowMany(e),n.init(),i}i.inherits(u,n),u.prototype._init=function(){if(this._initialized)if(0!==this._howMany){this._init$(void 0,-5);var t=s(this._values);!this._isResolved()&&t&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}else this._resolve([])},u.prototype.init=function(){this._initialized=!0,this._init()},u.prototype.setUnwrap=function(){this._unwrap=!0},u.prototype.howMany=function(){return this._howMany},u.prototype.setHowMany=function(t){this._howMany=t},u.prototype._promiseFulfilled=function(t){return this._addFulfilled(t),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},u.prototype._promiseRejected=function(t){return this._addRejected(t),this._checkOutcome()},u.prototype._promiseCancelled=function(){return this._values instanceof e||null==this._values?this._cancel():(this._addRejected(c),this._checkOutcome())},u.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var t=new a,e=this.length();e<this._values.length;++e)this._values[e]!==c&&t.push(this._values[e]);return t.length>0?this._reject(t):this._cancel(),!0}return!1},u.prototype._fulfilled=function(){return this._totalResolved},u.prototype._rejected=function(){return this._values.length-this.length()},u.prototype._addRejected=function(t){this._values.push(t)},u.prototype._addFulfilled=function(t){this._values[this._totalResolved++]=t},u.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},u.prototype._getRangeError=function(t){var e="Input array must contain at least "+this._howMany+" items but contains only "+t+" items";return new o(e)},u.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},e.some=function(t,e){return l(t,e)},e.prototype.some=function(t){return l(this,t)},e._SomePromiseArray=u}},{"./errors":12,"./util":36}],32:[function(t,e,n){"use strict";e.exports=function(t){function e(t){void 0!==t?(t=t._target(),this._bitField=t._bitField,this._settledValueField=t._isFateSealed()?t._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}e.prototype._settledValue=function(){return this._settledValueField};var n=e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},r=e.prototype.error=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},i=e.prototype.isFulfilled=function(){return 0!=(33554432&this._bitField)},o=e.prototype.isRejected=function(){return 0!=(16777216&this._bitField)},a=e.prototype.isPending=function(){return 0==(50397184&this._bitField)},s=e.prototype.isResolved=function(){return 0!=(50331648&this._bitField)};e.prototype.isCancelled=function(){return 0!=(8454144&this._bitField)},t.prototype.__isCancelled=function(){return 65536==(65536&this._bitField)},t.prototype._isCancelled=function(){return this._target().__isCancelled()},t.prototype.isCancelled=function(){return 0!=(8454144&this._target()._bitField)},t.prototype.isPending=function(){return a.call(this._target())},t.prototype.isRejected=function(){return o.call(this._target())},t.prototype.isFulfilled=function(){return i.call(this._target())},t.prototype.isResolved=function(){return s.call(this._target())},t.prototype.value=function(){return n.call(this._target())},t.prototype.reason=function(){var t=this._target();return t._unsetRejectionIsUnhandled(),r.call(t)},t.prototype._value=function(){return this._settledValue()},t.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},t.PromiseInspection=e}},{}],33:[function(t,e,n){"use strict";e.exports=function(e,n){var r=t("./util"),i=r.errorObj,o=r.isObject,a={}.hasOwnProperty;return function(t,s){if(o(t)){if(t instanceof e)return t;var c=function(t){try{return function(t){return t.then}(t)}catch(t){return i.e=t,i}}(t);if(c===i){s&&s._pushContext();var u=e.reject(c.e);return s&&s._popContext(),u}if("function"==typeof c)return function(t){try{return a.call(t,"_promise0")}catch(t){return!1}}(t)?(u=new e(n),t._then(u._fulfill,u._reject,void 0,u,null),u):function(t,o,a){var s=new e(n),c=s;a&&a._pushContext(),s._captureStackTrace(),a&&a._popContext();var u=r.tryCatch(o).call(t,(function(t){s&&(s._resolveCallback(t),s=null)}),(function(t){s&&(s._rejectCallback(t,!1,!0),s=null)}));return s&&u===i&&(s._rejectCallback(u.e,!0,!0),s=null),c}(t,c,s)}return t}}},{"./util":36}],34:[function(t,e,n){"use strict";e.exports=function(e,n,r){var i=t("./util"),o=e.TimeoutError;function a(t){this.handle=t}a.prototype._resultCancelled=function(){clearTimeout(this.handle)};var s=function(t){return c(+this).thenReturn(t)},c=e.delay=function(t,i){var o,c;return void 0!==i?(o=e.resolve(i)._then(s,null,null,t,void 0),r.cancellation()&&i instanceof e&&o._setOnCancel(i)):(o=new e(n),c=setTimeout((function(){o._fulfill()}),+t),r.cancellation()&&o._setOnCancel(new a(c)),o._captureStackTrace()),o._setAsyncGuaranteed(),o};function u(t){return clearTimeout(this.handle),t}function l(t){throw clearTimeout(this.handle),t}e.prototype.delay=function(t){return c(t,this)},e.prototype.timeout=function(t,e){var n,s;t=+t;var c=new a(setTimeout((function(){n.isPending()&&function(t,e,n){var r;r="string"!=typeof e?e instanceof Error?e:new o("operation timed out"):new o(e),i.markAsOriginatingFromRejection(r),t._attachExtraTrace(r),t._reject(r),null!=n&&n.cancel()}(n,e,s)}),t));return r.cancellation()?(s=this.then(),(n=s._then(u,l,void 0,c,void 0))._setOnCancel(c)):n=this._then(u,l,void 0,c,void 0),n}}},{"./util":36}],35:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,a){var s=t("./util"),c=t("./errors").TypeError,u=t("./util").inherits,l=s.errorObj,h=s.tryCatch,d={};function p(t){setTimeout((function(){throw t}),0)}function f(t,n){var i=0,a=t.length,s=new e(o);return function o(){if(i>=a)return s._fulfill();var c=function(t){var e=r(t);return e!==t&&"function"==typeof t._isDisposable&&"function"==typeof t._getDisposer&&t._isDisposable()&&e._setDisposable(t._getDisposer()),e}(t[i++]);if(c instanceof e&&c._isDisposable()){try{c=r(c._getDisposer().tryDispose(n),t.promise)}catch(t){return p(t)}if(c instanceof e)return c._then(o,p,null,null,null)}o()}(),s}function v(t,e,n){this._data=t,this._promise=e,this._context=n}function g(t,e,n){this.constructor$(t,e,n)}function y(t){return v.isDisposer(t)?(this.resources[this.index]._setDisposable(t),t.promise()):t}function m(t){this.length=t,this.promise=null,this[t-1]=null}v.prototype.data=function(){return this._data},v.prototype.promise=function(){return this._promise},v.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():d},v.prototype.tryDispose=function(t){var e=this.resource(),n=this._context;void 0!==n&&n._pushContext();var r=e!==d?this.doDispose(e,t):null;return void 0!==n&&n._popContext(),this._promise._unsetDisposable(),this._data=null,r},v.isDisposer=function(t){return null!=t&&"function"==typeof t.resource&&"function"==typeof t.tryDispose},u(g,v),g.prototype.doDispose=function(t,e){return this.data().call(t,t,e)},m.prototype._resultCancelled=function(){for(var t=this.length,n=0;n<t;++n){var r=this[n];r instanceof e&&r.cancel()}},e.using=function(){var t=arguments.length;if(t<2)return n("you must pass at least 2 arguments to Promise.using");var i,o=arguments[t-1];if("function"!=typeof o)return n("expecting a function but got "+s.classString(o));var c=!0;2===t&&Array.isArray(arguments[0])?(t=(i=arguments[0]).length,c=!1):(i=arguments,t--);for(var u=new m(t),d=0;d<t;++d){var p=i[d];if(v.isDisposer(p)){var g=p;(p=p.promise())._setDisposable(g)}else{var b=r(p);b instanceof e&&(p=b._then(y,null,null,{resources:u,index:d},void 0))}u[d]=p}var w=new Array(u.length);for(d=0;d<w.length;++d)w[d]=e.resolve(u[d]).reflect();var _=e.all(w).then((function(t){for(var e=0;e<t.length;++e){var n=t[e];if(n.isRejected())return l.e=n.error(),l;if(!n.isFulfilled())return void _.cancel();t[e]=n.value()}x._pushContext(),o=h(o);var r=c?o.apply(void 0,t):o(t),i=x._popContext();return a.checkForgottenReturns(r,i,"Promise.using",x),r})),x=_.lastly((function(){var t=new e.PromiseInspection(_);return f(u,t)}));return u.promise=x,x._setOnCancel(u),x},e.prototype._setDisposable=function(t){this._bitField=131072|this._bitField,this._disposer=t},e.prototype._isDisposable=function(){return(131072&this._bitField)>0},e.prototype._getDisposer=function(){return this._disposer},e.prototype._unsetDisposable=function(){this._bitField=-131073&this._bitField,this._disposer=void 0},e.prototype.disposer=function(t){if("function"==typeof t)return new g(t,this,i());throw new c}}},{"./errors":12,"./util":36}],36:[function(t,i,o){"use strict";var a=t("./es5"),s="undefined"==typeof navigator,c={e:{}},u,l="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==r?r:void 0!==this?this:null;function h(){try{var t=u;return u=null,t.apply(this,arguments)}catch(t){return c.e=t,c}}function d(t){return u=t,h}var p=function(t,e){var n={}.hasOwnProperty;function r(){for(var r in this.constructor=t,this.constructor$=e,e.prototype)n.call(e.prototype,r)&&"$"!==r.charAt(r.length-1)&&(this[r+"$"]=e.prototype[r])}return r.prototype=e.prototype,t.prototype=new r,t.prototype};function f(t){return null==t||!0===t||!1===t||"string"==typeof t||"number"==typeof t}function v(t){return"function"==typeof t||"object"==typeof t&&null!==t}function g(t){return f(t)?new Error(T(t)):t}function y(t,e){var n,r=t.length,i=new Array(r+1);for(n=0;n<r;++n)i[n]=t[n];return i[n]=e,i}function m(t,e,n){if(!a.isES5)return{}.hasOwnProperty.call(t,e)?t[e]:void 0;var r=Object.getOwnPropertyDescriptor(t,e);return null!=r?null==r.get&&null==r.set?r.value:n:void 0}function b(t,e,n){if(f(t))return t;var r={value:n,configurable:!0,enumerable:!1,writable:!0};return a.defineProperty(t,e,r),t}function w(t){throw t}var _=function(){var t=[Array.prototype,Object.prototype,Function.prototype],e=function(e){for(var n=0;n<t.length;++n)if(t[n]===e)return!0;return!1};if(a.isES5){var n=Object.getOwnPropertyNames;return function(t){for(var r=[],i=Object.create(null);null!=t&&!e(t);){var o;try{o=n(t)}catch(t){return r}for(var s=0;s<o.length;++s){var c=o[s];if(!i[c]){i[c]=!0;var u=Object.getOwnPropertyDescriptor(t,c);null!=u&&null==u.get&&null==u.set&&r.push(c)}}t=a.getPrototypeOf(t)}return r}}var r={}.hasOwnProperty;return function(n){if(e(n))return[];var i=[];t:for(var o in n)if(r.call(n,o))i.push(o);else{for(var a=0;a<t.length;++a)if(r.call(t[a],o))continue t;i.push(o)}return i}}(),x=/this\s*\.\s*\S+\s*=/;function E(t){try{if("function"==typeof t){var e=a.names(t.prototype),n=a.isES5&&e.length>1,r=e.length>0&&!(1===e.length&&"constructor"===e[0]),i=x.test(t+"")&&a.names(t).length>0;if(n||r||i)return!0}return!1}catch(t){return!1}}function C(t){function e(){}e.prototype=t;var n=new e;function r(){return typeof n.foo}return r(),r(),t}var S=/^[a-z$_][a-z$_0-9]*$/i;function k(t){return S.test(t)}function A(t,e,n){for(var r=new Array(t),i=0;i<t;++i)r[i]=e+i+n;return r}function T(t){try{return t+""}catch(t){return"[no string representation]"}}function I(t){return t instanceof Error||null!==t&&"object"==typeof t&&"string"==typeof t.message&&"string"==typeof t.name}function R(t){try{b(t,"isOperational",!0)}catch(t){}}function O(t){return null!=t&&(t instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===t.isOperational)}function N(t){return I(t)&&a.propertyIsWritable(t,"stack")}var L="stack"in new Error?function(t){return N(t)?t:new Error(T(t))}:function(t){if(N(t))return t;try{throw new Error(T(t))}catch(t){return t}};function j(t){return{}.toString.call(t)}function B(t,e,n){for(var r=a.names(t),i=0;i<r.length;++i){var o=r[i];if(n(o))try{a.defineProperty(e,o,a.getDescriptor(t,o))}catch(t){}}}var M=function(t){return a.isArray(t)?t:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var D="function"==typeof Array.from?function(t){return Array.from(t)}:function(t){for(var e,n=[],r=t[Symbol.iterator]();!(e=r.next()).done;)n.push(e.value);return n};M=function(t){return a.isArray(t)?t:null!=t&&"function"==typeof t[Symbol.iterator]?D(t):null}}var P=void 0!==e&&"[object process]"===j(e).toLowerCase(),F=void 0!==e&&void 0!==e.env,V;function q(t){return F?e.env[t]:void 0}function G(){if("function"==typeof n)try{if("[object Promise]"===j(new n((function(){}))))return n}catch(t){}}function U(t,e){if(null===t||"function"!=typeof e||e===V)return e;null!==t.domain&&(e=t.domain.bind(e));var n=t.async;if(null!==n){var r=e;e=function(){var t=new Array(2).concat([].slice.call(arguments));return t[0]=r,t[1]=this,n.runInAsyncScope.apply(n,t)}}return e}var H={setReflectHandler:function(t){V=t},isClass:E,isIdentifier:k,inheritedDataKeys:_,getDataPropertyOrDefault:m,thrower:w,isArray:a.isArray,asArray:M,notEnumerableProp:b,isPrimitive:f,isObject:v,isError:I,canEvaluate:s,errorObj:c,tryCatch:d,inherits:p,withAppended:y,maybeWrapAsError:g,toFastProperties:C,filledRange:A,toString:T,canAttachTrace:N,ensureErrorObject:L,originatesFromRejection:O,markAsOriginatingFromRejection:R,classString:j,copyDescriptors:B,isNode:P,hasEnvVariables:F,env:q,global:l,getNativePromise:G,contextBind:U},z;H.isRecentNode=H.isNode&&(e.versions&&e.versions.node?z=e.versions.node.split(".").map(Number):e.version&&(z=e.version.split(".").map(Number)),0===z[0]&&z[1]>10||z[0]>0),H.nodeSupportsAsyncResource=H.isNode&&function(){var e=!1;try{e="function"==typeof t("async_hooks").AsyncResource.prototype.runInAsyncScope}catch(t){e=!1}return e}(),H.isNode&&H.toFastProperties(e);try{throw new Error}catch(t){H.lastLineError=t}i.exports=H},{"./es5":13,async_hooks:void 0}]},{},[4])(4)},t.exports=o(),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)}).call(this,n(15),n(7),n(11),n(20).setImmediate)},2:function(t,e,n){"use strict";n.d(e,"z",(function(){return C})),n.d(e,"x",(function(){return S})),n.d(e,"r",(function(){return A})),n.d(e,"t",(function(){return T})),n.d(e,"s",(function(){return P})),n.d(e,"v",(function(){return $})),n.d(e,"y",(function(){return et})),n.d(e,"w",(function(){return ct})),n.d(e,"a",(function(){return xt})),n.d(e,"n",(function(){return Et})),n.d(e,"i",(function(){return Mt})),n.d(e,"q",(function(){return Ut})),n.d(e,"l",(function(){return Ht})),n.d(e,"u",(function(){return Tn})),n.d(e,"f",(function(){return In})),n.d(e,"g",(function(){return Rn})),n.d(e,"e",(function(){return Fn})),n.d(e,"m",(function(){return Zn})),n.d(e,"k",(function(){return tr})),n.d(e,"c",(function(){return er})),n.d(e,"d",(function(){return rr})),n.d(e,"o",(function(){return or})),n.d(e,"A",(function(){return ar})),n.d(e,"b",(function(){return sr})),n.d(e,"p",(function(){return cr})),n.d(e,"h",(function(){return ur})),n.d(e,"j",(function(){return dr}));var r,i,o,a,s,c,u,l,h,d,p,f,v,g=n(5),y=n(0),m=n(14),b=n(1),w=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function x(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function E(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var C="Binding:target",S="Binding:source",k=Object.create(null);function A(t){if(t in k)return k[t];var e=t.charAt(0).toLowerCase()+t.slice(1).replace(/[_.-](\w|$)/g,(function(t,e){return e.toUpperCase()}));return k[t]=e,e}function T(t,e){return{bindingContext:t,parentOverrideContext:e||null}}function I(t,e,n){var r=e.overrideContext;if(n){for(;n&&r;)n--,r=r.parentOverrideContext;if(n||!r)return;return t in r?r:r.bindingContext}for(;r&&!(t in r)&&!(r.bindingContext&&t in r.bindingContext);)r=r.parentOverrideContext;return r?t in r?r:r.bindingContext:e.bindingContext||e.overrideContext}var R=[],O=[],N=-1;function L(t){if(t===N){N+=5;for(var e=R.length=O.length=N+1,n=t+1;n<e;++n)R[n]="_observer"+n,O[n]="_observerVersion"+n}}function j(t){for(var e=void 0===this._observerSlots?0:this._observerSlots,n=e;n--&&this[R[n]]!==t;);if(-1===n){for(n=0;this[R[n]];)n++;this[R[n]]=t,t.subscribe(S,this),n===e&&(this._observerSlots=n+1)}void 0===this._version&&(this._version=0),this[O[n]]=this._version,L(n)}function B(t,e){var n=this.observerLocator.getObserver(t,e);j.call(this,n)}function M(t){var e=this.observerLocator.getArrayObserver(t);j.call(this,e)}function D(t){for(var e=this._observerSlots;e--;)if(t||this[O[e]]!==this._version){var n=this[R[e]];this[R[e]]=null,n&&n.unsubscribe(S,this)}}function P(){return function(t){t.prototype.observeProperty=B,t.prototype.observeArray=M,t.prototype.unobserve=D,t.prototype.addObserver=j}}L(-1);var F=[],V={},q=0,G=100,U=!1,H=0;function z(t){for(var e=F.length,n=0;n<e;){var r=F[n];if(V[r.__connectQueueId]=!1,r.connect(!0),++n%100==0&&y.d.performance.now()-t>15)break}F.splice(0,n),F.length?y.d.requestAnimationFrame(z):(U=!1,H=0)}function $(t){if(H<G)H++,t.connect(!1);else{var e=t.__connectQueueId;void 0===e&&(e=q,q++,t.__connectQueueId=e),V[e]||(F.push(t),V[e]=!0)}U||(U=!0,y.d.requestAnimationFrame(z))}function W(t,e){return!this.hasSubscriber(t,e)&&(this._context0?this._context1?this._context2?this._contextsRest?(this._contextsRest.push(t),this._callablesRest.push(e),!0):(this._contextsRest=[t],this._callablesRest=[e],!0):(this._context2=t,this._callable2=e,!0):(this._context1=t,this._callable1=e,!0):(this._context0=t,this._callable0=e,!0))}function Q(t,e){if(this._context0===t&&this._callable0===e)return this._context0=null,this._callable0=null,!0;if(this._context1===t&&this._callable1===e)return this._context1=null,this._callable1=null,!0;if(this._context2===t&&this._callable2===e)return this._context2=null,this._callable2=null,!0;var n=this._callablesRest;if(void 0===n||0===n.length)return!1;for(var r=this._contextsRest,i=0;(n[i]!==e||r[i]!==t)&&n.length>i;)i++;return!(i>=n.length)&&(r.splice(i,1),n.splice(i,1),!0)}var K=[],J=[],X=[];function Y(t,e){var n=this._context0,r=this._callable0,i=this._context1,o=this._callable1,a=this._context2,s=this._callable2,c=this._contextsRest?this._contextsRest.length:0,u=void 0,l=void 0,h=void 0,d=void 0;if(c){for(h=X.length;h--&&X[h];);for(h<0?(h=X.length,u=[],l=[],X.push(!0),K.push(u),J.push(l)):(X[h]=!0,u=K[h],l=J[h]),d=c;d--;)u[d]=this._contextsRest[d],l[d]=this._callablesRest[d]}if(n&&(r?r.call(n,t,e):n(t,e)),i&&(o?o.call(i,t,e):i(t,e)),a&&(s?s.call(a,t,e):a(t,e)),c){for(d=0;d<c;d++){var p=l[d],f=u[d];p?p.call(f,t,e):f(t,e),u[d]=null,l[d]=null}X[h]=!1}}function Z(){return!!(this._context0||this._context1||this._context2||this._contextsRest&&this._contextsRest.length)}function tt(t,e){if(this._context0===t&&this._callable0===e||this._context1===t&&this._callable1===e||this._context2===t&&this._callable2===e)return!0;var n=void 0,r=this._contextsRest;if(!r||0===(n=r.length))return!1;for(var i=this._callablesRest;n--;)if(r[n]===t&&i[n]===e)return!0;return!1}function et(){return function(t){t.prototype.addSubscriber=W,t.prototype.removeSubscriber=Q,t.prototype.callSubscribers=Y,t.prototype.hasSubscribers=Z,t.prototype.hasSubscriber=tt}}var nt=P()(r=et()(r=function(){function t(t,e,n,r){this.scope=t,this.expression=e,this.observerLocator=n,this.lookupFunctions=r}return t.prototype.getValue=function(){return this.expression.evaluate(this.scope,this.lookupFunctions)},t.prototype.setValue=function(t){this.expression.assign(this.scope,t)},t.prototype.subscribe=function(t,e){var n=this;if(this.hasSubscribers()||(this.oldValue=this.expression.evaluate(this.scope,this.lookupFunctions),this.expression.connect(this,this.scope)),this.addSubscriber(t,e),1===arguments.length&&t instanceof Function)return{dispose:function(){n.unsubscribe(t,e)}}},t.prototype.unsubscribe=function(t,e){this.removeSubscriber(t,e)&&!this.hasSubscribers()&&(this.unobserve(!0),this.oldValue=void 0)},t.prototype.call=function(){var t=this.expression.evaluate(this.scope,this.lookupFunctions),e=this.oldValue;t!==e&&(this.oldValue=t,this.callSubscribers(t,e)),this._version++,this.expression.connect(this,this.scope),this.unobserve(!1)},t}())||r)||r;function rt(t){return+t}function it(t,e,n){return{index:t,removed:e,addedCount:n}}function ot(){}ot.prototype={calcEditDistances:function(t,e,n,r,i,o){for(var a=o-i+1,s=n-e+1,c=new Array(a),u=void 0,l=void 0,h=0;h<a;++h)c[h]=new Array(s),c[h][0]=h;for(var d=0;d<s;++d)c[0][d]=d;for(var p=1;p<a;++p)for(var f=1;f<s;++f)this.equals(t[e+f-1],r[i+p-1])?c[p][f]=c[p-1][f-1]:(u=c[p-1][f]+1,l=c[p][f-1]+1,c[p][f]=u<l?u:l);return c},spliceOperationsFromEditDistances:function(t){for(var e=t.length-1,n=t[0].length-1,r=t[e][n],i=[];e>0||n>0;)if(0!==e)if(0!==n){var o=t[e-1][n-1],a=t[e-1][n],s=t[e][n-1],c=void 0;(c=a<s?a<o?a:o:s<o?s:o)===o?(o===r?i.push(0):(i.push(1),r=o),e--,n--):c===a?(i.push(3),e--,r=a):(i.push(2),n--,r=s)}else i.push(3),e--;else i.push(2),n--;return i.reverse(),i},calcSplices:function(t,e,n,r,i,o){var a=0,s=0,c=Math.min(n-e,o-i);if(0===e&&0===i&&(a=this.sharedPrefix(t,r,c)),n===t.length&&o===r.length&&(s=this.sharedSuffix(t,r,c-a)),i+=a,o-=s,(n-=s)-(e+=a)==0&&o-i==0)return[];if(e===n){for(var u=it(e,[],0);i<o;)u.removed.push(r[i++]);return[u]}if(i===o)return[it(e,[],n-e)];for(var l=this.spliceOperationsFromEditDistances(this.calcEditDistances(t,e,n,r,i,o)),h=void 0,d=[],p=e,f=i,v=0;v<l.length;++v)switch(l[v]){case 0:h&&(d.push(h),h=void 0),p++,f++;break;case 1:h||(h=it(p,[],0)),h.addedCount++,p++,h.removed.push(r[f]),f++;break;case 2:h||(h=it(p,[],0)),h.addedCount++,p++;break;case 3:h||(h=it(p,[],0)),h.removed.push(r[f]),f++}return h&&d.push(h),d},sharedPrefix:function(t,e,n){for(var r=0;r<n;++r)if(!this.equals(t[r],e[r]))return r;return n},sharedSuffix:function(t,e,n){for(var r=t.length,i=e.length,o=0;o<n&&this.equals(t[--r],e[--i]);)o++;return o},calculateSplices:function(t,e){return this.calcSplices(t,0,t.length,e,0,e.length)},equals:function(t,e){return t===e}};var at=new ot;function st(t,e,n,r,i,o){return at.calcSplices(t,e,n,r,i,o)}function ct(t,e,n,r){for(var i,o,a,s,c=it(e,n,r),u=!1,l=0,h=0;h<t.length;h++){var d=t[h];if(d.index+=l,!u){var p=(i=c.index,o=c.index+c.removed.length,a=d.index,s=d.index+d.addedCount,o<a||s<i?-1:o===a||s===i?0:i<a?o<s?o-a:s-a:s<o?s-i:o-i);if(p>=0){t.splice(h,1),h--,l-=d.addedCount-d.removed.length,c.addedCount+=d.addedCount-p;var f=c.removed.length+d.removed.length-p;if(c.addedCount||f){var v=d.removed;if(c.index<d.index){var g=c.removed.slice(0,d.index-c.index);Array.prototype.push.apply(g,v),v=g}if(c.index+c.removed.length>d.index+d.addedCount){var y=c.removed.slice(d.index+d.addedCount-c.index);Array.prototype.push.apply(v,y)}c.removed=v,d.index<c.index&&(c.index=d.index)}else u=!0}else if(c.index<d.index){u=!0,t.splice(h,0,c),h++;var m=c.addedCount-c.removed.length;d.index+=m,l+=m}}}u||t.push(c)}function ut(t,e){var n=[];return function(t,e){for(var n,r=[],i=0;i<e.length;i++){var o=e[i];switch(o.type){case"splice":ct(r,o.index,o.removed.slice(),o.addedCount);break;case"add":case"update":case"delete":if(+(n=o.name)!=n>>>0)continue;var a=rt(o.name);if(a<0)continue;ct(r,a,[o.oldValue],"delete"===o.type?0:1);break;default:console.error("Unexpected record type: "+JSON.stringify(o))}}return r}(0,e).forEach((function(e){1!==e.addedCount||1!==e.removed.length?n=n.concat(st(t,e.index,e.index+e.addedCount,e.removed,0,e.removed.length)):e.removed[0]!==t[e.index]&&n.push(e)})),n}var lt=et()(i=function(){function t(t,e){this.taskQueue=t,this.queued=!1,this.changeRecords=null,this.oldCollection=null,this.collection=e,this.lengthPropertyName=e instanceof Map||e instanceof Set?"size":"length"}return t.prototype.subscribe=function(t,e){this.addSubscriber(t,e)},t.prototype.unsubscribe=function(t,e){this.removeSubscriber(t,e)},t.prototype.addChangeRecord=function(t){if(this.hasSubscribers()||this.lengthObserver){if("splice"===t.type){var e=t.index,n=t.object.length;e>n?e=n-t.addedCount:e<0&&(e=n+t.removed.length+e-t.addedCount),e<0&&(e=0),t.index=e}null===this.changeRecords?this.changeRecords=[t]:this.changeRecords.push(t),this.queued||(this.queued=!0,this.taskQueue.queueMicroTask(this))}},t.prototype.flushChangeRecords=function(){(this.changeRecords&&this.changeRecords.length||this.oldCollection)&&this.call()},t.prototype.reset=function(t){this.oldCollection=t,this.hasSubscribers()&&!this.queued&&(this.queued=!0,this.taskQueue.queueMicroTask(this))},t.prototype.getLengthObserver=function(){return this.lengthObserver||(this.lengthObserver=new ht(this.collection))},t.prototype.call=function(){var t=this.changeRecords,e=this.oldCollection,n=void 0;this.queued=!1,this.changeRecords=[],this.oldCollection=null,this.hasSubscribers()&&(n=e?this.collection instanceof Map||this.collection instanceof Set?function(t){for(var e,n,r,i=new Array(t.size),o=t.keys(),a=0,s=void 0;(s=o.next())&&!s.done;)i[a]=(e="added",n=t,r=s.value,{type:e,object:n,key:r,oldValue:void 0}),a++;return i}(e):st(this.collection,0,this.collection.length,e,0,e.length):this.collection instanceof Map||this.collection instanceof Set?t:ut(this.collection,t),this.callSubscribers(n)),this.lengthObserver&&this.lengthObserver.call(this.collection[this.lengthPropertyName])},t}())||i,ht=et()(o=function(){function t(t){this.collection=t,this.lengthPropertyName=t instanceof Map||t instanceof Set?"size":"length",this.currentValue=t[this.lengthPropertyName]}return t.prototype.getValue=function(){return this.collection[this.lengthPropertyName]},t.prototype.setValue=function(t){this.collection[this.lengthPropertyName]=t},t.prototype.subscribe=function(t,e){this.addSubscriber(t,e)},t.prototype.unsubscribe=function(t,e){this.removeSubscriber(t,e)},t.prototype.call=function(t){var e=this.currentValue;this.callSubscribers(t,e),this.currentValue=t},t}())||o,dt=Array.prototype,pt=dt.pop,ft=dt.push,vt=dt.reverse,gt=dt.shift,yt=dt.sort,mt=dt.splice,bt=dt.unshift;dt.__au_patched__?g.getLogger("array-observation").warn("Detected 2nd attempt of patching array from Aurelia binding. This is probably caused by dependency mismatch between core modules and a 3rd party plugin. Please see https://github.com/aurelia/cli/pull/906 if you are using webpack."):(Reflect.defineProperty(dt,"__au_patched__",{value:1}),dt.pop=function(){var t=this.length>0,e=pt.apply(this,arguments);return t&&void 0!==this.__array_observer__&&this.__array_observer__.addChangeRecord({type:"delete",object:this,name:this.length,oldValue:e}),e},dt.push=function(){var t=ft.apply(this,arguments);return void 0!==this.__array_observer__&&this.__array_observer__.addChangeRecord({type:"splice",object:this,index:this.length-arguments.length,removed:[],addedCount:arguments.length}),t},dt.reverse=function(){var t=void 0;void 0!==this.__array_observer__&&(this.__array_observer__.flushChangeRecords(),t=this.slice());var e=vt.apply(this,arguments);return void 0!==this.__array_observer__&&this.__array_observer__.reset(t),e},dt.shift=function(){var t=this.length>0,e=gt.apply(this,arguments);return t&&void 0!==this.__array_observer__&&this.__array_observer__.addChangeRecord({type:"delete",object:this,name:0,oldValue:e}),e},dt.sort=function(){var t=void 0;void 0!==this.__array_observer__&&(this.__array_observer__.flushChangeRecords(),t=this.slice());var e=yt.apply(this,arguments);return void 0!==this.__array_observer__&&this.__array_observer__.reset(t),e},dt.splice=function(){var t=mt.apply(this,arguments);return void 0!==this.__array_observer__&&this.__array_observer__.addChangeRecord({type:"splice",object:this,index:+arguments[0],removed:t,addedCount:arguments.length>2?arguments.length-2:0}),t},dt.unshift=function(){var t=bt.apply(this,arguments);return void 0!==this.__array_observer__&&this.__array_observer__.addChangeRecord({type:"splice",object:this,index:0,removed:[],addedCount:arguments.length}),t});var wt=function(t){function e(e,n){return x(this,t.call(this,e,n))}return E(e,t),e.for=function(t,n){return"__array_observer__"in n||Reflect.defineProperty(n,"__array_observer__",{value:e.create(t,n),enumerable:!1,configurable:!1}),n.__array_observer__},e.create=function(t,n){return new e(t,n)},e}(lt),_t=function(){function t(){this.isAssignable=!1}return t.prototype.evaluate=function(t,e,n){throw new Error('Binding expression "'+this+'" cannot be evaluated.')},t.prototype.assign=function(t,e,n){throw new Error('Binding expression "'+this+'" cannot be assigned to.')},t.prototype.toString=function(){return"undefined"==typeof FEATURE_NO_UNPARSER?Gt.unparse(this):Function.prototype.toString.call(this)},t}(),xt=function(t){function e(e,n,r){var i=x(this,t.call(this));return i.expression=e,i.name=n,i.args=r,i}return E(e,t),e.prototype.evaluate=function(t,e){return this.expression.evaluate(t,e)},e.prototype.assign=function(t,e,n){return this.expression.assign(t,e,n)},e.prototype.accept=function(t){return t.visitBindingBehavior(this)},e.prototype.connect=function(t,e){this.expression.connect(t,e)},e.prototype.bind=function(t,e,n){this.expression.expression&&this.expression.bind&&this.expression.bind(t,e,n);var r=n.bindingBehaviors(this.name);if(!r)throw new Error('No BindingBehavior named "'+this.name+'" was found!');var i="behavior-"+this.name;if(t[i])throw new Error('A binding behavior named "'+this.name+'" has already been applied to "'+this.expression+'"');t[i]=r,r.bind.apply(r,[t,e].concat(Vt(e,this.args,t.lookupFunctions)))},e.prototype.unbind=function(t,e){var n="behavior-"+this.name;t[n].unbind(t,e),t[n]=null,this.expression.expression&&this.expression.unbind&&this.expression.unbind(t,e)},e}(_t),Et=function(t){function e(e,n,r){var i=x(this,t.call(this));return i.expression=e,i.name=n,i.args=r,i.allArgs=[e].concat(r),i}return E(e,t),e.prototype.evaluate=function(t,e){var n=e.valueConverters(this.name);if(!n)throw new Error('No ValueConverter named "'+this.name+'" was found!');return"toView"in n?n.toView.apply(n,Vt(t,this.allArgs,e)):this.allArgs[0].evaluate(t,e)},e.prototype.assign=function(t,e,n){var r=n.valueConverters(this.name);if(!r)throw new Error('No ValueConverter named "'+this.name+'" was found!');return"fromView"in r&&(e=r.fromView.apply(r,[e].concat(Vt(t,this.args,n)))),this.allArgs[0].assign(t,e,n)},e.prototype.accept=function(t){return t.visitValueConverter(this)},e.prototype.connect=function(t,e){for(var n=this.allArgs,r=n.length;r--;)n[r].connect(t,e);var i=t.lookupFunctions.valueConverters(this.name);if(!i)throw new Error('No ValueConverter named "'+this.name+'" was found!');var o=i.signals;if(void 0!==o)for(r=o.length;r--;)mr(t,o[r])},e}(_t),Ct=function(t){function e(e,n){var r=x(this,t.call(this));return r.target=e,r.value=n,r.isAssignable=!0,r}return E(e,t),e.prototype.evaluate=function(t,e){return this.target.assign(t,this.value.evaluate(t,e))},e.prototype.accept=function(t){t.visitAssign(this)},e.prototype.connect=function(t,e){},e.prototype.assign=function(t,e){this.value.assign(t,e),this.target.assign(t,e)},e}(_t),St=function(t){function e(e,n,r){var i=x(this,t.call(this));return i.condition=e,i.yes=n,i.no=r,i}return E(e,t),e.prototype.evaluate=function(t,e){return this.condition.evaluate(t,e)?this.yes.evaluate(t,e):this.no.evaluate(t,e)},e.prototype.accept=function(t){return t.visitConditional(this)},e.prototype.connect=function(t,e){this.condition.connect(t,e),this.condition.evaluate(e)?this.yes.connect(t,e):this.no.connect(t,e)},e}(_t),kt=function(t){function e(e){var n=x(this,t.call(this));return n.ancestor=e,n}return E(e,t),e.prototype.evaluate=function(t,e){for(var n=t.overrideContext,r=this.ancestor;r--&&n;)n=n.parentOverrideContext;return r<1&&n?n.bindingContext:void 0},e.prototype.accept=function(t){return t.visitAccessThis(this)},e.prototype.connect=function(t,e){},e}(_t),At=function(t){function e(e,n){var r=x(this,t.call(this));return r.name=e,r.ancestor=n,r.isAssignable=!0,r}return E(e,t),e.prototype.evaluate=function(t,e){return I(this.name,t,this.ancestor)[this.name]},e.prototype.assign=function(t,e){var n=I(this.name,t,this.ancestor);return n?n[this.name]=e:void 0},e.prototype.accept=function(t){return t.visitAccessScope(this)},e.prototype.connect=function(t,e){var n=I(this.name,e,this.ancestor);t.observeProperty(n,this.name)},e}(_t),Tt=function(t){function e(e,n){var r=x(this,t.call(this));return r.object=e,r.name=n,r.isAssignable=!0,r}return E(e,t),e.prototype.evaluate=function(t,e){var n=this.object.evaluate(t,e);return null==n?n:n[this.name]},e.prototype.assign=function(t,e){var n=this.object.evaluate(t);return null==n&&(n={},this.object.assign(t,n)),n[this.name]=e,e},e.prototype.accept=function(t){return t.visitAccessMember(this)},e.prototype.connect=function(t,e){this.object.connect(t,e);var n=this.object.evaluate(e);n&&t.observeProperty(n,this.name)},e}(_t),It=function(t){function e(e,n){var r=x(this,t.call(this));return r.object=e,r.key=n,r.isAssignable=!0,r}return E(e,t),e.prototype.evaluate=function(t,e){return function(t,e){if(Array.isArray(t))return t[parseInt(e,10)];if(t)return t[e];if(null==t)return;return t[e]}(this.object.evaluate(t,e),this.key.evaluate(t,e))},e.prototype.assign=function(t,e){return function(t,e,n){if(Array.isArray(t)){var r=parseInt(e,10);t.length<=r&&(t.length=r+1),t[r]=n}else t[e]=n;return n}(this.object.evaluate(t),this.key.evaluate(t),e)},e.prototype.accept=function(t){return t.visitAccessKeyed(this)},e.prototype.connect=function(t,e){this.object.connect(t,e);var n=this.object.evaluate(e);if(n instanceof Object){this.key.connect(t,e);var r=this.key.evaluate(e);null==r||Array.isArray(n)&&"number"==typeof r||t.observeProperty(n,r)}},e}(_t),Rt=function(t){function e(e,n,r){var i=x(this,t.call(this));return i.name=e,i.args=n,i.ancestor=r,i}return E(e,t),e.prototype.evaluate=function(t,e,n){var r=Vt(t,this.args,e),i=I(this.name,t,this.ancestor),o=qt(i,this.name,n);if(o)return o.apply(i,r)},e.prototype.accept=function(t){return t.visitCallScope(this)},e.prototype.connect=function(t,e){for(var n=this.args,r=n.length;r--;)n[r].connect(t,e)},e}(_t),Ot=function(t){function e(e,n,r){var i=x(this,t.call(this));return i.object=e,i.name=n,i.args=r,i}return E(e,t),e.prototype.evaluate=function(t,e,n){var r=this.object.evaluate(t,e),i=Vt(t,this.args,e),o=qt(r,this.name,n);if(o)return o.apply(r,i)},e.prototype.accept=function(t){return t.visitCallMember(this)},e.prototype.connect=function(t,e){if(this.object.connect(t,e),qt(this.object.evaluate(e),this.name,!1))for(var n=this.args,r=n.length;r--;)n[r].connect(t,e)},e}(_t),Nt=function(t){function e(e,n){var r=x(this,t.call(this));return r.func=e,r.args=n,r}return E(e,t),e.prototype.evaluate=function(t,e,n){var r=this.func.evaluate(t,e);if("function"==typeof r)return r.apply(null,Vt(t,this.args,e));if(n||null!=r)throw new Error(this.func+" is not a function")},e.prototype.accept=function(t){return t.visitCallFunction(this)},e.prototype.connect=function(t,e){if(this.func.connect(t,e),"function"==typeof this.func.evaluate(e))for(var n=this.args,r=n.length;r--;)n[r].connect(t,e)},e}(_t),Lt=function(t){function e(e,n,r){var i=x(this,t.call(this));return i.operation=e,i.left=n,i.right=r,i}return E(e,t),e.prototype.evaluate=function(t,e){var n=this.left.evaluate(t,e);switch(this.operation){case"&&":return n&&this.right.evaluate(t,e);case"||":return n||this.right.evaluate(t,e)}var r=this.right.evaluate(t,e);switch(this.operation){case"==":return n==r;case"===":return n===r;case"!=":return n!=r;case"!==":return n!==r;case"instanceof":return"function"==typeof r&&n instanceof r;case"in":return"object"===(void 0===r?"undefined":_(r))&&null!==r&&n in r}if(null===n||null===r||void 0===n||void 0===r){switch(this.operation){case"+":return null!=n?n:null!=r?r:0;case"-":return null!=n?n:null!=r?0-r:0}return null}switch(this.operation){case"+":return function(t,e){if(null!==t&&null!==e)return"string"==typeof t&&"string"!=typeof e?t+e.toString():"string"!=typeof t&&"string"==typeof e?t.toString()+e:t+e;if(null!==t)return t;if(null!==e)return e;return 0}(n,r);case"-":return n-r;case"*":return n*r;case"/":return n/r;case"%":return n%r;case"<":return n<r;case">":return n>r;case"<=":return n<=r;case">=":return n>=r;case"^":return n^r}throw new Error("Internal error ["+this.operation+"] not handled")},e.prototype.accept=function(t){return t.visitBinary(this)},e.prototype.connect=function(t,e){this.left.connect(t,e);var n=this.left.evaluate(e);"&&"===this.operation&&!n||"||"===this.operation&&n||this.right.connect(t,e)},e}(_t),jt=function(t){function e(e,n){var r=x(this,t.call(this));return r.operation=e,r.expression=n,r}return E(e,t),e.prototype.evaluate=function(t,e){switch(this.operation){case"!":return!this.expression.evaluate(t,e);case"typeof":return _(this.expression.evaluate(t,e));case"void":return void this.expression.evaluate(t,e)}throw new Error("Internal error ["+this.operation+"] not handled")},e.prototype.accept=function(t){return t.visitPrefix(this)},e.prototype.connect=function(t,e){this.expression.connect(t,e)},e}(_t),Bt=function(t){function e(e){var n=x(this,t.call(this));return n.value=e,n}return E(e,t),e.prototype.evaluate=function(t,e){return this.value},e.prototype.accept=function(t){return t.visitLiteralPrimitive(this)},e.prototype.connect=function(t,e){},e}(_t),Mt=function(t){function e(e){var n=x(this,t.call(this));return n.value=e,n}return E(e,t),e.prototype.evaluate=function(t,e){return this.value},e.prototype.accept=function(t){return t.visitLiteralString(this)},e.prototype.connect=function(t,e){},e}(_t),Dt=function(t){function e(e,n,r,i){var o=x(this,t.call(this));if(o.cooked=e,o.expressions=n||[],o.length=o.expressions.length,o.tagged=void 0!==i,o.tagged)if(o.cooked.raw=r,o.tag=i,i instanceof At)o.contextType="Scope";else{if(!(i instanceof Tt||i instanceof It))throw new Error(o.tag+" is not a valid template tag");o.contextType="Object"}return o}return E(e,t),e.prototype.getScopeContext=function(t,e){return I(this.tag.name,t,this.tag.ancestor)},e.prototype.getObjectContext=function(t,e){return this.tag.object.evaluate(t,e)},e.prototype.evaluate=function(t,e,n){for(var r=new Array(this.length),i=0;i<this.length;i++)r[i]=this.expressions[i].evaluate(t,e);if(this.tagged){var o=this.tag.evaluate(t,e);if("function"==typeof o){var a=this["get"+this.contextType+"Context"](t,e);return o.call.apply(o,[a,this.cooked].concat(r))}if(!n)return null;throw new Error(this.tag+" is not a function")}for(var s=this.cooked[0],c=0;c<this.length;c++)s=String.prototype.concat(s,r[c],this.cooked[c+1]);return s},e.prototype.accept=function(t){return t.visitLiteralTemplate(this)},e.prototype.connect=function(t,e){for(var n=0;n<this.length;n++)this.expressions[n].connect(t,e);this.tagged&&this.tag.connect(t,e)},e}(_t),Pt=function(t){function e(e){var n=x(this,t.call(this));return n.elements=e,n}return E(e,t),e.prototype.evaluate=function(t,e){for(var n=this.elements,r=[],i=0,o=n.length;i<o;++i)r[i]=n[i].evaluate(t,e);return r},e.prototype.accept=function(t){return t.visitLiteralArray(this)},e.prototype.connect=function(t,e){for(var n=this.elements.length,r=0;r<n;r++)this.elements[r].connect(t,e)},e}(_t),Ft=function(t){function e(e,n){var r=x(this,t.call(this));return r.keys=e,r.values=n,r}return E(e,t),e.prototype.evaluate=function(t,e){for(var n={},r=this.keys,i=this.values,o=0,a=r.length;o<a;++o)n[r[o]]=i[o].evaluate(t,e);return n},e.prototype.accept=function(t){return t.visitLiteralObject(this)},e.prototype.connect=function(t,e){for(var n=this.keys.length,r=0;r<n;r++)this.values[r].connect(t,e)},e}(_t);function Vt(t,e,n){for(var r=e.length,i=[],o=0;o<r;o++)i[o]=e[o].evaluate(t,n);return i}function qt(t,e,n){var r=null==t?null:t[e];if("function"==typeof r)return r;if(!n&&null==r)return null;throw new Error(e+" is not a function")}var Gt=null;"undefined"==typeof FEATURE_NO_UNPARSER&&(Gt=function(){function t(t){this.buffer=t}return t.unparse=function(t){var e=[],n=new Gt(e);return t.accept(n),e.join("")},t.prototype.write=function(t){this.buffer.push(t)},t.prototype.writeArgs=function(t){this.write("(");for(var e=0,n=t.length;e<n;++e)0!==e&&this.write(","),t[e].accept(this);this.write(")")},t.prototype.visitBindingBehavior=function(t){var e=t.args;t.expression.accept(this),this.write("&"+t.name);for(var n=0,r=e.length;n<r;++n)this.write(":"),e[n].accept(this)},t.prototype.visitValueConverter=function(t){var e=t.args;t.expression.accept(this),this.write("|"+t.name);for(var n=0,r=e.length;n<r;++n)this.write(":"),e[n].accept(this)},t.prototype.visitAssign=function(t){t.target.accept(this),this.write("="),t.value.accept(this)},t.prototype.visitConditional=function(t){t.condition.accept(this),this.write("?"),t.yes.accept(this),this.write(":"),t.no.accept(this)},t.prototype.visitAccessThis=function(t){if(0!==t.ancestor){this.write("$parent");for(var e=t.ancestor-1;e--;)this.write(".$parent")}else this.write("$this")},t.prototype.visitAccessScope=function(t){for(var e=t.ancestor;e--;)this.write("$parent.");this.write(t.name)},t.prototype.visitAccessMember=function(t){t.object.accept(this),this.write("."+t.name)},t.prototype.visitAccessKeyed=function(t){t.object.accept(this),this.write("["),t.key.accept(this),this.write("]")},t.prototype.visitCallScope=function(t){for(var e=t.ancestor;e--;)this.write("$parent.");this.write(t.name),this.writeArgs(t.args)},t.prototype.visitCallFunction=function(t){t.func.accept(this),this.writeArgs(t.args)},t.prototype.visitCallMember=function(t){t.object.accept(this),this.write("."+t.name),this.writeArgs(t.args)},t.prototype.visitPrefix=function(t){this.write("("+t.operation),t.operation.charCodeAt(0)>=97&&this.write(" "),t.expression.accept(this),this.write(")")},t.prototype.visitBinary=function(t){t.left.accept(this),105===t.operation.charCodeAt(0)?this.write(" "+t.operation+" "):this.write(t.operation),t.right.accept(this)},t.prototype.visitLiteralPrimitive=function(t){this.write(""+t.value)},t.prototype.visitLiteralArray=function(t){var e=t.elements;this.write("[");for(var n=0,r=e.length;n<r;++n)0!==n&&this.write(","),e[n].accept(this);this.write("]")},t.prototype.visitLiteralObject=function(t){var e=t.keys,n=t.values;this.write("{");for(var r=0,i=e.length;r<i;++r)0!==r&&this.write(","),this.write("'"+e[r]+"':"),n[r].accept(this);this.write("}")},t.prototype.visitLiteralString=function(t){var e=t.value.replace(/'/g,"'");this.write("'"+e+"'")},t.prototype.visitLiteralTemplate=function(t){var e=t.cooked,n=t.expressions,r=n.length;this.write("`"),this.write(e[0]);for(var i=0;i<r;i++)n[i].accept(this),this.write(e[i+1]);this.write("`")},t}());!function(){function t(){}t.prototype.cloneExpressionArray=function(t){for(var e=[],n=t.length;n--;)e[n]=t[n].accept(this);return e},t.prototype.visitBindingBehavior=function(t){return new xt(t.expression.accept(this),t.name,this.cloneExpressionArray(t.args))},t.prototype.visitValueConverter=function(t){return new Et(t.expression.accept(this),t.name,this.cloneExpressionArray(t.args))},t.prototype.visitAssign=function(t){return new Ct(t.target.accept(this),t.value.accept(this))},t.prototype.visitConditional=function(t){return new St(t.condition.accept(this),t.yes.accept(this),t.no.accept(this))},t.prototype.visitAccessThis=function(t){return new kt(t.ancestor)},t.prototype.visitAccessScope=function(t){return new At(t.name,t.ancestor)},t.prototype.visitAccessMember=function(t){return new Tt(t.object.accept(this),t.name)},t.prototype.visitAccessKeyed=function(t){return new It(t.object.accept(this),t.key.accept(this))},t.prototype.visitCallScope=function(t){return new Rt(t.name,this.cloneExpressionArray(t.args),t.ancestor)},t.prototype.visitCallFunction=function(t){return new Nt(t.func.accept(this),this.cloneExpressionArray(t.args))},t.prototype.visitCallMember=function(t){return new Ot(t.object.accept(this),t.name,this.cloneExpressionArray(t.args))},t.prototype.visitUnary=function(t){return new jt(prefix.operation,prefix.expression.accept(this))},t.prototype.visitBinary=function(t){return new Lt(t.operation,t.left.accept(this),t.right.accept(this))},t.prototype.visitLiteralPrimitive=function(t){return new Bt(t)},t.prototype.visitLiteralArray=function(t){return new Pt(this.cloneExpressionArray(t.elements))},t.prototype.visitLiteralObject=function(t){return new Ft(t.keys,this.cloneExpressionArray(t.values))},t.prototype.visitLiteralString=function(t){return new Mt(t.value)},t.prototype.visitLiteralTemplate=function(t){return new Dt(t.cooked,this.cloneExpressionArray(t.expressions),t.raw,t.tag&&t.tag.accept(this))}}();var Ut={oneTime:0,toView:1,oneWay:1,twoWay:2,fromView:3},Ht=function(){function t(){this.cache=Object.create(null)}return t.prototype.parse=function(t){return t=t||"",this.cache[t]||(this.cache[t]=new $t(t).parseBindingBehavior())},t}(),zt=String.fromCharCode,$t=function(){function t(t){this.idx=0,this.start=0,this.src=t,this.len=t.length,this.tkn=se,this.val=void 0,this.ch=t.charCodeAt(0)}return w(t,[{key:"raw",get:function(){return this.src.slice(this.start,this.idx)}}]),t.prototype.parseBindingBehavior=function(){this.nextToken(),this.tkn&oe&&this.err("Invalid start of expression");for(var t=this.parseValueConverter();this.opt(Le);)t=new xt(t,this.val,this.parseVariadicArgs());return this.tkn!==se&&this.err("Unconsumed token "+this.raw),t},t.prototype.parseValueConverter=function(){for(var t=this.parseExpression();this.opt(je);)t=new Et(t,this.val,this.parseVariadicArgs());return t},t.prototype.parseVariadicArgs=function(){this.nextToken();for(var t=[];this.opt(Oe);)t.push(this.parseExpression());return t},t.prototype.parseExpression=function(){for(var t=this.idx,e=this.parseConditional();this.tkn===en;)e.isAssignable||this.err("Expression "+this.src.slice(t,this.start)+" is not assignable"),this.nextToken(),t=this.idx,e=new Ct(e,this.parseConditional());return e},t.prototype.parseConditional=function(){var t=this.parseBinary(0);if(this.opt(Ne)){var e=this.parseExpression();this.expect(Oe),t=new St(t,e,this.parseExpression())}return t},t.prototype.parseBinary=function(t){for(var e=this.parseLeftHandSide(0);this.tkn&pe;){var n=this.tkn;if((n&ie)<=t)break;this.nextToken(),e=new Lt(on[n&re],e,this.parseBinary(n&ie))}return e},t.prototype.parseLeftHandSide=function(t){var e=void 0;t:switch(this.tkn){case Qe:return this.nextToken(),this.parseLeftHandSide(0);case Ke:return this.nextToken(),new Lt("-",new Bt(0),this.parseLeftHandSide(0));case nn:case Je:case Xe:var n=on[this.tkn&re];return this.nextToken(),new jt(n,this.parseLeftHandSide(0));case xe:do{if(this.nextToken(),t++,this.opt(Se))this.tkn===Se&&this.err();else{if(this.tkn&ae){e=new kt(t&ne),t=t&te|Qt;break t}this.err()}}while(this.tkn===xe);case ce:e=new At(this.val,t&ne),this.nextToken(),t=t&te|Kt;break;case _e:this.nextToken(),e=new kt(0),t=t&te|Qt;break;case Ee:this.nextToken(),e=this.parseExpression(),this.expect(Ae),t=Zt;break;case Ie:this.nextToken();var r=[];if(this.tkn!==Re)do{r.push(this.parseExpression())}while(this.opt(Te));this.expect(Re),e=new Pt(r),t=Zt;break;case Ce:var i=[],o=[];for(this.nextToken();this.tkn!==ke;){if(this.tkn&ue){var a=this.ch,s=this.tkn,c=this.idx;i.push(this.val),this.nextToken(),this.opt(Oe)?o.push(this.parseExpression()):(this.ch=a,this.tkn=s,this.idx=c,o.push(this.parseLeftHandSide(te)))}else this.tkn&le?(i.push(this.val),this.nextToken(),this.expect(Oe),o.push(this.parseExpression())):this.err();this.tkn!==ke&&this.expect(Te)}this.expect(ke),e=new Ft(i,o),t=Zt;break;case de:e=new Mt(this.val),this.nextToken(),t=Zt;break;case ve:e=new Dt([this.val]),this.nextToken(),t=Zt;break;case ge:e=this.parseTemplate(0),t=Zt;break;case he:e=new Bt(this.val),this.nextToken();break;case be:case we:case me:case ye:e=new Bt(on[this.tkn&re]),this.nextToken(),t=Zt;break;default:this.idx>=this.len?this.err("Unexpected end of expression"):this.err()}if(t&te)return e;for(var u=this.val;this.tkn&fe;)switch(this.tkn){case Se:if(this.nextToken(),this.tkn&ue||this.err(),u=this.val,this.nextToken(),t=t&Zt|(t&(Qt|Kt))<<1|t&Jt|(t&Xt)>>1|(t&Yt)>>2,this.tkn===Ee)continue;e=t&Kt?new At(u,e.ancestor):new Tt(e,u);continue;case Ie:this.nextToken(),t=Xt,e=new It(e,this.parseExpression()),this.expect(Re);break;case Ee:this.nextToken();for(var l=[];this.tkn!==Ae&&(l.push(this.parseExpression()),this.opt(Te)););this.expect(Ae),e=t&Kt?new Rt(u,l,e.ancestor):t&(Jt|Zt)?new Ot(e,u,l):new Nt(e,l),t=Yt;break;case ve:e=new Dt([this.val],[],[this.raw],e),this.nextToken();break;case ge:e=this.parseTemplate(t|ee,e)}return e},t.prototype.parseTemplate=function(t,e){var n=[this.val],r=t&ee?[this.raw]:void 0;this.expect(ge);for(var i=[this.parseExpression()];(this.tkn=this.scanTemplateTail())!==ve;)n.push(this.val),t&ee&&r.push(this.raw),this.expect(ge),i.push(this.parseExpression());return n.push(this.val),t&ee&&r.push(this.raw),this.nextToken(),new Dt(n,i,r,e)},t.prototype.nextToken=function(){for(;this.idx<this.len;)if(this.ch<=32)this.next();else{if(this.start=this.idx,36===this.ch||this.ch>=97&&this.ch<=122)return void(this.tkn=this.scanIdentifier());if(null!==(this.tkn=vn[this.ch](this)))return}this.tkn=se},t.prototype.next=function(){return this.ch=this.src.charCodeAt(++this.idx)},t.prototype.scanIdentifier=function(){for(;pn.has(this.next())||this.ch>127&&fn[this.ch];);return rn[this.val=this.raw]||ce},t.prototype.scanNumber=function(t){if(t)this.val=0;else for(this.val=this.ch-48;this.next()<=57&&this.ch>=48;)this.val=10*this.val+this.ch-48;if(t||46===this.ch){t||this.next();for(var e=this.idx,n=this.ch-48;this.next()<=57&&this.ch>=48;)n=10*n+this.ch-48;this.val=this.val+n/Math.pow(10,this.idx-e)}if(101===this.ch||69===this.ch){var r=this.idx;for(this.next(),45!==this.ch&&43!==this.ch||this.next(),this.ch>=48&&this.ch<=57||(this.idx=r,this.err("Invalid exponent"));this.next()<=57&&this.ch>=48;);this.val=parseFloat(this.src.slice(this.start,this.idx))}return he},t.prototype.scanString=function(){var t=this.ch;this.next();for(var e=void 0,n=this.idx;this.ch!==t;)if(92===this.ch){e||(e=[]),e.push(this.src.slice(n,this.idx)),this.next();var r=void 0;if(117===this.ch)if(this.next(),this.idx+4<this.len){var i=this.src.slice(this.idx,this.idx+4);/[A-Z0-9]{4}/i.test(i)||this.err("Invalid unicode escape [\\u"+i+"]"),r=parseInt(i,16),this.idx+=4,this.ch=this.src.charCodeAt(this.idx)}else this.err();else r=Wt(this.ch),this.next();e.push(zt(r)),n=this.idx}else 0===this.ch||this.idx>=this.len?this.err("Unterminated quote"):this.next();var o=this.src.slice(n,this.idx);this.next();var a=o;return null!=e&&(e.push(o),a=e.join("")),this.val=a,de},t.prototype.scanTemplate=function(){for(var t=!0,e="";96!==this.next();)if(36===this.ch){if(this.idx+1<this.len&&123===this.src.charCodeAt(this.idx+1)){this.idx++,t=!1;break}e+="$"}else 92===this.ch?e+=zt(Wt(this.next())):0===this.ch||this.idx>=this.len?this.err("Unterminated template literal"):e+=zt(this.ch);return this.next(),this.val=e,t?ve:ge},t.prototype.scanTemplateTail=function(){return this.idx>=this.len&&this.err("Unterminated template"),this.idx--,this.scanTemplate()},t.prototype.err=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected token "+this.raw,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.start;throw new Error("Parser Error: "+t+" at column "+e+" in expression ["+this.src+"]")},t.prototype.opt=function(t){return this.tkn===t&&(this.nextToken(),!0)},t.prototype.expect=function(t){this.tkn===t?this.nextToken():this.err("Missing expected token "+on[t&re],this.idx)},t}();function Wt(t){switch(t){case 102:return 12;case 110:return 10;case 114:return 13;case 116:return 9;case 118:return 11;default:return t}}var Qt=1024,Kt=2048,Jt=4096,Xt=8192,Yt=16384,Zt=32768,te=65536,ee=1<<17,ne=511,re=63,ie=448,oe=2048,ae=16384,se=65536|ae|oe,ce=1<<17,ue=32768|ce,le=1<<18,he=1<<19|le,de=1<<20|le,pe=1<<21,fe=1<<24,ve=1<<25|fe,ge=1<<26|fe,ye=32768|le,me=32769|le,be=32770|le,we=32771|le,_e=4|ue,xe=5|ue,Ee=8198|ae|fe,Ce=8199,Se=8388616|fe,ke=4105|ae|oe,Ae=4106|ae|oe,Te=11|ae,Ie=8204|ae|1<<23|fe,Re=4109|oe,Oe=14|ae,Ne=15,Le=18|ae,je=19|ae,Be=84|pe,Me=149|pe,De=214|pe,Pe=279|pe,Fe=280|pe,Ve=281|pe,qe=282|pe,Ge=347|pe,Ue=348|pe,He=349|pe,ze=350|pe,$e=33119|pe,We=33120|pe,Qe=417|pe|1<<22,Ke=418|pe|1<<22,Je=4227107,Xe=4227108,Ye=485|pe,Ze=486|pe,tn=487|pe,en=40,nn=4194345,rn=Object.create(null);rn.true=me,rn.null=be,rn.false=ye,rn.undefined=we,rn.$this=_e,rn.$parent=xe,rn.in=$e,rn.instanceof=We,rn.typeof=Je,rn.void=Xe;var on=[!1,!0,null,void 0,"$this","$parent","(","{",".","}",")",",","[","]",":","?","'",'"',"&","|","||","&&","^","==","!=","===","!==","<",">","<=",">=","in","instanceof","+","-","typeof","void","*","%","/","=","!"],an=[36,0,48,58,65,91,95,0,97,123],sn=[36,0,65,91,95,0,97,123,170,0,186,0,192,215,216,247,248,697,736,741,7424,7462,7468,7517,7522,7526,7531,7544,7545,7615,7680,7936,8305,0,8319,0,8336,8349,8490,8492,8498,0,8526,0,8544,8585,11360,11392,42786,42888,42891,42927,42928,42936,42999,43008,43824,43867,43868,43877,64256,64263,65313,65339,65345,65371],cn=[48,58],un=[0,33,127,161];function ln(t,e,n,r){for(var i=n.length,o=0;o<i;o+=2){var a=n[o],s=n[o+1];if(s=s>0?s:a+1,t)for(var c=a;c<s;)t[c]=r,c++;if(e)for(var u=a;u<s;u++)e.add(u)}}function hn(t){return function(e){return e.next(),t}}function dn(t){return t.err("Unexpected character ["+zt(t.ch)+"]"),null}var pn=new Set;ln(null,pn,an,!0);var fn=new Uint8Array(65535);ln(fn,null,sn,1),ln(fn,null,cn,1);for(var vn=new Array(65535),gn=0;gn<65535;)vn[gn]=dn,gn++;ln(vn,null,un,(function(t){return t.next(),null})),ln(vn,null,sn,(function(t){return t.scanIdentifier()})),ln(vn,null,cn,(function(t){return t.scanNumber(!1)})),vn[34]=vn[39]=function(t){return t.scanString()},vn[96]=function(t){return t.scanTemplate()},vn[33]=function(t){return 61!==t.next()?nn:61!==t.next()?Fe:(t.next(),qe)},vn[61]=function(t){return 61!==t.next()?en:61!==t.next()?Pe:(t.next(),Ve)},vn[38]=function(t){return 38!==t.next()?Le:(t.next(),Me)},vn[124]=function(t){return 124!==t.next()?je:(t.next(),Be)},vn[46]=function(t){return t.next()<=57&&t.ch>=48?t.scanNumber(!0):Se},vn[60]=function(t){return 61!==t.next()?Ge:(t.next(),He)},vn[62]=function(t){return 61!==t.next()?Ue:(t.next(),ze)},vn[37]=hn(Ze),vn[40]=hn(Ee),vn[41]=hn(Ae),vn[42]=hn(Ye),vn[43]=hn(Qe),vn[44]=hn(Te),vn[45]=hn(Ke),vn[47]=hn(tn),vn[58]=hn(Oe),vn[63]=hn(Ne),vn[91]=hn(Ie),vn[93]=hn(Re),vn[94]=hn(De),vn[123]=hn(Ce),vn[125]=hn(ke);var yn=Map.prototype;var mn=function(t){function e(e,n){return x(this,t.call(this,e,n))}return E(e,t),e.for=function(t,n){return"__map_observer__"in n||Reflect.defineProperty(n,"__map_observer__",{value:e.create(t,n),enumerable:!1,configurable:!1}),n.__map_observer__},e.create=function(t,n){var r=new e(t,n),i=yn;return i.set===n.set&&i.delete===n.delete&&i.clear===n.clear||(i={set:n.set,delete:n.delete,clear:n.clear}),n.set=function(){var t=n.has(arguments[0]),e=t?"update":"add",o=n.get(arguments[0]),a=i.set.apply(n,arguments);return t&&o===n.get(arguments[0])||r.addChangeRecord({type:e,object:n,key:arguments[0],oldValue:o}),a},n.delete=function(){var t=n.has(arguments[0]),e=n.get(arguments[0]),o=i.delete.apply(n,arguments);return t&&r.addChangeRecord({type:"delete",object:n,key:arguments[0],oldValue:e}),o},n.clear=function(){var t=i.clear.apply(n,arguments);return r.addChangeRecord({type:"clear",object:n}),t},r},e}(lt),bn=g.getLogger("event-manager");function wn(t){return t.composedPath&&t.composedPath()[0]||t.deepPath&&t.deepPath()[0]||t.path&&t.path[0]||t.target}function _n(){this.standardStopPropagation(),this.propagationStopped=!0}function xn(t){t.propagationStopped=!1;for(var e=wn(t),n=[];e;){if(e.capturedCallbacks){var r=e.capturedCallbacks[t.type];r&&(t.stopPropagation!==_n&&(t.standardStopPropagation=t.stopPropagation,t.stopPropagation=_n),n.push(r))}e=e.parentNode}for(var i=n.length-1;i>=0&&!t.propagationStopped;i--){var o=n[i];"handleEvent"in o?o.handleEvent(t):o(t)}}var En=function(){function t(t){this.eventName=t,this.count=0}return t.prototype.increment=function(){this.count++,1===this.count&&y.b.addEventListener(this.eventName,xn,!0)},t.prototype.decrement=function(){0===this.count?bn.warn("The same EventListener was disposed multiple times."):0==--this.count&&y.b.removeEventListener(this.eventName,xn,!0)},t}(),Cn=function(){function t(t,e){this.eventName=t,this.count=0,this.eventManager=e}return t.prototype.handleEvent=function(t){t.propagationStopped=!1;for(var e=wn(t);e&&!t.propagationStopped;){if(e.delegatedCallbacks){var n=e.delegatedCallbacks[t.type];n&&(t.stopPropagation!==_n&&(t.standardStopPropagation=t.stopPropagation,t.stopPropagation=_n),"handleEvent"in n?n.handleEvent(t):n(t))}var r=e.parentNode;e=this.eventManager.escapeShadowRoot&&r instanceof ShadowRoot?r.host:r}},t.prototype.increment=function(){this.count++,1===this.count&&y.b.addEventListener(this.eventName,this,!1)},t.prototype.decrement=function(){0===this.count?bn.warn("The same EventListener was disposed multiple times."):0==--this.count&&y.b.removeEventListener(this.eventName,this,!1)},t}(),Sn=function(){function t(t,e,n){this.entry=t,this.lookup=e,this.targetEvent=n}return t.prototype.dispose=function(){this.lookup[this.targetEvent]?(this.entry.decrement(),this.lookup[this.targetEvent]=null):bn.warn("Calling .dispose() on already disposed eventListener")},t}(),kn=function(){function t(t,e,n){this.target=t,this.targetEvent=e,this.callback=n}return t.prototype.dispose=function(){this.target.removeEventListener(this.targetEvent,this.callback)},t}(),An=function(){function t(t){this.delegatedHandlers={},this.capturedHandlers={},this.eventManager=t}return t.prototype.subscribe=function(t,e,n,r,i){var o=void 0,a=void 0,s=void 0;if(r===Tn.bubbling){o=this.delegatedHandlers,s=o[e]||(o[e]=new Cn(e,this.eventManager));var c=t.delegatedCallbacks||(t.delegatedCallbacks={});return c[e]?bn.warn("Overriding previous callback for event listener",{event:e,callback:n,previousCallback:c[e]}):s.increment(),c[e]=n,!0===i?new Sn(s,c,e):function(){s.decrement(),c[e]=null}}if(r===Tn.capturing){a=this.capturedHandlers,s=a[e]||(a[e]=new En(e));var u=t.capturedCallbacks||(t.capturedCallbacks={});return u[e]?bn.error("already have a callback for event",{event:e,callback:n}):s.increment(),u[e]=n,!0===i?new Sn(s,u,e):function(){s.decrement(),u[e]=null}}return t.addEventListener(e,n),!0===i?new kn(t,e,n):function(){t.removeEventListener(e,n)}},t}(),Tn={none:0,capturing:1,bubbling:2},In=function(){function t(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.elementHandlerLookup={},this.eventStrategyLookup={},this.escapeShadowRoot=t,this.registerElementConfig({tagName:"input",properties:{value:["change","input"],checked:["change","input"],files:["change","input"]}}),this.registerElementConfig({tagName:"textarea",properties:{value:["change","input"]}}),this.registerElementConfig({tagName:"select",properties:{value:["change"]}}),this.registerElementConfig({tagName:"content editable",properties:{value:["change","input","blur","keyup","paste"]}}),this.registerElementConfig({tagName:"scrollable element",properties:{scrollTop:["scroll"],scrollLeft:["scroll"]}}),this.defaultEventStrategy=new An(this)}return t.prototype.registerElementConfig=function(t){var e=t.tagName.toLowerCase(),n=t.properties,r=void 0,i=this.elementHandlerLookup[e]={};for(r in n)n.hasOwnProperty(r)&&(i[r]=n[r])},t.prototype.registerEventStrategy=function(t,e){this.eventStrategyLookup[t]=e},t.prototype.getElementHandler=function(t,e){var n=void 0,r=this.elementHandlerLookup;if(t.tagName){if(r[n=t.tagName.toLowerCase()]&&r[n][e])return new Rn(r[n][e]);if("textContent"===e||"innerHTML"===e)return new Rn(r["content editable"].value);if("scrollTop"===e||"scrollLeft"===e)return new Rn(r["scrollable element"][e])}return null},t.prototype.addEventListener=function(t,e,n,r,i){return(this.eventStrategyLookup[e]||this.defaultEventStrategy).subscribe(t,e,n,r,i)},t}(),Rn=function(){function t(t){this.events=t,this.element=null,this.handler=null}return t.prototype.subscribe=function(t,e){this.element=t,this.handler=e;for(var n=this.events,r=0,i=n.length;i>r;++r)t.addEventListener(n[r],e)},t.prototype.dispose=function(){if(null!==this.element){for(var t=this.element,e=this.handler,n=this.events,r=0,i=n.length;i>r;++r)t.removeEventListener(n[r],e);this.element=this.handler=null}},t}(),On=function(){function t(){this.tracked=[],this.checkDelay=120}return t.prototype.addProperty=function(t){var e=this.tracked;e.push(t),1===e.length&&this.scheduleDirtyCheck()},t.prototype.removeProperty=function(t){var e=this.tracked;e.splice(e.indexOf(t),1)},t.prototype.scheduleDirtyCheck=function(){var t=this;setTimeout((function(){return t.check()}),this.checkDelay)},t.prototype.check=function(){for(var t=this.tracked,e=t.length;e--;){var n=t[e];n.isDirty()&&n.call()}t.length&&this.scheduleDirtyCheck()},t}(),Nn=et()(a=function(){function t(t,e,n){this.dirtyChecker=t,this.obj=e,this.propertyName=n}return t.prototype.getValue=function(){return this.obj[this.propertyName]},t.prototype.setValue=function(t){this.obj[this.propertyName]=t},t.prototype.call=function(){var t=this.oldValue,e=this.getValue();this.callSubscribers(e,t),this.oldValue=e},t.prototype.isDirty=function(){return this.oldValue!==this.obj[this.propertyName]},t.prototype.subscribe=function(t,e){this.hasSubscribers()||(this.oldValue=this.getValue(),this.dirtyChecker.addProperty(this)),this.addSubscriber(t,e)},t.prototype.unsubscribe=function(t,e){this.removeSubscriber(t,e)&&!this.hasSubscribers()&&this.dirtyChecker.removeProperty(this)},t}())||a,Ln=g.getLogger("property-observation"),jn={getValue:function(t,e){return t[e]},setValue:function(t,e,n){e[n]=t}},Bn=function(){function t(t,e){this.doNotCache=!0,this.primitive=t,this.propertyName=e}return t.prototype.getValue=function(){return this.primitive[this.propertyName]},t.prototype.setValue=function(){var t=_(this.primitive);throw new Error("The "+this.propertyName+" property of a "+t+" ("+this.primitive+") cannot be assigned.")},t.prototype.subscribe=function(){},t.prototype.unsubscribe=function(){},t}(),Mn=et()(s=function(){function t(t,e,n){this.taskQueue=t,this.obj=e,this.propertyName=n,this.queued=!1,this.observing=!1}return t.prototype.getValue=function(){return this.obj[this.propertyName]},t.prototype.setValue=function(t){this.obj[this.propertyName]=t},t.prototype.getterValue=function(){return this.currentValue},t.prototype.setterValue=function(t){var e=this.currentValue;e!==t&&(this.queued||(this.oldValue=e,this.queued=!0,this.taskQueue.queueMicroTask(this)),this.currentValue=t)},t.prototype.call=function(){var t=this.oldValue,e=this.currentValue;this.queued=!1,this.callSubscribers(e,t)},t.prototype.subscribe=function(t,e){this.observing||this.convertProperty(),this.addSubscriber(t,e)},t.prototype.unsubscribe=function(t,e){this.removeSubscriber(t,e)},t.prototype.convertProperty=function(){this.observing=!0,this.currentValue=this.obj[this.propertyName],this.setValue=this.setterValue,this.getValue=this.getterValue,Reflect.defineProperty(this.obj,this.propertyName,{configurable:!0,enumerable:!(this.propertyName in this.obj)||this.obj.propertyIsEnumerable(this.propertyName),get:this.getValue.bind(this),set:this.setValue.bind(this)})||Ln.warn("Cannot observe property '"+this.propertyName+"' of object",this.obj)},t}())||s,Dn=function(){function t(t,e,n){this.element=t,this.propertyName=e,this.attributeName=n}return t.prototype.getValue=function(){return this.element.getAttributeNS("http://www.w3.org/1999/xlink",this.attributeName)},t.prototype.setValue=function(t){return this.element.setAttributeNS("http://www.w3.org/1999/xlink",this.attributeName,t)},t.prototype.subscribe=function(){throw new Error('Observation of a "'+this.element.nodeName+'" element\'s "'+this.propertyName+'" property is not supported.')},t}(),Pn={getValue:function(t,e){return t.getAttribute(e)},setValue:function(t,e,n){null==t?e.removeAttribute(n):e.setAttribute(n,t)}},Fn=function(){function t(t,e){this.element=t,this.propertyName=e}return t.prototype.getValue=function(){return this.element.getAttribute(this.propertyName)},t.prototype.setValue=function(t){return null==t?this.element.removeAttribute(this.propertyName):this.element.setAttribute(this.propertyName,t)},t.prototype.subscribe=function(){throw new Error('Observation of a "'+this.element.nodeName+'" element\'s "'+this.propertyName+'" property is not supported.')},t}(),Vn=function(){function t(t,e){this.element=t,this.propertyName=e,this.styles=null,this.version=0}return t.prototype.getValue=function(){return this.element.style.cssText},t.prototype._setProperty=function(t,e){var n="";null!=e&&"function"==typeof e.indexOf&&-1!==e.indexOf("!important")&&(n="important",e=e.replace("!important","")),this.element.style.setProperty(t,e,n)},t.prototype.setValue=function(t){var e=this.styles||{},n=void 0,r=this.version;if(null!=t)if(t instanceof Object){var i=void 0;for(n in t)t.hasOwnProperty(n)&&(i=t[n],e[n=n.replace(/([A-Z])/g,(function(t){return"-"+t.toLowerCase()}))]=r,this._setProperty(n,i))}else if(t.length)for(var o=/\s*([\w\-]+)\s*:\s*((?:(?:[\w\-]+\(\s*(?:"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|[\w\-]+\(\s*(?:^"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|[^\)]*)\),?|[^\)]*)\),?|"(?:\\"|[^"])*"|'(?:\\'|[^'])*'|[^;]*),?\s*)+);?/g,a=void 0;null!==(a=o.exec(t));)(n=a[1])&&(e[n]=r,this._setProperty(n,a[2]));if(this.styles=e,this.version+=1,0!==r)for(n in r-=1,e)e.hasOwnProperty(n)&&e[n]===r&&this.element.style.removeProperty(n)},t.prototype.subscribe=function(){throw new Error('Observation of a "'+this.element.nodeName+'" element\'s "'+this.propertyName+'" property is not supported.')},t}(),qn=et()(c=function(){function t(t,e,n){this.element=t,this.propertyName=e,this.handler=n,"files"===e&&(this.setValue=function(){})}return t.prototype.getValue=function(){return this.element[this.propertyName]},t.prototype.setValue=function(t){t=null==t?"":t,this.element[this.propertyName]!==t&&(this.element[this.propertyName]=t,this.notify())},t.prototype.notify=function(){var t=this.oldValue,e=this.getValue();this.callSubscribers(e,t),this.oldValue=e},t.prototype.handleEvent=function(){this.notify()},t.prototype.subscribe=function(t,e){this.hasSubscribers()||(this.oldValue=this.getValue(),this.handler.subscribe(this.element,this)),this.addSubscriber(t,e)},t.prototype.unsubscribe=function(t,e){this.removeSubscriber(t,e)&&!this.hasSubscribers()&&this.handler.dispose()},t}())||c,Gn=et()(u=function(){function t(t,e,n){this.element=t,this.handler=e,this.observerLocator=n}return t.prototype.getValue=function(){return this.value},t.prototype.setValue=function(t){this.initialSync&&this.value===t||(this.arrayObserver&&(this.arrayObserver.unsubscribe("CheckedObserver:array",this),this.arrayObserver=null),"checkbox"===this.element.type&&Array.isArray(t)&&(this.arrayObserver=this.observerLocator.getArrayObserver(t),this.arrayObserver.subscribe("CheckedObserver:array",this)),this.oldValue=this.value,this.value=t,this.synchronizeElement(),this.notify(),this.initialSync||(this.initialSync=!0,this.observerLocator.taskQueue.queueMicroTask(this)))},t.prototype.call=function(t,e){this.synchronizeElement(),this.valueObserver||(this.valueObserver=this.element.__observers__.model||this.element.__observers__.value,this.valueObserver&&this.valueObserver.subscribe("CheckedObserver:value",this))},t.prototype.synchronizeElement=function(){var t=this.value,e=this.element,n=e.hasOwnProperty("model")?e.model:e.value,r="radio"===e.type,i=e.matcher||function(t,e){return t===e};e.checked=r&&!!i(t,n)||!r&&!0===t||!r&&Array.isArray(t)&&-1!==t.findIndex((function(t){return!!i(t,n)}))},t.prototype.synchronizeValue=function(){var t=this.value,e=this.element,n=e.hasOwnProperty("model")?e.model:e.value,r=void 0,i=e.matcher||function(t,e){return t===e};if("checkbox"===e.type){if(Array.isArray(t))return r=t.findIndex((function(t){return!!i(t,n)})),void(e.checked&&-1===r?t.push(n):e.checked||-1===r||t.splice(r,1));t=e.checked}else{if(!e.checked)return;t=n}this.oldValue=this.value,this.value=t,this.notify()},t.prototype.notify=function(){var t=this.oldValue,e=this.value;e!==t&&this.callSubscribers(e,t)},t.prototype.handleEvent=function(){this.synchronizeValue()},t.prototype.subscribe=function(t,e){this.hasSubscribers()||this.handler.subscribe(this.element,this),this.addSubscriber(t,e)},t.prototype.unsubscribe=function(t,e){this.removeSubscriber(t,e)&&!this.hasSubscribers()&&this.handler.dispose()},t.prototype.unbind=function(){this.arrayObserver&&(this.arrayObserver.unsubscribe("CheckedObserver:array",this),this.arrayObserver=null),this.valueObserver&&this.valueObserver.unsubscribe("CheckedObserver:value",this)},t}())||u,Un=et()(l=function(){function t(t,e,n){this.element=t,this.handler=e,this.observerLocator=n}return t.prototype.getValue=function(){return this.value},t.prototype.setValue=function(t){if(null!=t&&this.element.multiple&&!Array.isArray(t))throw new Error("Only null or Array instances can be bound to a multi-select.");this.value!==t&&(this.arrayObserver&&(this.arrayObserver.unsubscribe("SelectValueObserver:array",this),this.arrayObserver=null),Array.isArray(t)&&(this.arrayObserver=this.observerLocator.getArrayObserver(t),this.arrayObserver.subscribe("SelectValueObserver:array",this)),this.oldValue=this.value,this.value=t,this.synchronizeOptions(),this.notify(),this.initialSync||(this.initialSync=!0,this.observerLocator.taskQueue.queueMicroTask(this)))},t.prototype.call=function(t,e){this.synchronizeOptions()},t.prototype.synchronizeOptions=function(){var t=this.value,e=void 0;Array.isArray(t)&&(e=!0);for(var n=this.element.options,r=n.length,i=this.element.matcher||function(t,e){return t===e},o=function(){var o=n.item(r),a=o.hasOwnProperty("model")?o.model:o.value;if(e)return o.selected=-1!==t.findIndex((function(t){return!!i(a,t)})),"continue";o.selected=!!i(a,t)};r--;)o()},t.prototype.synchronizeValue=function(){for(var t=this,e=this.element.options,n=0,r=[],i=0,o=e.length;i<o;i++){var a=e.item(i);a.selected&&(r.push(a.hasOwnProperty("model")?a.model:a.value),n++)}if(this.element.multiple){if(Array.isArray(this.value)){var s=function(){for(var e=t.element.matcher||function(t,e){return t===e},n=0,i=function(){var i=t.value[n];-1===r.findIndex((function(t){return e(i,t)}))?t.value.splice(n,1):n++};n<t.value.length;)i();n=0;for(var o=function(){var i=r[n];-1===t.value.findIndex((function(t){return e(i,t)}))&&t.value.push(i),n++};n<r.length;)o();return{v:void 0}}();if("object"===(void 0===s?"undefined":_(s)))return s.v}}else r=0===n?null:r[0];r!==this.value&&(this.oldValue=this.value,this.value=r,this.notify())},t.prototype.notify=function(){var t=this.oldValue,e=this.value;this.callSubscribers(e,t)},t.prototype.handleEvent=function(){this.synchronizeValue()},t.prototype.subscribe=function(t,e){this.hasSubscribers()||this.handler.subscribe(this.element,this),this.addSubscriber(t,e)},t.prototype.unsubscribe=function(t,e){this.removeSubscriber(t,e)&&!this.hasSubscribers()&&this.handler.dispose()},t.prototype.bind=function(){var t=this;this.domObserver=y.b.createMutationObserver((function(){t.synchronizeOptions(),t.synchronizeValue()})),this.domObserver.observe(this.element,{childList:!0,subtree:!0,characterData:!0})},t.prototype.unbind=function(){this.domObserver.disconnect(),this.domObserver=null,this.arrayObserver&&(this.arrayObserver.unsubscribe("SelectValueObserver:array",this),this.arrayObserver=null)},t}())||l,Hn=function(){function t(t){this.element=t,this.doNotCache=!0,this.value="",this.version=0}return t.prototype.getValue=function(){return this.value},t.prototype.setValue=function(t){var e=this.nameIndex||{},n=this.version,r=void 0,i=void 0;if(null!=t&&t.length)for(var o=0,a=(r=t.split(/\s+/)).length;o<a;o++)""!==(i=r[o])&&(e[i]=n,this.element.classList.add(i));if(this.value=t,this.nameIndex=e,this.version+=1,0!==n)for(i in n-=1,e)e.hasOwnProperty(i)&&e[i]===n&&this.element.classList.remove(i)},t.prototype.subscribe=function(){throw new Error('Observation of a "'+this.element.nodeName+'" element\'s "class" property is not supported.')},t}();var zn=function(t){function e(e,n){var r=x(this,t.call(this));return r.name=e,r.dependencies=n,r.isAssignable=!0,r}return E(e,t),e.prototype.evaluate=function(t,e){return t.bindingContext[this.name]},e.prototype.assign=function(t,e){t.bindingContext[this.name]=e},e.prototype.accept=function(t){throw new Error("not implemented")},e.prototype.connect=function(t,e){for(var n=this.dependencies,r=n.length;r--;)n[r].connect(t,e)},e}(_t);var $n=void 0,Wn=void 0,Qn=void 0,Kn=void 0;if("undefined"==typeof FEATURE_NO_SVG){$n={a:["class","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","style","systemLanguage","target","transform","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"],altGlyph:["class","dx","dy","externalResourcesRequired","format","glyphRef","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","rotate","style","systemLanguage","x","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"],altGlyphDef:["id","xml:base","xml:lang","xml:space"],altGlyphItem:["id","xml:base","xml:lang","xml:space"],animate:["accumulate","additive","attributeName","attributeType","begin","by","calcMode","dur","end","externalResourcesRequired","fill","from","id","keySplines","keyTimes","max","min","onbegin","onend","onload","onrepeat","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","systemLanguage","to","values","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"],animateColor:["accumulate","additive","attributeName","attributeType","begin","by","calcMode","dur","end","externalResourcesRequired","fill","from","id","keySplines","keyTimes","max","min","onbegin","onend","onload","onrepeat","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","systemLanguage","to","values","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"],animateMotion:["accumulate","additive","begin","by","calcMode","dur","end","externalResourcesRequired","fill","from","id","keyPoints","keySplines","keyTimes","max","min","onbegin","onend","onload","onrepeat","origin","path","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","rotate","systemLanguage","to","values","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"],animateTransform:["accumulate","additive","attributeName","attributeType","begin","by","calcMode","dur","end","externalResourcesRequired","fill","from","id","keySplines","keyTimes","max","min","onbegin","onend","onload","onrepeat","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","systemLanguage","to","type","values","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"],circle:["class","cx","cy","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","r","requiredExtensions","requiredFeatures","style","systemLanguage","transform","xml:base","xml:lang","xml:space"],clipPath:["class","clipPathUnits","externalResourcesRequired","id","requiredExtensions","requiredFeatures","style","systemLanguage","transform","xml:base","xml:lang","xml:space"],"color-profile":["id","local","name","rendering-intent","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"],cursor:["externalResourcesRequired","id","requiredExtensions","requiredFeatures","systemLanguage","x","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"],defs:["class","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","style","systemLanguage","transform","xml:base","xml:lang","xml:space"],desc:["class","id","style","xml:base","xml:lang","xml:space"],ellipse:["class","cx","cy","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","rx","ry","style","systemLanguage","transform","xml:base","xml:lang","xml:space"],feBlend:["class","height","id","in","in2","mode","result","style","width","x","xml:base","xml:lang","xml:space","y"],feColorMatrix:["class","height","id","in","result","style","type","values","width","x","xml:base","xml:lang","xml:space","y"],feComponentTransfer:["class","height","id","in","result","style","width","x","xml:base","xml:lang","xml:space","y"],feComposite:["class","height","id","in","in2","k1","k2","k3","k4","operator","result","style","width","x","xml:base","xml:lang","xml:space","y"],feConvolveMatrix:["bias","class","divisor","edgeMode","height","id","in","kernelMatrix","kernelUnitLength","order","preserveAlpha","result","style","targetX","targetY","width","x","xml:base","xml:lang","xml:space","y"],feDiffuseLighting:["class","diffuseConstant","height","id","in","kernelUnitLength","result","style","surfaceScale","width","x","xml:base","xml:lang","xml:space","y"],feDisplacementMap:["class","height","id","in","in2","result","scale","style","width","x","xChannelSelector","xml:base","xml:lang","xml:space","y","yChannelSelector"],feDistantLight:["azimuth","elevation","id","xml:base","xml:lang","xml:space"],feFlood:["class","height","id","result","style","width","x","xml:base","xml:lang","xml:space","y"],feFuncA:["amplitude","exponent","id","intercept","offset","slope","tableValues","type","xml:base","xml:lang","xml:space"],feFuncB:["amplitude","exponent","id","intercept","offset","slope","tableValues","type","xml:base","xml:lang","xml:space"],feFuncG:["amplitude","exponent","id","intercept","offset","slope","tableValues","type","xml:base","xml:lang","xml:space"],feFuncR:["amplitude","exponent","id","intercept","offset","slope","tableValues","type","xml:base","xml:lang","xml:space"],feGaussianBlur:["class","height","id","in","result","stdDeviation","style","width","x","xml:base","xml:lang","xml:space","y"],feImage:["class","externalResourcesRequired","height","id","preserveAspectRatio","result","style","width","x","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"],feMerge:["class","height","id","result","style","width","x","xml:base","xml:lang","xml:space","y"],feMergeNode:["id","xml:base","xml:lang","xml:space"],feMorphology:["class","height","id","in","operator","radius","result","style","width","x","xml:base","xml:lang","xml:space","y"],feOffset:["class","dx","dy","height","id","in","result","style","width","x","xml:base","xml:lang","xml:space","y"],fePointLight:["id","x","xml:base","xml:lang","xml:space","y","z"],feSpecularLighting:["class","height","id","in","kernelUnitLength","result","specularConstant","specularExponent","style","surfaceScale","width","x","xml:base","xml:lang","xml:space","y"],feSpotLight:["id","limitingConeAngle","pointsAtX","pointsAtY","pointsAtZ","specularExponent","x","xml:base","xml:lang","xml:space","y","z"],feTile:["class","height","id","in","result","style","width","x","xml:base","xml:lang","xml:space","y"],feTurbulence:["baseFrequency","class","height","id","numOctaves","result","seed","stitchTiles","style","type","width","x","xml:base","xml:lang","xml:space","y"],filter:["class","externalResourcesRequired","filterRes","filterUnits","height","id","primitiveUnits","style","width","x","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"],font:["class","externalResourcesRequired","horiz-adv-x","horiz-origin-x","horiz-origin-y","id","style","vert-adv-y","vert-origin-x","vert-origin-y","xml:base","xml:lang","xml:space"],"font-face":["accent-height","alphabetic","ascent","bbox","cap-height","descent","font-family","font-size","font-stretch","font-style","font-variant","font-weight","hanging","id","ideographic","mathematical","overline-position","overline-thickness","panose-1","slope","stemh","stemv","strikethrough-position","strikethrough-thickness","underline-position","underline-thickness","unicode-range","units-per-em","v-alphabetic","v-hanging","v-ideographic","v-mathematical","widths","x-height","xml:base","xml:lang","xml:space"],"font-face-format":["id","string","xml:base","xml:lang","xml:space"],"font-face-name":["id","name","xml:base","xml:lang","xml:space"],"font-face-src":["id","xml:base","xml:lang","xml:space"],"font-face-uri":["id","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"],foreignObject:["class","externalResourcesRequired","height","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","style","systemLanguage","transform","width","x","xml:base","xml:lang","xml:space","y"],g:["class","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","style","systemLanguage","transform","xml:base","xml:lang","xml:space"],glyph:["arabic-form","class","d","glyph-name","horiz-adv-x","id","lang","orientation","style","unicode","vert-adv-y","vert-origin-x","vert-origin-y","xml:base","xml:lang","xml:space"],glyphRef:["class","dx","dy","format","glyphRef","id","style","x","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"],hkern:["g1","g2","id","k","u1","u2","xml:base","xml:lang","xml:space"],image:["class","externalResourcesRequired","height","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","preserveAspectRatio","requiredExtensions","requiredFeatures","style","systemLanguage","transform","width","x","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"],line:["class","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","style","systemLanguage","transform","x1","x2","xml:base","xml:lang","xml:space","y1","y2"],linearGradient:["class","externalResourcesRequired","gradientTransform","gradientUnits","id","spreadMethod","style","x1","x2","xlink:arcrole","xlink:href","xlink:role","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y1","y2"],marker:["class","externalResourcesRequired","id","markerHeight","markerUnits","markerWidth","orient","preserveAspectRatio","refX","refY","style","viewBox","xml:base","xml:lang","xml:space"],mask:["class","externalResourcesRequired","height","id","maskContentUnits","maskUnits","requiredExtensions","requiredFeatures","style","systemLanguage","width","x","xml:base","xml:lang","xml:space","y"],metadata:["id","xml:base","xml:lang","xml:space"],"missing-glyph":["class","d","horiz-adv-x","id","style","vert-adv-y","vert-origin-x","vert-origin-y","xml:base","xml:lang","xml:space"],mpath:["externalResourcesRequired","id","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"],path:["class","d","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","pathLength","requiredExtensions","requiredFeatures","style","systemLanguage","transform","xml:base","xml:lang","xml:space"],pattern:["class","externalResourcesRequired","height","id","patternContentUnits","patternTransform","patternUnits","preserveAspectRatio","requiredExtensions","requiredFeatures","style","systemLanguage","viewBox","width","x","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"],polygon:["class","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","points","requiredExtensions","requiredFeatures","style","systemLanguage","transform","xml:base","xml:lang","xml:space"],polyline:["class","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","points","requiredExtensions","requiredFeatures","style","systemLanguage","transform","xml:base","xml:lang","xml:space"],radialGradient:["class","cx","cy","externalResourcesRequired","fx","fy","gradientTransform","gradientUnits","id","r","spreadMethod","style","xlink:arcrole","xlink:href","xlink:role","xlink:title","xlink:type","xml:base","xml:lang","xml:space"],rect:["class","externalResourcesRequired","height","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","rx","ry","style","systemLanguage","transform","width","x","xml:base","xml:lang","xml:space","y"],script:["externalResourcesRequired","id","type","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"],set:["attributeName","attributeType","begin","dur","end","externalResourcesRequired","fill","id","max","min","onbegin","onend","onload","onrepeat","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","systemLanguage","to","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space"],stop:["class","id","offset","style","xml:base","xml:lang","xml:space"],style:["id","media","title","type","xml:base","xml:lang","xml:space"],svg:["baseProfile","class","contentScriptType","contentStyleType","externalResourcesRequired","height","id","onabort","onactivate","onclick","onerror","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onresize","onscroll","onunload","onzoom","preserveAspectRatio","requiredExtensions","requiredFeatures","style","systemLanguage","version","viewBox","width","x","xml:base","xml:lang","xml:space","y","zoomAndPan"],switch:["class","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","style","systemLanguage","transform","xml:base","xml:lang","xml:space"],symbol:["class","externalResourcesRequired","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","preserveAspectRatio","style","viewBox","xml:base","xml:lang","xml:space"],text:["class","dx","dy","externalResourcesRequired","id","lengthAdjust","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","rotate","style","systemLanguage","textLength","transform","x","xml:base","xml:lang","xml:space","y"],textPath:["class","externalResourcesRequired","id","lengthAdjust","method","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","spacing","startOffset","style","systemLanguage","textLength","xlink:arcrole","xlink:href","xlink:role","xlink:title","xlink:type","xml:base","xml:lang","xml:space"],title:["class","id","style","xml:base","xml:lang","xml:space"],tref:["class","dx","dy","externalResourcesRequired","id","lengthAdjust","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","rotate","style","systemLanguage","textLength","x","xlink:arcrole","xlink:href","xlink:role","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"],tspan:["class","dx","dy","externalResourcesRequired","id","lengthAdjust","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","rotate","style","systemLanguage","textLength","x","xml:base","xml:lang","xml:space","y"],use:["class","externalResourcesRequired","height","id","onactivate","onclick","onfocusin","onfocusout","onload","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","requiredExtensions","requiredFeatures","style","systemLanguage","transform","width","x","xlink:actuate","xlink:arcrole","xlink:href","xlink:role","xlink:show","xlink:title","xlink:type","xml:base","xml:lang","xml:space","y"],view:["externalResourcesRequired","id","preserveAspectRatio","viewBox","viewTarget","xml:base","xml:lang","xml:space","zoomAndPan"],vkern:["g1","g2","id","k","u1","u2","xml:base","xml:lang","xml:space"]},Wn={a:!0,altGlyph:!0,animate:!0,animateColor:!0,circle:!0,clipPath:!0,defs:!0,ellipse:!0,feBlend:!0,feColorMatrix:!0,feComponentTransfer:!0,feComposite:!0,feConvolveMatrix:!0,feDiffuseLighting:!0,feDisplacementMap:!0,feFlood:!0,feGaussianBlur:!0,feImage:!0,feMerge:!0,feMorphology:!0,feOffset:!0,feSpecularLighting:!0,feTile:!0,feTurbulence:!0,filter:!0,font:!0,foreignObject:!0,g:!0,glyph:!0,glyphRef:!0,image:!0,line:!0,linearGradient:!0,marker:!0,mask:!0,"missing-glyph":!0,path:!0,pattern:!0,polygon:!0,polyline:!0,radialGradient:!0,rect:!0,stop:!0,svg:!0,switch:!0,symbol:!0,text:!0,textPath:!0,tref:!0,tspan:!0,use:!0},Qn={"alignment-baseline":!0,"baseline-shift":!0,"clip-path":!0,"clip-rule":!0,clip:!0,"color-interpolation-filters":!0,"color-interpolation":!0,"color-profile":!0,"color-rendering":!0,color:!0,cursor:!0,direction:!0,display:!0,"dominant-baseline":!0,"enable-background":!0,"fill-opacity":!0,"fill-rule":!0,fill:!0,filter:!0,"flood-color":!0,"flood-opacity":!0,"font-family":!0,"font-size-adjust":!0,"font-size":!0,"font-stretch":!0,"font-style":!0,"font-variant":!0,"font-weight":!0,"glyph-orientation-horizontal":!0,"glyph-orientation-vertical":!0,"image-rendering":!0,kerning:!0,"letter-spacing":!0,"lighting-color":!0,"marker-end":!0,"marker-mid":!0,"marker-start":!0,mask:!0,opacity:!0,overflow:!0,"pointer-events":!0,"shape-rendering":!0,"stop-color":!0,"stop-opacity":!0,"stroke-dasharray":!0,"stroke-dashoffset":!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-miterlimit":!0,"stroke-opacity":!0,"stroke-width":!0,stroke:!0,"text-anchor":!0,"text-decoration":!0,"text-rendering":!0,"unicode-bidi":!0,visibility:!0,"word-spacing":!0,"writing-mode":!0};Kn=function(){function t(){var t,e;"altglyph"===(t="<svg><altGlyph /></svg>",e=y.b.createElement("div"),e.innerHTML=t,e.firstChild).firstElementChild.nodeName&&Jn.altGlyph&&(Jn.altglyph=Jn.altGlyph,delete Jn.altGlyph,Jn.altglyphdef=Jn.altGlyphDef,delete Jn.altGlyphDef,Jn.altglyphitem=Jn.altGlyphItem,delete Jn.altGlyphItem,Jn.glyphref=Jn.glyphRef,delete Jn.glyphRef)}return t.prototype.isStandardSvgAttribute=function(t,e){return Xn[t]&&Yn[e]||Jn[t]&&-1!==Jn[t].indexOf(e)},t}()}var Jn=$n,Xn=Wn,Yn=Qn,Zn=Kn||function(){function t(){}return t.prototype.isStandardSvgAttribute=function(){return!1},t}(),tr=(d=h=function(){function t(t,e,n,r,i){this.taskQueue=t,this.eventManager=e,this.dirtyChecker=n,this.svgAnalyzer=r,this.parser=i,this.adapters=[],this.logger=g.getLogger("observer-locator")}return t.prototype.getObserver=function(t,e){var n,r=t.__observers__;return r&&e in r?r[e]:((n=this.createPropertyObserver(t,e)).doNotCache||(void 0===r&&(r=this.getOrCreateObserversLookup(t)),r[e]=n),n)},t.prototype.getOrCreateObserversLookup=function(t){return t.__observers__||this.createObserversLookup(t)},t.prototype.createObserversLookup=function(t){var e={};return Reflect.defineProperty(t,"__observers__",{enumerable:!1,configurable:!1,writable:!1,value:e})||this.logger.warn("Cannot add observers to object",t),e},t.prototype.addAdapter=function(t){this.adapters.push(t)},t.prototype.getAdapterObserver=function(t,e,n){for(var r=0,i=this.adapters.length;r<i;r++){var o=this.adapters[r].getObserver(t,e,n);if(o)return o}return null},t.prototype.createPropertyObserver=function(t,e){var n,r=void 0,i=void 0;if(!(t instanceof Object))return new Bn(t,e);if(t instanceof y.b.Element){if("class"===e)return new Hn(t);if("style"===e||"css"===e)return new Vn(t,e);if(r=this.eventManager.getElementHandler(t,e),"value"===e&&"select"===t.tagName.toLowerCase())return new Un(t,r,this);if("checked"===e&&"input"===t.tagName.toLowerCase())return new Gn(t,r,this);if(r)return new qn(t,e,r);if(i=/^xlink:(.+)$/.exec(e))return new Dn(t,e,i[1]);if("role"===e&&(t instanceof y.b.Element||t instanceof y.b.SVGElement)||/^\w+:|^data-|^aria-/.test(e)||t instanceof y.b.SVGElement&&this.svgAnalyzer.isStandardSvgAttribute(t.nodeName,e))return new Fn(t,e)}if(function(t){return!!(t&&t.get&&t.get.dependencies)}(n=Object.getPropertyDescriptor(t,e)))return function(t,e,n,r){var i=n.get.dependencies;if(!(i instanceof zn)){for(var o=i.length;o--;)i[o]=r.parser.parse(i[o]);i=n.get.dependencies=new zn(e,i)}var a={bindingContext:t,overrideContext:T(t)};return new nt(a,i,r)}(t,e,n,this);if(n){var o=n.get||n.set;if(o){if(o.getObserver)return o.getObserver(t);var a=this.getAdapterObserver(t,e,n);return a||new Nn(this.dirtyChecker,t,e)}}return t instanceof Array?"length"===e?this.getArrayObserver(t).getLengthObserver():new Nn(this.dirtyChecker,t,e):t instanceof Map?"size"===e?this.getMapObserver(t).getLengthObserver():new Nn(this.dirtyChecker,t,e):t instanceof Set?"size"===e?this.getSetObserver(t).getLengthObserver():new Nn(this.dirtyChecker,t,e):new Mn(this.taskQueue,t,e)},t.prototype.getAccessor=function(t,e){if(t instanceof y.b.Element){if("class"===e||"style"===e||"css"===e||"value"===e&&("input"===t.tagName.toLowerCase()||"select"===t.tagName.toLowerCase())||"checked"===e&&"input"===t.tagName.toLowerCase()||"model"===e&&"input"===t.tagName.toLowerCase()||/^xlink:.+$/.exec(e))return this.getObserver(t,e);if(/^\w+:|^data-|^aria-/.test(e)||t instanceof y.b.SVGElement&&this.svgAnalyzer.isStandardSvgAttribute(t.nodeName,e)||"img"===t.tagName.toLowerCase()&&"src"===e||"a"===t.tagName.toLowerCase()&&"href"===e)return Pn}return jn},t.prototype.getArrayObserver=function(t){return function(t,e){return wt.for(t,e)}(this.taskQueue,t)},t.prototype.getMapObserver=function(t){return function(t,e){return mn.for(t,e)}(this.taskQueue,t)},t.prototype.getSetObserver=function(t){return function(t,e){return gr.for(t,e)}(this.taskQueue,t)},t}(),h.inject=[m.a,In,On,Zn,Ht],d),er=(function(){function t(){}t.prototype.getObserver=function(t,e,n){throw new Error("BindingAdapters must implement getObserver(object, propertyName).")}}(),function(){function t(t,e,n,r,i,o){this.observerLocator=t,this.targetProperty=e,this.sourceExpression=n,this.mode=r,this.lookupFunctions=i,this.attribute=o,this.discrete=!1}return t.prototype.createBinding=function(t){return new nr(this.observerLocator,this.sourceExpression,t,this.targetProperty,this.mode,this.lookupFunctions)},t}()),nr=P()(p=function(){function t(t,e,n,r,i,o){this.observerLocator=t,this.sourceExpression=e,this.target=n,this.targetProperty=r,this.mode=i,this.lookupFunctions=o}return t.prototype.updateTarget=function(t){this.targetObserver.setValue(t,this.target,this.targetProperty)},t.prototype.updateSource=function(t){this.sourceExpression.assign(this.source,t,this.lookupFunctions)},t.prototype.call=function(t,e,n){if(this.isBound){if(t===S)return n=this.targetObserver.getValue(this.target,this.targetProperty),(e=this.sourceExpression.evaluate(this.source,this.lookupFunctions))!==n&&this.updateTarget(e),void(this.mode!==Ut.oneTime&&(this._version++,this.sourceExpression.connect(this,this.source),this.unobserve(!1)));if(t!==C)throw new Error("Unexpected call context "+t);e!==this.sourceExpression.evaluate(this.source,this.lookupFunctions)&&this.updateSource(e)}},t.prototype.bind=function(t){if(this.isBound){if(this.source===t)return;this.unbind()}this.isBound=!0,this.source=t,this.sourceExpression.bind&&this.sourceExpression.bind(this,t,this.lookupFunctions);var e=this.mode;if(!this.targetObserver){var n=e===Ut.twoWay||e===Ut.fromView?"getObserver":"getAccessor";this.targetObserver=this.observerLocator[n](this.target,this.targetProperty)}if("bind"in this.targetObserver&&this.targetObserver.bind(),this.mode!==Ut.fromView){var r=this.sourceExpression.evaluate(t,this.lookupFunctions);this.updateTarget(r)}e!==Ut.oneTime&&(e===Ut.toView?$(this):e===Ut.twoWay?(this.sourceExpression.connect(this,t),this.targetObserver.subscribe(C,this)):e===Ut.fromView&&this.targetObserver.subscribe(C,this))},t.prototype.unbind=function(){this.isBound&&(this.isBound=!1,this.sourceExpression.unbind&&this.sourceExpression.unbind(this,this.source),this.source=null,"unbind"in this.targetObserver&&this.targetObserver.unbind(),this.targetObserver.unsubscribe&&this.targetObserver.unsubscribe(C,this),this.unobserve(!0))},t.prototype.connect=function(t){if(this.isBound){if(t){var e=this.sourceExpression.evaluate(this.source,this.lookupFunctions);this.updateTarget(e)}this.sourceExpression.connect(this,this.source)}},t}())||p,rr=function(){function t(t,e,n,r){this.observerLocator=t,this.targetProperty=e,this.sourceExpression=n,this.lookupFunctions=r}return t.prototype.createBinding=function(t){return new ir(this.observerLocator,this.sourceExpression,t,this.targetProperty,this.lookupFunctions)},t}(),ir=function(){function t(t,e,n,r,i){this.sourceExpression=e,this.target=n,this.targetProperty=t.getObserver(n,r),this.lookupFunctions=i}return t.prototype.callSource=function(t){var e=this.source.overrideContext;Object.assign(e,t),e.$event=t;var n=this.sourceExpression.evaluate(this.source,this.lookupFunctions,!0);for(var r in delete e.$event,t)delete e[r];return n},t.prototype.bind=function(t){var e=this;if(this.isBound){if(this.source===t)return;this.unbind()}this.isBound=!0,this.source=t,this.sourceExpression.bind&&this.sourceExpression.bind(this,t,this.lookupFunctions),this.targetProperty.setValue((function(t){return e.callSource(t)}))},t.prototype.unbind=function(){this.isBound&&(this.isBound=!1,this.sourceExpression.unbind&&this.sourceExpression.unbind(this,this.source),this.source=null,this.targetProperty.setValue(null))},t}(),or=function(){function t(t){this.name=t}return t.convention=function(e){if(e.endsWith("ValueConverter"))return new t(A(e.substring(0,e.length-14)))},t.prototype.initialize=function(t,e){this.instance=t.get(e)},t.prototype.register=function(t,e){t.registerValueConverter(e||this.name,this.instance)},t.prototype.load=function(t,e){},t}();function ar(t){if(void 0===t||"string"==typeof t)return function(e){b.b.define(b.b.resource,new or(t),e)};b.b.define(b.b.resource,new or,t)}var sr=function(){function t(t){this.name=t}return t.convention=function(e){if(e.endsWith("BindingBehavior"))return new t(A(e.substring(0,e.length-15)))},t.prototype.initialize=function(t,e){this.instance=t.get(e)},t.prototype.register=function(t,e){t.registerBindingBehavior(e||this.name,this.instance)},t.prototype.load=function(t,e){},t}();function cr(t){if(void 0===t||"string"==typeof t)return function(e){b.b.define(b.b.resource,new sr(t),e)};b.b.define(b.b.resource,new sr,t)}var ur=function(){function t(t,e,n,r,i,o){this.eventManager=t,this.targetEvent=e,this.sourceExpression=n,this.delegationStrategy=r,this.discrete=!0,this.preventDefault=i,this.lookupFunctions=o}return t.prototype.createBinding=function(t){return new lr(this.eventManager,this.targetEvent,this.delegationStrategy,this.sourceExpression,t,this.preventDefault,this.lookupFunctions)},t}(),lr=function(){function t(t,e,n,r,i,o,a){this.eventManager=t,this.targetEvent=e,this.delegationStrategy=n,this.sourceExpression=r,this.target=i,this.preventDefault=o,this.lookupFunctions=a}return t.prototype.callSource=function(t){var e=this.source.overrideContext;e.$event=t;var n=this.sourceExpression.evaluate(this.source,this.lookupFunctions,!0);return delete e.$event,!0!==n&&this.preventDefault&&t.preventDefault(),n},t.prototype.handleEvent=function(t){this.callSource(t)},t.prototype.bind=function(t){if(this.isBound){if(this.source===t)return;this.unbind()}this.isBound=!0,this.source=t,this.sourceExpression.bind&&this.sourceExpression.bind(this,t,this.lookupFunctions),this._handler=this.eventManager.addEventListener(this.target,this.targetEvent,this,this.delegationStrategy,!0)},t.prototype.unbind=function(){this.isBound&&(this.isBound=!1,this.sourceExpression.unbind&&this.sourceExpression.unbind(this,this.source),this.source=null,this._handler.dispose(),this._handler=null)},t}();function hr(t){var e=t.au;if(void 0===e)throw new Error('No Aurelia APIs are defined for the element: "'+t.tagName+'".');return e}var dr=function(){function t(t,e,n){this.sourceExpression=t,this.apiName=e,this.lookupFunctions=n,this.discrete=!0}return t.prototype.createBinding=function(e){return new pr(this.sourceExpression,t.locateAPI(e,this.apiName),this.lookupFunctions)},t.locateAPI=function(t,e){switch(e){case"element":return t;case"controller":return hr(t).controller;case"view-model":return hr(t).controller.viewModel;case"view":return hr(t).controller.view;default:var n=hr(t)[e];if(void 0===n)throw new Error('Attempted to reference "'+e+"\", but it was not found amongst the target's API.");return n.viewModel}},t}(),pr=function(){function t(t,e,n){this.sourceExpression=t,this.target=e,this.lookupFunctions=n}return t.prototype.bind=function(t){if(this.isBound){if(this.source===t)return;this.unbind()}this.isBound=!0,this.source=t,this.sourceExpression.bind&&this.sourceExpression.bind(this,t,this.lookupFunctions),this.sourceExpression.assign(this.source,this.target,this.lookupFunctions)},t.prototype.unbind=function(){this.isBound&&(this.isBound=!1,this.sourceExpression.evaluate(this.source,this.lookupFunctions)===this.target&&this.sourceExpression.assign(this.source,null,this.lookupFunctions),this.sourceExpression.unbind&&this.sourceExpression.unbind(this,this.source),this.source=null)},t}(),fr={bindingBehaviors:function(t){return null},valueConverters:function(t){return null}},vr=(v=f=function(){function t(t,e){this.observerLocator=t,this.parser=e}return t.prototype.createBindingExpression=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ut.toView,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:fr;return new er(this.observerLocator,t,this.parser.parse(e),n,r)},t.prototype.propertyObserver=function(t,e){var n=this;return{subscribe:function(r){var i=n.observerLocator.getObserver(t,e);return i.subscribe(r),{dispose:function(){return i.unsubscribe(r)}}}}},t.prototype.collectionObserver=function(t){var e=this;return{subscribe:function(n){var r=void 0;if(t instanceof Array)r=e.observerLocator.getArrayObserver(t);else if(t instanceof Map)r=e.observerLocator.getMapObserver(t);else{if(!(t instanceof Set))throw new Error("collection must be an instance of Array, Map or Set.");r=e.observerLocator.getSetObserver(t)}return r.subscribe(n),{dispose:function(){return r.unsubscribe(n)}}}}},t.prototype.expressionObserver=function(t,e){var n={bindingContext:t,overrideContext:T(t)};return new nt(n,this.parser.parse(e),this.observerLocator,fr)},t.prototype.parseExpression=function(t){return this.parser.parse(t)},t.prototype.registerAdapter=function(t){this.observerLocator.addAdapter(t)},t}(),f.inject=[tr,Ht],Set.prototype);var gr=function(t){function e(e,n){return x(this,t.call(this,e,n))}return E(e,t),e.for=function(t,n){return"__set_observer__"in n||Reflect.defineProperty(n,"__set_observer__",{value:e.create(t,n),enumerable:!1,configurable:!1}),n.__set_observer__},e.create=function(t,n){var r=new e(t,n),i=vr;return i.add===n.add&&i.delete===n.delete&&i.clear===n.clear||(i={add:n.add,delete:n.delete,clear:n.clear}),n.add=function(){var t="add",e=n.size,o=i.add.apply(n,arguments),a=n.size===e;return a||r.addChangeRecord({type:t,object:n,value:Array.from(n).pop()}),o},n.delete=function(){var t=n.has(arguments[0]),e=i.delete.apply(n,arguments);return t&&r.addChangeRecord({type:"delete",object:n,value:arguments[0]}),e},n.clear=function(){var t=i.clear.apply(n,arguments);return r.addChangeRecord({type:"clear",object:n}),t},r},e}(lt);var yr={};function mr(t,e){yr.hasOwnProperty(e)||(yr[e]=0),t.observeProperty(yr,e)}},20:function(t,e,n){(function(t){var r=void 0!==t&&t||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},e.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},n(21),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(11))},21:function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var r,i,o,a,s,c=1,u={},l=!1,h=t.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(t);d=d&&d.setTimeout?d:t,"[object process]"==={}.toString.call(t.process)?r=function(t){e.nextTick((function(){f(t)}))}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?t.MessageChannel?((o=new MessageChannel).port1.onmessage=function(t){f(t.data)},r=function(t){o.port2.postMessage(t)}):h&&"onreadystatechange"in h.createElement("script")?(i=h.documentElement,r=function(t){var e=h.createElement("script");e.onreadystatechange=function(){f(t),e.onreadystatechange=null,i.removeChild(e),e=null},i.appendChild(e)}):r=function(t){setTimeout(f,0,t)}:(a="setImmediate$"+Math.random()+"$",s=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(a)&&f(+e.data.slice(a.length))},t.addEventListener?t.addEventListener("message",s,!1):t.attachEvent("onmessage",s),r=function(e){t.postMessage(a+e,"*")}),d.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var i={callback:t,args:e};return u[c]=i,r(c),c++},d.clearImmediate=p}function p(t){delete u[t]}function f(t){if(l)setTimeout(f,0,t);else{var e=u[t];if(e){l=!0;try{!function(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(void 0,n)}}(e)}finally{p(t),l=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(11),n(15))},22:function(t,e,n){"use strict";(function(t,r){Object.defineProperty(e,"__esModule",{value:!0});var i=n(34),o={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},a=function(t,e){if(!t)throw s(e)},s=function(t){return new Error("Firebase Database ("+o.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},c=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},u={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],a=i+1<t.length,s=a?t[i+1]:0,c=i+2<t.length,u=c?t[i+2]:0,l=o>>2,h=(3&o)<<4|s>>4,d=(15&s)<<2|u>>6,p=63&u;c||(p=64,a||(d=64)),r.push(n[l],n[h],n[d],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(c(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(1023&a))}else{o=t[n++];var s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0,s=++i<t.length?n[t.charAt(i)]:64,c=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==c)throw Error();var u=o<<2|a>>4;if(r.push(u),64!==s){var l=a<<4&240|s>>2;if(r.push(l),64!==c){var h=s<<6&192|c;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},l=function(t){try{return u.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&(t[n]=h(t[n],e[n]));return t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var d=function(){function e(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new t((function(t,n){e.resolve=t,e.reject=n}))}return e.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},e}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function f(){try{return"[object process]"===Object.prototype.toString.call(r.process)}catch(t){return!1}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var v=function(t){function e(n,r){var i=t.call(this,r)||this;return i.code=n,i.name="FirebaseError",Object.setPrototypeOf(i,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(i,g.prototype.create),i}return i.__extends(e,t),e}(Error),g=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],a=o?y(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",c=new v(i,s),u=0,l=Object.keys(r);u<l.length;u++){var h=l[u];"_"!==h.slice(-1)&&(h in c&&console.warn('Overwriting FirebaseError base field "'+h+'" can cause unexpected behavior.'),c[h]=r[h])}return c},t}();function y(t,e){return t.replace(m,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var m=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b(t){return JSON.parse(t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var w=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=b(l(o[0])||""),n=b(l(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var _=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],c=this.chain_[1],u=this.chain_[2],l=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=l^c&(u^l),a=1518500249):(o=c^u^l,a=1859775393):r<60?(o=c&u|l&(c|u),a=2400959708):(o=c^u^l,a=3395469782);i=(s<<5|s>>>27)+o+h+a+n[r]&4294967295;h=l,l=u,u=4294967295&(c<<30|c>>>2),c=s,s=i}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+c&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();var x=function(){function e(e,n){var r=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=t.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){e(r)})).catch((function(t){r.error(t)}))}return e.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},e.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},e.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},e.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=E),void 0===r.error&&(r.error=E),void 0===r.complete&&(r.complete=E);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},e.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},e.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},e.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},e}();function E(){}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var i=t+" failed: ";return i+=r+" argument "}e.CONSTANTS=o,e.Deferred=d,e.ErrorFactory=g,e.FirebaseError=v,e.Sha1=_,e.assert=a,e.assertionError=s,e.async=function(e,n){return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];t.resolve(!0).then((function(){e.apply(void 0,r)})).catch((function(t){n&&n(t)}))}},e.base64=u,e.base64Decode=l,e.base64Encode=function(t){var e=c(t);return u.encodeByteArray(e,!0)},e.contains=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.createSubscribe=function(t,e){var n=new x(t,e);return n.subscribe.bind(n)},e.decode=w,e.deepCopy=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t){return h(void 0,t)},e.deepExtend=h,e.errorPrefix=C,e.getUA=p,e.isAdmin=function(t){var e=w(t).claims;return"object"==typeof e&&!0===e.admin},e.isBrowser=function(){return"object"==typeof self&&self.self===self},e.isBrowserExtension=function(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id},e.isElectron=function(){return p().indexOf("Electron/")>=0},e.isEmpty=function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0},e.isIE=function(){var t=p();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0},e.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(p())},e.isNode=f,e.isNodeSdk=function(){return!0===o.NODE_CLIENT||!0===o.NODE_ADMIN},e.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},e.isSafari=function(){return!f()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")},e.isUWP=function(){return p().indexOf("MSAppHost/")>=0},e.isValidFormat=function(t){var e=w(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},e.isValidTimestamp=function(t){var e=w(t).claims,n=Math.floor((new Date).getTime()/1e3),r=0,i=0;return"object"==typeof e&&(e.hasOwnProperty("nbf")?r=e.nbf:e.hasOwnProperty("iat")&&(r=e.iat),i=e.hasOwnProperty("exp")?e.exp:r+86400),!!n&&!!r&&!!i&&n>=r&&n<=i},e.issuedAtTime=function(t){var e=w(t).claims;return"object"==typeof e&&e.hasOwnProperty("iat")?e.iat:null},e.jsonEval=b,e.map=function(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,e.querystring=function(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""},e.querystringDecode=function(t){var e={};return t.replace(/^\?/,"").split("&").forEach((function(t){if(t){var n=t.split("=");e[n[0]]=n[1]}})),e},e.safeGet=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0},e.stringLength=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e},e.stringToByteArray=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){var o=i-55296;r++,a(r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(o<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},e.stringify=function(t){return JSON.stringify(t)},e.validateArgCount=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")},e.validateCallback=function(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(C(t,e,r)+"must be a valid function.")},e.validateContextObject=function(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(C(t,e,r)+"must be a valid context object.")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,e.validateNamespace=function(t,e,n,r){if((!r||n)&&"string"!=typeof n)throw new Error(C(t,e,r)+"must be a valid firebase namespace.")}}).call(this,n(7),n(11))},23:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n(8),i=function(){function t(t){this.charSpec=t,this.nextStates=[]}return t.prototype.get=function(t){var e=this.nextStates,n=Array.isArray(e),r=0;for(e=n?e:e[Symbol.iterator]();;){var i;if(n){if(r>=e.length)break;i=e[r++]}else{if((r=e.next()).done)break;i=r.value}var o=i;if(o.charSpec.validChars===t.validChars&&o.charSpec.invalidChars===t.invalidChars)return o}},t.prototype.put=function(e){var n=this.get(e);return n||(n=new t(e),this.nextStates.push(n),e.repeat&&n.nextStates.push(n),n)},t.prototype.match=function(t){for(var e=this.nextStates,n=[],r=0,i=e.length;r<i;r++){var o=e[r],a=o.charSpec;void 0!==a.validChars?-1!==a.validChars.indexOf(t)&&n.push(o):void 0!==a.invalidChars&&-1===a.invalidChars.indexOf(t)&&n.push(o)}return n},t}(),o=new RegExp("(\\"+["/",".","*","+","?","|","(",")","[","]","{","}","\\"].join("|\\")+")","g"),a=function(){function t(t,e){this.string=t,this.caseSensitive=e}return t.prototype.eachChar=function(t){for(var e=this.string,n=0,r=e.length;n<r;++n){var i=e[n];t({validChars:this.caseSensitive?i:i.toUpperCase()+i.toLowerCase()})}},t.prototype.regex=function(){return this.string.replace(o,"\\$1")},t.prototype.generate=function(){return this.string},t}(),s=function(){function t(t,e){this.name=t,this.optional=e}return t.prototype.eachChar=function(t){t({invalidChars:"/",repeat:!0})},t.prototype.regex=function(){return"([^/]+)"},t.prototype.generate=function(t,e){return e[this.name]=!0,t[this.name]},t}(),c=function(){function t(t){this.name=t}return t.prototype.eachChar=function(t){t({invalidChars:"",repeat:!0})},t.prototype.regex=function(){return"(.+)"},t.prototype.generate=function(t,e){return e[this.name]=!0,t[this.name]},t}(),u=function(){function t(){}return t.prototype.eachChar=function(){},t.prototype.regex=function(){return""},t.prototype.generate=function(){return""},t}(),l=function(){function t(){this.rootState=new i,this.names={},this.routes=new Map}return t.prototype.add=function(t){var e=this;if(!Array.isArray(t)){for(var n=this.rootState,r=[],i="^",o={statics:0,dynamics:0,stars:0},l=[],h=t.handler.name,d=!0,f=function(t,e,n,r){var i=t;"/"===t.charAt(0)&&(i=t.substr(1));for(var o=[],l=i.split("/"),h=0,d=l.length;h<d;++h){var p=l[h],f=p.match(/^:([^?]+)(\?)?$/);if(f){var v=f,g=v[1],y=v[2];if(-1!==g.indexOf("="))throw new Error("Parameter "+g+" in route "+t+" has a default value, which is not supported.");o.push(new s(g,!!y)),e.push(g),n.dynamics++}else(f=p.match(/^\*(.+)$/))?(o.push(new c(f[1])),e.push(f[1]),n.stars++):""===p?o.push(new u):(o.push(new a(p,r)),n.statics++)}return o}(t.path,l,o,t.caseSensitive),v=0,g=f.length;v<g;v++){var y=f[v];if(!(y instanceof u)){for(var m=p(n,y),b=m[0],w=m[1],_=0,x=r.length;_<x;_++)r[_].nextStates.push(b);y.optional?(r.push(w),i+="(?:/"+y.regex()+")?"):(n=w,i+="/"+y.regex(),r.length=0,d=!1)}}d&&(n=n.put({validChars:"/"}),i+="/?");var E=[{handler:t.handler,names:l}];if(this.routes.set(t.handler,{segments:f,handlers:E}),h)for(var C=Array.isArray(h)?h:[h],S=0;S<C.length;S++)C[S]in this.names||(this.names[C[S]]={segments:f,handlers:E});for(var k=0;k<r.length;k++){var A=r[k];A.handlers=E,A.regex=new RegExp(i+"$",t.caseSensitive?"":"i"),A.types=o}return n.handlers=E,n.regex=new RegExp(i+"$",t.caseSensitive?"":"i"),n.types=o,n}t.forEach((function(t){return e.add(t)}))},t.prototype.getRoute=function(t){return"string"==typeof t?this.names[t]:this.routes.get(t)},t.prototype.handlersFor=function(t){var e=this.getRoute(t);if(!e)throw new Error("There is no route named "+t);return[].concat(e.handlers)},t.prototype.hasRoute=function(t){return!!this.getRoute(t)},t.prototype.generate=function(t,e){var n=this.getRoute(t);if(!n)throw new Error("There is no route named "+t);var i=n.handlers[0].handler;if(i.generationUsesHref)return i.href;for(var o=Object.assign({},e),a=n.segments,s={},c="",l=0,h=a.length;l<h;l++){var d=a[l];if(!(d instanceof u)){var p=d.generate(o,s);if(null==p){if(!d.optional)throw new Error("A value is required for route parameter '"+d.name+"' in route '"+t+"'.")}else c+="/",c+=p}}for(var f in"/"!==c.charAt(0)&&(c="/"+c),s)delete o[f];var v=Object(r.a)(o);return c+=v?"?"+v:""},t.prototype.recognize=function(t){var e=[this.rootState],n={},i=!1,o=t,a=o.indexOf("?");if(-1!==a){var s=o.substr(a+1,o.length);o=o.substr(0,a),n=Object(r.c)(s)}"/"!==(o=decodeURI(o)).charAt(0)&&(o="/"+o);var c=o.length;c>1&&"/"===o.charAt(c-1)&&(o=o.substr(0,c-1),i=!0);for(var u=0,l=o.length;u<l&&(e=d(e,o.charAt(u))).length;u++);for(var p=[],f=0,v=e.length;f<v;f++)e[f].handlers&&p.push(e[f]);e=function(t){return t.sort((function(t,e){if(t.types.stars!==e.types.stars)return t.types.stars-e.types.stars;if(t.types.stars){if(t.types.statics!==e.types.statics)return e.types.statics-t.types.statics;if(t.types.dynamics!==e.types.dynamics)return e.types.dynamics-t.types.dynamics}return t.types.dynamics!==e.types.dynamics?t.types.dynamics-e.types.dynamics:t.types.statics!==e.types.statics?e.types.statics-t.types.statics:0}))}(p);var g=p[0];if(g&&g.handlers)return i&&"(.+)$"===g.regex.source.slice(-5)&&(o+="/"),function(t,e,n){for(var r=t.handlers,i=t.regex,o=e.match(i),a=1,s=new h(n),c=0,u=r.length;c<u;c++){for(var l=r[c],d=l.names,p={},f=0,v=d.length;f<v;f++)p[d[f]]=o[a++];s.push({handler:l.handler,params:p,isDynamic:!!d.length})}return s}(g,o,n)},t}(),h=function(t){this.splice=Array.prototype.splice,this.slice=Array.prototype.slice,this.push=Array.prototype.push,this.length=0,this.queryParams=t||{}};function d(t,e){for(var n=[],r=0,i=t.length;r<i;r++){var o=t[r];n.push.apply(n,o.match(e))}return n}function p(t,e){var n=t.put({validChars:"/"}),r=n;return e.eachChar((function(t){r=r.put(t)})),[n,r]}},24:function(t,e,n){"use strict";(function(t){n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return a}));var r=n(3),i=n(17),o=function(){function t(){}return t.withResources=function(t){return void 0===t&&(t=[]),(new a).withResources(t)},t}(),a=function(){function e(){this.resources=[]}return e.prototype.configure=function(t){return t.use.standardConfiguration()},e.prototype.bootstrap=function(t){this.configure=t},e.prototype.withResources=function(t){return this.resources=t,this},e.prototype.inView=function(t){return this.html=t,this},e.prototype.boundTo=function(t){return this.bindingContext=t,this},e.prototype.manuallyHandleLifecycle=function(){return this._prepareLifecycle(),this},e.prototype.create=function(e){var n=this;return e((function(e){return t.resolve(n.configure(e)).then((function(){return n.resources&&e.use.globalResources(n.resources),e.start().then((function(){return n.host=document.createElement("div"),n.host.innerHTML=n.html,document.body.appendChild(n.host),e.enhance(n.bindingContext,n.host).then((function(){return n.rootView=e.root,n.element=n.host.firstElementChild,e.root.controllers.length&&(n.viewModel=e.root.controllers[0].viewModel),new t((function(t){return setTimeout((function(){return t()}),0)}))}))}))}))}))},e.prototype.dispose=function(){if(void 0===this.host||void 0===this.rootView)throw new Error("Cannot call ComponentTester.dispose() before ComponentTester.create()");return this.rootView.detached(),this.rootView.unbind(),this.host.parentNode.removeChild(this.host)},e.prototype._prepareLifecycle=function(){var e=this,n=r.l.prototype.bind;r.l.prototype.bind=function(){},this.bind=function(i){return new t((function(t){r.l.prototype.bind=n,void 0!==i&&(e.bindingContext=i),e.rootView.bind(e.bindingContext),setTimeout((function(){return t()}),0)}))};var i=r.l.prototype.attached;r.l.prototype.attached=function(){},this.attached=function(){return new t((function(t){r.l.prototype.attached=i,e.rootView.attached(),setTimeout((function(){return t()}),0)}))},this.detached=function(){return new t((function(t){e.rootView.detached(),setTimeout((function(){return t()}),0)}))},this.unbind=function(){return new t((function(t){e.rootView.unbind(),setTimeout((function(){return t()}),0)}))}},e.prototype.waitForElement=function(t,e){var n=this;return Object(i.a)((function(){return n.element.querySelector(t)}),e)},e.prototype.waitForElements=function(t,e){var n=this;return Object(i.a)((function(){return n.element.querySelectorAll(t)}),e)},e}()}).call(this,n(7))},25:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var r=n(35),i=n(22),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),a=function(){function e(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return e.prototype.get=function(t){void 0===t&&(t="[DEFAULT]");var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.Deferred;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},e.prototype.getImmediate=function(t){var e=r.__assign({identifier:"[DEFAULT]",optional:!1},t),n=e.identifier,i=e.optional,o=this.normalizeInstanceIdentifier(n);try{var a=this.getOrInitializeService(o);if(!a){if(i)return null;throw Error("Service "+this.name+" is not available")}return a}catch(t){if(i)return null;throw t}},e.prototype.getComponent=function(){return this.component},e.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t))try{this.getOrInitializeService("[DEFAULT]")}catch(t){}try{for(var i=r.__values(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=r.__read(o.value,2),s=a[0],c=a[1],u=this.normalizeInstanceIdentifier(s);try{var l=this.getOrInitializeService(u);c.resolve(l)}catch(t){}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},e.prototype.clearInstance=function(t){void 0===t&&(t="[DEFAULT]"),this.instancesDeferred.delete(t),this.instances.delete(t)},e.prototype.delete=function(){return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(n){switch(n.label){case 0:return e=Array.from(this.instances.values()),[4,t.all(e.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))];case 1:return n.sent(),[2]}}))}))},e.prototype.isComponentSet=function(){return null!=this.component},e.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return"[DEFAULT]"===t?void 0:t}(t)),this.instances.set(t,e)),e||null},e.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:"[DEFAULT]":t},e}();var s=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();e.Component=o,e.ComponentContainer=s,e.Provider=a}).call(this,n(7))},26:function(t,e,n){"use strict";
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var i;n.r(e),n.d(e,"LogLevel",(function(){return o})),n.d(e,"Logger",(function(){return h})),n.d(e,"setLogLevel",(function(){return d})),n.d(e,"setUserLogHandler",(function(){return p}));var o,a=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(o||(o={}));var s={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},c=o.INFO,u=((i={})[o.DEBUG]="log",i[o.VERBOSE]="log",i[o.INFO]="info",i[o.WARN]="warn",i[o.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),a=u[e];if(!a)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[a].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=c,this._logHandler=l,this._userLogHandler=null,a.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in o))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?s[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.DEBUG],t)),this._logHandler.apply(this,r([this,o.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.VERBOSE],t)),this._logHandler.apply(this,r([this,o.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.INFO],t)),this._logHandler.apply(this,r([this,o.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.WARN],t)),this._logHandler.apply(this,r([this,o.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.ERROR],t)),this._logHandler.apply(this,r([this,o.ERROR],t))},t}();function d(t){a.forEach((function(e){e.setLogLevel(t)}))}function p(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=s[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var s=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:o[n].toLowerCase(),message:s,args:i,type:e.name})}},r=0,i=a;r<i.length;r++){n(i[r])}}},27:function(t,e,n){n(28),n(37),t.exports=n(40)},28:function(t,e,n){},29:function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=function(t,e){var n=t[1]||"",r=t[3];if(!r)return n;if(e&&"function"==typeof btoa){var i=(a=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),o=r.sources.map((function(t){return"/*# sourceURL="+r.sourceRoot+t+" */"}));return[n].concat(o).concat([i]).join("\n")}var a;return[n].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+n+"}":n})).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(r[o]=!0)}for(i=0;i<t.length;i++){var a=t[i];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}},3:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return B})),n.d(e,"f",(function(){return P})),n.d(e,"b",(function(){return Q})),n.d(e,"j",(function(){return J})),n.d(e,"n",(function(){return ot})),n.d(e,"c",(function(){return st})),n.d(e,"h",(function(){return dt})),n.d(e,"o",(function(){return vt})),n.d(e,"l",(function(){return gt})),n.d(e,"p",(function(){return mt})),n.d(e,"d",(function(){return At})),n.d(e,"m",(function(){return Vt})),n.d(e,"g",(function(){return Qt})),n.d(e,"i",(function(){return te})),n.d(e,"e",(function(){return ne})),n.d(e,"v",(function(){return re})),n.d(e,"s",(function(){return ie})),n.d(e,"r",(function(){return oe})),n.d(e,"w",(function(){return ae})),n.d(e,"q",(function(){return se})),n.d(e,"x",(function(){return ue})),n.d(e,"y",(function(){return he})),n.d(e,"t",(function(){return de})),n.d(e,"u",(function(){return pe})),n.d(e,"k",(function(){return fe}));var r,i,o,a,s,c,u,l,h,d,p,f,v,g,y,m,b,w,_,x,E,C,S=n(5),k=n(1),A=n(0),T=n(10),I=n(8),R=n(2),O=n(6),N=n(14),L=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},B=function(){function e(){}return e.prototype.enter=function(e){return t.resolve(!1)},e.prototype.leave=function(e){return t.resolve(!1)},e.prototype.removeClass=function(e,n){return e.classList.remove(n),t.resolve(!1)},e.prototype.addClass=function(e,n){return e.classList.add(n),t.resolve(!1)},e.prototype.animate=function(e,n){return t.resolve(!1)},e.prototype.runSequence=function(t){},e.prototype.registerEffect=function(t,e){},e.prototype.unregisterEffect=function(t){},e}(),M=function(){function t(t){this.owner=t,this.owner._compositionCount++}return t.prototype.done=function(){this.owner._compositionCount--,this.owner._tryCompleteTransaction()},t}(),D=function(){function e(t){this.owner=t,this.owner._ownershipToken=this,this.thenable=this._createThenable()}return e.prototype.waitForCompositionComplete=function(){return this.owner._tryCompleteTransaction(),this.thenable},e.prototype.resolve=function(){this._resolveCallback()},e.prototype._createThenable=function(){var e=this;return new t((function(t,n){e._resolveCallback=t}))},e}(),P=function(){function t(){this._ownershipToken=null,this._compositionCount=0}return t.prototype.tryCapture=function(){return null===this._ownershipToken?new D(this):null},t.prototype.enlist=function(){return new M(this)},t.prototype._tryCompleteTransaction=function(){if(this._compositionCount<=0&&(this._compositionCount=0,null!==this._ownershipToken)){var t=this._ownershipToken;this._ownershipToken=null,t.resolve()}},t}(),F=/([A-Z])/g;function V(t){return"-"+t.toLowerCase()}function q(t){return(t.charAt(0).toLowerCase()+t.slice(1)).replace(F,V)}function G(t){return!(t.auInterpolationTarget||/[^\t\n\r ]/.test(t.textContent))}var U=function(){function t(){}return t.prototype.initialize=function(t,e){this.instance=t.get(e)},t.prototype.register=function(t,e){t.registerViewEngineHooks(this.instance)},t.prototype.load=function(t,e){},t.convention=function(e){if(e.endsWith("ViewEngineHooks"))return new t},t}();var H=(i=r=function(){function t(t){this.element=t,this.subscriptions={}}return t.prototype._enqueueHandler=function(t){this.subscriptions[t.eventName]=this.subscriptions[t.eventName]||[],this.subscriptions[t.eventName].push(t)},t.prototype._dequeueHandler=function(t){var e=void 0,n=this.subscriptions[t.eventName];return n&&(e=n.indexOf(t))>-1&&n.splice(e,1),t},t.prototype.publish=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=A.b.createCustomEvent(t,{cancelable:r,bubbles:n,detail:e});this.element.dispatchEvent(i)},t.prototype.subscribe=function(e,n,r){if("function"==typeof n)return void 0===r&&(r=t.defaultListenerOptions),new z(this,e,n,r,!1)},t.prototype.subscribeOnce=function(e,n,r){if("function"==typeof n)return void 0===r&&(r=t.defaultListenerOptions),new z(this,e,n,r,!0)},t.prototype.dispose=function(t){if(t&&"string"==typeof t){var e=this.subscriptions[t];if(e)for(;e.length;){var n=e.pop();n&&n.dispose()}}else this.disposeAll()},t.prototype.disposeAll=function(){for(var t in this.subscriptions)this.dispose(t)},t}(),r.defaultListenerOptions=!0,i),z=function(){function t(t,e,n,r,i){this.owner=t,this.eventName=e,this.handler=n,this.capture="boolean"==typeof r?r:r.capture,this.bubbles=!this.capture,this.captureOrOptions=r,this.once=i,t.element.addEventListener(e,this,r),t._enqueueHandler(this)}return t.prototype.handleEvent=function(t){(0,this.handler)(t),this.once&&this.dispose()},t.prototype.dispose=function(){this.owner.element.removeEventListener(this.eventName,this,this.captureOrOptions),this.owner._dequeueHandler(this),this.owner=this.handler=null},t}(),$=function(){function t(){this.dependencies={}}return t.prototype.addDependency=function(t){this.dependencies[t]=!0},t.prototype.hasDependency=function(t){return t in this.dependencies},t}(),W=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.targetShadowDOM=t,this.compileSurrogate=e,this.associatedModuleId=null};W.normal=new W;var Q=function(){function t(){}return t.enhance=function(){var e=new t;return e.enhance=!0,e},t.unitTest=function(e,n){var r=new t;return r.type=e,r.attributes=n||{},r},t.element=function(e,n){var r=new t;return r.type=n,r.attributes={},r.anchorIsContainer=!(e.hasAttribute("containerless")||n.containerless),r.initiatedByBehavior=!0,r},t.attribute=function(e,n){var r=new t;return r.attrName=e,r.type=n||null,r.attributes={},r},t.dynamic=function(e,n,r){var i=new t;return i.host=e,i.viewModel=n,i.viewFactory=r,i.inheritBindingContext=!0,i},t}(),K=Q.prototype;K.initiatedByBehavior=!1,K.enhance=!1,K.partReplacements=null,K.viewFactory=null,K.originalAttrName=null,K.skipContentProcessing=!1,K.contentFactory=null,K.viewModel=null,K.anchorIsContainer=!1,K.host=null,K.attributes=null,K.type=null,K.attrName=null,K.inheritBindingContext=!1,Q.normal=new Q;var J=(a=o=function(){function t(){}return t.shadowSlot=function(e){var n=new t;return n.parentInjectorId=e,n.shadowSlot=!0,n},t.contentExpression=function(e){var n=new t;return n.contentExpression=e,n},t.letElement=function(e){var n=new t;return n.expressions=e,n.letElement=!0,n},t.lifting=function(e,n){var r=new t;return r.parentInjectorId=e,r.expressions=t.noExpressions,r.behaviorInstructions=[n],r.viewFactory=n.viewFactory,r.providers=[n.type.target],r.lifting=!0,r},t.normal=function(e,n,r,i,o,a){var s=new t;return s.injectorId=e,s.parentInjectorId=n,s.providers=r,s.behaviorInstructions=i,s.expressions=o,s.anchorIsContainer=!a||a.anchorIsContainer,s.elementInstruction=a,s},t.surrogate=function(e,n,r,i){var o=new t;return o.expressions=r,o.behaviorInstructions=n,o.providers=e,o.values=i,o},t}(),o.noExpressions=Object.freeze([]),a),X=J.prototype;X.injectorId=null,X.parentInjectorId=null,X.shadowSlot=!1,X.slotName=null,X.slotFallbackFactory=null,X.contentExpression=null,X.letElement=!1,X.expressions=null,X.expressions=null,X.providers=null,X.viewFactory=null,X.anchorIsContainer=!1,X.elementInstruction=null,X.lifting=!1,X.values=null;var Y=k.d.create("aurelia:view-strategy",{validate:function(t){return"function"==typeof t.loadViewFactory||"View strategies must implement: loadViewFactory(viewEngine: ViewEngine, compileInstruction: ViewCompileInstruction, loadContext?: ResourceLoadContext): Promise<ViewFactory>"},compose:function(t){"function"!=typeof t.makeRelativeTo&&(t.makeRelativeTo=A.d.noop)}}),Z=Y()(s=function(){function t(t){this.path=t,this.absolutePath=null}return t.prototype.loadViewFactory=function(t,e,n,r){return null===this.absolutePath&&this.moduleId&&(this.absolutePath=Object(I.d)(this.path,this.moduleId)),e.associatedModuleId=this.moduleId,t.loadViewFactory(this.absolutePath||this.path,e,n,r)},t.prototype.makeRelativeTo=function(t){null===this.absolutePath&&(this.absolutePath=Object(I.d)(this.path,t))},t}())||s,tt=Y()(c=function(){function t(t,e){this.moduleId=e.moduleId,this.viewUrl=t.convertOriginToViewUrl(e)}return t.prototype.loadViewFactory=function(t,e,n,r){return e.associatedModuleId=this.moduleId,t.loadViewFactory(this.viewUrl,e,n,r)},t}())||c,et=Y()(u=function(){function e(t,e){this.dependencies=t||null,this.dependencyBaseUrl=e||""}return e.prototype.loadViewFactory=function(e,n,r,i){var o=this.entry,a=this.dependencies;if(o&&o.factoryIsReady)return t.resolve(null);if(this.entry=o=new T.b(this.moduleId||this.dependencyBaseUrl),o.dependencies=[],o.templateIsLoaded=!0,null!==a)for(var s=0,c=a.length;s<c;++s){var u=a[s];"string"==typeof u||"function"==typeof u?o.addDependency(u):o.addDependency(u.from,u.as)}return n.associatedModuleId=this.moduleId,e.loadViewFactory(o,n,r,i)},e}())||u,nt=Y()(l=function(){function e(t,e){this.moduleId=t,this.entry=e}return e.prototype.loadViewFactory=function(e,n,r,i){var o=this.entry;return o.factoryIsReady?t.resolve(o.factory):(n.associatedModuleId=this.moduleId,e.loadViewFactory(o,n,r,i))},e}())||l,rt=Y()(h=function(){function e(t,e,n){this.markup=t,this.dependencies=e||null,this.dependencyBaseUrl=n||""}return e.prototype.loadViewFactory=function(e,n,r,i){var o=this.entry,a=this.dependencies;if(o&&o.factoryIsReady)return t.resolve(o.factory);if(this.entry=o=new T.b(this.moduleId||this.dependencyBaseUrl),o.template=A.b.createTemplateFromMarkup(this.markup),null!==a)for(var s=0,c=a.length;s<c;++s){var u=a[s];"string"==typeof u||"function"==typeof u?o.addDependency(u):o.addDependency(u.from,u.as)}return n.associatedModuleId=this.moduleId,e.loadViewFactory(o,n,r,i)},e}())||h,it=Y()(d=function(){function e(t){("string"==typeof t||t instanceof A.b.Element&&"TEMPLATE"===t.tagName)&&(t={template:t}),this.template=t.template,this.dependencies=t.dependencies||[],this.factoryIsReady=!1,this.onReady=null,this.moduleId="undefined"}return e.prototype.loadViewFactory=function(e,n,r,i){var o=this;if(this.factoryIsReady)return t.resolve(this.factory);var a=this.dependencies;return a=(a="function"==typeof a?a():a)||[],a=Array.isArray(a)?a:[a],t.all(a).then((function(r){var a=e.container,s=e.appResources,c=e.viewCompiler,u=new vt(s),l=void 0,h=[];i&&u.autoRegister(a,i);var d=r,p=Array.isArray(d),f=0;for(d=p?d:d[Symbol.iterator]();;){var v;if(p){if(f>=d.length)break;v=d[f++]}else{if((f=d.next()).done)break;v=f.value}var g=v;if("function"==typeof g)null!==(l=u.autoRegister(a,g)).elementName&&h.push(l);else{if(!g||"object"!==(void 0===g?"undefined":j(g)))throw new Error('dependency neither function nor object. Received: "'+(void 0===g?"undefined":j(g))+'"');for(var y in g){var m=g[y];"function"==typeof m&&null!==(l=u.autoRegister(a,m)).elementName&&h.push(l)}}}return t.all(h.map((function(t){return t.load(a,t.target)}))).then((function(){var t=null!==o.template?c.compile(o.template,u,n):null;return o.factoryIsReady=!0,o.factory=t,t}))}))},e}())||d,ot=(f=p=function(){function t(){}return t.prototype.getViewStrategy=function(e){if(!e)return null;if("object"===(void 0===e?"undefined":j(e))&&"getViewStrategy"in e){var n=k.a.get(e.constructor);return"string"==typeof(e=e.getViewStrategy())&&(e=new Z(e)),Y.assert(e),n.moduleId&&e.makeRelativeTo(n.moduleId),e}if("string"==typeof e&&(e=new Z(e)),Y.validate(e))return e;if("function"!=typeof e&&(e=e.constructor),"$view"in e){var r=e.$view,i=void 0;return i=null===(r="function"==typeof r?r.call(e):r)?new et:r instanceof it?r:new it(r),k.b.define(t.viewStrategyMetadataKey,i,e),i}var o=k.a.get(e),a=k.b.get(t.viewStrategyMetadataKey,e);if(a)o.moduleId&&(a.moduleId=o.moduleId);else{if(!o.moduleId)throw new Error("Cannot determine default view strategy for object.",e);a=this.createFallbackViewStrategy(o)}return a},t.prototype.createFallbackViewStrategy=function(t){return new tt(this,t)},t.prototype.convertOriginToViewUrl=function(t){var e=t.moduleId;return(e.endsWith(".js")||e.endsWith(".ts")?e.substring(0,e.length-3):e)+".html"},t}(),p.viewStrategyMetadataKey="aurelia:view-strategy",f);function at(t){throw new Error("BindingLanguage must implement "+t+"().")}var st=function(){function t(){}return t.prototype.inspectAttribute=function(t,e,n,r){at("inspectAttribute")},t.prototype.createAttributeInstruction=function(t,e,n,r){at("createAttributeInstruction")},t.prototype.createLetExpressions=function(t,e){at("createLetExpressions")},t.prototype.inspectTextContent=function(t,e){at("inspectTextContent")},t}(),ct=Object.freeze([]),ut=function(){function t(t){this.element=t,this.element.auSlotAttribute=this}return t.inject=function(){return[A.b.Element]},t.prototype.valueChanged=function(t,e){},t}(),lt=function(){function t(t,e,n,r){this.anchor=t,this.anchor.viewSlot=this,this.name=e,this.destinationName=n,this.fallbackFactory=r,this.destinationSlot=null,this.projections=0,this.contentView=null,new ut(this.anchor).value=this.destinationName}return t.prototype.renderFallbackContent=function(t,e,n,r){if(null===this.contentView){this.contentView=this.fallbackFactory.create(this.ownerView.container),this.contentView.bind(this.ownerView.bindingContext,this.ownerView.overrideContext);var i=Object.create(null);i[this.destinationSlot.name]=this.destinationSlot,dt.distributeView(this.contentView,i,n,r,this.destinationSlot.name)}},t.prototype.passThroughTo=function(t){this.destinationSlot=t},t.prototype.addNode=function(e,n,r,i){null!==this.contentView&&(this.contentView.removeNodes(),this.contentView.detached(),this.contentView.unbind(),this.contentView=null),n.viewSlot instanceof t?n.viewSlot.passThroughTo(this):(this.projections++,this.destinationSlot.addNode(e,n,r,i))},t.prototype.removeView=function(t,e){this.projections--,this.destinationSlot.removeView(t,e),this.needsFallbackRendering&&this.renderFallbackContent(null,ct,e)},t.prototype.removeAll=function(t){this.projections=0,this.destinationSlot.removeAll(t),this.needsFallbackRendering&&this.renderFallbackContent(null,ct,t)},t.prototype.projectFrom=function(t,e){this.destinationSlot.projectFrom(t,e)},t.prototype.created=function(t){this.ownerView=t},t.prototype.bind=function(t){this.contentView&&this.contentView.bind(t.bindingContext,t.overrideContext)},t.prototype.attached=function(){this.contentView&&this.contentView.attached()},t.prototype.detached=function(){this.contentView&&this.contentView.detached()},t.prototype.unbind=function(){this.contentView&&this.contentView.unbind()},L(t,[{key:"needsFallbackRendering",get:function(){return this.fallbackFactory&&0===this.projections}}]),t}(),ht=function(){function t(t,e,n){this.anchor=t,this.anchor.isContentProjectionSource=!0,this.anchor.viewSlot=this,this.name=e,this.fallbackFactory=n,this.contentView=null,this.projections=0,this.children=[],this.projectFromAnchors=null,this.destinationSlots=null}return t.prototype.addNode=function(t,e,n,r,i){if(null!==this.contentView&&(this.contentView.removeNodes(),this.contentView.detached(),this.contentView.unbind(),this.contentView=null),e.viewSlot instanceof lt)e.viewSlot.passThroughTo(this);else if(null!==this.destinationSlots)dt.distributeNodes(t,[e],this.destinationSlots,this,r);else{e.auOwnerView=t,e.auProjectionSource=n,e.auAssignedSlot=this;var o=this._findAnchor(t,e,n,r);o.parentNode.insertBefore(e,o),this.children.push(e),this.projections++}},t.prototype.removeView=function(t,e){if(null!==this.destinationSlots)dt.undistributeView(t,this.destinationSlots,this);else if(this.contentView&&this.contentView.hasSlots)dt.undistributeView(t,this.contentView.slots,e);else{var n=this.children.find((function(t){return t.auSlotProjectFrom===e}));if(n){for(var r=n.auProjectionChildren,i=0,o=r.length;i<o;++i){var a=r[i];a.auOwnerView===t&&(r.splice(i,1),t.fragment.appendChild(a),i--,o--,this.projections--)}this.needsFallbackRendering&&this.renderFallbackContent(t,ct,e)}}},t.prototype.removeAll=function(t){if(null!==this.destinationSlots)dt.undistributeAll(this.destinationSlots,this);else if(this.contentView&&this.contentView.hasSlots)dt.undistributeAll(this.contentView.slots,t);else{var e=this.children.find((function(e){return e.auSlotProjectFrom===t}));if(e){for(var n=e.auProjectionChildren,r=0,i=n.length;r<i;++r){var o=n[r];o.auOwnerView.fragment.appendChild(o),this.projections--}e.auProjectionChildren=[],this.needsFallbackRendering&&this.renderFallbackContent(null,ct,t)}}},t.prototype._findAnchor=function(t,e,n,r){if(n){var i=this.children.find((function(t){return t.auSlotProjectFrom===n}));if(i){if(void 0!==r)for(var o=i.auProjectionChildren,a=-1,s=void 0,c=0,u=o.length;c<u;++c){var l=o[c];if(l.auOwnerView!==s&&(a++,s=l.auOwnerView,a>=r&&s!==t))return o.splice(c,0,e),l}return i.auProjectionChildren.push(e),i}}return this.anchor},t.prototype.projectTo=function(t){this.destinationSlots=t},t.prototype.projectFrom=function(t,e){var n=A.b.createComment("anchor"),r=this.anchor.parentNode;n.auSlotProjectFrom=e,n.auOwnerView=t,n.auProjectionChildren=[],r.insertBefore(n,this.anchor),this.children.push(n),null===this.projectFromAnchors&&(this.projectFromAnchors=[]),this.projectFromAnchors.push(n)},t.prototype.renderFallbackContent=function(t,e,n,r){if(null===this.contentView&&(this.contentView=this.fallbackFactory.create(this.ownerView.container),this.contentView.bind(this.ownerView.bindingContext,this.ownerView.overrideContext),this.contentView.insertNodesBefore(this.anchor)),this.contentView.hasSlots){var i=this.contentView.slots,o=this.projectFromAnchors;if(null!==o)for(var a in i)for(var s=i[a],c=0,u=o.length;c<u;++c){var l=o[c];s.projectFrom(l.auOwnerView,l.auSlotProjectFrom)}this.fallbackSlots=i,dt.distributeNodes(t,e,i,n,r)}},t.prototype.created=function(t){this.ownerView=t},t.prototype.bind=function(t){this.contentView&&this.contentView.bind(t.bindingContext,t.overrideContext)},t.prototype.attached=function(){this.contentView&&this.contentView.attached()},t.prototype.detached=function(){this.contentView&&this.contentView.detached()},t.prototype.unbind=function(){this.contentView&&this.contentView.unbind()},L(t,[{key:"needsFallbackRendering",get:function(){return this.fallbackFactory&&0===this.projections}}]),t}(),dt=(g=v=function(){function t(){}return t.getSlotName=function(e){return void 0===e.auSlotAttribute?t.defaultSlotKey:e.auSlotAttribute.value},t.distributeView=function(e,n,r,i,o){var a=void 0;if(null===e)a=ct;else{var s=e.fragment.childNodes,c=s.length;a=new Array(c);for(var u=0;u<c;++u)a[u]=s[u]}t.distributeNodes(e,a,n,r,i,o)},t.undistributeView=function(t,e,n){for(var r in e)e[r].removeView(t,n)},t.undistributeAll=function(t,e){for(var n in t)t[n].removeAll(e)},t.distributeNodes=function(e,n,r,i,o,a){for(var s=0,c=n.length;s<c;++s){var u=n[s],l=u.nodeType;if(u.isContentProjectionSource){for(var h in u.viewSlot.projectTo(r),r)r[h].projectFrom(e,u.viewSlot);n.splice(s,1),c--,s--}else if(1===l||3===l||u.viewSlot instanceof lt)if(3===l&&G(u))n.splice(s,1),c--,s--;else{var d=r[a||t.getSlotName(u)];d&&(d.addNode(e,u,i,o),n.splice(s,1),c--,s--)}else n.splice(s,1),c--,s--}for(var p in r){var f=r[p];f.needsFallbackRendering&&f.renderFallbackContent(e,n,i,o)}},t}(),v.defaultSlotKey="__au-default-slot-key__",g);function pt(t,e,n,r){if(e){var i=t[e];if(i){if(i!==n)throw new Error("Attempted to register "+r+" when one with the same name already exists. Name: "+e+".")}else t[e]=n}}function ft(t,e){if(/[A-Z]/.test(t)){var n=q(t);return S.getLogger("templating").warn("'"+t+"' is not a valid "+e+" name and has been converted to '"+n+"'. Upper-case letters are not allowed because the DOM is not case-sensitive."),n}return t}var vt=function(){function t(t,e){this.bindingLanguage=null,this.parent=t||null,this.hasParent=null!==this.parent,this.viewUrl=e||"",this.lookupFunctions={valueConverters:this.getValueConverter.bind(this),bindingBehaviors:this.getBindingBehavior.bind(this)},this.attributes=Object.create(null),this.elements=Object.create(null),this.valueConverters=Object.create(null),this.bindingBehaviors=Object.create(null),this.attributeMap=Object.create(null),this.values=Object.create(null),this.beforeCompile=this.afterCompile=this.beforeCreate=this.afterCreate=this.beforeBind=this.beforeUnbind=!1}return t.convention=function(t,e){var n=void 0;if(e&&"__au_resource__"in e)return e;if("$resource"in t){var r=t.$resource;if("string"==typeof r)(n=e||new Qt).__au_resource__=!0,n.elementName||(n.elementName=ft(r,"custom element"));else{"function"==typeof r&&(r=r.call(t)),"string"==typeof r&&(r={name:r});var i=(r=Object.assign({},r)).type||"element",o=r.name;switch(i){case"element":case"attribute":(n=e||new Qt).__au_resource__=!0,"element"===i?n.elementName||(n.elementName=o?ft(o,"custom element"):q(t.name)):n.attributeName||(n.attributeName=o?ft(o,"custom attribute"):q(t.name)),"templateController"in r&&(r.liftsContent=r.templateController,delete r.templateController),"defaultBindingMode"in r&&void 0!==n.attributeDefaultBindingMode&&(r.attributeDefaultBindingMode=r.defaultBindingMode,delete r.defaultBindingMode),delete r.name,Object.assign(n,r);break;case"valueConverter":n=new R.o(Object(R.r)(o||t.name));break;case"bindingBehavior":n=new R.b(Object(R.r)(o||t.name));break;case"viewEngineHooks":n=new U}}if(n instanceof Qt){var a="string"==typeof r?void 0:r.bindables,s=n.properties;if(Array.isArray(a))for(var c=0,u=a.length;u>c;++c){var l=a[c];if(!l||"string"!=typeof l&&!l.name)throw new Error('Invalid bindable property at "'+c+'" for class "'+t.name+'". Expected either a string or an object with "name" property.');for(var h=new Ht(l),d=!1,p=0,f=s.length;f>p;++p)if(s[p].name===h.name){d=!0;break}d||h.registerWith(t,n)}}}return n},t.prototype._tryAddHook=function(t,e){if("function"==typeof t[e]){for(var n=t[e].bind(t),r=1,i=void 0;void 0!==this[i=e+r.toString()];)r++;this[e]=!0,this[i]=n}},t.prototype._invokeHook=function(t,e,n,r,i){if(this.hasParent&&this.parent._invokeHook(t,e,n,r,i),this[t]){this[t+"1"](e,n,r,i);var o=t+"2";if(this[o]&&(this[o](e,n,r,i),this[o=t+"3"])){this[o](e,n,r,i);for(var a=4;void 0!==this[o=t+a.toString()];)this[o](e,n,r,i),a++}}},t.prototype.registerViewEngineHooks=function(t){this._tryAddHook(t,"beforeCompile"),this._tryAddHook(t,"afterCompile"),this._tryAddHook(t,"beforeCreate"),this._tryAddHook(t,"afterCreate"),this._tryAddHook(t,"beforeBind"),this._tryAddHook(t,"beforeUnbind")},t.prototype.getBindingLanguage=function(t){return this.bindingLanguage||(this.bindingLanguage=t)},t.prototype.patchInParent=function(t){var e=this.parent;this.parent=t||null,this.hasParent=null!==this.parent,null===t.parent&&(t.parent=e,t.hasParent=null!==e)},t.prototype.relativeToView=function(t){return Object(I.d)(t,this.viewUrl)},t.prototype.registerElement=function(t,e){pt(this.elements,t,e,"an Element")},t.prototype.getElement=function(t){return this.elements[t]||(this.hasParent?this.parent.getElement(t):null)},t.prototype.mapAttribute=function(t){return this.attributeMap[t]||(this.hasParent?this.parent.mapAttribute(t):null)},t.prototype.registerAttribute=function(t,e,n){this.attributeMap[t]=n,pt(this.attributes,t,e,"an Attribute")},t.prototype.getAttribute=function(t){return this.attributes[t]||(this.hasParent?this.parent.getAttribute(t):null)},t.prototype.registerValueConverter=function(t,e){pt(this.valueConverters,t,e,"a ValueConverter")},t.prototype.getValueConverter=function(t){return this.valueConverters[t]||(this.hasParent?this.parent.getValueConverter(t):null)},t.prototype.registerBindingBehavior=function(t,e){pt(this.bindingBehaviors,t,e,"a BindingBehavior")},t.prototype.getBindingBehavior=function(t){return this.bindingBehaviors[t]||(this.hasParent?this.parent.getBindingBehavior(t):null)},t.prototype.registerValue=function(t,e){pt(this.values,t,e,"a value")},t.prototype.getValue=function(t){return this.values[t]||(this.hasParent?this.parent.getValue(t):null)},t.prototype.autoRegister=function(e,n){var r=k.b.getOwn(k.b.resource,n);return r?r instanceof Qt&&(t.convention(n,r),null===r.attributeName&&null===r.elementName&&Qt.convention(n.name,r),null===r.attributeName&&null===r.elementName&&(r.elementName=q(n.name))):((r=t.convention(n)||Qt.convention(n.name)||R.o.convention(n.name)||R.b.convention(n.name)||U.convention(n.name))||((r=new Qt).elementName=q(n.name)),k.b.define(k.b.resource,r,n)),r.initialize(e,n),r.register(this),r},t}(),gt=function(){function t(t,e,n,r,i,o,a){for(var s in this.container=t,this.viewFactory=e,this.resources=e.resources,this.fragment=n,this.firstChild=n.firstChild,this.lastChild=n.lastChild,this.controllers=r,this.bindings=i,this.children=o,this.slots=a,this.hasSlots=!1,this.fromCache=!1,this.isBound=!1,this.isAttached=!1,this.bindingContext=null,this.overrideContext=null,this.controller=null,this.viewModelScope=null,this.animatableElement=void 0,this._isUserControlled=!1,this.contentView=null,a){this.hasSlots=!0;break}}return t.prototype.returnToCache=function(){this.viewFactory.returnViewToCache(this)},t.prototype.created=function(){var t,e=void 0,n=this.controllers;for(e=0,t=n.length;e<t;++e)n[e].created(this)},t.prototype.bind=function(t,e,n){var r=void 0,i=void 0,o=void 0,a=void 0,s=void 0;if(!n||!this._isUserControlled){if(this.isBound){if(this.bindingContext===t)return;this.unbind()}for(this.isBound=!0,this.bindingContext=t,this.overrideContext=e||Object(R.t)(t),this.resources._invokeHook("beforeBind",this),a=0,s=(i=this.bindings).length;a<s;++a)i[a].bind(this);for(null!==this.viewModelScope&&(t.bind(this.viewModelScope.bindingContext,this.viewModelScope.overrideContext),this.viewModelScope=null),a=0,s=(r=this.controllers).length;a<s;++a)r[a].bind(this);for(a=0,s=(o=this.children).length;a<s;++a)o[a].bind(t,e,!0);this.hasSlots&&dt.distributeView(this.contentView,this.slots)}},t.prototype.addBinding=function(t){this.bindings.push(t),this.isBound&&t.bind(this)},t.prototype.unbind=function(){var t=void 0,e=void 0,n=void 0,r=void 0,i=void 0;if(this.isBound){for(this.isBound=!1,this.resources._invokeHook("beforeUnbind",this),null!==this.controller&&this.controller.unbind(),r=0,i=(e=this.bindings).length;r<i;++r)e[r].unbind();for(r=0,i=(t=this.controllers).length;r<i;++r)t[r].unbind();for(r=0,i=(n=this.children).length;r<i;++r)n[r].unbind();this.bindingContext=null,this.overrideContext=null}},t.prototype.insertNodesBefore=function(t){t.parentNode.insertBefore(this.fragment,t)},t.prototype.appendNodesTo=function(t){t.appendChild(this.fragment)},t.prototype.removeNodes=function(){for(var t=this.fragment,e=this.firstChild,n=this.lastChild,r=void 0;e&&(r=e.nextSibling,t.appendChild(e),e!==n);)e=r},t.prototype.attached=function(){var t=void 0,e=void 0,n=void 0,r=void 0;if(!this.isAttached){for(this.isAttached=!0,null!==this.controller&&this.controller.attached(),n=0,r=(t=this.controllers).length;n<r;++n)t[n].attached();for(n=0,r=(e=this.children).length;n<r;++n)e[n].attached()}},t.prototype.detached=function(){var t=void 0,e=void 0,n=void 0,r=void 0;if(this.isAttached){for(this.isAttached=!1,null!==this.controller&&this.controller.detached(),n=0,r=(t=this.controllers).length;n<r;++n)t[n].detached();for(n=0,r=(e=this.children).length;n<r;++n)e[n].detached()}},t}();function yt(t){if(void 0!==t.animatableElement)return t.animatableElement;for(var e=t.firstChild;e&&1!==e.nodeType;)e=e.nextSibling;return e&&1===e.nodeType?t.animatableElement=e.classList.contains("au-animate")?e:null:t.animatableElement=null}var mt=function(){function e(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:B.instance;this.anchor=t,this.anchorIsContainer=e,this.bindingContext=null,this.overrideContext=null,this.animator=n,this.children=[],this.isBound=!1,this.isAttached=!1,this.contentSelectors=null,t.viewSlot=this,t.isContentProjectionSource=!1}return e.prototype.animateView=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"enter",n=yt(t);if(null!==n)switch(e){case"enter":return this.animator.enter(n);case"leave":return this.animator.leave(n);default:throw new Error("Invalid animation direction: "+e)}},e.prototype.transformChildNodesIntoView=function(){var t=this.anchor;this.children.push({fragment:t,firstChild:t.firstChild,lastChild:t.lastChild,returnToCache:function(){},removeNodes:function(){for(var e=void 0;e=t.lastChild;)t.removeChild(e)},created:function(){},bind:function(){},unbind:function(){},attached:function(){},detached:function(){}})},e.prototype.bind=function(t,e){var n,r=void 0,i=void 0;if(this.isBound){if(this.bindingContext===t)return;this.unbind()}for(this.isBound=!0,this.bindingContext=t=t||this.bindingContext,this.overrideContext=e=e||this.overrideContext,r=0,n=(i=this.children).length;r<n;++r)i[r].bind(t,e,!0)},e.prototype.unbind=function(){if(this.isBound){var t,e=void 0,n=this.children;for(this.isBound=!1,this.bindingContext=null,this.overrideContext=null,e=0,t=n.length;e<t;++e)n[e].unbind()}},e.prototype.add=function(t){if(this.anchorIsContainer?t.appendNodesTo(this.anchor):t.insertNodesBefore(this.anchor),this.children.push(t),this.isAttached)return t.attached(),this.animateView(t,"enter")},e.prototype.insert=function(t,e){var n=this.children,r=n.length;return 0===t&&0===r||t>=r?this.add(e):(e.insertNodesBefore(n[t].firstChild),n.splice(t,0,e),this.isAttached?(e.attached(),this.animateView(e,"enter")):void 0)},e.prototype.move=function(t,e){if(t!==e){var n=this.children,r=n[t];r.removeNodes(),r.insertNodesBefore(n[e].firstChild),n.splice(t,1),n.splice(e,0,r)}},e.prototype.remove=function(t,e,n){return this.removeAt(this.children.indexOf(t),e,n)},e.prototype.removeMany=function(e,n,r){var i=this,o=this.children,a=e.length,s=void 0,c=[];e.forEach((function(t){if(r)t.removeNodes();else{var e=i.animateView(t,"leave");e?c.push(e.then((function(){return t.removeNodes()}))):t.removeNodes()}}));var u=function(){if(i.isAttached)for(s=0;s<a;++s)e[s].detached();if(n)for(s=0;s<a;++s)e[s].returnToCache();for(s=0;s<a;++s){var t=o.indexOf(e[s]);t>=0&&o.splice(t,1)}};return c.length>0?t.all(c).then((function(){return u()})):u()},e.prototype.removeAt=function(t,e,n){var r=this,i=this.children[t],o=function(){return t=r.children.indexOf(i),i.removeNodes(),r.children.splice(t,1),r.isAttached&&i.detached(),e&&i.returnToCache(),i};if(!n){var a=this.animateView(i,"leave");if(a)return a.then((function(){return o()}))}return o()},e.prototype.removeAll=function(e,n){var r=this,i=this.children,o=i.length,a=void 0,s=[];i.forEach((function(t){if(n)t.removeNodes();else{var e=r.animateView(t,"leave");e?s.push(e.then((function(){return t.removeNodes()}))):t.removeNodes()}}));var c=function(){if(r.isAttached)for(a=0;a<o;++a)i[a].detached();if(e)for(a=0;a<o;++a){var t=i[a];t&&t.returnToCache()}r.children=[]};return s.length>0?t.all(s).then((function(){return c()})):c()},e.prototype.attached=function(){var t,e,n=void 0,r=void 0;if(!this.isAttached)for(this.isAttached=!0,n=0,t=(e=this.children).length;n<t;++n)(r=e[n]).attached(),this.animateView(r,"enter")},e.prototype.detached=function(){var t=void 0,e=void 0,n=void 0;if(this.isAttached)for(this.isAttached=!1,t=0,e=(n=this.children).length;t<e;++t)n[t].detached()},e.prototype.projectTo=function(t){var e=this;this.projectToSlots=t,this.add=this._projectionAdd,this.insert=this._projectionInsert,this.move=this._projectionMove,this.remove=this._projectionRemove,this.removeAt=this._projectionRemoveAt,this.removeMany=this._projectionRemoveMany,this.removeAll=this._projectionRemoveAll,this.children.forEach((function(n){return dt.distributeView(n,t,e)}))},e.prototype._projectionAdd=function(t){dt.distributeView(t,this.projectToSlots,this),this.children.push(t),this.isAttached&&t.attached()},e.prototype._projectionInsert=function(t,e){0===t&&!this.children.length||t>=this.children.length?this.add(e):(dt.distributeView(e,this.projectToSlots,this,t),this.children.splice(t,0,e),this.isAttached&&e.attached())},e.prototype._projectionMove=function(t,e){if(t!==e){var n=this.children,r=n[t];dt.undistributeView(r,this.projectToSlots,this),dt.distributeView(r,this.projectToSlots,this,e),n.splice(t,1),n.splice(e,0,r)}},e.prototype._projectionRemove=function(t,e){dt.undistributeView(t,this.projectToSlots,this),this.children.splice(this.children.indexOf(t),1),this.isAttached&&t.detached(),e&&t.returnToCache()},e.prototype._projectionRemoveAt=function(t,e){var n=this.children[t];dt.undistributeView(n,this.projectToSlots,this),this.children.splice(t,1),this.isAttached&&n.detached(),e&&n.returnToCache()},e.prototype._projectionRemoveMany=function(t,e){var n=this;t.forEach((function(t){return n.remove(t,e)}))},e.prototype._projectionRemoveAll=function(t){dt.undistributeAll(this.projectToSlots,this);for(var e=this.children,n=e.length,r=0;r<n;++r)t?e[r].returnToCache():this.isAttached&&e[r].detached();this.children=[]},e}(),bt=new(Object(O.d)(y=function(){function t(){}return t.prototype.get=function(t,e){var n=e.__providerId__;return n in t?t[n]:t[n]=t.invoke(e)},t}())||y);function wt(t){if(t===A.b.Element)return this.element;if(t===At){if(this.boundViewFactory)return this.boundViewFactory;var e=this.instruction.viewFactory,n=this.partReplacements;return n&&(e=n[e.part]||e),this.boundViewFactory=new At(this,e,n),this.boundViewFactory}return t===mt?(void 0===this.viewSlot&&(this.viewSlot=new mt(this.element,this.instruction.anchorIsContainer),this.element.isContentProjectionSource=this.instruction.lifting,this.children.push(this.viewSlot)),this.viewSlot):t===H?this.elementEvents||(this.elementEvents=new H(this.element)):t===P?this.compositionTransaction||(this.compositionTransaction=this.parent.get(t)):t===vt?this.viewResources:t===J?this.instruction:this.superGet(t)}function _t(t){return this._element.hasAttribute(t)}function xt(t){return this._element.getAttribute(t)}function Et(t,e){this._element.setAttribute(t,e)}function Ct(t,e,n,r,i,o,a,s,c){var u=n.behaviorInstructions,l=n.expressions,h=void 0,d=void 0,p=void 0,f=void 0,v=void 0;if(n.contentExpression)return i.push(n.contentExpression.createBinding(e.nextSibling)),e.nextSibling.auInterpolationTarget=!0,void e.parentNode.removeChild(e);if(n.shadowSlot){var g=A.b.createComment("slot"),y=void 0;return y=n.slotDestination?new lt(g,n.slotName,n.slotDestination,n.slotFallbackFactory):new ht(g,n.slotName,n.slotFallbackFactory),A.b.replaceNode(g,e),a[n.slotName]=y,void r.push(y)}if(n.letElement){for(d=0,p=l.length;d<p;++d)i.push(l[d].createBinding());e.parentNode.removeChild(e)}else{if(u.length)for(n.anchorIsContainer||(e=function(t,e){var n=A.b.createComment("anchor");if(e){var r=t.firstChild;r&&"AU-CONTENT"===r.tagName&&(n.contentElement=r),n._element=t,n.hasAttribute=_t,n.getAttribute=xt,n.setAttribute=Et}return A.b.replaceNode(n,t),n}(e,n.elementInstruction)),t[n.injectorId]=h=function(t,e,n,r,i,o){var a,s=t.createChild(),c=void 0;for(s.element=e,s.instruction=n,s.children=r,s.viewResources=o,s.partReplacements=i,c=(a=n.providers).length;c--;)s._resolvers.set(a[c],bt);return s.superGet=s.get,s.get=wt,s}(t[n.parentInjectorId],e,n,o,s,c),d=0,p=u.length;d<p;++d)v=(f=u[d]).type.create(h,f,e,i),r.push(v);for(d=0,p=l.length;d<p;++d)i.push(l[d].createBinding(e))}}function St(t,e){var n=t.split(";"),r=void 0,i=void 0,o=void 0,a=void 0,s=void 0;for(e=e||{},i=0;i<n.length;i++)r=(o=n[i]).indexOf(":"),a=o.substring(0,r).trim(),s=o.substring(r+1).trim(),e[a]=s;return e}function kt(t){var e="";for(var n in t)e+=n+":"+t[n]+";";return e}var At=function(){function t(t,e,n){this.parentContainer=t,this.viewFactory=e,this.factoryCreateInstruction={partReplacements:n}}return t.prototype.create=function(){var t=this.viewFactory.create(this.parentContainer.createChild(),this.factoryCreateInstruction);return t._isUserControlled=!0,t},t.prototype.setCacheSize=function(t,e){this.viewFactory.setCacheSize(t,e)},t.prototype.getCachedView=function(){return this.viewFactory.getCachedView()},t.prototype.returnViewToCache=function(t){this.viewFactory.returnViewToCache(t)},L(t,[{key:"isCaching",get:function(){return this.viewFactory.isCaching}}]),t}(),Tt=function(){function t(t,e,n){this.isCaching=!1,this.template=t,this.instructions=e,this.resources=n,this.cacheSize=-1,this.cache=null}return t.prototype.setCacheSize=function(t,e){t&&("*"===t?t=Number.MAX_VALUE:"string"==typeof t&&(t=parseInt(t,10))),-1!==this.cacheSize&&e||(this.cacheSize=t),this.cacheSize>0?this.cache=[]:this.cache=null,this.isCaching=this.cacheSize>0},t.prototype.getCachedView=function(){return null!==this.cache&&this.cache.pop()||null},t.prototype.returnViewToCache=function(t){t.isAttached&&t.detached(),t.isBound&&t.unbind(),null!==this.cache&&this.cache.length<this.cacheSize&&(t.fromCache=!0,this.cache.push(t))},t.prototype.create=function(t,e,n){e=e||Q.normal;var r=this.getCachedView();if(null!==r)return r;var i,o=e.enhance?this.template:this.template.cloneNode(!0),a=o.querySelectorAll(".au-target"),s=this.instructions,c=this.resources,u=[],l=[],h=[],d=Object.create(null),p={root:t},f=e.partReplacements,v=void 0,g=void 0,y=void 0,m=void 0;for(this.resources._invokeHook("beforeCreate",this,t,o,e),n&&null!==this.surrogateInstruction&&function(t,e,n,r,i,o){var a=n.behaviorInstructions,s=n.expressions,c=n.providers,u=n.values,l=void 0,h=void 0,d=void 0,p=void 0,f=void 0;for(l=c.length;l--;)t._resolvers.set(c[l],bt);for(var v in u)if(f=e.getAttribute(v)){if("class"===v)e.setAttribute("class",f+" "+u[v]);else if("style"===v){var g=St(u[v]);St(f,g),e.setAttribute("style",kt(g))}}else e.setAttribute(v,u[v]);if(a.length)for(l=0,h=a.length;l<h;++l)(p=(d=a[l]).type.create(t,d,e,i)).contentView&&o.push(p.contentView),r.push(p);for(l=0,h=s.length;l<h;++l)i.push(s[l].createBinding(e))}(t,n,this.surrogateInstruction,u,l,h),e.enhance&&o.hasAttribute("au-target-id")&&(m=s[(y=o).getAttribute("au-target-id")],Ct(p,y,m,u,l,h,d,f,c)),v=0,i=a.length;v<i;++v)m=s[(y=a[v]).getAttribute("au-target-id")],Ct(p,y,m,u,l,h,d,f,c);return g=new gt(t,this,o,u,l,h,d),e.initiatedByBehavior||g.created(),this.resources._invokeHook("afterCreate",g),g},t}(),It=0;var Rt=0;function Ot(t){var e=t.getAttribute("class"),n=(++Rt).toString();return t.setAttribute("class",e?e+" au-target":"au-target"),t.setAttribute("au-target-id",n),n}var Nt=st.prototype.createLetExpressions,Lt=Object(O.c)(st,vt)(m=function(){function t(t,e){this.bindingLanguage=t,this.resources=e}return t.prototype.compile=function(t,e,n){e=e||this.resources,n=n||W.normal;var r=void 0,i=void 0,o=void 0;(t="string"==typeof t?A.b.createTemplateFromMarkup(t):t).content?(i=t.getAttribute("part"),o=t.getAttribute("view-cache"),r=A.b.adoptNode(t.content)):r=t,n.targetShadowDOM=n.targetShadowDOM&&A.c.shadowDOM,e._invokeHook("beforeCompile",r,e,n);var a={};this._compileNode(r,e,a,t,"root",!n.targetShadowDOM);var s=r.firstChild;if(s&&1===s.nodeType){var c=s.getAttribute("au-target-id");if(c){var u=a[c];(u.shadowSlot||u.lifting||u.elementInstruction&&!u.elementInstruction.anchorIsContainer)&&r.insertBefore(A.b.createComment("view"),s)}}var l=new Tt(r,a,e);return l.surrogateInstruction=n.compileSurrogate?this._compileSurrogate(t,e):null,l.part=i,o&&l.setCacheSize(o),e._invokeHook("afterCompile",l),l},t.prototype._compileNode=function(t,e,n,r,i,o){switch(t.nodeType){case 1:return this._compileElement(t,e,n,r,i,o);case 3:var a=e.getBindingLanguage(this.bindingLanguage).inspectTextContent(e,t.wholeText);if(a){var s=A.b.createElement("au-marker"),c=Ot(s);for((t.parentNode||r).insertBefore(s,t),t.textContent=" ",n[c]=J.contentExpression(a);t.nextSibling&&3===t.nextSibling.nodeType;)(t.parentNode||r).removeChild(t.nextSibling)}else for(;t.nextSibling&&3===t.nextSibling.nodeType;)t=t.nextSibling;return t.nextSibling;case 11:for(var u=t.firstChild;u;)u=this._compileNode(u,e,n,t,i,o)}return t.nextSibling},t.prototype._compileSurrogate=function(t,e){var n=t.tagName.toLowerCase(),r=t.attributes,i=e.getBindingLanguage(this.bindingLanguage),o=void 0,a=void 0,s=void 0,c=void 0,u=void 0,l=void 0,h=void 0,d=void 0,p=void 0,f=void 0,v=[],g=void 0,y=[],m={},b=!1,w=[];for(c=0,u=r.length;c<u;++c){if(h=(l=r[c]).name,d=l.value,p=i.inspectAttribute(e,n,h,d),(f=e.getAttribute(p.attrName))&&(o=e.mapAttribute(p.attrName))&&(a=f.attributes[o])&&(p.defaultBindingMode=a.defaultBindingMode,p.command||p.expression||(p.command=a.hasOptions?"options":null),p.command&&"options"!==p.command&&f.primaryProperty)){var _=f.primaryProperty;h=p.attrName=_.attribute,p.defaultBindingMode=_.defaultBindingMode}if(s=i.createAttributeInstruction(e,t,p,void 0,f))if(s.alteredAttr&&(f=e.getAttribute(s.attrName)),s.discrete)v.push(s);else if(f){if(s.type=f,this._configureProperties(s,e),f.liftsContent)throw new Error("You cannot place a template controller on a surrogate element.");y.push(s)}else v.push(s.attributes[s.attrName]);else if(f){if((s=Q.attribute(h,f)).attributes[e.mapAttribute(h)]=d,f.liftsContent)throw new Error("You cannot place a template controller on a surrogate element.");y.push(s)}else"id"!==h&&"part"!==h&&"replace-part"!==h&&(b=!0,m[h]=d)}if(v.length||y.length||b){for(c=0,u=y.length;c<u;++c)(s=y[c]).type.compile(this,e,t,s),w.push(s.type.target);for(c=0,u=v.length;c<u;++c)void 0!==(g=v[c]).attrToRemove&&t.removeAttribute(g.attrToRemove);return J.surrogate(w,y,v,m)}return null},t.prototype._compileElement=function(t,e,n,r,i,o){var a=t.tagName.toLowerCase(),s=t.attributes,c=[],u=void 0,l=[],h=[],d=e.getBindingLanguage(this.bindingLanguage),p=void 0,f=void 0,v=void 0,g=void 0,y=void 0,m=void 0,b=void 0,w=void 0,_=void 0,x=void 0,E=void 0,C=void 0,S=void 0,k=void 0,T=void 0,I=void 0;if("slot"===a)return o&&(t=function(t,e,n,r,i){var o=A.b.createElement("au-shadow-slot");A.b.replaceNode(o,n);var a=Ot(o),s=J.shadowSlot(i);if(s.slotName=n.getAttribute("name")||dt.defaultSlotKey,s.slotDestination=n.getAttribute("slot"),n.innerHTML.trim()){for(var c=A.b.createDocumentFragment(),u=void 0;u=n.firstChild;)c.appendChild(u);s.slotFallbackFactory=t.compile(c,e)}return r[a]=s,o}(this,e,t,n,i)),t.nextSibling;if("template"===a){if(!("content"in t))throw new Error("You cannot place a template element within "+t.namespaceURI+" namespace");(f=this.compile(t,e)).part=t.getAttribute("part")}else{if(v=e.getElement(t.getAttribute("as-element")||a),"let"===a&&!v&&d.createLetExpressions!==Nt)return c=d.createLetExpressions(e,t),n[Ot(t)]=J.letElement(c),t.nextSibling;v&&(g=Q.element(t,v),v.processAttributes(this,e,t,s,g),l.push(g))}for(m=0,b=s.length;m<b;++m){if(E=_=(w=s[m]).name,x=w.value,S=d.inspectAttribute(e,a,_,x),o&&"slot"===S.attrName&&(S.attrName=_="au-slot"),y=null,v=e.getAttribute(S.attrName)){if((T=e.mapAttribute(S.attrName))&&(k=v.attributes[T])&&(S.defaultBindingMode=k.defaultBindingMode,S.command||S.expression||(S.command=k.hasOptions?"options":null),S.command&&"options"!==S.command&&v.primaryProperty)){var R=v.primaryProperty;_=S.attrName=R.attribute,S.defaultBindingMode=R.defaultBindingMode}}else g&&(y=g.type.attributes[S.attrName])&&(S.defaultBindingMode=y.defaultBindingMode);if(C=y?d.createAttributeInstruction(e,t,S,g):d.createAttributeInstruction(e,t,S,void 0,v))if(C.alteredAttr&&(v=e.getAttribute(C.attrName)),C.discrete)c.push(C);else if(v){if(C.type=v,this._configureProperties(C,e),v.liftsContent){C.originalAttrName=E,p=C;break}l.push(C)}else y?g.attributes[S.attrName].targetProperty=y.name:c.push(C.attributes[C.attrName]);else if(v){if((C=Q.attribute(_,v)).attributes[e.mapAttribute(_)]=x,v.liftsContent){C.originalAttrName=E,p=C;break}l.push(C)}else y&&(g.attributes[_]=x)}if(p)p.viewFactory=f,n[Ot(t=p.type.compile(this,e,t,p,r))]=J.lifting(i,p);else{var O=!1;if(c.length||l.length){for(I=!!l.length&&++It,m=0,b=l.length;m<b;++m)(C=l[m]).type.compile(this,e,t,C,r),h.push(C.type.target),O=O||C.skipContentProcessing;for(m=0,b=c.length;m<b;++m)void 0!==(u=c[m]).attrToRemove&&t.removeAttribute(u.attrToRemove);n[Ot(t)]=J.normal(I,i,h,l,c,g)}if(O)return t.nextSibling;for(var N=t.firstChild;N;)N=this._compileNode(N,e,n,t,I||i,o)}return t.nextSibling},t.prototype._configureProperties=function(t,e){var n=t.type,r=t.attrName,i=t.attributes,o=void 0,a=void 0,s=void 0,c=e.mapAttribute(r);for(a in c&&r in i&&c!==r&&(i[c]=i[r],delete i[r]),i)null!==(s=i[a])&&"object"===(void 0===s?"undefined":j(s))&&(o=n.attributes[a],s.targetProperty=void 0!==o?o.name:a)},t}())||m,jt=function(){function e(t){this.id=t,this.moduleInstance=null,this.mainResource=null,this.resources=null,this.viewStrategy=null,this.isInitialized=!1,this.onLoaded=null,this.loadContext=null}return e.prototype.initialize=function(t){var e=this.mainResource,n=this.resources,r=this.viewStrategy;if(!this.isInitialized){this.isInitialized=!0,void 0!==e&&(e.metadata.viewStrategy=r,e.initialize(t));for(var i=0,o=n.length;i<o;++i)(e=n[i]).metadata.viewStrategy=r,e.initialize(t)}},e.prototype.register=function(t,e){var n=this.mainResource,r=this.resources;void 0!==n&&(n.register(t,e),e=null);for(var i=0,o=r.length;i<o;++i)r[i].register(t,e),e=null},e.prototype.load=function(e,n){if(null!==this.onLoaded)return this.loadContext===n?t.resolve():this.onLoaded;var r=this.mainResource,i=this.resources,o=void 0;if(void 0!==r){(o=new Array(i.length+1))[0]=r.load(e,n);for(var a=0,s=i.length;a<s;++a)o[a+1]=i[a].load(e,n)}else{o=new Array(i.length);for(var c=0,u=i.length;c<u;++c)o[c]=i[c].load(e,n)}return this.loadContext=n,this.onLoaded=t.all(o),this.onLoaded},e}(),Bt=function(){function t(t,e,n){n||(n=k.b.get(k.b.resource,e))||((n=new Qt).elementName=q(t),k.b.define(k.b.resource,n,e)),n instanceof Qt?void 0===n.elementName?n.elementName=q(t):void 0===n.attributeName?n.attributeName=q(t):null===n.attributeName&&null===n.elementName&&Qt.convention(t,n):n.name||(n.name=q(t)),this.metadata=n,this.value=e}return t.prototype.initialize=function(t){this.metadata.initialize(t,this.value)},t.prototype.register=function(t,e){this.metadata.register(t,e)},t.prototype.load=function(t,e){return this.metadata.load(t,this.value,e)},t}(),Mt=function(){function t(){this.cache=Object.create(null)}return t.prototype.getAnalysis=function(t){return this.cache[t]},t.prototype.analyze=function(t,e,n){var r=void 0,i=void 0,o=void 0,a=void 0,s=void 0,c=void 0,u=[],l=void 0,h=void 0,d=void 0;if(d=this.cache[t])return d;for(s in d=new jt(t),this.cache[t]=d,"function"==typeof e&&(e={default:e}),n&&(r=new Bt(n,e[n])),e)c=e[s],s!==n&&"function"==typeof c&&((a=k.b.get(k.b.resource,c))?(a instanceof Qt&&(vt.convention(c,a),null===a.attributeName&&null===a.elementName&&Qt.convention(s,a),null===a.attributeName&&null===a.elementName&&(a.elementName=q(s))),!r&&a instanceof Qt&&null!==a.elementName?r=new Bt(s,c,a):u.push(new Bt(s,c,a))):Y.decorates(c)?h=c:c instanceof T.b?h=new nt(t,c):(l=vt.convention(c))?(null===l.elementName||r?u.push(new Bt(s,c,l)):r=new Bt(s,c,l),k.b.define(k.b.resource,l,c)):(l=Qt.convention(s))?(null===l.elementName||r?u.push(new Bt(s,c,l)):r=new Bt(s,c,l),k.b.define(k.b.resource,l,c)):(l=R.o.convention(s)||R.b.convention(s)||U.convention(s))?(u.push(new Bt(s,c,l)),k.b.define(k.b.resource,l,c)):i||(i=c,o=s));return!r&&i&&(r=new Bt(o,i)),d.moduleInstance=e,d.mainResource=r,d.resources=u,d.viewStrategy=h,d},t}(),Dt=S.getLogger("templating");var Pt=function(){function t(t){var e=this;t.then((function(t){return e.viewFactory=t}))}return t.prototype.create=function(t,e,n,r){return this.viewFactory.create(t,e,n,r)},t.prototype.setCacheSize=function(t,e){this.viewFactory.setCacheSize(t,e)},t.prototype.getCachedView=function(){return this.viewFactory.getCachedView()},t.prototype.returnViewToCache=function(t){this.viewFactory.returnViewToCache(t)},L(t,[{key:"isCaching",get:function(){return this.viewFactory.isCaching}}]),t}(),Ft=null,Vt=Object(O.c)(T.a,O.a,Lt,Mt,vt)((_=w=function(){function e(t,e,n,r,i){this.loader=t,this.container=e,this.viewCompiler=n,this.moduleAnalyzer=r,this.appResources=i,this._pluginMap={},null===Ft&&((Ft=new Qt).attributeName="au-slot",k.b.define(k.b.resource,Ft,ut)),Ft.initialize(e,ut),Ft.register(i)}return e.prototype.addResourcePlugin=function(t,e){var n=t.replace(".","")+"-resource-plugin";this._pluginMap[t]=n,this.loader.addPlugin(n,e)},e.prototype.loadViewFactory=function(e,n,r,i){var o=this;return r=r||new $,function(e,n){return n instanceof T.b?t.resolve(n):e.loadTemplate(n)}(this.loader,e).then((function(e){var a=e.address;return e.onReady?r.hasDependency(a)?null===e.template?e.onReady:t.resolve(new Pt(e.onReady)):(r.addDependency(a),e.onReady):(r.addDependency(a),e.onReady=o.loadTemplateResources(e,n,r,i).then((function(t){if(e.resources=t,null===e.template)return e.factory=null;var r=o.viewCompiler.compile(e.template,t,n);return e.factory=r})),e.onReady)}))},e.prototype.loadTemplateResources=function(n,r,i,o){var a=new vt(this.appResources,n.address),s=n.dependencies,c=void 0,u=void 0;if(r=r||W.normal,0===s.length&&!r.associatedModuleId)return t.resolve(a);if(c=s.map((function(t){return t.src})),u=s.map((function(t){return t.name})),Dt.debug("importing resources for "+n.address,c),o){var l=k.b.get(e.viewModelRequireMetadataKey,o);if(l){for(var h=c.length,d=0,p=l.length;d<p;++d){var f=l[d],v="function"==typeof f?k.a.get(f).moduleId:Object(I.d)(f.src||f,n.address);-1===c.indexOf(v)&&(c.push(v),u.push(f.as))}Dt.debug("importing ViewModel resources for "+r.associatedModuleId,c.slice(h))}}return this.importViewResources(c,u,a,r,i)},e.prototype.importViewModelResource=function(t,e){var n=this;return this.loader.loadModule(t).then((function(r){var i=k.a.get(r).moduleId,o=n.moduleAnalyzer.analyze(i,r,e);if(!o.mainResource)throw new Error('No view model found in module "'+t+'".');return o.initialize(n.container),o.mainResource}))},e.prototype.importViewResources=function(e,n,r,i,o){var a=this;return o=o||new $,i=i||W.normal,e=e.map((function(t){return a._applyLoaderPlugin(t)})),this.loader.loadAllModules(e).then((function(e){var s=void 0,c=void 0,u=void 0,l=void 0,h=void 0,d=void 0,p=a.container,f=a.moduleAnalyzer,v=new Array(e.length);for(s=0,c=e.length;s<c;++s)h=e[s],l=k.a.get(h).moduleId,(u=f.analyze(l,h)).initialize(p),u.register(r,n[s]),v[s]=u;for(i.associatedModuleId&&(d=f.getAnalysis(i.associatedModuleId))&&d.register(r),s=0,c=v.length;s<c;++s)v[s]=v[s].load(p,o);return t.all(v).then((function(){return r}))}))},e.prototype._applyLoaderPlugin=function(t){var e=t.lastIndexOf(".");if(-1!==e){var n=t.substring(e),r=this._pluginMap[n];return void 0===r?t:this.loader.applyPluginToUrl(t,r)}return t},e}(),w.viewModelRequireMetadataKey="aurelia:view-model-require",b=_))||b,qt=function(){function t(t,e,n,r){this.behavior=t,this.instruction=e,this.viewModel=n,this.isAttached=!1,this.view=null,this.isBound=!1,this.scope=null,this.container=r,this.elementEvents=r.elementEvents||null;var i,o=t.observerLocator.getOrCreateObserversLookup(n),a=t.handlesBind,s=e.attributes,c=this.boundProperties=[],u=t.properties,l=void 0;for(t._ensurePropertiesDefined(n,o),l=0,i=u.length;l<i;++l)u[l]._initialize(n,o,s,a,c)}return t.prototype.created=function(t){this.behavior.handlesCreated&&this.viewModel.created(t,this.view)},t.prototype.automate=function(t,e){this.view.bindingContext=this.viewModel,this.view.overrideContext=t||Object(R.t)(this.viewModel),this.view._isUserControlled=!0,this.behavior.handlesCreated&&this.viewModel.created(e||null,this.view),this.bind(this.view)},t.prototype.bind=function(t){var e,n=this.behavior.handlesBind,r=this.boundProperties,i=void 0,o=void 0,a=void 0,s=void 0;if(this.isBound){if(this.scope===t)return;this.unbind()}for(this.isBound=!0,this.scope=t,i=0,e=r.length;i<e;++i)s=(a=(o=r[i]).observer).selfSubscriber,a.publishing=!1,n&&(a.selfSubscriber=null),o.binding.bind(t),a.call(),a.publishing=!0,a.selfSubscriber=s;var c=void 0;null!==this.view?(n&&(this.view.viewModelScope=t),this.viewModel===t.overrideContext.bindingContext?c=t.overrideContext:this.instruction.inheritBindingContext?c=Object(R.t)(this.viewModel,t.overrideContext):(c=Object(R.t)(this.viewModel)).__parentOverrideContext=t.overrideContext,this.view.bind(this.viewModel,c)):n&&(c=t.overrideContext,void 0!==t.overrideContext.__parentOverrideContext&&this.viewModel.viewFactory&&this.viewModel.viewFactory.factoryCreateInstruction.partReplacements&&((c=Object.assign({},t.overrideContext)).parentOverrideContext=t.overrideContext.__parentOverrideContext),this.viewModel.bind(t.bindingContext,c))},t.prototype.unbind=function(){if(this.isBound){var t,e=this.boundProperties,n=void 0;for(this.isBound=!1,this.scope=null,null!==this.view&&this.view.unbind(),this.behavior.handlesUnbind&&this.viewModel.unbind(),null!==this.elementEvents&&this.elementEvents.disposeAll(),n=0,t=e.length;n<t;++n)e[n].binding.unbind()}},t.prototype.attached=function(){this.isAttached||(this.isAttached=!0,this.behavior.handlesAttached&&this.viewModel.attached(),null!==this.view&&this.view.attached())},t.prototype.detached=function(){this.isAttached&&(this.isAttached=!1,null!==this.view&&this.view.detached(),this.behavior.handlesDetached&&this.viewModel.detached())},t}(),Gt=Object(R.y)()(x=function(){function t(t,e,n,r,i){this.taskQueue=t,this.obj=e,this.propertyName=n,this.notqueued=!0,this.publishing=!1,this.selfSubscriber=r,this.currentValue=this.oldValue=i}return t.prototype.getValue=function(){return this.currentValue},t.prototype.setValue=function(t){var e=this.currentValue;Object.is(t,e)||(this.oldValue=e,this.currentValue=t,this.publishing&&this.notqueued&&(this.taskQueue.flushing?this.call():(this.notqueued=!1,this.taskQueue.queueMicroTask(this))))},t.prototype.call=function(){var t=this.oldValue,e=this.currentValue;this.notqueued=!0,Object.is(e,t)||(this.selfSubscriber&&this.selfSubscriber(e,t),this.callSubscribers(e,t),this.oldValue=e)},t.prototype.subscribe=function(t,e){this.addSubscriber(t,e)},t.prototype.unsubscribe=function(t,e){this.removeSubscriber(t,e)},t}())||x;function Ut(t,e){var n=t.__observers__;if(void 0===n){var r=Object.getPrototypeOf(t).constructor,i=k.b.get(k.b.resource,r);i.isInitialized||i.initialize(O.a.instance||new O.a,t.constructor),n=i.observerLocator.getOrCreateObserversLookup(t),i._ensurePropertiesDefined(t,n)}return n[e]}var Ht=function(){function t(t){"string"==typeof t?this.name=t:Object.assign(this,t),this.attribute=this.attribute||q(this.name);var e=this.defaultBindingMode;null==e?this.defaultBindingMode=R.q.oneWay:"string"==typeof e&&(this.defaultBindingMode=R.q[e]||R.q.oneWay),this.changeHandler=this.changeHandler||null,this.owner=null,this.descriptor=null}return t.prototype.registerWith=function(t,e,n){if(e.properties.push(this),e.attributes[this.attribute]=this,this.owner=e,n)return this.descriptor=n,this._configureDescriptor(n)},t.prototype._configureDescriptor=function(t){var e=this.name;return t.configurable=!0,t.enumerable=!0,"initializer"in t&&(this.defaultValue=t.initializer,delete t.initializer,delete t.writable),"value"in t&&(this.defaultValue=t.value,delete t.value,delete t.writable),t.get=function(){return Ut(this,e).getValue()},t.set=function(t){Ut(this,e).setValue(t)},t.get.getObserver=function(t){return Ut(t,e)},t},t.prototype.defineOn=function(t,e){var n=this.name,r=void 0;null===this.changeHandler&&(r=n+"Changed")in t.prototype&&(this.changeHandler=r),null===this.descriptor&&Object.defineProperty(t.prototype,n,this._configureDescriptor(e,{}))},t.prototype.createObserver=function(t){var e=null,n=this.defaultValue,r=this.changeHandler,i=this.name,o=void 0;if(!this.hasOptions){if(r in t)e="propertyChanged"in t?function(e,n){t[r](e,n),t.propertyChanged(i,e,n)}:function(e,n){return t[r](e,n)};else if("propertyChanged"in t)e=function(e,n){return t.propertyChanged(i,e,n)};else if(null!==r)throw new Error("Change handler "+r+" was specified but not declared on the class.");return void 0!==n&&(o="function"==typeof n?n.call(t):n),new Gt(this.owner.taskQueue,t,this.name,e,o)}},t.prototype._initialize=function(t,e,n,r,i){var o=void 0,a=void 0,s=void 0,c=this.defaultValue;if(this.isDynamic)for(var u in n)this._createDynamicProperty(t,e,r,u,n[u],i);else this.hasOptions||(a=e[this.name],null!==n&&(o=a.selfSubscriber,s=n[this.attribute],r&&(a.selfSubscriber=null),"string"==typeof s?(t[this.name]=s,a.call()):s?i.push({observer:a,binding:s.createBinding(t)}):void 0!==c&&a.call(),a.selfSubscriber=o),a.publishing=!0)},t.prototype._createDynamicProperty=function(t,e,n,r,i,o){var a=r+"Changed",s=null,c=void 0,u=void 0;a in t?s="propertyChanged"in t?function(e,n){t[a](e,n),t.propertyChanged(r,e,n)}:function(e,n){return t[a](e,n)}:"propertyChanged"in t&&(s=function(e,n){return t.propertyChanged(r,e,n)}),c=e[r]=new Gt(this.owner.taskQueue,t,r,s),Object.defineProperty(t,r,{configurable:!0,enumerable:!0,get:c.getValue.bind(c),set:c.setValue.bind(c)}),n&&(c.selfSubscriber=null),"string"==typeof i?(t[r]=i,c.call()):i&&(u={observer:c,binding:i.createBinding(t)},o.push(u)),c.publishing=!0,c.selfSubscriber=s},t}(),zt=0;function $t(){return!0}function Wt(){}var Qt=function(){function e(){this.elementName=null,this.attributeName=null,this.attributeDefaultBindingMode=void 0,this.liftsContent=!1,this.targetShadowDOM=!1,this.shadowDOMOptions=null,this.processAttributes=Wt,this.processContent=$t,this.usesShadowDOM=!1,this.childBindings=null,this.hasDynamicOptions=!1,this.containerless=!1,this.properties=[],this.attributes={},this.isInitialized=!1,this.primaryProperty=null}return e.convention=function(t,n){var r=void 0;return t.endsWith("CustomAttribute")&&((r=n||new e).attributeName=q(t.substring(0,t.length-15))),t.endsWith("CustomElement")&&((r=n||new e).elementName=q(t.substring(0,t.length-13))),r},e.prototype.addChildBinding=function(t){null===this.childBindings&&(this.childBindings=[]),this.childBindings.push(t)},e.prototype.initialize=function(t,e){var n=e.prototype,r=this.properties,i=this.attributeName,o=this.attributeDefaultBindingMode,a=void 0,s=void 0,c=void 0;if(!this.isInitialized)if(this.isInitialized=!0,e.__providerId__=++zt,this.observerLocator=t.get(R.k),this.taskQueue=t.get(N.a),this.target=e,this.usesShadowDOM=this.targetShadowDOM&&A.c.shadowDOM,this.handlesCreated="created"in n,this.handlesBind="bind"in n,this.handlesUnbind="unbind"in n,this.handlesAttached="attached"in n,this.handlesDetached="detached"in n,this.htmlName=this.elementName||this.attributeName,null!==i)if(0===r.length&&new Ht({name:"value",changeHandler:"valueChanged"in n?"valueChanged":null,attribute:i,defaultBindingMode:o}).registerWith(e,this),c=r[0],1===r.length&&"value"===c.name)c.isDynamic=c.hasOptions=this.hasDynamicOptions,c.defineOn(e,this);else{for(a=0,s=r.length;a<s;++a)if(r[a].defineOn(e,this),r[a].primaryProperty){if(this.primaryProperty)throw new Error("Only one bindable property on a custom element can be defined as the default");this.primaryProperty=r[a]}(c=new Ht({name:"value",changeHandler:"valueChanged"in n?"valueChanged":null,attribute:i,defaultBindingMode:o})).hasOptions=!0,c.registerWith(e,this)}else{for(a=0,s=r.length;a<s;++a)r[a].defineOn(e,this);this._copyInheritedProperties(t,e)}},e.prototype.register=function(t,e){var n=this;null!==this.attributeName&&(t.registerAttribute(e||this.attributeName,this,this.attributeName),Array.isArray(this.aliases)&&this.aliases.forEach((function(e){t.registerAttribute(e,n,n.attributeName)}))),null!==this.elementName&&t.registerElement(e||this.elementName,this)},e.prototype.load=function(e,n,r,i,o){var a=this,s=void 0;return null!==this.elementName?(i=e.get(ot).getViewStrategy(i||this.viewStrategy||n),s=new W(this.targetShadowDOM,!0),i.moduleId||(i.moduleId=k.a.get(n).moduleId),i.loadViewFactory(e.get(Vt),s,r,n).then((function(t){return o&&a.viewFactory||(a.viewFactory=t),t}))):t.resolve(this)},e.prototype.compile=function(t,e,n,r,i){if(this.liftsContent){if(!r.viewFactory){var o=A.b.createElement("template"),a=A.b.createDocumentFragment(),s=n.getAttribute("view-cache"),c=n.getAttribute("part");n.removeAttribute(r.originalAttrName),A.b.replaceNode(o,n,i),a.appendChild(n),r.viewFactory=t.compile(a,e),c&&(r.viewFactory.part=c,n.removeAttribute("part")),s&&(r.viewFactory.setCacheSize(s),n.removeAttribute("view-cache")),n=o}}else if(null!==this.elementName){var u={};if(this.processContent(t,e,n,r)&&n.hasChildNodes()){for(var l=n.firstChild,h=this.usesShadowDOM?null:A.b.createElement("au-content"),d=void 0,p=void 0;l;)d=l.nextSibling,"TEMPLATE"===l.tagName&&(p=l.getAttribute("replace-part"))?(u[p]=t.compile(l,e),A.b.removeNode(l,i),r.partReplacements=u):null!==h&&(3===l.nodeType&&G(l)?A.b.removeNode(l,i):h.appendChild(l)),l=d;null!==h&&h.hasChildNodes()&&n.appendChild(h),r.skipContentProcessing=!1}else r.skipContentProcessing=!0}else this.processContent(t,e,n,r)||(r.skipContentProcessing=!0);return n},e.prototype.create=function(t,e,n,r){var i=void 0,o=null;e=e||Q.normal,n=n||null,r=r||null,null!==this.elementName&&n&&(this.usesShadowDOM?(i=n.attachShadow(this.shadowDOMOptions),t.registerInstance(A.b.boundary,i)):(i=n,this.targetShadowDOM&&t.registerInstance(A.b.boundary,i))),null!==n&&(n.au=o=n.au||{});var a=e.viewModel||t.get(this.target),s=new qt(this,e,a,t),c=this.childBindings,u=void 0;if(this.liftsContent)o.controller=s;else if(null!==this.elementName){if(u=e.viewFactory||this.viewFactory,t.viewModel=a,u&&(s.view=u.create(t,e,n)),null!==n){if(o.controller=s,s.view){if(!this.usesShadowDOM&&(1===n.childNodes.length||n.contentElement)){var l=n.childNodes[0]||n.contentElement;s.view.contentView={fragment:l},l.parentNode&&A.b.removeNode(l)}if(e.anchorIsContainer){if(null!==c)for(var h=0,d=c.length;h<d;++h)s.view.addBinding(c[h].create(n,a,s));s.view.appendNodesTo(i)}else s.view.insertNodesBefore(i)}else if(null!==c)for(var p=0,f=c.length;p<f;++p)r.push(c[p].create(n,a,s))}else if(s.view){if(s.view.controller=s,null!==c)for(var v=0,g=c.length;v<g;++v)s.view.addBinding(c[v].create(e.host,a,s))}else if(null!==c)for(var y=0,m=c.length;y<m;++y)r.push(c[y].create(e.host,a,s))}else if(null!==c)for(var b=0,w=c.length;b<w;++b)r.push(c[b].create(n,a,s));return null!==o&&(o[this.htmlName]=s),e.initiatedByBehavior&&u&&s.view.created(),s},e.prototype._ensurePropertiesDefined=function(t,e){var n,r=void 0,i=void 0,o=void 0;if(!("__propertiesDefined__"in e))for(e.__propertiesDefined__=!0,i=0,n=(r=this.properties).length;i<n;++i)void 0!==(o=r[i].createObserver(t))&&(e[o.propertyName]=o)},e.prototype._copyInheritedProperties=function(t,e){for(var n=this,r=void 0,i=e;;){var o=Object.getPrototypeOf(e.prototype);if(!(e=o&&o.constructor))return;if(r=k.b.getOwn(k.b.resource,e))break}r.initialize(t,e);for(var a=function(t,e){var o=r.properties[t];if(n.properties.some((function(t){return t.name===o.name})))return"continue";new Ht(o).registerWith(i,n)},s=0,c=r.properties.length;s<c;++s)a(s)},e}();!function(){function t(t){this.name=t.name,this.changeHandler=t.changeHandler||this.name+"Changed",this.selector=t.selector,this.all=t.all}t.prototype.create=function(t,e,n){return new Yt(this.selector,t,this.name,e,n,this.changeHandler,this.all)}}();var Kt=[];function Jt(t,e,n){var r=t.get(e);r||(r=[],t.set(e,r)),r.push(n)}function Xt(t,e){for(var n=e.binders,r=n.length,i=new Map,o=0,a=t.length;o<a;++o){for(var s=t[o],c=s.addedNodes,u=s.removedNodes,l=0,h=u.length;l<h;++l){var d=u[l];if(1===d.nodeType)for(var p=0;p<r;++p){var f=n[p];f.onRemove(d)&&Jt(i,f,s)}}for(var v=0,g=c.length;v<g;++v){var y=c[v];if(1===y.nodeType)for(var m=0;m<r;++m){var b=n[m];b.onAdd(y)&&Jt(i,b,s)}}}i.forEach((function(t,e){null!==e.changeHandler&&e.viewModel[e.changeHandler](t)}))}var Yt=function(){function t(t,e,n,r,i,o,a){this.selector=t,this.viewHost=e,this.property=n,this.viewModel=r,this.controller=i,this.changeHandler=o in r?o:null,this.usesShadowDOM=i.behavior.usesShadowDOM,this.all=a,!this.usesShadowDOM&&i.view&&i.view.contentView?this.contentView=i.view.contentView:this.contentView=null}return t.prototype.matches=function(t){if(t.matches(this.selector)){if(null===this.contentView)return!0;var e=this.contentView,n=t.auAssignedSlot;if(n&&n.projectFromAnchors){for(var r=n.projectFromAnchors,i=0,o=r.length;i<o;++i)if(r[i].auOwnerView===e)return!0;return!1}return t.auOwnerView===e}return!1},t.prototype.bind=function(t){var e=this.viewHost,n=this.viewModel,r=e.__childObserver__;if(!r){r=e.__childObserver__=A.b.createMutationObserver(Xt);var i={childList:!0,subtree:!this.usesShadowDOM};r.observe(e,i),r.binders=[]}if(r.binders.push(this),this.usesShadowDOM){var o=e.firstElementChild;if(this.all){var a=n[this.property];for(a?a.splice(0):a=n[this.property]=[];o;)this.matches(o)&&a.push(o.au&&o.au.controller?o.au.controller.viewModel:o),o=o.nextElementSibling;null!==this.changeHandler&&this.viewModel[this.changeHandler](Kt)}else for(;o;){if(this.matches(o)){var s=o.au&&o.au.controller?o.au.controller.viewModel:o;this.viewModel[this.property]=s,null!==this.changeHandler&&this.viewModel[this.changeHandler](s);break}o=o.nextElementSibling}}},t.prototype.onRemove=function(t){if(this.matches(t)){var e=t.au&&t.au.controller?t.au.controller.viewModel:t;if(this.all){var n=this.viewModel[this.property]||(this.viewModel[this.property]=[]),r=n.indexOf(e);return-1!==r&&n.splice(r,1),!0}return!1}return!1},t.prototype.onAdd=function(t){if(this.matches(t)){var e=t.au&&t.au.controller?t.au.controller.viewModel:t;if(this.all){var n=this.viewModel[this.property]||(this.viewModel[this.property]=[]);if("*"===this.selector)return n.push(e),!0;for(var r=0,i=t.previousElementSibling;i;)this.matches(i)&&r++,i=i.previousElementSibling;return n.splice(r,0,e),!0}this.viewModel[this.property]=e,null!==this.changeHandler&&this.viewModel[this.changeHandler](e)}return!1},t.prototype.unbind=function(){this.viewHost.__childObserver__&&(this.viewHost.__childObserver__.disconnect(),this.viewHost.__childObserver__=null,this.viewModel[this.property]=null)},t}();function Zt(t,e){return Array.isArray(e)?t.removeMany(e,!0):t.remove(e,!0)}var te={before:function(t,e,n){return void 0===e?n():n().then((function(){return Zt(t,e)}))},with:function(e,n,r){return void 0===n?r():t.all([Zt(e,n),r()])},after:function(e,n,r){return t.resolve(e.removeAll(!0)).then(r)}};function ee(e){return e.skipActivation||"function"!=typeof e.viewModel.activate?t.resolve():e.viewModel.activate(e.model)||t.resolve()}var ne=Object(O.c)(Vt,ot)(E=function(){function e(t,e){this.viewEngine=t,this.viewLocator=e}return e.prototype._swap=function(e,n){var r=te[e.swapOrder]||te.after,i=e.viewSlot.children.slice();return r(e.viewSlot,i,(function(){return t.resolve(e.viewSlot.add(n)).then((function(){e.currentController&&e.currentController.unbind()}))})).then((function(){e.compositionTransactionNotifier&&e.compositionTransactionNotifier.done()}))},e.prototype._createControllerAndSwap=function(t){var e=this;return this.createController(t).then((function(n){return t.compositionTransactionOwnershipToken?t.compositionTransactionOwnershipToken.waitForCompositionComplete().then((function(){return n.automate(t.overrideContext,t.owningView),e._swap(t,n.view)})).then((function(){return n})):(n.automate(t.overrideContext,t.owningView),e._swap(t,n.view).then((function(){return n})))}))},e.prototype.createController=function(t){var e=this,n=void 0,r=void 0,i=void 0,o=void 0;return this.ensureViewModel(t).then(ee).then((function(){n=t.childContainer,r=t.viewModel,i=t.viewModelResource,o=i.metadata;var a=e.viewLocator.getViewStrategy(t.view||r);return t.viewResources&&a.makeRelativeTo(t.viewResources.viewUrl),o.load(n,i.value,null,a,!0)})).then((function(e){return o.create(n,Q.dynamic(t.host,r,e))}))},e.prototype.ensureViewModel=function(e){var n=e.childContainer=e.childContainer||e.container.createChild();if("string"==typeof e.viewModel)return e.viewModel=e.viewResources?e.viewResources.relativeToView(e.viewModel):e.viewModel,this.viewEngine.importViewModelResource(e.viewModel).then((function(t){return n.autoRegister(t.value),e.host&&n.registerInstance(A.b.Element,e.host),e.viewModel=n.viewModel=n.get(t.value),e.viewModelResource=t,e}));var r=e.viewModel.constructor,i="function"==typeof e.viewModel;i&&(r=e.viewModel,n.autoRegister(r));var o=k.b.getOrCreateOwn(k.b.resource,Qt,r);return o.elementName=o.elementName||"dynamic-element",o.initialize(i?n:e.container||n,r),e.viewModelResource={metadata:o,value:r},e.host&&n.registerInstance(A.b.Element,e.host),n.viewModel=e.viewModel=i?n.get(r):e.viewModel,t.resolve(e)},e.prototype.compose=function(e){var n=this;e.childContainer=e.childContainer||e.container.createChild(),e.view=this.viewLocator.getViewStrategy(e.view);var r=e.childContainer.get(P),i=r.tryCapture();return i?e.compositionTransactionOwnershipToken=i:e.compositionTransactionNotifier=r.enlist(),e.viewModel?this._createControllerAndSwap(e):e.view?(e.viewResources&&e.view.makeRelativeTo(e.viewResources.viewUrl),e.view.loadViewFactory(this.viewEngine,new W).then((function(t){var r=t.create(e.childContainer);return r.bind(e.bindingContext,e.overrideContext),e.compositionTransactionOwnershipToken?e.compositionTransactionOwnershipToken.waitForCompositionComplete().then((function(){return n._swap(e,r)})).then((function(){return r})):n._swap(e,r).then((function(){return r}))}))):e.viewSlot?(e.viewSlot.removeAll(),e.compositionTransactionNotifier&&e.compositionTransactionNotifier.done(),t.resolve(null)):t.resolve(null)},e}())||E;!function(){function t(){}t.prototype.initialize=function(t,e){},t.prototype.register=function(t,e){},t.prototype.load=function(t,e){var n=new e;t.get(R.f).registerElementConfig(n)}}();function re(t){return function(e){"string"==typeof t||Object.getPrototypeOf(t)===Object.prototype?e.$resource=t:k.b.define(k.b.resource,t,e)}}function ie(t){return function(e){k.b.getOrCreateOwn(k.b.resource,Qt,e).elementName=ft(t,"custom element")}}function oe(t,e,n){return function(r){var i=k.b.getOrCreateOwn(k.b.resource,Qt,r);i.attributeName=ft(t,"custom attribute"),i.attributeDefaultBindingMode=e,i.aliases=n}}function ae(t){var e=function(t){k.b.getOrCreateOwn(k.b.resource,Qt,t).liftsContent=!0};return t?e(t):e}function se(t,e,n){var r=function(e,n,r){var i=n?e.constructor:e,o=k.b.getOrCreateOwn(k.b.resource,Qt,i);return n&&((t=t||{}).name=n),new Ht(t).registerWith(i,o,r)};if(!t)return r;if(e){var i=t;return t=null,r(i,e,n)}return r}var ce={mode:"open"};function ue(t){var e="function"!=typeof t&&t?t:ce,n=function(t){var n=k.b.getOrCreateOwn(k.b.resource,Qt,t);n.targetShadowDOM=!0,n.shadowDOMOptions=e};return"function"==typeof t?n(t):n}function le(t){return function(e){k.b.define(ot.viewStrategyMetadataKey,t,e)}}function he(t){return le(new Z(t))}function de(t,e,n){return le(new rt(t,e,n))}function pe(t,e){var n=void 0,r=void 0;"function"==typeof t?n=t:(r=t,n=void 0);var i=function(t){k.b.define(ot.viewStrategyMetadataKey,new et(r,e),t)};return n?i(n):i}var fe=Object(O.c)(O.a,Mt,Lt,ne)(C=function(){function t(t,e,n,r){this._container=t,this._moduleAnalyzer=e,this._viewCompiler=n,this._compositionEngine=r,t.registerInstance(B,B.instance=new B)}return t.prototype.configureAnimator=function(t){this._container.unregister(B),this._container.registerInstance(B,B.instance=t)},t.prototype.compose=function(t){return this._compositionEngine.compose(t)},t.prototype.enhance=function(t){t instanceof A.b.Element&&(t={element:t});var e={letExpressions:[]},n=t.resources||this._container.get(vt);this._viewCompiler._compileNode(t.element,n,e,t.element.parentNode,"root",!0);var r=new Tt(t.element,e,n),i=t.container||this._container.createChild(),o=r.create(i,Q.enhance());return o.bind(t.bindingContext||{},t.overrideContext),o.firstChild=o.lastChild=o.fragment,o.fragment=A.b.createDocumentFragment(),o.attached(),o},t}())||C}).call(this,n(7))},30:function(t,e,n){"use strict";(function(t,r){Object.defineProperty(e,"__esModule",{value:!0});var i,o=n(31),a=(i=n(32))&&"object"==typeof i&&"default"in i?i.default:i,s=n(26),c=n(22),u=n(36),l=n(25),h=a.SDK_VERSION,d=new s.Logger("@firebase/firestore");function p(){return d.logLevel}function f(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(d.logLevel<=s.LogLevel.DEBUG){var r=e.map(g);d.debug.apply(d,o.__spreadArrays(["Firestore ("+h+"): "+t],r))}}function v(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(d.logLevel<=s.LogLevel.ERROR){var r=e.map(g);d.error.apply(d,o.__spreadArrays(["Firestore ("+h+"): "+t],r))}}function g(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE ("+h+") INTERNAL ASSERTION FAILED: "+t;throw v(e),new Error(e)}function m(t,e){t||y()}function b(t,e){return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _=function(){function t(){}return t.t=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=w(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function x(t,e){return t<e?-1:t>e?1:0}function E(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function C(t){return t+"\0"}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var S=function(t,e,n,r,i){this.s=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i},k=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"i",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t.prototype.o=function(t){return x(this.projectId,t.projectId)||x(this.database,t.database)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function T(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function I(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var R=function(){function t(t,e){this.h=t,this.u=e,this.l={}}return t.prototype.get=function(t){var e=this.h(t),n=this.l[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(this.u(a,t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.h(t),r=this.l[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.u(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.l[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.h(t),n=this.l[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.u(n[r][0],t))return 1===n.length?delete this.l[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){T(this.l,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];t(a,s)}}))},t.prototype._=function(){return I(this.l)},t}(),O={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},N=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return o.__extends(e,t),e}(Error),L=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new N(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new N(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new N(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new N(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.T=function(t){return this.seconds===t.seconds?x(this.nanoseconds,t.nanoseconds):x(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),j=function(){function t(t){this.timestamp=t}return t.I=function(e){return new t(e)},t.min=function(){return new t(new L(0,0))},t.prototype.o=function(t){return this.timestamp.T(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.m=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.A=function(){return this.timestamp},t}(),B=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&y(),void 0===n?n=t.length-e:n>t.length-e&&y(),this.segments=t,this.offset=e,this.R=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.R},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.P(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.V(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.g=function(t){return t=void 0===t?1:t,this.V(this.segments,this.offset+t,this.length-t)},t.prototype.p=function(){return this.V(this.segments,this.offset,this.length-1)},t.prototype.v=function(){return this.segments[this.offset]},t.prototype.S=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype._=function(){return 0===this.length},t.prototype.D=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.C=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.F=function(){return this.segments.slice(this.offset,this.limit())},t.P=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),M=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e.prototype.V=function(t,n,r){return new e(t,n,r)},e.prototype.N=function(){return this.F().join("/")},e.prototype.toString=function(){return this.N()},e.$=function(t){if(t.indexOf("//")>=0)throw new N(O.INVALID_ARGUMENT,"Invalid path ("+t+"). Paths must not contain // in them.");return new e(t.split("/").filter((function(t){return t.length>0})))},e.k=function(){return new e([])},e}(B),D=/^[_a-zA-Z][_a-zA-Z0-9]*$/,P=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e.prototype.V=function(t,n,r){return new e(t,n,r)},e.M=function(t){return D.test(t)},e.prototype.N=function(){return this.F().map((function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),e.M(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.N()},e.prototype.O=function(){return 1===this.length&&"__name__"===this.get(0)},e.L=function(){return new e(["__name__"])},e.B=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new N(O.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<t.length;){var s=t[i];if("\\"===s){if(i+1===t.length)throw new N(O.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var c=t[i+1];if("\\"!==c&&"."!==c&&"`"!==c)throw new N(O.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=c,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new N(O.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.k=function(){return new e([])},e}(B),F=function(){function t(t){this.path=t}return t.q=function(e){return new t(M.$(e).g(5))},t.prototype.U=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===M.P(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.P=function(t,e){return M.P(t.path,e.path)},t.W=function(t){return t.length%2==0},t.j=function(e){return new t(new M(e.slice()))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V(t){return null==t}function q(t){return-0===t&&1/t==-1/0}function G(t){return"number"==typeof t&&Number.isInteger(t)&&!q(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var U=function(t,e,n,r,i,o,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.K=null};function H(t,e,n,r,i,o,a){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),new U(t,e,n,r,i,o,a)}function z(t){var e=b(t);if(null===e.K){var n=e.path.N();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.N()+t.op.toString()+Mt(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return(e=t).field.N()+e.dir;var e})).join(","),V(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=_n(e.startAt)),e.endAt&&(n+="|ub:",n+=_n(e.endAt)),e.K=n}return e.K}function $(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!kn(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],!(i instanceof fn&&o instanceof fn&&i.op===o.op&&i.field.isEqual(o.field)&&Nt(i.value,o.value)))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!En(t.startAt,e.startAt)&&En(t.endAt,e.endAt)}function W(t){return F.W(t.path)&&null===t.collectionGroup&&0===t.filters.length}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Q=function(){function t(t){this.G=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.G,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.G)},t.prototype.H=function(){return 2*this.G.length},t.prototype.o=function(t){return x(this.G,t.G)},t.prototype.isEqual=function(t){return this.G===t.G},t}();Q.Y=new Q("");var K,J,X=function(){function t(t,e,n,r,i,o,a){void 0===i&&(i=j.min()),void 0===o&&(o=j.min()),void 0===a&&(a=Q.Y),this.target=t,this.targetId=e,this.J=n,this.sequenceNumber=r,this.X=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}return t.prototype.Z=function(e){return new t(this.target,this.targetId,this.J,e,this.X,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.tt=function(e,n){return new t(this.target,this.targetId,this.J,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.et=function(e){return new t(this.target,this.targetId,this.J,this.sequenceNumber,this.X,e,this.resumeToken)},t}(),Y=function(t){this.count=t};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z(t){switch(t){case O.OK:return y();case O.CANCELLED:case O.UNKNOWN:case O.DEADLINE_EXCEEDED:case O.RESOURCE_EXHAUSTED:case O.INTERNAL:case O.UNAVAILABLE:case O.UNAUTHENTICATED:return!1;case O.INVALID_ARGUMENT:case O.NOT_FOUND:case O.ALREADY_EXISTS:case O.PERMISSION_DENIED:case O.FAILED_PRECONDITION:case O.ABORTED:case O.OUT_OF_RANGE:case O.UNIMPLEMENTED:case O.DATA_LOSS:return!0;default:return y()}}function tt(t){if(void 0===t)return v("GRPC error has no .code"),O.UNKNOWN;switch(t){case K.OK:return O.OK;case K.CANCELLED:return O.CANCELLED;case K.UNKNOWN:return O.UNKNOWN;case K.DEADLINE_EXCEEDED:return O.DEADLINE_EXCEEDED;case K.RESOURCE_EXHAUSTED:return O.RESOURCE_EXHAUSTED;case K.INTERNAL:return O.INTERNAL;case K.UNAVAILABLE:return O.UNAVAILABLE;case K.UNAUTHENTICATED:return O.UNAUTHENTICATED;case K.INVALID_ARGUMENT:return O.INVALID_ARGUMENT;case K.NOT_FOUND:return O.NOT_FOUND;case K.ALREADY_EXISTS:return O.ALREADY_EXISTS;case K.PERMISSION_DENIED:return O.PERMISSION_DENIED;case K.FAILED_PRECONDITION:return O.FAILED_PRECONDITION;case K.ABORTED:return O.ABORTED;case K.OUT_OF_RANGE:return O.OUT_OF_RANGE;case K.UNIMPLEMENTED:return O.UNIMPLEMENTED;case K.DATA_LOSS:return O.DATA_LOSS;default:return y()}}(J=K||(K={}))[J.OK=0]="OK",J[J.CANCELLED=1]="CANCELLED",J[J.UNKNOWN=2]="UNKNOWN",J[J.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",J[J.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",J[J.NOT_FOUND=5]="NOT_FOUND",J[J.ALREADY_EXISTS=6]="ALREADY_EXISTS",J[J.PERMISSION_DENIED=7]="PERMISSION_DENIED",J[J.UNAUTHENTICATED=16]="UNAUTHENTICATED",J[J.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",J[J.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",J[J.ABORTED=10]="ABORTED",J[J.OUT_OF_RANGE=11]="OUT_OF_RANGE",J[J.UNIMPLEMENTED=12]="UNIMPLEMENTED",J[J.INTERNAL=13]="INTERNAL",J[J.UNAVAILABLE=14]="UNAVAILABLE",J[J.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var et=function(){function t(t,e){this.P=t,this.root=e||rt.EMPTY}return t.prototype.nt=function(e,n){return new t(this.P,this.root.nt(e,n,this.P).copy(null,null,rt.st,null,null))},t.prototype.remove=function(e){return new t(this.P,this.root.remove(e,this.P).copy(null,null,rt.st,null,null))},t.prototype.get=function(t){for(var e=this.root;!e._();){var n=this.P(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n._();){var r=this.P(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype._=function(){return this.root._()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.it=function(){return this.root.it()},t.prototype.rt=function(){return this.root.rt()},t.prototype.ot=function(t){return this.root.ot(t)},t.prototype.forEach=function(t){this.ot((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.ot((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.ht=function(t){return this.root.ht(t)},t.prototype.at=function(){return new nt(this.root,null,this.P,!1)},t.prototype.ut=function(t){return new nt(this.root,t,this.P,!1)},t.prototype.ct=function(){return new nt(this.root,null,this.P,!0)},t.prototype.lt=function(t){return new nt(this.root,t,this.P,!0)},t}(),nt=function(){function t(t,e,n,r){this._t=r,this.ft=[];for(var i=1;!t._();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this._t?t.left:t.right;else{if(0===i){this.ft.push(t);break}this.ft.push(t),t=this._t?t.right:t.left}}return t.prototype.dt=function(){var t=this.ft.pop(),e={key:t.key,value:t.value};if(this._t)for(t=t.left;!t._();)this.ft.push(t),t=t.right;else for(t=t.right;!t._();)this.ft.push(t),t=t.left;return e},t.prototype.wt=function(){return this.ft.length>0},t.prototype.Tt=function(){if(0===this.ft.length)return null;var t=this.ft[this.ft.length-1];return{key:t.key,value:t.value}},t}(),rt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype._=function(){return!1},t.prototype.ot=function(t){return this.left.ot(t)||t(this.key,this.value)||this.right.ot(t)},t.prototype.ht=function(t){return this.right.ht(t)||t(this.key,this.value)||this.left.ht(t)},t.prototype.min=function(){return this.left._()?this:this.left.min()},t.prototype.it=function(){return this.min().key},t.prototype.rt=function(){return this.right._()?this.key:this.right.rt()},t.prototype.nt=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.nt(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.nt(t,e,n))).Et()},t.prototype.It=function(){if(this.left._())return t.EMPTY;var e=this;return e.left.At()||e.left.left.At()||(e=e.Rt()),(e=e.copy(null,null,null,e.left.It(),null)).Et()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left._()||i.left.At()||i.left.left.At()||(i=i.Rt()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.At()&&(i=i.Pt()),i.right._()||i.right.At()||i.right.left.At()||(i=i.Vt()),0===n(e,i.key)){if(i.right._())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.It())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.Et()},t.prototype.At=function(){return this.color},t.prototype.Et=function(){var t=this;return t.right.At()&&!t.left.At()&&(t=t.gt()),t.left.At()&&t.left.left.At()&&(t=t.Pt()),t.left.At()&&t.right.At()&&(t=t.yt()),t},t.prototype.Rt=function(){var t=this.yt();return t.right.left.At()&&(t=(t=(t=t.copy(null,null,null,null,t.right.Pt())).gt()).yt()),t},t.prototype.Vt=function(){var t=this.yt();return t.left.left.At()&&(t=(t=t.Pt()).yt()),t},t.prototype.gt=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.Pt=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.yt=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.pt=function(){var t=this.bt();return Math.pow(2,t)<=this.size+1},t.prototype.bt=function(){if(this.At()&&this.left.At())throw y();if(this.right.At())throw y();var t=this.left.bt();if(t!==this.right.bt())throw y();return t+(this.At()?0:1)},t}();rt.EMPTY=null,rt.RED=!0,rt.st=!1,rt.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw y()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw y()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw y()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw y()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw y()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.nt=function(t,e,n){return new rt(t,e)},t.prototype.remove=function(t,e){return this},t.prototype._=function(){return!0},t.prototype.ot=function(t){return!1},t.prototype.ht=function(t){return!1},t.prototype.it=function(){return null},t.prototype.rt=function(){return null},t.prototype.At=function(){return!1},t.prototype.pt=function(){return!0},t.prototype.bt=function(){return 0},t}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var it=function(){function t(t){this.P=t,this.data=new et(this.P)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.it()},t.prototype.last=function(){return this.data.rt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.ot((function(e,n){return t(e),!1}))},t.prototype.vt=function(t,e){for(var n=this.data.ut(t[0]);n.wt();){var r=n.dt();if(this.P(r.key,t[1])>=0)return;e(r.key)}},t.prototype.St=function(t,e){var n;for(n=void 0!==e?this.data.ut(e):this.data.at();n.wt();)if(!t(n.dt().key))return},t.prototype.Dt=function(t){var e=this.data.ut(t);return e.wt()?e.dt().key:null},t.prototype.at=function(){return new ot(this.data.at())},t.prototype.ut=function(t){return new ot(this.data.ut(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).nt(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype._=function(){return this.data._()},t.prototype.Ct=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.at(),r=e.data.at();n.wt();){var i=n.dt().key,o=r.dt().key;if(0!==this.P(i,o))return!1}return!0},t.prototype.F=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.P);return n.data=e,n},t}(),ot=function(){function t(t){this.Ft=t}return t.prototype.dt=function(){return this.Ft.dt().key},t.prototype.wt=function(){return this.Ft.wt()},t}(),at=new et(F.P);function st(){return at}function ct(){return st()}var ut=new et(F.P);function lt(){return ut}var ht=new et(F.P),dt=new it(F.P);function pt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=dt,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var ft=new it(x);function vt(){return ft}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gt=function(){function t(t){this.P=t?function(e,n){return t(e,n)||F.P(e.key,n.key)}:function(t,e){return F.P(t.key,e.key)},this.Nt=lt(),this.$t=new et(this.P)}return t.kt=function(e){return new t(e.P)},t.prototype.has=function(t){return null!=this.Nt.get(t)},t.prototype.get=function(t){return this.Nt.get(t)},t.prototype.first=function(){return this.$t.it()},t.prototype.last=function(){return this.$t.rt()},t.prototype._=function(){return this.$t._()},t.prototype.indexOf=function(t){var e=this.Nt.get(t);return e?this.$t.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.$t.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.$t.ot((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.Nt.nt(t.key,t),e.$t.nt(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.Nt.remove(t),this.$t.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.$t.at(),r=e.$t.at();n.wt();){var i=n.dt().key,o=r.dt().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.P=this.P,r.Nt=e,r.$t=n,r},t}(),yt=function(){function t(){this.xt=new et(F.P)}return t.prototype.track=function(t){var e=t.doc.key,n=this.xt.get(e);n?0!==t.type&&3===n.type?this.xt=this.xt.nt(e,t):3===t.type&&1!==n.type?this.xt=this.xt.nt(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.xt=this.xt.nt(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.xt=this.xt.nt(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.xt=this.xt.remove(e):1===t.type&&2===n.type?this.xt=this.xt.nt(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.xt=this.xt.nt(e,{type:2,doc:t.doc}):y():this.xt=this.xt.nt(e,t)},t.prototype.Mt=function(){var t=[];return this.xt.ot((function(e,n){t.push(n)})),t},t}(),mt=function(){function t(t,e,n,r,i,o,a,s){this.query=t,this.docs=e,this.Ot=n,this.docChanges=r,this.Lt=i,this.fromCache=o,this.Bt=a,this.qt=s}return t.Ut=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,gt.kt(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.Lt._()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.Bt===t.Bt&&this.Lt.isEqual(t.Lt)&&un(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Ot.isEqual(t.Ot)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),bt=function(){function t(t,e,n,r,i){this.X=t,this.Qt=e,this.Wt=n,this.jt=r,this.Kt=i}return t.Gt=function(e,n){var r=new Map;return r.set(e,wt.zt(e,n)),new t(j.min(),r,vt(),st(),pt())},t}(),wt=function(){function t(t,e,n,r,i){this.resumeToken=t,this.Ht=e,this.Yt=n,this.Jt=r,this.Xt=i}return t.zt=function(e,n){return new t(Q.Y,n,pt(),pt(),pt())},t}(),_t=function(t,e,n,r){this.Zt=t,this.removedTargetIds=e,this.key=n,this.te=r},xt=function(t,e){this.targetId=t,this.ee=e},Et=function(t,e,n,r){void 0===n&&(n=Q.Y),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Ct=function(){function t(){this.ne=0,this.se=At(),this.ie=Q.Y,this.re=!1,this.oe=!0}return Object.defineProperty(t.prototype,"Ht",{get:function(){return this.re},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.ie},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"he",{get:function(){return 0!==this.ne},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ae",{get:function(){return this.oe},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){t.H()>0&&(this.oe=!0,this.ie=t)},t.prototype.ce=function(){var t=pt(),e=pt(),n=pt();return this.se.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:y()}})),new wt(this.ie,this.re,t,e,n)},t.prototype.le=function(){this.oe=!1,this.se=At()},t.prototype._e=function(t,e){this.oe=!0,this.se=this.se.nt(t,e)},t.prototype.fe=function(t){this.oe=!0,this.se=this.se.remove(t)},t.prototype.de=function(){this.ne+=1},t.prototype.we=function(){this.ne-=1},t.prototype.Te=function(){this.oe=!0,this.re=!0},t}(),St=function(){function t(t){this.Ee=t,this.Ie=new Map,this.me=st(),this.Ae=kt(),this.Re=new it(x)}return t.prototype.Pe=function(t){for(var e=0,n=t.Zt;e<n.length;e++){var r=n[e];t.te instanceof on?this.Ve(r,t.te):t.te instanceof an&&this.ge(r,t.key,t.te)}for(var i=0,o=t.removedTargetIds;i<o.length;i++){var a=o[i];this.ge(a,t.key,t.te)}},t.prototype.ye=function(t){var e=this;this.pe(t,(function(n){var r=e.be(n);switch(t.state){case 0:e.ve(n)&&r.ue(t.resumeToken);break;case 1:r.we(),r.he||r.le(),r.ue(t.resumeToken);break;case 2:r.we(),r.he||e.removeTarget(n);break;case 3:e.ve(n)&&(r.Te(),r.ue(t.resumeToken));break;case 4:e.ve(n)&&(e.Se(n),r.ue(t.resumeToken));break;default:y()}}))},t.prototype.pe=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.Ie.forEach((function(t,r){n.ve(r)&&e(r)}))},t.prototype.De=function(t){var e=t.targetId,n=t.ee.count,r=this.Ce(e);if(r){var i=r.target;if(W(i))if(0===n){var o=new F(i.path);this.ge(e,o,new an(o,j.min()))}else m(1===n);else this.Fe(e)!==n&&(this.Se(e),this.Re=this.Re.add(e))}},t.prototype.Ne=function(t){var e=this,n=new Map;this.Ie.forEach((function(r,i){var o=e.Ce(i);if(o){if(r.Ht&&W(o.target)){var a=new F(o.target.path);null!==e.me.get(a)||e.$e(i,a)||e.ge(i,a,new an(a,t))}r.ae&&(n.set(i,r.ce()),r.le())}}));var r=pt();this.Ae.forEach((function(t,n){var i=!0;n.St((function(t){var n=e.Ce(t);return!n||2===n.J||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new bt(t,n,this.Re,this.me,r);return this.me=st(),this.Ae=kt(),this.Re=new it(x),i},t.prototype.Ve=function(t,e){if(this.ve(t)){var n=this.$e(t,e.key)?2:0;this.be(t)._e(e.key,n),this.me=this.me.nt(e.key,e),this.Ae=this.Ae.nt(e.key,this.ke(e.key).add(t))}},t.prototype.ge=function(t,e,n){if(this.ve(t)){var r=this.be(t);this.$e(t,e)?r._e(e,1):r.fe(e),this.Ae=this.Ae.nt(e,this.ke(e).delete(t)),n&&(this.me=this.me.nt(e,n))}},t.prototype.removeTarget=function(t){this.Ie.delete(t)},t.prototype.Fe=function(t){var e=this.be(t).ce();return this.Ee.xe(t).size+e.Yt.size-e.Xt.size},t.prototype.de=function(t){this.be(t).de()},t.prototype.be=function(t){var e=this.Ie.get(t);return e||(e=new Ct,this.Ie.set(t,e)),e},t.prototype.ke=function(t){var e=this.Ae.get(t);return e||(e=new it(x),this.Ae=this.Ae.nt(t,e)),e},t.prototype.ve=function(t){var e=null!==this.Ce(t);return e||f("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.Ce=function(t){var e=this.Ie.get(t);return e&&e.he?null:this.Ee.Me(t)},t.prototype.Se=function(t){var e=this;this.Ie.set(t,new Ct),this.Ee.xe(t).forEach((function(n){e.ge(t,n,null)}))},t.prototype.$e=function(t,e){return this.Ee.xe(t).has(e)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kt(){return new et(F.P)}function At(){return new et(F.P)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function It(t){var e=Dt(t.mapValue.fields.__local_write_time__.timestampValue);return new L(e.seconds,e.nanos)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rt=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ot(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Tt(t)?4:10:y()}function Nt(t,e){var n=Ot(t);if(n!==Ot(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return It(t).isEqual(It(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Dt(t.timestampValue),r=Dt(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Ft(t.bytesValue).isEqual(Ft(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Pt(t.geoPointValue.latitude)===Pt(e.geoPointValue.latitude)&&Pt(t.geoPointValue.longitude)===Pt(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Pt(t.integerValue)===Pt(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Pt(t.doubleValue),r=Pt(e.doubleValue);return n===r?q(n)===q(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return E(t.arrayValue.values||[],e.arrayValue.values||[],Nt);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(A(n)!==A(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Nt(n[i],r[i])))return!1;return!0}(t,e);default:return y()}}function Lt(t,e){return void 0!==(t.values||[]).find((function(t){return Nt(t,e)}))}function jt(t,e){var n=Ot(t),r=Ot(e);if(n!==r)return x(n,r);switch(n){case 0:return 0;case 1:return x(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=Pt(t.integerValue||t.doubleValue),r=Pt(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Bt(t.timestampValue,e.timestampValue);case 4:return Bt(It(t),It(e));case 5:return x(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Ft(t),r=Ft(e);return n.o(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=x(n[i],r[i]);if(0!==o)return o}return x(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=x(Pt(t.latitude),Pt(e.latitude));return 0!==n?n:x(Pt(t.longitude),Pt(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=jt(n[i],r[i]);if(o)return o}return x(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var s=x(r[a],o[a]);if(0!==s)return s;var c=jt(n[r[a]],i[o[a]]);if(0!==c)return c}return x(r.length,o.length)}(t.mapValue,e.mapValue);default:throw y()}}function Bt(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return x(t,e);var n=Dt(t),r=Dt(e),i=x(n.seconds,r.seconds);return 0!==i?i:x(n.nanos,r.nanos)}function Mt(t){return function t(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(t){var e=Dt(t);return"time("+e.seconds+","+e.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Ft(e.bytesValue).toBase64():"referenceValue"in e?(r=e.referenceValue,F.q(r).toString()):"geoPointValue"in e?"geo("+(n=e.geoPointValue).latitude+","+n.longitude+")":"arrayValue"in e?function(e){for(var n="[",r=!0,i=0,o=e.values||[];i<o.length;i++){var a=o[i];r?r=!1:n+=",",n+=t(a)}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){for(var n="{",r=!0,i=0,o=Object.keys(e.fields||{}).sort();i<o.length;i++){var a=o[i];r?r=!1:n+=",",n+=a+":"+t(e.fields[a])}return n+"}"}(e.mapValue):y();var n,r}(t)}function Dt(t){if(m(!!t),"string"==typeof t){var e=0,n=Rt.exec(t);if(m(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Pt(t.seconds),nanos:Pt(t.nanos)}}function Pt(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Ft(t){return"string"==typeof t?Q.fromBase64String(t):Q.fromUint8Array(t)}function Vt(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.N()}}function qt(t){return!!t&&"integerValue"in t}function Gt(t){return!!t&&"arrayValue"in t}function Ut(t){return!!t&&"nullValue"in t}function Ht(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function zt(t){return!!t&&"mapValue"in t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $t={asc:"ASCENDING",desc:"DESCENDING"},Wt={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Qt=function(t,e){this.s=t,this.Oe=e};function Kt(t){return{integerValue:""+t}}function Jt(t,e){if(t.Oe){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:q(e)?"-0":e}}function Xt(t,e){return G(e)?Kt(e):Jt(t,e)}function Yt(t,e){return t.Oe?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Zt(t,e){return t.Oe?e.toBase64():e.toUint8Array()}function te(t,e){return Yt(t,e.A())}function ee(t){return m(!!t),j.I(function(t){var e=Dt(t);return new L(e.seconds,e.nanos)}(t))}function ne(t,e){return function(t){return new M(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).N()}function re(t){var e=M.$(t);return m(xe(e)),e}function ie(t,e){return ne(t.s,e.path)}function oe(t,e){var n=re(e);return m(n.get(1)===t.s.projectId),m(!n.get(3)&&!t.s.database||n.get(3)===t.s.database),new F(ue(n))}function ae(t,e){return ne(t.s,e)}function se(t){var e=re(t);return 4===e.length?M.k():ue(e)}function ce(t){return new M(["projects",t.s.projectId,"databases",t.s.database]).N()}function ue(t){return m(t.length>4&&"documents"===t.get(4)),t.g(5)}function le(t,e,n){return{name:ie(t,e),fields:n.proto.mapValue.fields}}function he(t,e){var n;if(e instanceof $e)n={update:le(t,e.key,e.value)};else if(e instanceof Ye)n={delete:ie(t,e.key)};else if(e instanceof We)n={update:le(t,e.key,e.data),updateMask:_e(e.Le)};else if(e instanceof Ke)n={transform:{document:ie(t,e.key),fieldTransforms:e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof Ae)return{fieldPath:e.field.N(),setToServerValue:"REQUEST_TIME"};if(n instanceof Te)return{fieldPath:e.field.N(),appendMissingElements:{values:n.elements}};if(n instanceof Re)return{fieldPath:e.field.N(),removeAllFromArray:{values:n.elements}};if(n instanceof Ne)return{fieldPath:e.field.N(),increment:n.Be};throw y()}(0,t)}))}};else{if(!(e instanceof Ze))return y();n={verify:ie(t,e.key)}}return e.Ue.qe||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:te(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:y()}(t,e.Ue)),n}function de(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Pe.updateTime(ee(t.updateTime)):void 0!==t.exists?Pe.exists(t.exists):Pe.Qe()}(e.currentDocument):Pe.Qe();if(e.update){e.update.name;var r=oe(t,e.update.name),i=new tn({mapValue:{fields:e.update.fields}});if(e.updateMask){var o=function(t){var e=t.fieldPaths||[];return new Be(e.map((function(t){return P.B(t)})))}(e.updateMask);return new We(r,i,o,n)}return new $e(r,i,n)}if(e.delete){var a=oe(t,e.delete);return new Ye(a,n)}if(e.transform){var s=oe(t,e.transform.document),c=e.transform.fieldTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)m("REQUEST_TIME"===e.setToServerValue),n=new Ae;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new Te(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new Re(i)}else"increment"in e?n=new Ne(t,e.increment):y();var o=P.B(e.fieldPath);return new Me(o,n)}(t,e)}));return m(!0===n.exists),new Ke(s,c)}if(e.verify){var u=oe(t,e.verify);return new Ze(u,n)}return y()}function pe(t,e){return{documents:[ae(t,e.path)]}}function fe(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=ae(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=ae(t,r.p()),n.structuredQuery.from=[{collectionId:r.S()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return t instanceof fn?function(t){if("=="===t.op){if(Ht(t.value))return{unaryFilter:{field:ye(t.field),op:"IS_NAN"}};if(Ut(t.value))return{unaryFilter:{field:ye(t.field),op:"IS_NULL"}}}return{fieldFilter:{field:ye(t.field),op:(e=t.op,Wt[e]),value:t.value}};var e}(t):y()}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return{field:ye((e=t).field),direction:(n=e.dir,$t[n])};var e,n}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var a=function(t,e){return t.Oe||V(e)?e:{value:e}}(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=ve(e.startAt)),e.endAt&&(n.structuredQuery.endAt=ve(e.endAt)),n}function ve(t){return{before:t.before,values:t.position}}function ge(t){var e=!!t.before,n=t.values||[];return new wn(n,e)}function ye(t){return{fieldPath:t.N()}}function me(t){return P.B(t.fieldPath)}function be(t){return fn.create(me(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return y()}}(t.fieldFilter.op),t.fieldFilter.value)}function we(t){switch(t.unaryFilter.op){case"IS_NAN":var e=me(t.unaryFilter.field);return fn.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=me(t.unaryFilter.field);return fn.create(n,"==",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return y()}}function _e(t){var e=[];return t.fields.forEach((function(t){return e.push(t.N())})),{fieldPaths:e}}function xe(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ee=function(){this.je=void 0};function Ce(t,e,n){return t instanceof Ae?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Te?Ie(t,e):t instanceof Re?Oe(t,e):function(t,e){var n=ke(t,e),r=Le(n)+Le(t.Be);return qt(n)&&qt(t.Be)?Kt(r):Jt(t.serializer,r)}(t,e)}function Se(t,e,n){return t instanceof Te?Ie(t,e):t instanceof Re?Oe(t,e):n}function ke(t,e){return t instanceof Ne?qt(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Ae=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e}(Ee),Te=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return o.__extends(e,t),e}(Ee);function Ie(t,e){for(var n=je(e),r=function(t){n.some((function(e){return Nt(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Re=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return o.__extends(e,t),e}(Ee);function Oe(t,e){for(var n=je(e),r=function(t){n=n.filter((function(e){return!Nt(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Ne=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).serializer=e,r.Be=n,r}return o.__extends(e,t),e}(Ee);function Le(t){return Pt(t.integerValue||t.doubleValue)}function je(t){return Gt(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Be=function(){function t(t){this.fields=t,t.sort(P.P)}return t.prototype.Ke=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].D(t))return!0;return!1},t.prototype.isEqual=function(t){return E(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),Me=function(t,e){this.field=t,this.transform=e},De=function(t,e){this.version=t,this.transformResults=e},Pe=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.Qe=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"qe",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Fe(t,e){return void 0!==t.updateTime?e instanceof on&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof on}var Ve=function(){};function qe(t,e,n){return t instanceof $e?function(t,e,n){return new on(t.key,n.version,t.value,{hasCommittedMutations:!0})}(t,0,n):t instanceof We?function(t,e,n){if(!Fe(t.Ue,e))return new sn(t.key,n.version);var r=Qe(t,e);return new on(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof Ke?function(t,e,n){if(m(null!=n.transformResults),!Fe(t.Ue,e))return new sn(t.key,n.version);var r=Je(t,e),i=function(t,e,n){var r=[];m(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],a=o.transform,s=null;e instanceof on&&(s=e.field(o.field)),r.push(Se(a,s,n[i]))}return r}(t.fieldTransforms,e,n.transformResults),o=n.version,a=Xe(t,r.data(),i);return new on(t.key,o,a,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new an(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function Ge(t,e,n,r){return t instanceof $e?function(t,e){if(!Fe(t.Ue,e))return e;var n=ze(e);return new on(t.key,n,t.value,{Ge:!0})}(t,e):t instanceof We?function(t,e){if(!Fe(t.Ue,e))return e;var n=ze(e),r=Qe(t,e);return new on(t.key,n,r,{Ge:!0})}(t,e):t instanceof Ke?function(t,e,n,r){if(!Fe(t.Ue,e))return e;var i=Je(t,e),o=function(t,e,n,r){for(var i=[],o=0,a=t;o<a.length;o++){var s=a[o],c=s.transform,u=null;n instanceof on&&(u=n.field(s.field)),null===u&&r instanceof on&&(u=r.field(s.field)),i.push(Ce(c,u,e))}return i}(t.fieldTransforms,n,e,r),a=Xe(t,i.data(),o);return new on(t.key,i.version,a,{Ge:!0})}(t,e,r,n):function(t,e){return Fe(t.Ue,e)?new an(t.key,j.min()):e}(t,e)}function Ue(t,e){return t instanceof Ke?function(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],a=e instanceof on?e.field(o.field):void 0,s=ke(o.transform,a||null);null!=s&&(n=null==n?(new en).set(o.field,s):n.set(o.field,s))}return n?n.ze():null}(t,e):null}function He(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.Ue.isEqual(e.Ue)&&(0===t.type?t.value.isEqual(e.value):1===t.type?t.data.isEqual(e.data)&&t.Le.isEqual(e.Le):2!==t.type||E(t.fieldTransforms,t.fieldTransforms,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Te&&e instanceof Te||t instanceof Re&&e instanceof Re?E(t.elements,e.elements,Nt):t instanceof Ne&&e instanceof Ne?Nt(t.Be,e.Be):t instanceof Ae&&e instanceof Ae}(t.transform,e.transform)}(t,e)})))}function ze(t){return t instanceof on?t.version:j.min()}var $e=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).key=e,i.value=n,i.Ue=r,i.type=0,i}return o.__extends(e,t),e}(Ve),We=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this)||this).key=e,o.data=n,o.Le=r,o.Ue=i,o.type=1,o}return o.__extends(e,t),e}(Ve);function Qe(t,e){return function(t,e){var n=new en(e);return t.Le.fields.forEach((function(e){if(!e._()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}})),n.ze()}(t,e instanceof on?e.data():tn.empty())}var Ke=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.fieldTransforms=n,r.type=2,r.Ue=Pe.exists(!0),r}return o.__extends(e,t),e}(Ve);function Je(t,e){return e}function Xe(t,e,n){for(var r=new en(e),i=0;i<t.fieldTransforms.length;i++){var o=t.fieldTransforms[i];r.set(o.field,n[i])}return r.ze()}var Ye=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Ue=n,r.type=3,r}return o.__extends(e,t),e}(Ve),Ze=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Ue=n,r.type=4,r}return o.__extends(e,t),e}(Ve),tn=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t._())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!zt(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.S()])||null},t.prototype.isEqual=function(t){return Nt(this.proto,t.proto)},t}(),en=function(){function t(t){void 0===t&&(t=tn.empty()),this.He=t,this.Ye=new Map}return t.prototype.set=function(t,e){return this.Je(t,e),this},t.prototype.delete=function(t){return this.Je(t,null),this},t.prototype.Je=function(t,e){for(var n=this.Ye,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===Ot(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.S(),e)},t.prototype.ze=function(){var t=this.Xe(P.k(),this.Ye);return null!=t?new tn(t):this.He},t.prototype.Xe=function(t,e){var n=this,r=!1,i=this.He.field(t),o=zt(i)?Object.assign({},i.mapValue.fields):{};return e.forEach((function(e,i){if(e instanceof Map){var a=n.Xe(t.child(i),e);null!=a&&(o[i]=a,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},t}();function nn(t){var e=[];return T(t.fields||{},(function(t,n){var r=new P([t]);if(zt(n)){var i=nn(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,a=i;o<a.length;o++){var s=a[o];e.push(r.child(s))}}else e.push(r)})),new Be(e)
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var rn=function(t,e){this.key=t,this.version=e},on=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).Ze=r,o.Ge=!!i.Ge,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return o.__extends(e,t),e.prototype.field=function(t){return this.Ze.field(t)},e.prototype.data=function(){return this.Ze},e.prototype.tn=function(){return this.Ze.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Ge===t.Ge&&this.hasCommittedMutations===t.hasCommittedMutations&&this.Ze.isEqual(t.Ze)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.Ze.toString()+", {hasLocalMutations: "+this.Ge+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.Ge||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(rn),an=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return o.__extends(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(rn),sn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(rn),cn=function(){function t(t,e,n,r,i,o,a,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===a&&(a=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.en=n,this.filters=r,this.limit=i,this.nn=o,this.startAt=a,this.endAt=s,this.sn=null,this.rn=null,this.startAt&&this.on(this.startAt),this.endAt&&this.on(this.endAt)}return t.hn=function(e){return new t(e)},Object.defineProperty(t.prototype,"orderBy",{get:function(){if(null===this.sn){this.sn=[];var t=this.an(),e=this.un();if(null!==t&&null===e)t.O()||this.sn.push(new Cn(t)),this.sn.push(new Cn(P.L(),"asc"));else{for(var n=!1,r=0,i=this.en;r<i.length;r++){var o=i[r];this.sn.push(o),o.field.O()&&(n=!0)}if(!n){var a=this.en.length>0?this.en[this.en.length-1].dir:"asc";this.sn.push(new Cn(P.L(),a))}}}return this.sn},enumerable:!1,configurable:!0}),t.prototype.cn=function(e){var n=this.filters.concat([e]);return new t(this.path,this.collectionGroup,this.en.slice(),n,this.limit,this.nn,this.startAt,this.endAt)},t.prototype.ln=function(e){var n=this.en.concat([e]);return new t(this.path,this.collectionGroup,n,this.filters.slice(),this.limit,this.nn,this.startAt,this.endAt)},t.prototype._n=function(e){return new t(this.path,this.collectionGroup,this.en.slice(),this.filters.slice(),e,"F",this.startAt,this.endAt)},t.prototype.fn=function(e){return new t(this.path,this.collectionGroup,this.en.slice(),this.filters.slice(),e,"L",this.startAt,this.endAt)},t.prototype.dn=function(e){return new t(this.path,this.collectionGroup,this.en.slice(),this.filters.slice(),this.limit,this.nn,e,this.endAt)},t.prototype.wn=function(e){return new t(this.path,this.collectionGroup,this.en.slice(),this.filters.slice(),this.limit,this.nn,this.startAt,e)},t.prototype.Tn=function(e){return new t(e,null,this.en.slice(),this.filters.slice(),this.limit,this.nn,this.startAt,this.endAt)},t.prototype.En=function(){return 0===this.filters.length&&null===this.limit&&null==this.startAt&&null==this.endAt&&(0===this.en.length||1===this.en.length&&this.en[0].field.O())},t.prototype.In=function(){return!V(this.limit)&&"F"===this.nn},t.prototype.mn=function(){return!V(this.limit)&&"L"===this.nn},t.prototype.un=function(){return this.en.length>0?this.en[0].field:null},t.prototype.an=function(){for(var t=0,e=this.filters;t<e.length;t++){var n=e[t];if(n instanceof fn&&n.An())return n.field}return null},t.prototype.Rn=function(t){for(var e=0,n=this.filters;e<n.length;e++){var r=n[e];if(r instanceof fn&&t.indexOf(r.op)>=0)return r.op}return null},t.prototype.Pn=function(){return W(this.We())},t.prototype.Vn=function(){return null!==this.collectionGroup},t.prototype.We=function(){if(!this.rn)if("F"===this.nn)this.rn=H(this.path,this.collectionGroup,this.orderBy,this.filters,this.limit,this.startAt,this.endAt);else{for(var t=[],e=0,n=this.orderBy;e<n.length;e++){var r=n[e],i="desc"===r.dir?"asc":"desc";t.push(new Cn(r.field,i))}var o=this.endAt?new wn(this.endAt.position,!this.endAt.before):null,a=this.startAt?new wn(this.startAt.position,!this.startAt.before):null;this.rn=H(this.path,this.collectionGroup,t,this.filters,this.limit,o,a)}return this.rn},t.prototype.on=function(t){},t}();function un(t,e){return $(t.We(),e.We())&&t.nn===e.nn}function ln(t){return z(t.We())+"|lt:"+t.nn}function hn(t){return"Query(target="+function(t){var e=t.path.N();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.N()+" "+e.op+" "+Mt(e.value);var e})).join(", ")+"]"),V(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return(e=t).field.N()+" ("+e.dir+")";var e})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+_n(t.startAt)),t.endAt&&(e+=", endAt: "+_n(t.endAt)),"Target("+e+")"}(t.We())+"; limitType="+t.nn+")"}function dn(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.U(t.collectionGroup)&&t.path.D(n):F.W(t.path)?t.path.isEqual(n):t.path.C(n)}(t,e)&&function(t,e){for(var n=0,r=t.en;n<r.length;n++){var i=r[n];if(!i.field.O()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!xn(t.startAt,t.orderBy,e)||t.endAt&&xn(t.endAt,t.orderBy,e))}(t,e)}function pn(t){return function(e,n){for(var r=!1,i=0,o=t.orderBy;i<o.length;i++){var a=o[i],s=Sn(a,e,n);if(0!==s)return s;r=r||a.field.O()}return 0}}var fn=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return o.__extends(e,t),e.create=function(t,n,r){if(t.O())return"in"===n?new gn(t,r):new vn(t,n,r);if(Ut(r)){if("=="!==n)throw new N(O.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new e(t,n,r)}if(Ht(r)){if("=="!==n)throw new N(O.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new e(t,n,r)}return"array-contains"===n?new yn(t,r):"in"===n?new mn(t,r):"array-contains-any"===n?new bn(t,r):new e(t,n,r)},e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&Ot(this.value)===Ot(e)&&this.gn(jt(e,this.value))},e.prototype.gn=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case">":return t>0;case">=":return t>=0;default:return y()}},e.prototype.An=function(){return["<","<=",">",">="].indexOf(this.op)>=0},e}((function(){})),vn=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=F.q(r.referenceValue),i}return o.__extends(e,t),e.prototype.matches=function(t){var e=F.P(t.key,this.key);return this.gn(e)},e}(fn),gn=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=(n.arrayValue.values||[]).map((function(t){return F.q(t.referenceValue)})),r}return o.__extends(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(fn),yn=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return o.__extends(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return Gt(e)&&Lt(e.arrayValue,this.value)},e}(fn),mn=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return o.__extends(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&Lt(this.value.arrayValue,e)},e}(fn),bn=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return o.__extends(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!Gt(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return Lt(e.value.arrayValue,t)}))},e}(fn),wn=function(t,e){this.position=t,this.before=e};function _n(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return Mt(t)})).join(",")}function xn(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],a=t.position[i];if(r=o.field.O()?F.P(F.q(a.referenceValue),n.key):jt(a,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function En(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Nt(t.position[n],e.position[n]))return!1;return!0}var Cn=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Sn(t,e,n){var r=t.field.O()?F.P(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?jt(r,i):y()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return y()}}function kn(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var An=function(){function t(t,e,n,r){this.batchId=t,this.yn=e,this.baseMutations=n,this.mutations=r}return t.prototype.pn=function(t,e,n){for(var r=n.bn,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=qe(o,e,r[i]))}return e},t.prototype.vn=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=Ge(i,e,e,this.yn))}for(var o=e,a=0,s=this.mutations;a<s.length;a++){var c=s[a];c.key.isEqual(t)&&(e=Ge(c,e,o,this.yn))}return e},t.prototype.Sn=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.vn(r.key,t.get(r.key));i&&(n=n.nt(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),pt())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&E(this.mutations,t.mutations,(function(t,e){return He(t,e)}))&&E(this.baseMutations,t.baseMutations,(function(t,e){return He(t,e)}))},t}(),Tn=function(){function t(t,e,n,r){this.batch=t,this.Dn=e,this.bn=n,this.Cn=r}return t.from=function(e,n,r){m(e.mutations.length===r.length);for(var i=ht,o=e.mutations,a=0;a<o.length;a++)i=i.nt(o[a].key,r[a].version);return new t(e,n,r,i)},t}(),In=function(){function e(t){var e=this;this.Fn=null,this.Nn=null,this.result=void 0,this.error=void 0,this.$n=!1,this.kn=!1,t((function(t){e.$n=!0,e.result=t,e.Fn&&e.Fn(t)}),(function(t){e.$n=!0,e.error=t,e.Nn&&e.Nn(t)}))}return e.prototype.catch=function(t){return this.next(void 0,t)},e.prototype.next=function(t,n){var r=this;return this.kn&&y(),this.kn=!0,this.$n?this.error?this.xn(n,this.error):this.Mn(t,this.result):new e((function(e,i){r.Fn=function(n){r.Mn(t,n).next(e,i)},r.Nn=function(t){r.xn(n,t).next(e,i)}}))},e.prototype.On=function(){var e=this;return new t((function(t,n){e.next(t,n)}))},e.prototype.Ln=function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}},e.prototype.Mn=function(t,n){return t?this.Ln((function(){return t(n)})):e.resolve(n)},e.prototype.xn=function(t,n){return t?this.Ln((function(){return t(n)})):e.reject(n)},e.resolve=function(t){return new e((function(e,n){e(t)}))},e.reject=function(t){return new e((function(e,n){n(t)}))},e.Bn=function(t){return new e((function(e,n){var r=0,i=0,o=!1;t.forEach((function(t){++r,t.next((function(){++i,o&&i===r&&e()}),(function(t){return n(t)}))})),o=!0,i===r&&e()}))},e.qn=function(t){for(var n=e.resolve(!1),r=function(t){n=n.next((function(n){return n?e.resolve(n):t()}))},i=0,o=t;i<o.length;i++)r(o[i]);return n},e.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.Bn(r)},e}(),Rn=function(){function t(){this.Un=new R((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.Qn=!1}return Object.defineProperty(t.prototype,"readTime",{get:function(){return this.Wn},set:function(t){this.Wn=t},enumerable:!1,configurable:!0}),t.prototype.jn=function(t,e){this.Kn(),this.readTime=e,this.Un.set(t.key,t)},t.prototype.Gn=function(t,e){this.Kn(),e&&(this.readTime=e),this.Un.set(t,null)},t.prototype.zn=function(t,e){this.Kn();var n=this.Un.get(e);return void 0!==n?In.resolve(n):this.Hn(t,e)},t.prototype.getEntries=function(t,e){return this.Yn(t,e)},t.prototype.apply=function(t){return this.Kn(),this.Qn=!0,this.Jn(t)},t.prototype.Kn=function(){},t}(),On="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Nn=function(){function t(){this.Xn=[]}return t.prototype.Zn=function(t){this.Xn.push(t)},t.prototype.ts=function(){this.Xn.forEach((function(t){return t()}))},t}(),Ln=function(){function t(t,e,n){this.es=t,this.ns=e,this.ss=n}return t.prototype.rs=function(t,e){var n=this;return this.ns.os(t,e).next((function(r){return n.hs(t,e,r)}))},t.prototype.hs=function(t,e,n){return this.es.zn(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].vn(e,t);return t}))},t.prototype.as=function(t,e,n){var r=ct();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].vn(t,e);r=r.nt(t,e)})),r},t.prototype.us=function(t,e){var n=this;return this.es.getEntries(t,e).next((function(e){return n.cs(t,e)}))},t.prototype.cs=function(t,e){var n=this;return this.ns.ls(t,e).next((function(r){var i=n.as(t,e,r),o=st();return i.forEach((function(t,e){e||(e=new an(t,j.min())),o=o.nt(t,e)})),o}))},t.prototype._s=function(t,e,n){return e.Pn()?this.fs(t,e.path):e.Vn()?this.ds(t,e,n):this.ws(t,e,n)},t.prototype.fs=function(t,e){return this.rs(t,new F(e)).next((function(t){var e=lt();return t instanceof on&&(e=e.nt(t.key,t)),e}))},t.prototype.ds=function(t,e,n){var r=this,i=e.collectionGroup,o=lt();return this.ss.Ts(t,i).next((function(a){return In.forEach(a,(function(a){var s=e.Tn(a.child(i));return r.ws(t,s,n).next((function(t){t.forEach((function(t,e){o=o.nt(t,e)}))}))})).next((function(){return o}))}))},t.prototype.ws=function(t,e,n){var r,i,o=this;return this.es._s(t,e,n).next((function(n){return r=n,o.ns.Es(t,e)})).next((function(e){return i=e,o.Is(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],a=0,s=o.mutations;a<s.length;a++){var c=s[a],u=c.key,l=r.get(u),h=Ge(c,l,l,o.yn);r=h instanceof on?r.nt(u,h):r.remove(u)}}))})).next((function(){return r.forEach((function(t,n){dn(e,n)||(r=r.remove(t))})),r}))},t.prototype.Is=function(t,e,n){for(var r=pt(),i=0,o=e;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var c=s[a];c instanceof We&&null===n.get(c.key)&&(r=r.add(c.key))}var u=n;return this.es.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof on&&(u=u.nt(t,e))})),u}))},t}(),jn=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.ms=n,this.As=r}return t.Rs=function(e,n){for(var r=pt(),i=pt(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Bn=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.Ps=function(t){return n.Vs(t)},this.gs=function(t){return e.ys(t)})}return t.prototype.Vs=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.gs&&this.gs(t),t},t}();Bn.ps=-1;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Mn=function(){var e=this;this.promise=new t((function(t,n){e.resolve=t,e.reject=n}))},Dn=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.bs=t,this.vs=e,this.Ss=n,this.Ds=r,this.Cs=i,this.Fs=0,this.Ns=null,this.$s=Date.now(),this.reset()}return t.prototype.reset=function(){this.Fs=0},t.prototype.ks=function(){this.Fs=this.Cs},t.prototype.xs=function(t){var e=this;this.cancel();var n=Math.floor(this.Fs+this.Ms()),r=Math.max(0,Date.now()-this.$s),i=Math.max(0,n-r);i>0&&f("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Fs+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ns=this.bs.Os(this.vs,i,(function(){return e.$s=Date.now(),t()})),this.Fs*=this.Ds,this.Fs<this.Ss&&(this.Fs=this.Ss),this.Fs>this.Cs&&(this.Fs=this.Cs)},t.prototype.Ls=function(){null!==this.Ns&&(this.Ns.Bs(),this.Ns=null)},t.prototype.cancel=function(){null!==this.Ns&&(this.Ns.cancel(),this.Ns=null)},t.prototype.Ms=function(){return(Math.random()-.5)*this.Fs},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pn(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Vn(e)),e=Fn(t.get(n),e);return Vn(e)}function Fn(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function Vn(t){return t+""}function qn(t){var e=t.length;if(m(e>=2),2===e)return m(""===t.charAt(0)&&""===t.charAt(1)),M.k();for(var n=e-2,r=[],i="",o=0;o<e;){var a=t.indexOf("",o);switch((a<0||a>n)&&y(),t.charAt(a+1)){case"":var s=t.substring(o,a),c=void 0;0===i.length?c=s:(c=i+=s,i=""),r.push(c);break;case"":i+=t.substring(o,a),i+="\0";break;case"":i+=t.substring(o,a+1);break;default:y()}o=a+2}return new M(r)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gn=function(){function t(){this.qs=new Un}return t.prototype.Us=function(t,e){return this.qs.add(e),In.resolve()},t.prototype.Ts=function(t,e){return In.resolve(this.qs.getEntries(e))},t}(),Un=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.S(),n=t.p(),r=this.index[e]||new it(M.P),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.S(),n=t.p(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new it(M.P)).F()},t}(),Hn=function(){function t(){this.Qs=new Un}return t.prototype.Us=function(t,e){var n=this;if(!this.Qs.has(e)){var r=e.S(),i=e.p();t.Zn((function(){n.Qs.add(e)}));var o={collectionId:r,parent:Pn(i)};return zn(t).put(o)}return In.resolve()},t.prototype.Ts=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[C(e),""],!1,!0);return zn(t).Ws(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(qn(o.parent))}return n}))},t}();function zn(t){return fr.js(t,Vr.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $n=function(t){this.Ks=t};function Wn(t,e){if(e.document)return function(t,e,n){var r=oe(t,e.name),i=ee(e.updateTime),o=new tn({mapValue:{fields:e.fields}});return new on(r,i,o,{hasCommittedMutations:!!n})}(t.Ks,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=F.j(e.noDocument.path),r=Yn(e.noDocument.readTime);return new an(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=F.j(e.unknownDocument.path),o=Yn(e.unknownDocument.version);return new sn(i,o)}return y()}function Qn(t,e,n){var r=Kn(n),i=e.key.path.p().F();if(e instanceof on){var o=function(t,e){return{name:ie(t,e.key),fields:e.tn().mapValue.fields,updateTime:Yt(t,e.version.A())}}(t.Ks,e),a=e.hasCommittedMutations;return new Br(null,null,o,a,r,i)}if(e instanceof an){var s=e.key.path.F(),c=Xn(e.version),u=e.hasCommittedMutations;return new Br(null,new Lr(s,c),null,u,r,i)}if(e instanceof sn){var l=e.key.path.F(),h=Xn(e.version);return new Br(new jr(l,h),null,null,!0,r,i)}return y()}function Kn(t){var e=t.A();return[e.seconds,e.nanoseconds]}function Jn(t){var e=new L(t[0],t[1]);return j.I(e)}function Xn(t){var e=t.A();return new Tr(e.seconds,e.nanoseconds)}function Yn(t){var e=new L(t.seconds,t.nanoseconds);return j.I(e)}function Zn(t,e){var n=(e.baseMutations||[]).map((function(e){return de(t.Ks,e)})),r=e.mutations.map((function(e){return de(t.Ks,e)})),i=L.fromMillis(e.localWriteTimeMs);return new An(e.batchId,i,n,r)}function tr(t){var e,n=Yn(t.readTime),r=void 0!==t.lastLimboFreeSnapshotVersion?Yn(t.lastLimboFreeSnapshotVersion):j.min();return e=void 0!==t.query.documents?function(t){m(1===t.documents.length);var e=t.documents[0];return cn.hn(se(e)).We()}(t.query):function(t){var e=se(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){m(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var a=[];n.where&&(a=function t(e){return e?void 0!==e.unaryFilter?[we(e)]:void 0!==e.fieldFilter?[be(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return t(e)})).reduce((function(t,e){return t.concat(e)})):y():[]}(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(t){return new Cn(me((e=t).field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction));var e})));var c=null;n.limit&&(c=function(t){var e;return V(e="object"==typeof t?t.value:t)?null:e}(n.limit));var u=null;n.startAt&&(u=ge(n.startAt));var l=null;return n.endAt&&(l=ge(n.endAt)),new cn(e,i,s,a,c,"F",u,l).We()}(t.query),new X(e,t.targetId,0,t.lastListenSequenceNumber,n,r,Q.fromBase64String(t.resumeToken))}function er(t,e){var n,r=Xn(e.X),i=Xn(e.lastLimboFreeSnapshotVersion);n=W(e.target)?pe(t.Ks,e.target):fe(t.Ks,e.target);var o=e.resumeToken.toBase64();return new Dr(e.targetId,z(e.target),r,o,e.sequenceNumber,i,n)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nr=function(){function t(t,e){this.serializer=t,this.ss=e}return t.prototype.jn=function(t,e,n){return ir(t).put(or(e),n)},t.prototype.Gn=function(t,e){var n=ir(t),r=or(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.Gs(t,r)}))},t.prototype.zn=function(t,e){var n=this;return ir(t).get(or(e)).next((function(t){return n.zs(t)}))},t.prototype.Hs=function(t,e){var n=this;return ir(t).get(or(e)).next((function(t){var e=n.zs(t);return e?{Ys:e,size:ar(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=ct();return this.Js(t,e,(function(t,e){var i=n.zs(e);r=r.nt(t,i)})).next((function(){return r}))},t.prototype.Xs=function(t,e){var n=this,r=ct(),i=new et(F.P);return this.Js(t,e,(function(t,e){var o=n.zs(e);o?(r=r.nt(t,o),i=i.nt(t,ar(e))):(r=r.nt(t,null),i=i.nt(t,0))})).next((function(){return{Zs:r,ti:i}}))},t.prototype.Js=function(t,e,n){if(e._())return In.resolve();var r=IDBKeyRange.bound(e.first().path.F(),e.last().path.F()),i=e.at(),o=i.dt();return ir(t).ei({range:r},(function(t,e,r){for(var a=F.j(t);o&&F.P(o,a)<0;)n(o,null),o=i.dt();o&&o.isEqual(a)&&(n(o,e),o=i.wt()?i.dt():null),o?r.ni(o.path.F()):r.done()})).next((function(){for(;o;)n(o,null),o=i.wt()?i.dt():null}))},t.prototype._s=function(t,e,n){var r=this,i=lt(),o=e.path.length+1,a={};if(n.isEqual(j.min())){var s=e.path.F();a.range=IDBKeyRange.lowerBound(s)}else{var c=e.path.F(),u=Kn(n);a.range=IDBKeyRange.lowerBound([c,u],!0),a.index=Br.collectionReadTimeIndex}return ir(t).ei(a,(function(t,n,a){if(t.length===o){var s=Wn(r.serializer,n);e.path.D(s.key.path)?s instanceof on&&dn(e,s)&&(i=i.nt(s.key,s)):a.done()}})).next((function(){return i}))},t.prototype.si=function(t,e){var n=this,r=st(),i=Kn(e),o=ir(t),a=IDBKeyRange.lowerBound(i,!0);return o.ei({index:Br.readTimeIndex,range:a},(function(t,e){var o=Wn(n.serializer,e);r=r.nt(o.key,o),i=e.readTime})).next((function(){return{ii:r,readTime:Jn(i)}}))},t.prototype.ri=function(t){var e=ir(t),n=j.min();return e.ei({index:Br.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=Jn(e.readTime)),r.done()})).next((function(){return n}))},t.prototype.oi=function(e){return new t.hi(this,!!e&&e.ai)},t.prototype.ui=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return rr(t).get(Mr.key).next((function(t){return m(!!t),t}))},t.prototype.Gs=function(t,e){return rr(t).put(Mr.key,e)},t.prototype.zs=function(t){if(t){var e=Wn(this.serializer,t);return e instanceof an&&e.version.isEqual(j.min())?null:e}return null},t}();function rr(t){return fr.js(t,Mr.store)}function ir(t){return fr.js(t,Br.store)}function or(t){return t.path.F()}function ar(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw y();e=t.noDocument}return JSON.stringify(e).length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */nr.hi=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).ci=e,r.ai=n,r.li=new R((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return o.__extends(e,t),e.prototype.Jn=function(t){var e=this,n=[],r=0,i=new it((function(t,e){return x(t.N(),e.N())}));return this.Un.forEach((function(o,a){var s=e.li.get(o);if(a){var c=Qn(e.ci.serializer,a,e.readTime);i=i.add(o.path.p());var u=ar(c);r+=u-s,n.push(e.ci.jn(t,o,c))}else if(r-=s,e.ai){var l=Qn(e.ci.serializer,new an(o,j.min()),e.readTime);n.push(e.ci.jn(t,o,l))}else n.push(e.ci.Gn(t,o))})),i.forEach((function(r){n.push(e.ci.ss.Us(t,r))})),n.push(this.ci.updateMetadata(t,r)),In.Bn(n)},e.prototype.Hn=function(t,e){var n=this;return this.ci.Hs(t,e).next((function(t){return null===t?(n.li.set(e,0),null):(n.li.set(e,t.size),t.Ys)}))},e.prototype.Yn=function(t,e){var n=this;return this.ci.Xs(t,e).next((function(t){var e=t.Zs;return t.ti.forEach((function(t,e){n.li.set(t,e)})),e}))},e}(Rn);var sr=function(){function t(t){this._i=t}return t.prototype.next=function(){return this._i+=2,this._i},t.fi=function(){return new t(0)},t.di=function(){return new t(-1)},t}(),cr=function(){function t(t,e){this.wi=t,this.serializer=e}return t.prototype.Ti=function(t){var e=this;return this.Ei(t).next((function(n){var r=new sr(n.highestTargetId);return n.highestTargetId=r.next(),e.Ii(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.mi=function(t){return this.Ei(t).next((function(t){return j.I(new L(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.Ai=function(t){return this.Ei(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.Ri=function(t,e,n){var r=this;return this.Ei(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.A()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Ii(t,i)}))},t.prototype.Pi=function(t,e){var n=this;return this.Vi(t,e).next((function(){return n.Ei(t).next((function(r){return r.targetCount+=1,n.gi(e,r),n.Ii(t,r)}))}))},t.prototype.yi=function(t,e){return this.Vi(t,e)},t.prototype.pi=function(t,e){var n=this;return this.bi(t,e.targetId).next((function(){return ur(t).delete(e.targetId)})).next((function(){return n.Ei(t)})).next((function(e){return m(e.targetCount>0),e.targetCount-=1,n.Ii(t,e)}))},t.prototype.vi=function(t,e,n){var r=this,i=0,o=[];return ur(t).ei((function(a,s){var c=tr(s);c.sequenceNumber<=e&&null===n.get(c.targetId)&&(i++,o.push(r.pi(t,c)))})).next((function(){return In.Bn(o)})).next((function(){return i}))},t.prototype.pe=function(t,e){return ur(t).ei((function(t,n){var r=tr(n);e(r)}))},t.prototype.Ei=function(t){return lr(t).get(Fr.key).next((function(t){return m(null!==t),t}))},t.prototype.Ii=function(t,e){return lr(t).put(Fr.key,e)},t.prototype.Vi=function(t,e){return ur(t).put(er(this.serializer,e))},t.prototype.gi=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.Si=function(t){return this.Ei(t).next((function(t){return t.targetCount}))},t.prototype.Di=function(t,e){var n=z(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return ur(t).ei({range:r,index:Dr.queryTargetsIndexName},(function(t,n,r){var o=tr(n);$(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.Ci=function(t,e,n){var r=this,i=[],o=hr(t);return e.forEach((function(e){var a=Pn(e.path);i.push(o.put(new Pr(n,a))),i.push(r.wi.Fi(t,n,e))})),In.Bn(i)},t.prototype.Ni=function(t,e,n){var r=this,i=hr(t);return In.forEach(e,(function(e){var o=Pn(e.path);return In.Bn([i.delete([n,o]),r.wi.$i(t,n,e)])}))},t.prototype.bi=function(t,e){var n=hr(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.ki=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=hr(t),i=pt();return r.ei({range:n,xi:!0},(function(t,e,n){var r=qn(t[1]),o=new F(r);i=i.add(o)})).next((function(){return i}))},t.prototype.Mi=function(t,e){var n=Pn(e.path),r=IDBKeyRange.bound([n],[C(n)],!1,!0),i=0;return hr(t).ei({index:Pr.documentTargetsIndex,xi:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.Me=function(t,e){return ur(t).get(e).next((function(t){return t?tr(t):null}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ur(t){return fr.js(t,Dr.store)}function lr(t){return fr.js(t,Fr.store)}function hr(t){return fr.js(t,Pr.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dr="Failed to obtain exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",pr=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Oi=e,r.Li=n,r}return o.__extends(e,t),e}(Nn),fr=function(){function e(n,r,i,o,a,s,c,u,l,h){if(this.allowTabSynchronization=n,this.persistenceKey=r,this.clientId=i,this.bs=a,this.window=s,this.document=c,this.Bi=l,this.qi=h,this.Ui=null,this.Qi=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Wi=null,this.inForeground=!1,this.ji=null,this.Ki=null,this.Gi=Number.NEGATIVE_INFINITY,this.zi=function(e){return t.resolve()},!e.Hi())throw new N(O.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.wi=new yr(this,o),this.Yi=r+"main",this.serializer=new $n(u),this.Ji=new cr(this.wi,this.serializer),this.ss=new Hn,this.es=new nr(this.serializer,this.ss),this.window&&this.window.localStorage?this.Xi=this.window.localStorage:(this.Xi=null,!1===h&&v("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return e.js=function(t,e){if(t instanceof pr)return Hr.js(t.Oi,e);throw y()},e.prototype.start=function(){var e=this;return Hr.Zi(this.Yi,kr,new Ar(this.serializer)).then((function(t){return e.tr=t,e.er()})).then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new N(O.FAILED_PRECONDITION,dr);return e.nr(),e.sr(),e.ir(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Ji.Ai(t)}))})).then((function(t){e.Ui=new Bn(t,e.Bi)})).then((function(){e.Qi=!0})).catch((function(n){return e.tr&&e.tr.close(),t.reject(n)}))},e.prototype.rr=function(t){var e=this;return this.zi=function(n){return o.__awaiter(e,void 0,void 0,(function(){return o.__generator(this,(function(e){return this.or?[2,t(n)]:[2]}))}))},t(this.isPrimary)},e.prototype.hr=function(t){var e=this;this.tr.ar((function(n){return o.__awaiter(e,void 0,void 0,(function(){return o.__generator(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},e.prototype.ur=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.bs.cr((function(){return o.__awaiter(e,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return this.or?[4,this.er()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},e.prototype.er=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return gr(e).put(new Gr(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.lr(e).next((function(e){e||(t.isPrimary=!1,t.bs._r((function(){return t.zi(!1)})))}))})).next((function(){return t.dr(e)})).next((function(n){return t.isPrimary&&!n?t.wr(e).next((function(){return!1})):!!n&&t.Tr(e).next((function(){return!0}))}))})).catch((function(e){if(Wr(e))return f("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return f("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.bs._r((function(){return t.zi(e)})),t.isPrimary=e}))},e.prototype.lr=function(t){var e=this;return vr(t).get(Ir.key).next((function(t){return In.resolve(e.Er(t))}))},e.prototype.Ir=function(t){return gr(t).delete(this.clientId)},e.prototype.mr=function(){return o.__awaiter(this,void 0,void 0,(function(){var t,n,r,i,a=this;return o.__generator(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.Ar(this.Gi,18e5)?[3,2]:(this.Gi=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var n=e.js(t,Gr.store);return n.Ws().next((function(t){var e=a.Rr(t,18e5),r=t.filter((function(t){return-1===e.indexOf(t)}));return In.forEach(r,(function(t){return n.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=o.sent(),this.Xi)for(n=0,r=t;n<r.length;n++)i=r[n],this.Xi.removeItem(this.Pr(i.clientId));o.label=2;case 2:return[2]}}))}))},e.prototype.ir=function(){var t=this;this.Ki=this.bs.Os("client_metadata_refresh",4e3,(function(){return t.er().then((function(){return t.mr()})).then((function(){return t.ir()}))}))},e.prototype.Er=function(t){return!!t&&t.ownerId===this.clientId},e.prototype.dr=function(t){var e=this;return this.qi?In.resolve(!0):vr(t).get(Ir.key).next((function(n){if(null!==n&&e.Ar(n.leaseTimestampMs,5e3)&&!e.Vr(n.ownerId)){if(e.Er(n)&&e.networkEnabled)return!0;if(!e.Er(n)){if(!n.allowTabSynchronization)throw new N(O.FAILED_PRECONDITION,dr);return!1}}return!(!e.networkEnabled||!e.inForeground)||gr(t).Ws().next((function(t){return void 0===e.Rr(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&f("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},e.prototype.gr=function(){return o.__awaiter(this,void 0,void 0,(function(){var t=this;return o.__generator(this,(function(e){switch(e.label){case 0:return this.Qi=!1,this.yr(),this.Ki&&(this.Ki.cancel(),this.Ki=null),this.pr(),this.br(),[4,this.runTransaction("shutdown","readwrite",(function(e){return t.wr(e).next((function(){return t.Ir(e)}))})).catch((function(t){f("IndexedDbPersistence","Proceeding with shutdown despite failure: ",t)}))];case 1:return e.sent(),this.tr.close(),this.vr(),[2]}}))}))},e.prototype.Rr=function(t,e){var n=this;return t.filter((function(t){return n.Ar(t.updateTimeMs,e)&&!n.Vr(t.clientId)}))},e.prototype.Sr=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return gr(e).Ws().next((function(e){return t.Rr(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(e.prototype,"or",{get:function(){return this.Qi},enumerable:!1,configurable:!0}),e.prototype.Dr=function(t){return wr.Cr(t,this.serializer,this.ss,this.wi)},e.prototype.Fr=function(){return this.Ji},e.prototype.Nr=function(){return this.es},e.prototype.$r=function(){return this.ss},e.prototype.runTransaction=function(t,e,n){var r=this;f("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.tr.runTransaction(o,Ur,(function(o){return i=new pr(o,r.Ui?r.Ui.next():Bn.ps),"readwrite-primary"===e?r.lr(i).next((function(t){return!!t||r.dr(i)})).next((function(e){if(!e)throw v("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.bs._r((function(){return r.zi(!1)})),new N(O.FAILED_PRECONDITION,On);return n(i)})).next((function(t){return r.Tr(i).next((function(){return t}))})):r.kr(i).next((function(){return n(i)}))})).then((function(t){return i.ts(),t}))},e.prototype.kr=function(t){var e=this;return vr(t).get(Ir.key).next((function(t){if(null!==t&&e.Ar(t.leaseTimestampMs,5e3)&&!e.Vr(t.ownerId)&&!e.Er(t)&&!(e.qi||e.allowTabSynchronization&&t.allowTabSynchronization))throw new N(O.FAILED_PRECONDITION,dr)}))},e.prototype.Tr=function(t){var e=new Ir(this.clientId,this.allowTabSynchronization,Date.now());return vr(t).put(Ir.key,e)},e.Hi=function(){return Hr.Hi()},e.prototype.wr=function(t){var e=this,n=vr(t);return n.get(Ir.key).next((function(t){return e.Er(t)?(f("IndexedDbPersistence","Releasing primary lease."),n.delete(Ir.key)):In.resolve()}))},e.prototype.Ar=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(v("Detected an update time that is in the future: "+t+" > "+n),1))},e.prototype.nr=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ji=function(){t.bs.cr((function(){return t.inForeground="visible"===t.document.visibilityState,t.er()}))},this.document.addEventListener("visibilitychange",this.ji),this.inForeground="visible"===this.document.visibilityState)},e.prototype.pr=function(){this.ji&&(this.document.removeEventListener("visibilitychange",this.ji),this.ji=null)},e.prototype.sr=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Wi=function(){e.yr(),e.bs.cr((function(){return e.gr()}))},this.window.addEventListener("unload",this.Wi))},e.prototype.br=function(){this.Wi&&(this.window.removeEventListener("unload",this.Wi),this.Wi=null)},e.prototype.Vr=function(t){var e;try{var n=null!==(null===(e=this.Xi)||void 0===e?void 0:e.getItem(this.Pr(t)));return f("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return v("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},e.prototype.yr=function(){if(this.Xi)try{this.Xi.setItem(this.Pr(this.clientId),String(Date.now()))}catch(t){v("Failed to set zombie client id.",t)}},e.prototype.vr=function(){if(this.Xi)try{this.Xi.removeItem(this.Pr(this.clientId))}catch(t){}},e.prototype.Pr=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},e}();function vr(t){return fr.js(t,Ir.store)}function gr(t){return fr.js(t,Gr.store)}var yr=function(){function t(t,e){this.db=t,this.xr=new ci(this,e)}return t.prototype.Mr=function(t){var e=this.Or(t);return this.db.Fr().Si(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.Or=function(t){var e=0;return this.Lr(t,(function(t){e++})).next((function(){return e}))},t.prototype.pe=function(t,e){return this.db.Fr().pe(t,e)},t.prototype.Lr=function(t,e){return this.Br(t,(function(t,n){return e(n)}))},t.prototype.Fi=function(t,e,n){return mr(t,n)},t.prototype.$i=function(t,e,n){return mr(t,n)},t.prototype.vi=function(t,e,n){return this.db.Fr().vi(t,e,n)},t.prototype.qr=function(t,e){return mr(t,e)},t.prototype.Ur=function(t,e){return function(t,e){var n=!1;return Sr(t).Qr((function(r){return _r(t,r,e).next((function(t){return t&&(n=!0),In.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.Wr=function(t,e){var n=this,r=this.db.Nr().oi(),i=[],o=0;return this.Br(t,(function(a,s){if(s<=e){var c=n.Ur(t,a).next((function(e){if(!e)return o++,r.zn(t,a).next((function(){return r.Gn(a),hr(t).delete([0,Pn(a.path)])}))}));i.push(c)}})).next((function(){return In.Bn(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.Z(t.Li);return this.db.Fr().yi(t,n)},t.prototype.jr=function(t,e){return mr(t,e)},t.prototype.Br=function(t,e){var n,r=hr(t),i=Bn.ps;return r.ei({index:Pr.documentTargetsIndex},(function(t,r){var o=t[0],a=(t[1],r.path),s=r.sequenceNumber;0===o?(i!==Bn.ps&&e(new F(qn(n)),i),i=s,n=a):i=Bn.ps})).next((function(){i!==Bn.ps&&e(new F(qn(n)),i)}))},t.prototype.Kr=function(t){return this.db.Nr().ui(t)},t}();function mr(t,e){return hr(t).put(function(t,e){return new Pr(0,Pn(t.path),e)}(e,t.Li))}function br(t,e){var n=t.projectId;return t.i||(n+="."+t.database),"firestore/"+e+"/"+n+"/"
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var wr=function(){function t(t,e,n,r){this.userId=t,this.serializer=e,this.ss=n,this.wi=r,this.Gr={}}return t.Cr=function(e,n,r,i){return m(""!==e.uid),new t(e.zr()?e.uid:"",n,r,i)},t.prototype.Hr=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Er(t).ei({index:Or.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.Yr=function(t,e,n,r){var i=this,o=Cr(t),a=Er(t);return a.add({}).next((function(s){m("number"==typeof s);for(var c=new An(s,e,n,r),u=function(t,e,n){var r=n.baseMutations.map((function(e){return he(t.Ks,e)})),i=n.mutations.map((function(e){return he(t.Ks,e)}));return new Or(e,n.batchId,n.yn.toMillis(),r,i)}(i.serializer,i.userId,c),l=[],h=new it((function(t,e){return x(t.N(),e.N())})),d=0,p=r;d<p.length;d++){var f=p[d],v=Nr.key(i.userId,f.key.path,s);h=h.add(f.key.path.p()),l.push(a.put(u)),l.push(o.put(v,Nr.PLACEHOLDER))}return h.forEach((function(e){l.push(i.ss.Us(t,e))})),t.Zn((function(){i.Gr[s]=c.keys()})),In.Bn(l).next((function(){return c}))}))},t.prototype.Jr=function(t,e){var n=this;return Er(t).get(e).next((function(t){return t?(m(t.userId===n.userId),Zn(n.serializer,t)):null}))},t.prototype.Xr=function(t,e){var n=this;return this.Gr[e]?In.resolve(this.Gr[e]):this.Jr(t,e).next((function(t){if(t){var r=t.keys();return n.Gr[e]=r,r}return null}))},t.prototype.Zr=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Er(t).ei({index:Or.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(m(e.batchId>=r),o=Zn(n.serializer,e)),i.done()})).next((function(){return o}))},t.prototype.to=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Er(t).ei({index:Or.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.eo=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Er(t).Ws(Or.userMutationsIndex,n).next((function(t){return t.map((function(t){return Zn(e.serializer,t)}))}))},t.prototype.os=function(t,e){var n=this,r=Nr.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Cr(t).ei({range:i},(function(r,i,a){var s=r[0],c=r[1],u=r[2],l=qn(c);if(s===n.userId&&e.path.isEqual(l))return Er(t).get(u).next((function(t){if(!t)throw y();m(t.userId===n.userId),o.push(Zn(n.serializer,t))}));a.done()})).next((function(){return o}))},t.prototype.ls=function(t,e){var n=this,r=new it(x),i=[];return e.forEach((function(e){var o=Nr.prefixForPath(n.userId,e.path),a=IDBKeyRange.lowerBound(o),s=Cr(t).ei({range:a},(function(t,i,o){var a=t[0],s=t[1],c=t[2],u=qn(s);a===n.userId&&e.path.isEqual(u)?r=r.add(c):o.done()}));i.push(s)})),In.Bn(i).next((function(){return n.no(t,r)}))},t.prototype.Es=function(t,e){var n=this,r=e.path,i=r.length+1,o=Nr.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new it(x);return Cr(t).ei({range:a},(function(t,e,o){var a=t[0],c=t[1],u=t[2],l=qn(c);a===n.userId&&r.D(l)?l.length===i&&(s=s.add(u)):o.done()})).next((function(){return n.no(t,s)}))},t.prototype.no=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(Er(t).get(e).next((function(t){if(null===t)throw y();m(t.userId===n.userId),r.push(Zn(n.serializer,t))})))})),In.Bn(i).next((function(){return r}))},t.prototype.so=function(t,e){var n=this;return xr(t.Oi,this.userId,e).next((function(r){return t.Zn((function(){n.io(e.batchId)})),In.forEach(r,(function(e){return n.wi.qr(t,e)}))}))},t.prototype.io=function(t){delete this.Gr[t]},t.prototype.ro=function(t){var e=this;return this.Hr(t).next((function(n){if(!n)return In.resolve();var r=IDBKeyRange.lowerBound(Nr.prefixForUser(e.userId)),i=[];return Cr(t).ei({range:r},(function(t,n,r){if(t[0]===e.userId){var o=qn(t[1]);i.push(o)}else r.done()})).next((function(){m(0===i.length)}))}))},t.prototype.Mi=function(t,e){return _r(t,this.userId,e)},t.prototype.oo=function(t){var e=this;return Sr(t).get(this.userId).next((function(t){return t||new Rr(e.userId,-1,"")}))},t}();function _r(t,e,n){var r=Nr.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return Cr(t).ei({range:o,xi:!0},(function(t,n,r){var o=t[0],s=t[1];t[2],o===e&&s===i&&(a=!0),r.done()})).next((function(){return a}))}function xr(t,e,n){var r=t.store(Or.store),i=t.store(Nr.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,c=r.ei({range:a},(function(t,e,n){return s++,n.delete()}));o.push(c.next((function(){m(1===s)})));for(var u=[],l=0,h=n.mutations;l<h.length;l++){var d=h[l],p=Nr.key(e,d.key.path,n.batchId);o.push(i.delete(p)),u.push(d.key)}return In.Bn(o).next((function(){return u}))}function Er(t){return fr.js(t,Or.store)}function Cr(t){return fr.js(t,Nr.store)}function Sr(t){return fr.js(t,Rr.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kr=10,Ar=function(){function t(t){this.serializer=t}return t.prototype.createOrUpgrade=function(t,e,n,r){var i=this;m(n<r&&n>=0&&r<=kr);var o=new Qr(e);n<1&&r>=1&&(function(t){t.createObjectStore(Ir.store)}(t),function(t){t.createObjectStore(Rr.store,{keyPath:Rr.keyPath}),t.createObjectStore(Or.store,{keyPath:Or.keyPath,autoIncrement:!0}).createIndex(Or.userMutationsIndex,Or.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Nr.store)}(t),qr(t),function(t){t.createObjectStore(Br.store)}(t));var a=In.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Pr.store),t.deleteObjectStore(Dr.store),t.deleteObjectStore(Fr.store)}(t),qr(t)),a=a.next((function(){return function(t){var e=t.store(Fr.store),n=new Fr(0,0,j.min().A(),0);return e.put(Fr.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(a=a.next((function(){return function(t,e){return e.store(Or.store).Ws().next((function(n){t.deleteObjectStore(Or.store),t.createObjectStore(Or.store,{keyPath:Or.keyPath,autoIncrement:!0}).createIndex(Or.userMutationsIndex,Or.userMutationsKeyPath,{unique:!0});var r=e.store(Or.store),i=n.map((function(t){return r.put(t)}));return In.Bn(i)}))}(t,o)}))),a=a.next((function(){!function(t){t.createObjectStore(Gr.store,{keyPath:Gr.keyPath})}(t)}))),n<5&&r>=5&&(a=a.next((function(){return i.removeAcknowledgedMutations(o)}))),n<6&&r>=6&&(a=a.next((function(){return function(t){t.createObjectStore(Mr.store)}(t),i.addDocumentGlobal(o)}))),n<7&&r>=7&&(a=a.next((function(){return i.ensureSequenceNumbers(o)}))),n<8&&r>=8&&(a=a.next((function(){return i.createCollectionParentIndex(t,o)}))),n<9&&r>=9&&(a=a.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Br.store);e.createIndex(Br.readTimeIndex,Br.readTimeIndexPath,{unique:!1}),e.createIndex(Br.collectionReadTimeIndex,Br.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(a=a.next((function(){return i.rewriteCanonicalIds(o)}))),a},t.prototype.addDocumentGlobal=function(t){var e=0;return t.store(Br.store).ei((function(t,n){e+=ar(n)})).next((function(){var n=new Mr(e);return t.store(Mr.store).put(Mr.key,n)}))},t.prototype.removeAcknowledgedMutations=function(t){var e=this,n=t.store(Rr.store),r=t.store(Or.store);return n.Ws().next((function(n){return In.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Ws(Or.userMutationsIndex,i).next((function(r){return In.forEach(r,(function(r){m(r.userId===n.userId);var i=Zn(e.serializer,r);return xr(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ensureSequenceNumbers=function(t){var e=t.store(Pr.store),n=t.store(Br.store);return t.store(Fr.store).get(Fr.key).next((function(t){var r=[];return n.ei((function(n,i){var o=new M(n),a=function(t){return[0,Pn(t)]}(o);r.push(e.get(a).next((function(n){return n?In.resolve():function(n){return e.put(new Pr(0,Pn(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return In.Bn(r)}))}))},t.prototype.createCollectionParentIndex=function(t,e){t.createObjectStore(Vr.store,{keyPath:Vr.keyPath});var n=e.store(Vr.store),r=new Un,i=function(t){if(r.add(t)){var e=t.S(),i=t.p();return n.put({collectionId:e,parent:Pn(i)})}};return e.store(Br.store).ei({xi:!0},(function(t,e){var n=new M(t);return i(n.p())})).next((function(){return e.store(Nr.store).ei({xi:!0},(function(t,e){t[0];var n=t[1],r=(t[2],qn(n));return i(r.p())}))}))},t.prototype.rewriteCanonicalIds=function(t){var e=this,n=t.store(Dr.store);return n.ei((function(t,r){var i=tr(r),o=er(e.serializer,i);return n.put(o)}))},t}(),Tr=function(t,e){this.seconds=t,this.nanoseconds=e},Ir=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Ir.store="owner",Ir.key="owner";var Rr=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Rr.store="mutationQueues",Rr.keyPath="userId";var Or=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Or.store="mutations",Or.keyPath="batchId",Or.userMutationsIndex="userMutationsIndex",Or.userMutationsKeyPath=["userId","batchId"];var Nr=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Pn(e)]},t.key=function(t,e,n){return[t,Pn(e),n]},t}();Nr.store="documentMutations",Nr.PLACEHOLDER=new Nr;var Lr=function(t,e){this.path=t,this.readTime=e},jr=function(t,e){this.path=t,this.version=e},Br=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Br.store="remoteDocuments",Br.readTimeIndex="readTimeIndex",Br.readTimeIndexPath="readTime",Br.collectionReadTimeIndex="collectionReadTimeIndex",Br.collectionReadTimeIndexPath=["parentPath","readTime"];var Mr=function(t){this.byteSize=t};Mr.store="remoteDocumentGlobal",Mr.key="remoteDocumentGlobalKey";var Dr=function(t,e,n,r,i,o,a){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a};Dr.store="targets",Dr.keyPath="targetId",Dr.queryTargetsIndexName="queryTargetsIndex",Dr.queryTargetsKeyPath=["canonicalId","targetId"];var Pr=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Pr.store="targetDocuments",Pr.keyPath=["targetId","path"],Pr.documentTargetsIndex="documentTargetsIndex",Pr.documentTargetsKeyPath=["path","targetId"];var Fr=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Fr.key="targetGlobalKey",Fr.store="targetGlobal";var Vr=function(t,e){this.collectionId=t,this.parent=e};function qr(t){t.createObjectStore(Pr.store,{keyPath:Pr.keyPath}).createIndex(Pr.documentTargetsIndex,Pr.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Dr.store,{keyPath:Dr.keyPath}).createIndex(Dr.queryTargetsIndexName,Dr.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Fr.store)}Vr.store="collectionParents",Vr.keyPath=["collectionId","parent"];var Gr=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Gr.store="clientMetadata",Gr.keyPath="clientId";var Ur=o.__spreadArrays(o.__spreadArrays(o.__spreadArrays([Rr.store,Or.store,Nr.store,Br.store,Dr.store,Ir.store,Fr.store,Pr.store],[Gr.store]),[Mr.store]),[Vr.store]),Hr=function(){function e(t){this.db=t,12.2===e.ho(c.getUA())&&v("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return e.Zi=function(t,n,r){return f("SimpleDb","Opening database:",t),new In((function(i,o){var a=indexedDB.open(t,n);a.onsuccess=function(t){var n=t.target.result;i(new e(n))},a.onblocked=function(){o(new N(O.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=function(t){var e=t.target.error;"VersionError"===e.name?o(new N(O.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o(e)},a.onupgradeneeded=function(e){f("SimpleDb",'Database "'+t+'" requires upgrade from version:',e.oldVersion);var n=e.target.result;r.createOrUpgrade(n,a.transaction,e.oldVersion,kr).next((function(){f("SimpleDb","Database upgrade to version "+kr+" complete")}))}})).On()},e.delete=function(t){return f("SimpleDb","Removing database:",t),Jr(window.indexedDB.deleteDatabase(t)).On()},e.Hi=function(){if("undefined"==typeof indexedDB)return!1;if(e.ao())return!0;var t=c.getUA(),n=e.ho(t),r=0<n&&n<10,i=e.uo(t),o=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||o)},e.ao=function(){var t;return void 0!==r&&"YES"===(null===(t=r.env)||void 0===t?void 0:t.co)},e.js=function(t,e){return t.store(e)},e.ho=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},e.uo=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},e.prototype.ar=function(t){this.db.onversionchange=function(e){return t(e)}},e.prototype.runTransaction=function(e,n,r){return o.__awaiter(this,void 0,void 0,(function(){var i,a,s,c,u;return o.__generator(this,(function(l){switch(l.label){case 0:i="readonly"===e,a=0,s=function(){var e,s,u,l,h;return o.__generator(this,(function(o){switch(o.label){case 0:++a,e=Qr.open(c.db,i?"readonly":"readwrite",n),o.label=1;case 1:return o.trys.push([1,3,,4]),s=r(e).catch((function(t){return e.abort(t),In.reject(t)})).On(),u={},s.catch((function(){})),[4,e.lo];case 2:return[2,(u.value=(o.sent(),s),u)];case 3:return l=o.sent(),h="FirebaseError"!==l.name&&a<3,f("SimpleDb","Transaction failed with error: %s. Retrying: %s.",l.message,h),h?[3,4]:[2,{value:t.reject(l)}];case 4:return[2]}}))},c=this,l.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=l.sent()))return[2,u.value];l.label=3;case 3:return[3,1];case 4:return[2]}}))}))},e.prototype.close=function(){this.db.close()},e}(),zr=function(){function t(t){this._o=t,this.fo=!1,this.do=null}return Object.defineProperty(t.prototype,"$n",{get:function(){return this.fo},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wo",{get:function(){return this.do},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this._o=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.fo=!0},t.prototype.ni=function(t){this.do=t},t.prototype.delete=function(){return Jr(this._o.delete())},t}(),$r=function(t){function e(e){var n=this;return(n=t.call(this,O.UNAVAILABLE,"IndexedDB transaction failed: "+e)||this).name="IndexedDbTransactionError",n}return o.__extends(e,t),e}(N);function Wr(t){return"IndexedDbTransactionError"===t.name}var Qr=function(){function t(t){var e=this;this.transaction=t,this.aborted=!1,this.To=new Mn,this.transaction.oncomplete=function(){e.To.resolve()},this.transaction.onabort=function(){t.error?e.To.reject(new $r(t.error)):e.To.resolve()},this.transaction.onerror=function(t){var n=Yr(t.target.error);e.To.reject(new $r(n))}}return t.open=function(e,n,r){return new t(e.transaction(r,n))},Object.defineProperty(t.prototype,"lo",{get:function(){return this.To.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.To.reject(t),this.aborted||(f("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Kr(e)},t}(),Kr=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(f("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(f("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Jr(n)},t.prototype.add=function(t){return f("SimpleDb","ADD",this.store.name,t,t),Jr(this.store.add(t))},t.prototype.get=function(t){var e=this;return Jr(this.store.get(t)).next((function(n){return void 0===n&&(n=null),f("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return f("SimpleDb","DELETE",this.store.name,t),Jr(this.store.delete(t))},t.prototype.count=function(){return f("SimpleDb","COUNT",this.store.name),Jr(this.store.count())},t.prototype.Ws=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.Eo(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.Io=function(t,e){f("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.xi=!1;var r=this.cursor(n);return this.Eo(r,(function(t,e,n){return n.delete()}))},t.prototype.ei=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.Eo(r,e)},t.prototype.Qr=function(t){var e=this.cursor({});return new In((function(n,r){e.onerror=function(t){var e=Yr(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.Eo=function(t,e){var n=[];return new In((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new zr(i),a=e(i.primaryKey,i.value,o);if(a instanceof In){var s=a.catch((function(t){return o.done(),In.reject(t)}));n.push(s)}o.$n?r():null===o.wo?i.continue():i.continue(o.wo)}else r()}})).next((function(){return In.Bn(n)}))},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.xi?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Jr(t){return new In((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=Yr(t.target.error);n(e)}}))}var Xr=!1;function Yr(t){var e=Hr.ho(c.getUA());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new N("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Xr||(Xr=!0,setTimeout((function(){throw r}),0)),r}}return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zr(){return"undefined"!=typeof window?window:null}var ti=function(){function e(t,e,n,r,i){this.mo=t,this.vs=e,this.Ao=n,this.op=r,this.Ro=i,this.Po=new Mn,this.then=this.Po.promise.then.bind(this.Po.promise),this.Po.promise.catch((function(t){}))}return e.Vo=function(t,n,r,i,o){var a=new e(t,n,Date.now()+r,i,o);return a.start(r),a},e.prototype.start=function(t){var e=this;this.yo=setTimeout((function(){return e.po()}),t)},e.prototype.Bs=function(){return this.po()},e.prototype.cancel=function(t){null!==this.yo&&(this.clearTimeout(),this.Po.reject(new N(O.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},e.prototype.po=function(){var e=this;this.mo.cr((function(){return null!==e.yo?(e.clearTimeout(),e.op().then((function(t){return e.Po.resolve(t)}))):t.resolve()}))},e.prototype.clearTimeout=function(){null!==this.yo&&(this.Ro(this),clearTimeout(this.yo),this.yo=null)},e}(),ei=function(){function e(){var e=this;this.bo=t.resolve(),this.vo=[],this.So=!1,this.Do=[],this.Co=null,this.Fo=!1,this.No=[],this.$o=new Dn(this,"async_queue_retry"),this.ko=function(){return e.$o.Ls()};var n=Zr();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.ko)}return Object.defineProperty(e.prototype,"xo",{get:function(){return this.So},enumerable:!1,configurable:!0}),e.prototype.cr=function(t){this.enqueue(t)},e.prototype.Mo=function(t){this.Oo(),this.Lo(t)},e.prototype.Bo=function(t){return this.Oo(),this.Lo(t)},e.prototype.qo=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e;return o.__generator(this,(function(n){switch(n.label){case 0:return this.Oo(),this.So?[3,2]:(this.So=!0,(e=Zr())&&e.removeEventListener("visibilitychange",this.ko),[4,this.Bo(t)]);case 1:n.sent(),n.label=2;case 2:return[2]}}))}))},e.prototype.enqueue=function(e){return this.Oo(),this.So?new t((function(t){})):this.Lo(e)},e.prototype._r=function(t){var e=this;this.vo.push(t),this.cr((function(){return e.Uo()}))},e.prototype.Uo=function(){return o.__awaiter(this,void 0,void 0,(function(){var t,e=this;return o.__generator(this,(function(n){switch(n.label){case 0:if(0===this.vo.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.vo[0]()];case 2:return n.sent(),this.vo.shift(),this.$o.reset(),[3,4];case 3:if(!Wr(t=n.sent()))throw t;return f("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.vo.length>0&&this.$o.xs((function(){return e.Uo()})),n.label=5;case 5:return[2]}}))}))},e.prototype.Lo=function(t){var e=this,n=this.bo.then((function(){return e.Fo=!0,t().catch((function(t){throw e.Co=t,e.Fo=!1,v("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.Fo=!1,t}))}));return this.bo=n,n},e.prototype.Os=function(t,e,n){var r=this;this.Oo(),this.No.indexOf(t)>-1&&(e=0);var i=ti.Vo(this,t,e,n,(function(t){return r.Qo(t)}));return this.Do.push(i),i},e.prototype.Oo=function(){this.Co&&y()},e.prototype.Wo=function(){},e.prototype.jo=function(){return o.__awaiter(this,void 0,void 0,(function(){var t;return o.__generator(this,(function(e){switch(e.label){case 0:return[4,t=this.bo];case 1:e.sent(),e.label=2;case 2:if(t!==this.bo)return[3,0];e.label=3;case 3:return[2]}}))}))},e.prototype.Ko=function(t){for(var e=0,n=this.Do;e<n.length;e++)if(n[e].vs===t)return!0;return!1},e.prototype.Go=function(t){var e=this;return this.jo().then((function(){e.Do.sort((function(t,e){return t.Ao-e.Ao}));for(var n=0,r=e.Do;n<r.length;n++){var i=r[n];if(i.Bs(),"all"!==t&&i.vs===t)break}return e.jo()}))},e.prototype.zo=function(t){this.No.push(t)},e.prototype.Qo=function(t){var e=this.Do.indexOf(t);this.Do.splice(e,1)},e}();function ni(t,e){if(v("AsyncQueue",e+": "+t),Wr(t))return new N(O.UNAVAILABLE,e+": "+t);throw t}function ri(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],a=x(n,i);return 0===a?x(r,o):a}var ii=function(){function t(t){this.Ho=t,this.buffer=new it(ri),this.Yo=0}return t.prototype.Jo=function(){return++this.Yo},t.prototype.Xo=function(t){var e=[t,this.Jo()];if(this.buffer.size<this.Ho)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();ri(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),oi={Zo:!1,th:0,eh:0,nh:0},ai=function(){function t(t,e,n){this.sh=t,this.ih=e,this.rh=n}return t.oh=function(e){return new t(e,t.hh,t.ah)},t}();ai.uh=-1,ai.lh=1048576,ai._h=41943040,ai.hh=10,ai.ah=1e3,ai.fh=new ai(ai._h,ai.hh,ai.ah),ai.dh=new ai(ai.uh,0,0);var si=function(){function t(t,e){this.xr=t,this.mo=e,this.wh=!1,this.Th=null}return t.prototype.start=function(t){this.xr.params.sh!==ai.uh&&this.Eh(t)},t.prototype.stop=function(){this.Th&&(this.Th.cancel(),this.Th=null)},Object.defineProperty(t.prototype,"or",{get:function(){return null!==this.Th},enumerable:!1,configurable:!0}),t.prototype.Eh=function(t){var e=this,n=this.wh?3e5:6e4;f("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.Th=this.mo.Os("lru_garbage_collection",n,(function(){return o.__awaiter(e,void 0,void 0,(function(){var e;return o.__generator(this,(function(n){switch(n.label){case 0:this.Th=null,this.wh=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.Ih(this.xr)];case 2:return n.sent(),[3,7];case 3:return Wr(e=n.sent())?(f("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,di(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.Eh(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),ci=function(){function t(t,e){this.mh=t,this.params=e}return t.prototype.Ah=function(t,e){return this.mh.Mr(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.Rh=function(t,e){var n=this;if(0===e)return In.resolve(Bn.ps);var r=new ii(e);return this.mh.pe(t,(function(t){return r.Xo(t.sequenceNumber)})).next((function(){return n.mh.Lr(t,(function(t){return r.Xo(t)}))})).next((function(){return r.maxValue}))},t.prototype.vi=function(t,e,n){return this.mh.vi(t,e,n)},t.prototype.Wr=function(t,e){return this.mh.Wr(t,e)},t.prototype.Ph=function(t,e){var n=this;return this.params.sh===ai.uh?(f("LruGarbageCollector","Garbage collection skipped; disabled"),In.resolve(oi)):this.Kr(t).next((function(r){return r<n.params.sh?(f("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.sh),oi):n.Vh(t,e)}))},t.prototype.Kr=function(t){return this.mh.Kr(t)},t.prototype.Vh=function(t,e){var n,r,i,o,a,c,u,l=this,h=Date.now();return this.Ah(t,this.params.ih).next((function(e){return e>l.params.rh?(f("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+l.params.rh+" from "+e),r=l.params.rh):r=e,o=Date.now(),l.Rh(t,r)})).next((function(r){return n=r,a=Date.now(),l.vi(t,n,e)})).next((function(e){return i=e,c=Date.now(),l.Wr(t,n)})).next((function(t){return u=Date.now(),p()<=s.LogLevel.DEBUG&&f("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-h)+"ms\n\tDetermined least recently used "+r+" in "+(a-o)+"ms\n\tRemoved "+i+" targets in "+(c-a)+"ms\n\tRemoved "+t+" documents in "+(u-c)+"ms\nTotal Duration: "+(u-h)+"ms"),In.resolve({Zo:!0,th:r,eh:i,nh:t})}))},t}(),ui=function(){function e(t,e,n){this.persistence=t,this.gh=e,this.yh=new et(x),this.ph=new R((function(t){return z(t)}),$),this.bh=j.min(),this.ns=t.Dr(n),this.vh=t.Nr(),this.Ji=t.Fr(),this.Sh=new Ln(this.vh,this.ns,this.persistence.$r()),this.gh.Dh(this.Sh)}return e.prototype.start=function(){return t.resolve()},e.prototype.Ch=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n,r,i=this;return o.__generator(this,(function(o){switch(o.label){case 0:return e=this.ns,n=this.Sh,[4,this.persistence.runTransaction("Handle user change","readonly",(function(r){var o;return i.ns.eo(r).next((function(a){return o=a,e=i.persistence.Dr(t),n=new Ln(i.vh,e,i.persistence.$r()),e.eo(r)})).next((function(t){for(var e=[],i=[],a=pt(),s=0,c=o;s<c.length;s++){var u=c[s];e.push(u.batchId);for(var l=0,h=u.mutations;l<h.length;l++){var d=h[l];a=a.add(d.key)}}for(var p=0,f=t;p<f.length;p++){var v=f[p];i.push(v.batchId);for(var g=0,y=v.mutations;g<y.length;g++){var m=y[g];a=a.add(m.key)}}return n.us(r,a).next((function(t){return{Fh:t,Nh:e,$h:i}}))}))}))];case 1:return r=o.sent(),[2,(this.ns=e,this.Sh=n,this.gh.Dh(this.Sh),r)]}}))}))},e.prototype.kh=function(t){var e,n=this,r=L.now(),i=t.reduce((function(t,e){return t.add(e.key)}),pt());return this.persistence.runTransaction("Locally write mutations","readwrite",(function(o){return n.Sh.us(o,i).next((function(i){e=i;for(var a=[],s=0,c=t;s<c.length;s++){var u=c[s],l=Ue(u,e.get(u.key));null!=l&&a.push(new We(u.key,l,nn(l.proto.mapValue),Pe.exists(!0)))}return n.ns.Yr(o,r,a,t)}))})).then((function(t){var n=t.Sn(e);return{batchId:t.batchId,Un:n}}))},e.prototype.xh=function(t){var e=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(n){var r=t.batch.keys(),i=e.vh.oi({ai:!0});return e.Mh(n,t,i).next((function(){return i.apply(n)})).next((function(){return e.ns.ro(n)})).next((function(){return e.Sh.us(n,r)}))}))},e.prototype.Oh=function(t){var e=this;return this.persistence.runTransaction("Reject batch","readwrite-primary",(function(n){var r;return e.ns.Jr(n,t).next((function(t){return m(null!==t),r=t.keys(),e.ns.so(n,t)})).next((function(){return e.ns.ro(n)})).next((function(){return e.Sh.us(n,r)}))}))},e.prototype.to=function(){var t=this;return this.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.ns.to(e)}))},e.prototype.mi=function(){var t=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Ji.mi(e)}))},e.prototype.Lh=function(t){var n=this,r=t.X,i=this.yh;return this.persistence.runTransaction("Apply remote event","readwrite-primary",(function(o){var a=n.vh.oi({ai:!0});i=n.yh;var s=[];t.Qt.forEach((function(t,a){var c=i.get(a);if(c){s.push(n.Ji.Ni(o,t.Xt,a).next((function(){return n.Ji.Ci(o,t.Yt,a)})));var u=t.resumeToken;if(u.H()>0){var l=c.tt(u,r).Z(o.Li);i=i.nt(a,l),e.Bh(c,l,t)&&s.push(n.Ji.yi(o,l))}}}));var c=st(),u=pt();if(t.jt.forEach((function(t,e){u=u.add(t)})),s.push(a.getEntries(o,u).next((function(e){t.jt.forEach((function(i,u){var l=e.get(i);u instanceof an&&u.version.isEqual(j.min())?(a.Gn(i,r),c=c.nt(i,u)):null==l||u.version.o(l.version)>0||0===u.version.o(l.version)&&l.hasPendingWrites?(a.jn(u,r),c=c.nt(i,u)):f("LocalStore","Ignoring outdated watch update for ",i,". Current version:",l.version," Watch version:",u.version),t.Kt.has(i)&&s.push(n.persistence.wi.jr(o,i))}))}))),!r.isEqual(j.min())){var l=n.Ji.mi(o).next((function(t){return n.Ji.Ri(o,o.Li,r)}));s.push(l)}return In.Bn(s).next((function(){return a.apply(o)})).next((function(){return n.Sh.cs(o,c)}))})).then((function(t){return n.yh=i,t}))},e.Bh=function(t,e,n){return m(e.resumeToken.H()>0),0===t.resumeToken.H()||e.X.m()-t.X.m()>=this.qh||n.Yt.size+n.Jt.size+n.Xt.size>0},e.prototype.Uh=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n,r,i,a,s,c,u,l=this;return o.__generator(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return In.forEach(t,(function(t){return In.forEach(t.ms,(function(n){return l.persistence.wi.Fi(e,t.targetId,n)})).next((function(){return In.forEach(t.As,(function(n){return l.persistence.wi.$i(e,t.targetId,n)}))}))}))}))];case 1:return o.sent(),[3,3];case 2:if(!Wr(e=o.sent()))throw e;return f("LocalStore","Failed to update sequence numbers: "+e),[3,3];case 3:for(n=0,r=t;n<r.length;n++)i=r[n],a=i.targetId,i.fromCache||(s=this.yh.get(a),c=s.X,u=s.et(c),this.yh=this.yh.nt(a,u));return[2]}}))}))},e.prototype.Qh=function(t){var e=this;return this.persistence.runTransaction("Get next mutation batch","readonly",(function(n){return void 0===t&&(t=-1),e.ns.Zr(n,t)}))},e.prototype.Wh=function(t){var e=this;return this.persistence.runTransaction("read document","readonly",(function(n){return e.Sh.rs(n,t)}))},e.prototype.jh=function(t){var e=this;return this.persistence.runTransaction("Allocate target","readwrite",(function(n){var r;return e.Ji.Di(n,t).next((function(i){return i?(r=i,In.resolve(r)):e.Ji.Ti(n).next((function(i){return r=new X(t,i,0,n.Li),e.Ji.Pi(n,r).next((function(){return r}))}))}))})).then((function(n){var r=e.yh.get(n.targetId);return(null===r||n.X.o(r.X)>0)&&(e.yh=e.yh.nt(n.targetId,n),e.ph.set(t,n.targetId)),n}))},e.prototype.Di=function(t,e){var n=this.ph.get(e);return void 0!==n?In.resolve(this.yh.get(n)):this.Ji.Di(t,e)},e.prototype.Kh=function(t,e){return o.__awaiter(this,void 0,void 0,(function(){var n,r,i,a=this;return o.__generator(this,(function(o){switch(o.label){case 0:n=this.yh.get(t),r=e?"readwrite":"readwrite-primary",o.label=1;case 1:return o.trys.push([1,4,,5]),e?[3,3]:[4,this.persistence.runTransaction("Release target",r,(function(t){return a.persistence.wi.removeTarget(t,n)}))];case 2:o.sent(),o.label=3;case 3:return[3,5];case 4:if(!Wr(i=o.sent()))throw i;return f("LocalStore","Failed to update sequence numbers for target "+t+": "+i),[3,5];case 5:return this.yh=this.yh.remove(t),this.ph.delete(n.target),[2]}}))}))},e.prototype.Gh=function(t,e){var n=this,r=j.min(),i=pt();return this.persistence.runTransaction("Execute query","readonly",(function(o){return n.Di(o,t.We()).next((function(t){if(t)return r=t.lastLimboFreeSnapshotVersion,n.Ji.ki(o,t.targetId).next((function(t){i=t}))})).next((function(){return n.gh._s(o,t,e?r:j.min(),e?i:pt())})).next((function(t){return{documents:t,zh:i}}))}))},e.prototype.Mh=function(t,e,n){var r=this,i=e.batch,o=i.keys(),a=In.resolve();return o.forEach((function(r){a=a.next((function(){return n.zn(t,r)})).next((function(t){var o=t,a=e.Cn.get(r);m(null!==a),(!o||o.version.o(a)<0)&&(o=i.pn(r,o,e))&&n.jn(o,e.Dn)}))})),a.next((function(){return r.ns.so(t,i)}))},e.prototype.Ih=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.Ph(n,e.yh)}))},e}();function li(t,e,n){return new ui(t,e,n)}ui.qh=3e8;var hi=function(e){function n(t,n,r){var i=this;return(i=e.call(this,t,n,r)||this).persistence=t,i.ns=t.Dr(r),i.vh=t.Nr(),i.Ji=t.Fr(),i}return o.__extends(n,e),n.prototype.start=function(){return this.Hh()},n.prototype.Yh=function(t){var e=this;return this.persistence.runTransaction("Lookup mutation documents","readonly",(function(n){return e.ns.Xr(n,t).next((function(t){return t?e.Sh.us(n,t):In.resolve(null)}))}))},n.prototype.Jh=function(t){this.ns.io(t)},n.prototype.ur=function(t){this.persistence.ur(t)},n.prototype.Sr=function(){return this.persistence.Sr()},n.prototype.Xh=function(e){var n=this,r=this.yh.get(e);return r?t.resolve(r.target):this.persistence.runTransaction("Get target data","readonly",(function(t){return n.Ji.Me(t,e).next((function(t){return t?t.target:null}))}))},n.prototype.si=function(){var t=this;return this.persistence.runTransaction("Get new document changes","readonly",(function(e){return t.vh.si(e,t.bh)})).then((function(e){var n=e.ii,r=e.readTime;return t.bh=r,n}))},n.prototype.Hh=function(){return o.__awaiter(this,void 0,void 0,(function(){var t,e=this;return o.__generator(this,(function(n){switch(n.label){case 0:return t=this,[4,this.persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return e.vh.ri(t)}))];case 1:return t.bh=n.sent(),[2]}}))}))},n}(ui);function di(t){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(e){if(t.code!==O.FAILED_PRECONDITION||t.message!==On)throw t;return f("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pi=function(){function t(){this.Zh=new it(fi.ta),this.ea=new it(fi.na)}return t.prototype._=function(){return this.Zh._()},t.prototype.Fi=function(t,e){var n=new fi(t,e);this.Zh=this.Zh.add(n),this.ea=this.ea.add(n)},t.prototype.sa=function(t,e){var n=this;t.forEach((function(t){return n.Fi(t,e)}))},t.prototype.$i=function(t,e){this.ia(new fi(t,e))},t.prototype.ra=function(t,e){var n=this;t.forEach((function(t){return n.$i(t,e)}))},t.prototype.oa=function(t){var e=this,n=new F(new M([])),r=new fi(n,t),i=new fi(n,t+1),o=[];return this.ea.vt([r,i],(function(t){e.ia(t),o.push(t.key)})),o},t.prototype.ha=function(){var t=this;this.Zh.forEach((function(e){return t.ia(e)}))},t.prototype.ia=function(t){this.Zh=this.Zh.delete(t),this.ea=this.ea.delete(t)},t.prototype.aa=function(t){var e=new F(new M([])),n=new fi(e,t),r=new fi(e,t+1),i=pt();return this.ea.vt([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.Mi=function(t){var e=new fi(t,0),n=this.Zh.Dt(e);return null!==n&&t.isEqual(n.key)},t}(),fi=function(){function t(t,e){this.key=t,this.ua=e}return t.ta=function(t,e){return F.P(t.key,e.key)||x(t.ua,e.ua)},t.na=function(t,e){return x(t.ua,e.ua)||F.P(t.key,e.key)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vi(t,e){if(0!==e.length)throw new N(O.INVALID_ARGUMENT,"Function "+t+"() does not support arguments, but was called with "+Li(e.length,"argument")+".")}function gi(t,e,n){if(e.length!==n)throw new N(O.INVALID_ARGUMENT,"Function "+t+"() requires "+Li(n,"argument")+", but was called with "+Li(e.length,"argument")+".")}function yi(t,e,n){if(e.length<n)throw new N(O.INVALID_ARGUMENT,"Function "+t+"() requires at least "+Li(n,"argument")+", but was called with "+Li(e.length,"argument")+".")}function mi(t,e,n,r){if(e.length<n||e.length>r)throw new N(O.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+r+" arguments, but was called with "+Li(e.length,"argument")+".")}function bi(t,e,n,r){Si(t,e,Ni(n)+" argument",r)}function wi(t,e,n,r){void 0!==r&&bi(t,e,n,r)}function _i(t,e,n,r){Si(t,e,n+" option",r)}function xi(t,e,n,r){void 0!==r&&_i(t,e,n,r)}function Ei(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){for(var o=[],a=0,s=i;a<s.length;a++){var c=s[a];if(c===r)return;o.push(Ai(c))}var u=Ai(r);throw new N(O.INVALID_ARGUMENT,"Invalid value "+u+" provided to function "+t+'() for option "'+n+'". Acceptable values: '+o.join(", "))}(t,0,n,r,i)}function Ci(t,e,n,r){if(!e.some((function(t){return t===r})))throw new N(O.INVALID_ARGUMENT,"Invalid value "+Ai(r)+" provided to function "+t+"() for its "+Ni(n)+" argument. Acceptable values: "+e.join(", "));return r}function Si(t,e,n,r){if(!("object"===e?ki(r):"non-empty string"===e?"string"==typeof r&&""!==r:typeof r===e)){var i=Ai(r);throw new N(O.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" to be of type "+e+", but it was: "+i)}}function ki(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function Ai(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":y()}function Ti(t,e,n){if(void 0===n)throw new N(O.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+Ni(e)+" argument, but it was undefined.")}function Ii(t,e,n){T(e,(function(e,r){if(n.indexOf(e)<0)throw new N(O.INVALID_ARGUMENT,"Unknown option '"+e+"' passed to function "+t+"(). Available options: "+n.join(", "))}))}function Ri(t,e,n,r){var i=Ai(r);return new N(O.INVALID_ARGUMENT,"Function "+t+"() requires its "+Ni(n)+" argument to be a "+e+", but it was: "+i)}function Oi(t,e,n){if(n<=0)throw new N(O.INVALID_ARGUMENT,"Function "+t+"() requires its "+Ni(e)+" argument to be a positive number, but it was: "+n+".")}function Ni(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function Li(t,e){return t+" "+e+(1===t?"":"s")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ji(){if("undefined"==typeof Uint8Array)throw new N(O.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Bi(){if("undefined"==typeof atob)throw new N(O.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Mi=function(){function t(t){Bi(),this.ca=t}return t.fromBase64String=function(e){gi("Blob.fromBase64String",arguments,1),bi("Blob.fromBase64String","string",1,e),Bi();try{return new t(Q.fromBase64String(e))}catch(e){throw new N(O.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+e)}},t.fromUint8Array=function(e){if(gi("Blob.fromUint8Array",arguments,1),ji(),!(e instanceof Uint8Array))throw Ri("Blob.fromUint8Array","Uint8Array",1,e);return new t(Q.fromUint8Array(e))},t.prototype.toBase64=function(){return gi("Blob.toBase64",arguments,0),Bi(),this.ca.toBase64()},t.prototype.toUint8Array=function(){return gi("Blob.toUint8Array",arguments,0),ji(),this.ca.toUint8Array()},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.ca.isEqual(t.ca)},t}(),Di=function(t){!function(t,e,n,r){if(!(e instanceof Array)||e.length<1)throw new N(O.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least "+Li(1,"element")+".")}(0,t);for(var e=0;e<t.length;++e)if(bi("FieldPath","string",e,t[e]),0===t[e].length)throw new N(O.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.la=new P(t)},Pi=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,e)||this}return o.__extends(e,t),e.documentId=function(){return new e(P.L().N())},e.prototype.isEqual=function(t){if(!(t instanceof e))throw Ri("isEqual","FieldPath",1,t);return this.la.isEqual(t.la)},e}(Di),Fi=new RegExp("[~\\*/\\[\\]]"),Vi=function(){this._a=this},qi=function(t){function e(e){var n=this;return(n=t.call(this)||this).fa=e,n}return o.__extends(e,t),e.prototype.da=function(t){if(2!==t.wa)throw 1===t.wa?t.Ta(this.fa+"() can only appear at the top level of your update data"):t.Ta(this.fa+"() cannot be used with set() unless you pass {merge:true}");return t.Le.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Vi);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gi(t,e,n){return new no({wa:3,Ea:e.settings.Ea,methodName:t.fa,Ia:n},e.s,e.serializer,e.ignoreUndefinedProperties)}var Ui=function(t){function e(e){var n=this;return(n=t.call(this)||this).fa=e,n}return o.__extends(e,t),e.prototype.da=function(t){return new Me(t.path,new Ae)},e.prototype.isEqual=function(t){return t instanceof e},e}(Vi),Hi=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).fa=e,r.ma=n,r}return o.__extends(e,t),e.prototype.da=function(t){var e=Gi(this,t,!0),n=this.ma.map((function(t){return co(t,e)})),r=new Te(n);return new Me(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Vi),zi=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).fa=e,r.ma=n,r}return o.__extends(e,t),e.prototype.da=function(t){var e=Gi(this,t,!0),n=this.ma.map((function(t){return co(t,e)})),r=new Re(n);return new Me(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Vi),$i=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).fa=e,r.Aa=n,r}return o.__extends(e,t),e.prototype.da=function(t){var e=new Ne(t.serializer,Xt(t.serializer,this.Aa));return new Me(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(Vi),Wi=function(t){function e(){return t.call(this)||this}return o.__extends(e,t),e.delete=function(){return vi("FieldValue.delete",arguments),new Qi(new qi("FieldValue.delete"))},e.serverTimestamp=function(){return vi("FieldValue.serverTimestamp",arguments),new Qi(new Ui("FieldValue.serverTimestamp"))},e.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return yi("FieldValue.arrayUnion",arguments,1),new Qi(new Hi("FieldValue.arrayUnion",t))},e.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return yi("FieldValue.arrayRemove",arguments,1),new Qi(new zi("FieldValue.arrayRemove",t))},e.increment=function(t){return bi("FieldValue.increment","number",1,t),gi("FieldValue.increment",arguments,1),new Qi(new $i("FieldValue.increment",t))},e}(Vi),Qi=function(t){function e(e){var n=this;return(n=t.call(this)||this)._a=e,n.fa=e.fa,n}return o.__extends(e,t),e.prototype.da=function(t){return this._a.da(t)},e.prototype.isEqual=function(t){return t instanceof e&&this._a.isEqual(t._a)},e}(Wi),Ki=function(){function t(t,e){if(gi("GeoPoint",arguments,2),bi("GeoPoint","number",1,t),bi("GeoPoint","number",2,e),!isFinite(t)||t<-90||t>90)throw new N(O.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new N(O.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.Ra=t,this.Pa=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.Ra},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.Pa},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.Ra===t.Ra&&this.Pa===t.Pa},t.prototype.T=function(t){return x(this.Ra,t.Ra)||x(this.Pa,t.Pa)},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ji(t){return new Qt(t,!0)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xi=/^__.*__$/,Yi=function(t,e,n){this.Va=t,this.ga=e,this.ya=n},Zi=function(){function t(t,e,n){this.data=t,this.Le=e,this.fieldTransforms=n}return t.prototype.pa=function(t,e){var n=[];return null!==this.Le?n.push(new We(t,this.data,this.Le,e)):n.push(new $e(t,this.data,e)),this.fieldTransforms.length>0&&n.push(new Ke(t,this.fieldTransforms)),n},t}(),to=function(){function t(t,e,n){this.data=t,this.Le=e,this.fieldTransforms=n}return t.prototype.pa=function(t,e){var n=[new We(t,this.data,this.Le,e)];return this.fieldTransforms.length>0&&n.push(new Ke(t,this.fieldTransforms)),n},t}();function eo(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw y()}}var no=function(){function t(t,e,n,r,i,o){this.settings=t,this.s=e,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.ba(),this.fieldTransforms=i||[],this.Le=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wa",{get:function(){return this.settings.wa},enumerable:!1,configurable:!0}),t.prototype.va=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.s,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.Le)},t.prototype.Sa=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.va({path:n,Ia:!1});return r.Da(t),r},t.prototype.Ca=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.va({path:n,Ia:!1});return r.ba(),r},t.prototype.Fa=function(t){return this.va({path:void 0,Ia:!0})},t.prototype.Ta=function(t){return vo(t,this.settings.methodName,this.settings.Na||!1,this.path,this.settings.Ea)},t.prototype.contains=function(t){return void 0!==this.Le.find((function(e){return t.D(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.D(e.field)}))},t.prototype.ba=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Da(this.path.get(t))},t.prototype.Da=function(t){if(0===t.length)throw this.Ta("Document fields must not be empty");if(eo(this.wa)&&Xi.test(t))throw this.Ta('Document fields cannot begin and end with "__"')},t}(),ro=function(){function t(t,e,n){this.s=t,this.ignoreUndefinedProperties=e,this.serializer=n||Ji(t)}return t.prototype.$a=function(t,e,n,r){return void 0===r&&(r=!1),new no({wa:t,methodName:e,Ea:n,path:P.k(),Ia:!1,Na:r},this.s,this.serializer,this.ignoreUndefinedProperties)},t}();function io(t,e,n,r,i,o){void 0===o&&(o={});var a=t.$a(o.merge||o.mergeFields?2:0,e,n,i);ho("Data must be an object, but it was:",a,r);var s,c,u=uo(r,a);if(o.merge)s=new Be(a.Le),c=a.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,d=o.mergeFields;h<d.length;h++){var p=d[h],f=void 0;if(p instanceof Di)f=p.la;else{if("string"!=typeof p)throw y();f=fo(e,p,n)}if(!a.contains(f))throw new N(O.INVALID_ARGUMENT,"Field '"+f+"' is specified in your field mask but missing from your input data.");go(l,f)||l.push(f)}s=new Be(l),c=a.fieldTransforms.filter((function(t){return s.Ke(t.field)}))}else s=null,c=a.fieldTransforms;return new Zi(new tn(u),s,c)}function oo(t,e,n,r){var i=t.$a(1,e,n);ho("Data must be an object, but it was:",i,r);var o=[],a=new en;T(r,(function(t,r){var s=fo(e,t,n),c=i.Ca(s);if(r instanceof Vi&&r._a instanceof qi)o.push(s);else{var u=co(r,c);null!=u&&(o.push(s),a.set(s,u))}}));var s=new Be(o);return new to(a.ze(),s,i.fieldTransforms)}function ao(t,e,n,r,i,o){var a=t.$a(1,e,n),s=[po(e,r,n)],c=[i];if(o.length%2!=0)throw new N(O.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var u=0;u<o.length;u+=2)s.push(po(e,o[u])),c.push(o[u+1]);for(var l=[],h=new en,d=s.length-1;d>=0;--d)if(!go(l,s[d])){var p=s[d],f=c[d],v=a.Ca(p);if(f instanceof Vi&&f._a instanceof qi)l.push(p);else{var g=co(f,v);null!=g&&(l.push(p),h.set(p,g))}}var y=new Be(l);return new to(h.ze(),y,a.fieldTransforms)}function so(t,e,n,r){return void 0===r&&(r=!1),co(n,t.$a(r?4:3,e))}function co(t,e){if(lo(t))return ho("Unsupported field value:",e,t),uo(t,e);if(t instanceof Vi)return function(t,e){if(!eo(e.wa))throw e.Ta(t.fa+"() can only be used with update() and set()");if(!e.path)throw e.Ta(t.fa+"() is not currently supported inside arrays");var n=t.da(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(e.path&&e.Le.push(e.path),t instanceof Array){if(e.settings.Ia&&4!==e.wa)throw e.Ta("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var a=co(o[i],e.Fa(r));null==a&&(a={nullValue:"NULL_VALUE"}),n.push(a),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Xt(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=L.fromDate(t);return{timestampValue:Yt(e.serializer,n)}}if(t instanceof L){var r=new L(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Yt(e.serializer,r)}}if(t instanceof Ki)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Mi)return{bytesValue:Zt(e.serializer,t)};if(t instanceof Yi){var i=e.s,o=t.Va;if(!o.isEqual(i))throw e.Ta("Document reference is for database "+o.projectId+"/"+o.database+" but should be for database "+i.projectId+"/"+i.database);return{referenceValue:ne(t.Va||e.s,t.ga.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.Ta("Unsupported field value: "+Ai(t))}(t,e)}function uo(t,e){var n={};return I(t)?e.path&&e.path.length>0&&e.Le.push(e.path):T(t,(function(t,r){var i=co(r,e.Sa(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function lo(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof L||t instanceof Ki||t instanceof Mi||t instanceof Yi||t instanceof Vi)}function ho(t,e,n){if(!lo(n)||!ki(n)){var r=Ai(n);throw"an object"===r?e.Ta(t+" a custom object"):e.Ta(t+" "+r)}}function po(t,e,n){if(e instanceof Di)return e.la;if("string"==typeof e)return fo(t,e);throw vo("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}function fo(t,e,n){try{return function(t){if(t.search(Fi)>=0)throw new N(O.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(Pi.bind.apply(Pi,o.__spreadArrays([void 0],t.split("."))))}catch(e){throw new N(O.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e).la}catch(e){throw vo((r=e)instanceof Error?r.message:r.toString(),t,!1,void 0,n)}var r}function vo(t,e,n,r,i){var o=r&&!r._(),a=void 0!==i,s="Function "+e+"() called with invalid data";n&&(s+=" (via `toFirestore()`)");var c="";return(o||a)&&(c+=" (found",o&&(c+=" in field "+r),a&&(c+=" in document "+i),c+=")"),new N(O.INVALID_ARGUMENT,(s+=". ")+t+c)}function go(t,e){return t.some((function(t){return t.isEqual(e)}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yo=function(){function t(t){this.uid=t}return t.prototype.zr=function(){return null!=this.uid},t.prototype.ka=function(){return this.zr()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();yo.UNAUTHENTICATED=new yo(null),yo.xa=new yo("google-credentials-uid"),yo.Ma=new yo("first-party-uid");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var mo=function(t,e){this.user=e,this.type="OAuth",this.Oa={},this.Oa.Authorization="Bearer "+t},bo=function(){function e(){this.La=null}return e.prototype.getToken=function(){return t.resolve(null)},e.prototype.Ba=function(){},e.prototype.qa=function(t){this.La=t,t(yo.UNAUTHENTICATED)},e.prototype.Ua=function(){this.La=null},e}(),wo=function(){function e(t){var e=this;this.Qa=null,this.currentUser=yo.UNAUTHENTICATED,this.Wa=!1,this.ja=0,this.La=null,this.forceRefresh=!1,this.Qa=function(){e.ja++,e.currentUser=e.Ka(),e.Wa=!0,e.La&&e.La(e.currentUser)},this.ja=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.Qa):(this.Qa(null),t.get().then((function(t){e.auth=t,e.Qa&&e.auth.addAuthTokenListener(e.Qa)}),(function(){})))}return e.prototype.getToken=function(){var e=this,n=this.ja,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then((function(t){return e.ja!==n?(f("FirebaseCredentialsProvider","getToken aborted due to token change."),e.getToken()):t?(m("string"==typeof t.accessToken),new mo(t.accessToken,e.currentUser)):null})):t.resolve(null)},e.prototype.Ba=function(){this.forceRefresh=!0},e.prototype.qa=function(t){this.La=t,this.Wa&&t(this.currentUser)},e.prototype.Ua=function(){this.auth&&this.auth.removeAuthTokenListener(this.Qa),this.Qa=null,this.La=null},e.prototype.Ka=function(){var t=this.auth&&this.auth.getUid();return m(null===t||"string"==typeof t),new yo(t)},e}(),_o=function(){function t(t,e){this.Ga=t,this.za=e,this.type="FirstParty",this.user=yo.Ma}return Object.defineProperty(t.prototype,"Oa",{get:function(){var t={"X-Goog-AuthUser":this.za},e=this.Ga.auth.Ha([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),xo=function(){function e(t,e){this.Ga=t,this.za=e}return e.prototype.getToken=function(){return t.resolve(new _o(this.Ga,this.za))},e.prototype.qa=function(t){t(yo.Ma)},e.prototype.Ua=function(){},e.prototype.Ba=function(){},e}(),Eo=function(){function e(t,e,n,r,i,o){this.bs=t,this.Ya=n,this.Ja=r,this.Xa=i,this.listener=o,this.state=0,this.Za=0,this.tu=null,this.stream=null,this.$o=new Dn(t,e)}return e.prototype.eu=function(){return 1===this.state||2===this.state||4===this.state},e.prototype.nu=function(){return 2===this.state},e.prototype.start=function(){3!==this.state?this.auth():this.su()},e.prototype.stop=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return this.eu()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},e.prototype.iu=function(){this.state=0,this.$o.reset()},e.prototype.ru=function(){var t=this;this.nu()&&null===this.tu&&(this.tu=this.bs.Os(this.Ya,6e4,(function(){return t.ou()})))},e.prototype.hu=function(t){this.au(),this.stream.send(t)},e.prototype.ou=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){return this.nu()?[2,this.close(0)]:[2]}))}))},e.prototype.au=function(){this.tu&&(this.tu.cancel(),this.tu=null)},e.prototype.close=function(t,e){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(n){switch(n.label){case 0:return this.au(),this.$o.cancel(),this.Za++,3!==t?this.$o.reset():e&&e.code===O.RESOURCE_EXHAUSTED?(v(e.toString()),v("Using maximum backoff delay to prevent overloading the backend."),this.$o.ks()):e&&e.code===O.UNAUTHENTICATED&&this.Xa.Ba(),null!==this.stream&&(this.uu(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.cu(e)];case 1:return n.sent(),[2]}}))}))},e.prototype.uu=function(){},e.prototype.auth=function(){var t=this;this.state=1;var e=this.lu(this.Za),n=this.Za;this.Xa.getToken().then((function(e){t.Za===n&&t._u(e)}),(function(n){e((function(){var e=new N(O.UNKNOWN,"Fetching auth token failed: "+n.message);return t.fu(e)}))}))},e.prototype._u=function(t){var e=this,n=this.lu(this.Za);this.stream=this.du(t),this.stream.wu((function(){n((function(){return e.state=2,e.listener.wu()}))})),this.stream.cu((function(t){n((function(){return e.fu(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},e.prototype.su=function(){var t=this;this.state=4,this.$o.xs((function(){return o.__awaiter(t,void 0,void 0,(function(){return o.__generator(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},e.prototype.fu=function(t){return f("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},e.prototype.lu=function(e){var n=this;return function(r){n.bs.cr((function(){return n.Za===e?r():(f("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),t.resolve())}))}},e}(),Co=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).serializer=i,a}return o.__extends(e,t),e.prototype.du=function(t){return this.Ja.Tu("Listen",t)},e.prototype.onMessage=function(t){this.$o.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:y()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.Oe?(m(void 0===e||"string"==typeof e),Q.fromBase64String(e||"")):(m(void 0===e||e instanceof Uint8Array),Q.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,s=a&&function(t){var e=void 0===t.code?O.UNKNOWN:tt(t.code);return new N(e,t.message||"")}(a);n=new Et(r,i,o,s||null)}else if("documentChange"in e){e.documentChange;var c=e.documentChange;c.document,c.document.name,c.document.updateTime;var u=oe(t,c.document.name),l=ee(c.document.updateTime),h=new tn({mapValue:{fields:c.document.fields}}),d=new on(u,l,h,{}),p=c.targetIds||[],f=c.removedTargetIds||[];n=new _t(p,f,d.key,d)}else if("documentDelete"in e){e.documentDelete;var v=e.documentDelete;v.document;var g=oe(t,v.document),b=v.readTime?ee(v.readTime):j.min(),w=new an(g,b),_=v.removedTargetIds||[];n=new _t([],_,w.key,w)}else if("documentRemove"in e){e.documentRemove;var x=e.documentRemove;x.document;var E=oe(t,x.document),C=x.removedTargetIds||[];n=new _t([],C,E,null)}else{if(!("filter"in e))return y();e.filter;var S=e.filter;S.targetId;var k=S.count||0,A=new Y(k),T=S.targetId;n=new xt(T,A)}return n}(this.serializer,t),n=function(t){if(!("targetChange"in t))return j.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?j.min():e.readTime?ee(e.readTime):j.min()}(t);return this.listener.Eu(e,n)},e.prototype.Iu=function(t){var e={};e.database=ce(this.serializer),e.addTarget=function(t,e){var n,r=e.target;return(n=W(r)?{documents:pe(t,r)}:{query:fe(t,r)}).targetId=e.targetId,e.resumeToken.H()>0&&(n.resumeToken=Zt(t,e.resumeToken)),n}(this.serializer,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return y()}}(0,e.J);return null==n?null:{"goog-listen-tags":n}}(this.serializer,t);n&&(e.labels=n),this.hu(e)},e.prototype.mu=function(t){var e={};e.database=ce(this.serializer),e.removeTarget=t,this.hu(e)},e}(Eo),So=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).serializer=i,a.Au=!1,a}return o.__extends(e,t),Object.defineProperty(e.prototype,"Ru",{get:function(){return this.Au},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.Au=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.uu=function(){this.Au&&this.Pu([])},e.prototype.du=function(t){return this.Ja.Tu("Write",t)},e.prototype.onMessage=function(t){if(m(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Au){this.$o.reset();var e=function(t,e){return t&&t.length>0?(m(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?ee(t.updateTime):ee(e);n.isEqual(j.min())&&(n=ee(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new De(n,r)}(t,e)}))):[]}(t.writeResults,t.commitTime),n=ee(t.commitTime);return this.listener.Vu(n,e)}return m(!t.writeResults||0===t.writeResults.length),this.Au=!0,this.listener.gu()},e.prototype.yu=function(){var t={};t.database=ce(this.serializer),this.hu(t)},e.prototype.Pu=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return he(e.serializer,t)}))};this.hu(n)},e}(Eo),ko=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Ja=e,i.credentials=n,i.serializer=r,i.pu=!1,i}return o.__extends(e,t),e.prototype.bu=function(){if(this.pu)throw new N(O.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.vu=function(t,e){var n=this;return this.bu(),this.credentials.getToken().then((function(r){return n.Ja.vu(t,e,r)})).catch((function(t){throw t.code===O.UNAUTHENTICATED&&n.credentials.Ba(),t}))},e.prototype.Su=function(t,e){var n=this;return this.bu(),this.credentials.getToken().then((function(r){return n.Ja.Su(t,e,r)})).catch((function(t){throw t.code===O.UNAUTHENTICATED&&n.credentials.Ba(),t}))},e}((function(){this.je=void 0})),Ao=function(){function t(t){this.Du=t,this.Cu=new Map,this.mutations=[],this.Fu=!1,this.Nu=null,this.$u=new Set}return t.prototype.ku=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n=this;return o.__generator(this,(function(r){switch(r.label){case 0:if(this.xu(),this.mutations.length>0)throw new N(O.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return o.__awaiter(this,void 0,void 0,(function(){var n,r,i,a,s;return o.__generator(this,(function(o){switch(o.label){case 0:return n=b(t),r={database:ce(n.serializer),documents:e.map((function(t){return ie(n.serializer,t)}))},[4,n.Su("BatchGetDocuments",r)];case 1:return i=o.sent(),a=new Map,i.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){m(!!e.found),e.found.name,e.found.updateTime;var n=oe(t,e.found.name),r=ee(e.found.updateTime),i=new tn({mapValue:{fields:e.found.fields}});return new on(n,r,i,{})}(t,e):"missing"in e?function(t,e){m(!!e.missing),m(!!e.readTime);var n=oe(t,e.missing),r=ee(e.readTime);return new an(n,r)}(t,e):y()}(n.serializer,t);a.set(e.key.toString(),e)})),s=[],[2,(e.forEach((function(t){var e=a.get(t.toString());m(!!e),s.push(e)})),s)]}}))}))}(this.Du,t)];case 1:return[2,((e=r.sent()).forEach((function(t){t instanceof an||t instanceof on?n.Mu(t):y()})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.pa(t,this.Ue(t))),this.$u.add(t)},t.prototype.update=function(t,e){try{this.write(e.pa(t,this.Ou(t)))}catch(t){this.Nu=t}this.$u.add(t)},t.prototype.delete=function(t){this.write([new Ye(t,this.Ue(t))]),this.$u.add(t)},t.prototype.commit=function(){return o.__awaiter(this,void 0,void 0,(function(){var t,e=this;return o.__generator(this,(function(n){switch(n.label){case 0:if(this.xu(),this.Nu)throw this.Nu;return t=this.Cu,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=new F(M.$(n));e.mutations.push(new Ze(r,e.Ue(r)))})),[4,function(t,e){return o.__awaiter(this,void 0,void 0,(function(){var n,r;return o.__generator(this,(function(i){switch(i.label){case 0:return n=b(t),r={database:ce(n.serializer),writes:e.map((function(t){return he(n.serializer,t)}))},[4,n.vu("Commit",r)];case 1:return i.sent(),[2]}}))}))}(this.Du,this.mutations)];case 1:return n.sent(),this.Fu=!0,[2]}}))}))},t.prototype.Mu=function(t){var e;if(t instanceof on)e=t.version;else{if(!(t instanceof an))throw y();e=j.min()}var n=this.Cu.get(t.key.toString());if(n){if(!e.isEqual(n))throw new N(O.ABORTED,"Document version changed between two reads.")}else this.Cu.set(t.key.toString(),e)},t.prototype.Ue=function(t){var e=this.Cu.get(t.toString());return!this.$u.has(t)&&e?Pe.updateTime(e):Pe.Qe()},t.prototype.Ou=function(t){var e=this.Cu.get(t.toString());if(!this.$u.has(t)&&e){if(e.isEqual(j.min()))throw new N(O.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Pe.updateTime(e)}return Pe.exists(!0)},t.prototype.write=function(t){this.xu(),this.mutations=this.mutations.concat(t)},t.prototype.xu=function(){},t}(),To=function(){function e(t,e){this.mo=t,this.Lu=e,this.state="Unknown",this.Bu=0,this.qu=null,this.Uu=!0}return e.prototype.Qu=function(){var e=this;0===this.Bu&&(this.Wu("Unknown"),this.qu=this.mo.Os("online_state_timeout",1e4,(function(){return e.qu=null,e.ju("Backend didn't respond within 10 seconds."),e.Wu("Offline"),t.resolve()})))},e.prototype.Ku=function(t){"Online"===this.state?this.Wu("Unknown"):(this.Bu++,this.Bu>=1&&(this.Gu(),this.ju("Connection failed 1 times. Most recent error: "+t.toString()),this.Wu("Offline")))},e.prototype.set=function(t){this.Gu(),this.Bu=0,"Online"===t&&(this.Uu=!1),this.Wu(t)},e.prototype.Wu=function(t){t!==this.state&&(this.state=t,this.Lu(t))},e.prototype.ju=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Uu?(v(e),this.Uu=!1):f("OnlineStateTracker",e)},e.prototype.Gu=function(){null!==this.qu&&(this.qu.cancel(),this.qu=null)},e}(),Io=function(){function t(t,e,n,r,i){var a=this;this.zu=t,this.Du=e,this.mo=n,this.Hu=[],this.Yu=new Map,this.Ju=null,this.Xu=new Set,this.Zu=i,this.Zu.tc((function(t){n.cr((function(){return o.__awaiter(a,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return this.ec()?(f("RemoteStore","Restarting streams for network reachability change."),[4,this.nc()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.sc=new To(n,r),this.ic=function(t,e,n){var r=b(t);return new Co(e,r.Ja,r.credentials,r.serializer,n)}(this.Du,n,{wu:this.rc.bind(this),cu:this.oc.bind(this),Eu:this.hc.bind(this)}),this.ac=function(t,e,n){var r=b(t);return new So(e,r.Ja,r.credentials,r.serializer,n)}(this.Du,n,{wu:this.uc.bind(this),cu:this.cc.bind(this),gu:this.lc.bind(this),Vu:this.Vu.bind(this)})}return t.prototype.start=function(){return this.enableNetwork()},t.prototype.enableNetwork=function(){return this.Xu.delete(0),this._c()},t.prototype._c=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return this.ec()?(this.fc()?this.dc():this.sc.set("Unknown"),[4,this.wc()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.disableNetwork=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return this.Xu.add(0),[4,this.Tc()];case 1:return t.sent(),this.sc.set("Offline"),[2]}}))}))},t.prototype.Tc=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return[4,this.ac.stop()];case 1:return t.sent(),[4,this.ic.stop()];case 2:return t.sent(),this.Hu.length>0&&(f("RemoteStore","Stopping write stream with "+this.Hu.length+" pending writes"),this.Hu=[]),this.Ec(),[2]}}))}))},t.prototype.gr=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return f("RemoteStore","RemoteStore shutting down."),this.Xu.add(5),[4,this.Tc()];case 1:return t.sent(),this.Zu.gr(),this.sc.set("Unknown"),[2]}}))}))},t.prototype.listen=function(t){this.Yu.has(t.targetId)||(this.Yu.set(t.targetId,t),this.fc()?this.dc():this.ic.nu()&&this.Ic(t))},t.prototype.mc=function(t){this.Yu.delete(t),this.ic.nu()&&this.Ac(t),0===this.Yu.size&&(this.ic.nu()?this.ic.ru():this.ec()&&this.sc.set("Unknown"))},t.prototype.Me=function(t){return this.Yu.get(t)||null},t.prototype.xe=function(t){return this.Rc.xe(t)},t.prototype.Ic=function(t){this.Ju.de(t.targetId),this.ic.Iu(t)},t.prototype.Ac=function(t){this.Ju.de(t),this.ic.mu(t)},t.prototype.dc=function(){this.Ju=new St(this),this.ic.start(),this.sc.Qu()},t.prototype.fc=function(){return this.ec()&&!this.ic.eu()&&this.Yu.size>0},t.prototype.ec=function(){return 0===this.Xu.size},t.prototype.Ec=function(){this.Ju=null},t.prototype.rc=function(){return o.__awaiter(this,void 0,void 0,(function(){var t=this;return o.__generator(this,(function(e){return this.Yu.forEach((function(e,n){t.Ic(e)})),[2]}))}))},t.prototype.oc=function(t){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(e){return this.Ec(),this.fc()?(this.sc.Ku(t),this.dc()):this.sc.set("Unknown"),[2]}))}))},t.prototype.hc=function(t,e){return o.__awaiter(this,void 0,void 0,(function(){var n,r,i;return o.__generator(this,(function(o){switch(o.label){case 0:if(this.sc.set("Online"),!(t instanceof Et&&2===t.state&&t.cause))return[3,6];o.label=1;case 1:return o.trys.push([1,3,,5]),[4,this.Pc(t)];case 2:return o.sent(),[3,5];case 3:return n=o.sent(),f("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),[4,this.Vc(n)];case 4:return o.sent(),[3,5];case 5:return[3,13];case 6:if(t instanceof _t?this.Ju.Pe(t):t instanceof xt?this.Ju.De(t):this.Ju.ye(t),e.isEqual(j.min()))return[3,13];o.label=7;case 7:return o.trys.push([7,11,,13]),[4,this.zu.mi()];case 8:return r=o.sent(),e.o(r)>=0?[4,this.gc(e)]:[3,10];case 9:o.sent(),o.label=10;case 10:return[3,13];case 11:return f("RemoteStore","Failed to raise snapshot:",i=o.sent()),[4,this.Vc(i)];case 12:return o.sent(),[3,13];case 13:return[2]}}))}))},t.prototype.Vc=function(t,e){return o.__awaiter(this,void 0,void 0,(function(){var n=this;return o.__generator(this,(function(r){switch(r.label){case 0:if(!Wr(t))throw t;return this.Xu.add(1),[4,this.Tc()];case 1:return r.sent(),this.sc.set("Offline"),e||(e=function(){return n.zu.mi()}),this.mo._r((function(){return o.__awaiter(n,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return f("RemoteStore","Retrying IndexedDB access"),[4,e()];case 1:return t.sent(),this.Xu.delete(1),[4,this._c()];case 2:return t.sent(),[2]}}))}))})),[2]}}))}))},t.prototype.yc=function(t){var e=this;return t().catch((function(n){return e.Vc(n,t)}))},t.prototype.gc=function(t){var e=this,n=this.Ju.Ne(t);return n.Qt.forEach((function(n,r){if(n.resumeToken.H()>0){var i=e.Yu.get(r);i&&e.Yu.set(r,i.tt(n.resumeToken,t))}})),n.Wt.forEach((function(t){var n=e.Yu.get(t);if(n){e.Yu.set(t,n.tt(Q.Y,n.X)),e.Ac(t);var r=new X(n.target,t,1,n.sequenceNumber);e.Ic(r)}})),this.Rc.Lh(n)},t.prototype.Pc=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n,r,i;return o.__generator(this,(function(o){switch(o.label){case 0:e=t.cause,n=0,r=t.targetIds,o.label=1;case 1:return n<r.length?(i=r[n],this.Yu.has(i)?[4,this.Rc.pc(i,e)]:[3,3]):[3,5];case 2:o.sent(),this.Yu.delete(i),this.Ju.removeTarget(i),o.label=3;case 3:o.label=4;case 4:return n++,[3,1];case 5:return[2]}}))}))},t.prototype.wc=function(){return o.__awaiter(this,void 0,void 0,(function(){var t,e,n;return o.__generator(this,(function(r){switch(r.label){case 0:t=this.Hu.length>0?this.Hu[this.Hu.length-1].batchId:-1,r.label=1;case 1:if(!this.bc())return[3,7];r.label=2;case 2:return r.trys.push([2,4,,6]),[4,this.zu.Qh(t)];case 3:return null===(e=r.sent())?(0===this.Hu.length&&this.ac.ru(),[3,7]):(t=e.batchId,this.vc(e),[3,6]);case 4:return n=r.sent(),[4,this.Vc(n)];case 5:return r.sent(),[3,6];case 6:return[3,1];case 7:return this.Sc()&&this.Dc(),[2]}}))}))},t.prototype.bc=function(){return this.ec()&&this.Hu.length<10},t.prototype.Cc=function(){return this.Hu.length},t.prototype.vc=function(t){this.Hu.push(t),this.ac.nu()&&this.ac.Ru&&this.ac.Pu(t.mutations)},t.prototype.Sc=function(){return this.ec()&&!this.ac.eu()&&this.Hu.length>0},t.prototype.Dc=function(){this.ac.start()},t.prototype.uc=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){return this.ac.yu(),[2]}))}))},t.prototype.lc=function(){return o.__awaiter(this,void 0,void 0,(function(){var t,e,n;return o.__generator(this,(function(r){for(t=0,e=this.Hu;t<e.length;t++)n=e[t],this.ac.Pu(n.mutations);return[2]}))}))},t.prototype.Vu=function(t,e){return o.__awaiter(this,void 0,void 0,(function(){var n,r,i=this;return o.__generator(this,(function(o){switch(o.label){case 0:return n=this.Hu.shift(),r=Tn.from(n,t,e),[4,this.yc((function(){return i.Rc.Fc(r)}))];case 1:return o.sent(),[4,this.wc()];case 2:return o.sent(),[2]}}))}))},t.prototype.cc=function(t){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(e){switch(e.label){case 0:return t&&this.ac.Ru?[4,this.Nc(t)]:[3,2];case 1:e.sent(),e.label=2;case 2:return this.Sc()&&this.Dc(),[2]}}))}))},t.prototype.Nc=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n,r=this;return o.__generator(this,(function(i){switch(i.label){case 0:return Z(n=t.code)&&n!==O.ABORTED?(e=this.Hu.shift(),this.ac.iu(),[4,this.yc((function(){return r.Rc.$c(e.batchId,t)}))]):[3,3];case 1:return i.sent(),[4,this.wc()];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))},t.prototype.kc=function(){return new Ao(this.Du)},t.prototype.nc=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return this.Xu.add(4),[4,this.Tc()];case 1:return t.sent(),this.sc.set("Unknown"),this.ac.iu(),this.ic.iu(),this.Xu.delete(4),[4,this._c()];case 2:return t.sent(),[2]}}))}))},t.prototype.xc=function(t){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(e){switch(e.label){case 0:return this.mo.Wo(),f("RemoteStore","RemoteStore received new credentials"),this.Xu.add(3),[4,this.Tc()];case 1:return e.sent(),this.sc.set("Unknown"),[4,this.Rc.xc(t)];case 2:return e.sent(),this.Xu.delete(3),[4,this._c()];case 3:return e.sent(),[2]}}))}))},t.prototype.Mc=function(t){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(e){switch(e.label){case 0:return t?(this.Xu.delete(2),[4,this._c()]):[3,2];case 1:return e.sent(),[3,5];case 2:return t?[3,4]:(this.Xu.add(2),[4,this.Tc()]);case 3:e.sent(),this.sc.set("Unknown"),e.label=4;case 4:e.label=5;case 5:return[2]}}))}))},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ro(t,e){return"firestore_clients_"+t+"_"+e}function Oo(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.zr()&&(r+="_"+e.uid),r}function No(t,e){return"firestore_targets_"+t+"_"+e}var Lo=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Oc=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),a=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(a=new N(i.error.code,i.error.message)),o?new t(e,n,i.state,a):(v("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Lc=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),jo=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Oc=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new N(r.error.code,r.error.message)),i?new t(e,r.state,o):(v("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Lc=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Bo=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Oc=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=vt(),a=0;i&&a<r.activeTargetIds.length;++a)i=G(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new t(e,o):(v("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Mo=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Oc=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(v("SharedClientState","Failed to parse online state: "+e),null)},t}(),Do=function(){function t(){this.activeTargetIds=vt()}return t.prototype.Bc=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.qc=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Lc=function(){var t={activeTargetIds:this.activeTargetIds.F(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Po=function(){function t(t,e,n,r,i){this.window=t,this.bs=e,this.persistenceKey=n,this.Uc=r,this.Rc=null,this.Lu=null,this.Ps=null,this.Qc=this.Wc.bind(this),this.jc=new et(x),this.or=!1,this.Kc=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Gc=Ro(this.persistenceKey,this.Uc),this.zc=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.jc=this.jc.nt(this.Uc,new Do),this.Hc=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Yc=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.Jc=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Xc=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.Qc)}return t.Hi=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return o.__awaiter(this,void 0,void 0,(function(){var t,e,n,r,i,a,s,c,u,l,h,d=this;return o.__generator(this,(function(o){switch(o.label){case 0:return[4,this.Rc.Sr()];case 1:for(t=o.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Uc&&(i=this.getItem(Ro(this.persistenceKey,r)))&&(a=Bo.Oc(r,i))&&(this.jc=this.jc.nt(a.clientId,a));for(this.Zc(),(s=this.storage.getItem(this.Xc))&&(c=this.tl(s))&&this.el(c),u=0,l=this.Kc;u<l.length;u++)h=l[u],this.Wc(h);return this.Kc=[],this.window.addEventListener("unload",(function(){return d.gr()})),this.or=!0,[2]}}))}))},t.prototype.ys=function(t){this.setItem(this.zc,JSON.stringify(t))},t.prototype.nl=function(){return this.sl(this.jc)},t.prototype.il=function(t){var e=!1;return this.jc.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.rl=function(t){this.ol(t,"pending")},t.prototype.hl=function(t,e,n){this.ol(t,e,n),this.al(t)},t.prototype.ul=function(t){var e="not-current";if(this.il(t)){var n=this.storage.getItem(No(this.persistenceKey,t));if(n){var r=jo.Oc(t,n);r&&(e=r.state)}}return this.cl.Bc(t),this.Zc(),e},t.prototype.ll=function(t){this.cl.qc(t),this.Zc()},t.prototype._l=function(t){return this.cl.activeTargetIds.has(t)},t.prototype.fl=function(t){this.removeItem(No(this.persistenceKey,t))},t.prototype.dl=function(t,e,n){this.wl(t,e,n)},t.prototype.Ch=function(t,e,n){var r=this;e.forEach((function(t){r.al(t)})),this.currentUser=t,n.forEach((function(t){r.rl(t)}))},t.prototype.Tl=function(t){this.El(t)},t.prototype.gr=function(){this.or&&(this.window.removeEventListener("storage",this.Qc),this.removeItem(this.Gc),this.or=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return f("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){f("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){f("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Wc=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(f("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Gc)return void v("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.bs._r((function(){return o.__awaiter(e,void 0,void 0,(function(){var t,e,r,i,a,s;return o.__generator(this,(function(o){if(this.or){if(null!==n.key)if(this.Hc.test(n.key)){if(null==n.newValue)return t=this.Il(n.key),[2,this.ml(t,null)];if(e=this.Al(n.key,n.newValue))return[2,this.ml(e.clientId,e)]}else if(this.Yc.test(n.key)){if(null!==n.newValue&&(r=this.Rl(n.key,n.newValue)))return[2,this.Pl(r)]}else if(this.Jc.test(n.key)){if(null!==n.newValue&&(i=this.Vl(n.key,n.newValue)))return[2,this.gl(i)]}else if(n.key===this.Xc){if(null!==n.newValue&&(a=this.tl(n.newValue)))return[2,this.el(a)]}else n.key===this.zc&&(s=function(t){var e=Bn.ps;if(null!=t)try{var n=JSON.parse(t);m("number"==typeof n),e=n}catch(t){v("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Bn.ps&&this.Ps(s)}else this.Kc.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"cl",{get:function(){return this.jc.get(this.Uc)},enumerable:!1,configurable:!0}),t.prototype.Zc=function(){this.setItem(this.Gc,this.cl.Lc())},t.prototype.ol=function(t,e,n){var r=new Lo(this.currentUser,t,e,n),i=Oo(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Lc())},t.prototype.al=function(t){var e=Oo(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.El=function(t){var e={clientId:this.Uc,onlineState:t};this.storage.setItem(this.Xc,JSON.stringify(e))},t.prototype.wl=function(t,e,n){var r=No(this.persistenceKey,t),i=new jo(t,e,n);this.setItem(r,i.Lc())},t.prototype.Il=function(t){var e=this.Hc.exec(t);return e?e[1]:null},t.prototype.Al=function(t,e){var n=this.Il(t);return Bo.Oc(n,e)},t.prototype.Rl=function(t,e){var n=this.Yc.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Lo.Oc(new yo(i),r,e)},t.prototype.Vl=function(t,e){var n=this.Jc.exec(t),r=Number(n[1]);return jo.Oc(r,e)},t.prototype.tl=function(t){return Mo.Oc(t)},t.prototype.Pl=function(t){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.Rc.yl(t.batchId,t.state,t.error)]:(f("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.gl=function(t){return this.Rc.pl(t.targetId,t.state,t.error)},t.prototype.ml=function(t,e){var n=this,r=e?this.jc.nt(t,e):this.jc.remove(t),i=this.sl(this.jc),o=this.sl(r),a=[],s=[];return o.forEach((function(t){i.has(t)||a.push(t)})),i.forEach((function(t){o.has(t)||s.push(t)})),this.Rc.bl(a,s).then((function(){n.jc=r}))},t.prototype.el=function(t){this.jc.get(t.clientId)&&this.Lu(t.onlineState)},t.prototype.sl=function(t){var e=vt();return t.forEach((function(t,n){e=e.Ct(n.activeTargetIds)})),e},t}(),Fo=function(){function e(){this.vl=new Do,this.Sl={},this.Rc=null,this.Lu=null,this.Ps=null}return e.prototype.rl=function(t){},e.prototype.hl=function(t,e,n){},e.prototype.ul=function(t){return this.vl.Bc(t),this.Sl[t]||"not-current"},e.prototype.dl=function(t,e,n){this.Sl[t]=e},e.prototype.ll=function(t){this.vl.qc(t)},e.prototype._l=function(t){return this.vl.activeTargetIds.has(t)},e.prototype.fl=function(t){delete this.Sl[t]},e.prototype.nl=function(){return this.vl.activeTargetIds},e.prototype.il=function(t){return this.vl.activeTargetIds.has(t)},e.prototype.start=function(){return this.vl=new Do,t.resolve()},e.prototype.Ch=function(t,e,n){},e.prototype.Tl=function(t){},e.prototype.gr=function(){},e.prototype.ys=function(t){},e}(),Vo=function(t){this.key=t},qo=function(t){this.key=t},Go=function(){function t(t,e){this.query=t,this.Dl=e,this.Cl=null,this.Ht=!1,this.Fl=pt(),this.Lt=pt(),this.Nl=pn(t),this.$l=new gt(this.Nl)}return Object.defineProperty(t.prototype,"kl",{get:function(){return this.Dl},enumerable:!1,configurable:!0}),t.prototype.xl=function(t,e){var n=this,r=e?e.Ml:new yt,i=e?e.$l:this.$l,o=e?e.Lt:this.Lt,a=i,s=!1,c=this.query.In()&&i.size===this.query.limit?i.last():null,u=this.query.mn()&&i.size===this.query.limit?i.first():null;if(t.ot((function(t,e){var l=i.get(t),h=e instanceof on?e:null;h&&(h=dn(n.query,h)?h:null);var d=!!l&&n.Lt.has(l.key),p=!!h&&(h.Ge||n.Lt.has(h.key)&&h.hasCommittedMutations),f=!1;l&&h?l.data().isEqual(h.data())?d!==p&&(r.track({type:3,doc:h}),f=!0):n.Ol(l,h)||(r.track({type:2,doc:h}),f=!0,(c&&n.Nl(h,c)>0||u&&n.Nl(h,u)<0)&&(s=!0)):!l&&h?(r.track({type:0,doc:h}),f=!0):l&&!h&&(r.track({type:1,doc:l}),f=!0,(c||u)&&(s=!0)),f&&(h?(a=a.add(h),o=p?o.add(t):o.delete(t)):(a=a.delete(t),o=o.delete(t)))})),this.query.In()||this.query.mn())for(;a.size>this.query.limit;){var l=this.query.In()?a.last():a.first();a=a.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{$l:a,Ml:r,Ll:s,Lt:o}},t.prototype.Ol=function(t,e){return t.Ge&&e.hasCommittedMutations&&!e.Ge},t.prototype.Jn=function(t,e,n){var r=this,i=this.$l;this.$l=t.$l,this.Lt=t.Lt;var o=t.Ml.Mt();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return y()}};return n(t)-n(e)}(t.type,e.type)||r.Nl(t.doc,e.doc)})),this.Bl(n);var a=e?this.ql():[],s=0===this.Fl.size&&this.Ht?1:0,c=s!==this.Cl;return this.Cl=s,0!==o.length||c?{snapshot:new mt(this.query,t.$l,i,o,t.Lt,0===s,c,!1),Ul:a}:{Ul:a}},t.prototype.Ql=function(t){return this.Ht&&"Offline"===t?(this.Ht=!1,this.Jn({$l:this.$l,Ml:new yt,Lt:this.Lt,Ll:!1},!1)):{Ul:[]}},t.prototype.Wl=function(t){return!this.Dl.has(t)&&!!this.$l.has(t)&&!this.$l.get(t).Ge},t.prototype.Bl=function(t){var e=this;t&&(t.Yt.forEach((function(t){return e.Dl=e.Dl.add(t)})),t.Jt.forEach((function(t){})),t.Xt.forEach((function(t){return e.Dl=e.Dl.delete(t)})),this.Ht=t.Ht)},t.prototype.ql=function(){var t=this;if(!this.Ht)return[];var e=this.Fl;this.Fl=pt(),this.$l.forEach((function(e){t.Wl(e.key)&&(t.Fl=t.Fl.add(e.key))}));var n=[];return e.forEach((function(e){t.Fl.has(e)||n.push(new qo(e))})),this.Fl.forEach((function(t){e.has(t)||n.push(new Vo(t))})),n},t.prototype.jl=function(t){this.Dl=t.zh,this.Fl=pt();var e=this.xl(t.documents);return this.Jn(e,!0)},t.prototype.Kl=function(){return mt.Ut(this.query,this.$l,this.Lt,0===this.Cl)},t}(),Uo=function(){function e(t,e,n,r){this.mo=t,this.Du=e,this.updateFunction=n,this.Po=r,this.Gl=5,this.$o=new Dn(this.mo,"transaction_retry")}return e.prototype.run=function(){this.zl()},e.prototype.zl=function(){var t=this;this.$o.xs((function(){return o.__awaiter(t,void 0,void 0,(function(){var t,e,n=this;return o.__generator(this,(function(r){return t=new Ao(this.Du),(e=this.Hl(t))&&e.then((function(e){n.mo.cr((function(){return t.commit().then((function(){n.Po.resolve(e)})).catch((function(t){n.Yl(t)}))}))})).catch((function(t){n.Yl(t)})),[2]}))}))}))},e.prototype.Hl=function(t){try{var e=this.updateFunction(t);return!V(e)&&e.catch&&e.then?e:(this.Po.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.Po.reject(t),null}},e.prototype.Yl=function(e){var n=this;this.Gl>0&&this.Jl(e)?(this.Gl-=1,this.mo.cr((function(){return n.zl(),t.resolve()}))):this.Po.reject(e)},e.prototype.Jl=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Z(e)}return!1},e}(),Ho=function(t,e,n){this.query=t,this.targetId=e,this.view=n},zo=function(t){this.key=t,this.Xl=!1},$o=function(){function e(t,e,n,r,i,o){this.zu=t,this.Zl=e,this.Du=n,this.t_=r,this.currentUser=i,this.e_=o,this.n_=null,this.s_=new R((function(t){return ln(t)}),un),this.i_=new Map,this.r_=[],this.o_=new et(F.P),this.h_=new Map,this.a_=new pi,this.u_={},this.c_=new Map,this.l_=sr.di(),this.onlineState="Unknown"}return Object.defineProperty(e.prototype,"__",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.subscribe=function(t){this.n_=t},e.prototype.listen=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n,r,i,a;return o.__generator(this,(function(o){switch(o.label){case 0:return this.f_("listen()"),(r=this.s_.get(t))?(e=r.targetId,this.t_.ul(e),n=r.view.Kl(),[3,4]):[3,1];case 1:return[4,this.zu.jh(t.We())];case 2:return i=o.sent(),a=this.t_.ul(i.targetId),e=i.targetId,[4,this.d_(t,e,"current"===a)];case 3:n=o.sent(),this.__&&this.Zl.listen(i),o.label=4;case 4:return[2,n]}}))}))},e.prototype.d_=function(t,e,n){return o.__awaiter(this,void 0,void 0,(function(){var r,i,a,s,c,u;return o.__generator(this,(function(o){switch(o.label){case 0:return[4,this.zu.Gh(t,!0)];case 1:return r=o.sent(),i=new Go(t,r.zh),a=i.xl(r.documents),s=wt.zt(e,n&&"Offline"!==this.onlineState),c=i.Jn(a,this.__,s),this.w_(e,c.Ul),u=new Ho(t,e,i),[2,(this.s_.set(t,u),this.i_.has(e)?this.i_.get(e).push(t):this.i_.set(e,[t]),c.snapshot)]}}))}))},e.prototype.mc=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n,r=this;return o.__generator(this,(function(i){switch(i.label){case 0:return this.f_("unlisten()"),e=this.s_.get(t),(n=this.i_.get(e.targetId)).length>1?[2,(this.i_.set(e.targetId,n.filter((function(e){return!un(e,t)}))),void this.s_.delete(t))]:this.__?(this.t_.ll(e.targetId),this.t_.il(e.targetId)?[3,2]:[4,this.zu.Kh(e.targetId,!1).then((function(){r.t_.fl(e.targetId),r.Zl.mc(e.targetId),r.T_(e.targetId)})).catch(di)]):[3,3];case 1:i.sent(),i.label=2;case 2:return[3,5];case 3:return this.T_(e.targetId),[4,this.zu.Kh(e.targetId,!0)];case 4:i.sent(),i.label=5;case 5:return[2]}}))}))},e.prototype.write=function(t,e){return o.__awaiter(this,void 0,void 0,(function(){var n,r,i;return o.__generator(this,(function(o){switch(o.label){case 0:this.f_("write()"),o.label=1;case 1:return o.trys.push([1,5,,6]),[4,this.zu.kh(t)];case 2:return n=o.sent(),this.t_.rl(n.batchId),this.E_(n.batchId,e),[4,this.I_(n.Un)];case 3:return o.sent(),[4,this.Zl.wc()];case 4:return o.sent(),[3,6];case 5:return r=o.sent(),i=ni(r,"Failed to persist write"),e.reject(i),[3,6];case 6:return[2]}}))}))},e.prototype.runTransaction=function(t,e,n){new Uo(t,this.Du,e,n).run()},e.prototype.Lh=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n=this;return o.__generator(this,(function(r){switch(r.label){case 0:this.f_("applyRemoteEvent()"),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.zu.Lh(t)];case 2:return e=r.sent(),t.Qt.forEach((function(t,e){var r=n.h_.get(e);r&&(m(t.Yt.size+t.Jt.size+t.Xt.size<=1),t.Yt.size>0?r.Xl=!0:t.Jt.size>0?m(r.Xl):t.Xt.size>0&&(m(r.Xl),r.Xl=!1))})),[4,this.I_(e,t)];case 3:return r.sent(),[3,6];case 4:return[4,di(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},e.prototype.Ql=function(t,e){this.f_("applyOnlineStateChange()");var n=[];this.s_.forEach((function(e,r){var i=r.view.Ql(t);i.snapshot&&n.push(i.snapshot)})),this.n_.m_(t),this.n_.Eu(n),this.onlineState=t},e.prototype.pc=function(t,e){return o.__awaiter(this,void 0,void 0,(function(){var n,r,i,a,s,c=this;return o.__generator(this,(function(o){switch(o.label){case 0:return this.f_("rejectListens()"),this.t_.dl(t,"rejected",e),n=this.h_.get(t),(r=n&&n.key)?(i=(i=new et(F.P)).nt(r,new an(r,j.min())),a=pt().add(r),s=new bt(j.min(),new Map,new it(x),i,a),[4,this.Lh(s)]):[3,2];case 1:return o.sent(),this.o_=this.o_.remove(r),this.h_.delete(t),this.A_(),[3,4];case 2:return[4,this.zu.Kh(t,!1).then((function(){return c.T_(t,e)})).catch(di)];case 3:o.sent(),o.label=4;case 4:return[2]}}))}))},e.prototype.Fc=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n;return o.__generator(this,(function(r){switch(r.label){case 0:this.f_("applySuccessfulWrite()"),e=t.batch.batchId,r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.zu.xh(t)];case 2:return n=r.sent(),this.R_(e,null),this.P_(e),this.t_.hl(e,"acknowledged"),[4,this.I_(n)];case 3:return r.sent(),[3,6];case 4:return[4,di(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},e.prototype.$c=function(t,e){return o.__awaiter(this,void 0,void 0,(function(){var n;return o.__generator(this,(function(r){switch(r.label){case 0:this.f_("rejectFailedWrite()"),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.zu.Oh(t)];case 2:return n=r.sent(),this.R_(t,e),this.P_(t),this.t_.hl(t,"rejected",e),[4,this.I_(n)];case 3:return r.sent(),[3,6];case 4:return[4,di(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},e.prototype.V_=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n,r,i;return o.__generator(this,(function(o){switch(o.label){case 0:this.Zl.ec()||f("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.zu.to()];case 2:return-1===(e=o.sent())?[2,void t.resolve()]:((n=this.c_.get(e)||[]).push(t),this.c_.set(e,n),[3,4]);case 3:return r=o.sent(),i=ni(r,"Initialization of waitForPendingWrites() operation failed"),t.reject(i),[3,4];case 4:return[2]}}))}))},e.prototype.P_=function(t){(this.c_.get(t)||[]).forEach((function(t){t.resolve()})),this.c_.delete(t)},e.prototype.g_=function(t){this.c_.forEach((function(e){e.forEach((function(e){e.reject(new N(O.CANCELLED,t))}))})),this.c_.clear()},e.prototype.E_=function(t,e){var n=this.u_[this.currentUser.ka()];n||(n=new et(x)),n=n.nt(t,e),this.u_[this.currentUser.ka()]=n},e.prototype.R_=function(t,e){var n=this.u_[this.currentUser.ka()];if(n){var r=n.get(t);r&&(e?r.reject(e):r.resolve(),n=n.remove(t)),this.u_[this.currentUser.ka()]=n}},e.prototype.T_=function(t,e){var n=this;void 0===e&&(e=null),this.t_.ll(t);for(var r=0,i=this.i_.get(t);r<i.length;r++){var o=i[r];this.s_.delete(o),e&&this.n_.y_(o,e)}this.i_.delete(t),this.__&&this.a_.oa(t).forEach((function(t){n.a_.Mi(t)||n.p_(t)}))},e.prototype.p_=function(t){var e=this.o_.get(t);null!==e&&(this.Zl.mc(e),this.o_=this.o_.remove(t),this.h_.delete(e),this.A_())},e.prototype.w_=function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n];i instanceof Vo?(this.a_.Fi(i.key,t),this.b_(i)):i instanceof qo?(f("SyncEngine","Document no longer in limbo: "+i.key),this.a_.$i(i.key,t),this.a_.Mi(i.key)||this.p_(i.key)):y()}},e.prototype.b_=function(t){var e=t.key;this.o_.get(e)||(f("SyncEngine","New document in limbo: "+e),this.r_.push(e),this.A_())},e.prototype.A_=function(){for(;this.r_.length>0&&this.o_.size<this.e_;){var t=this.r_.shift(),e=this.l_.next();this.h_.set(e,new zo(t)),this.o_=this.o_.nt(t,e),this.Zl.listen(new X(cn.hn(t.path).We(),e,2,Bn.ps))}},e.prototype.v_=function(){return this.o_},e.prototype.S_=function(){return this.r_},e.prototype.I_=function(e,n){return o.__awaiter(this,void 0,void 0,(function(){var r,i,a,s=this;return o.__generator(this,(function(o){switch(o.label){case 0:return r=[],i=[],a=[],this.s_.forEach((function(o,c){a.push(t.resolve().then((function(){var t=c.view.xl(e);return t.Ll?s.zu.Gh(c.query,!1).then((function(e){var n=e.documents;return c.view.xl(n,t)})):t})).then((function(t){var e=n&&n.Qt.get(c.targetId),o=c.view.Jn(t,s.__,e);if(s.w_(c.targetId,o.Ul),o.snapshot){s.__&&s.t_.dl(c.targetId,o.snapshot.fromCache?"not-current":"current"),r.push(o.snapshot);var a=jn.Rs(c.targetId,o.snapshot);i.push(a)}})))})),[4,t.all(a)];case 1:return o.sent(),this.n_.Eu(r),[4,this.zu.Uh(i)];case 2:return o.sent(),[2]}}))}))},e.prototype.f_=function(t){},e.prototype.xc=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e;return o.__generator(this,(function(n){switch(n.label){case 0:return this.currentUser.isEqual(t)?[3,3]:(f("SyncEngine","User change. New user:",t.ka()),[4,this.zu.Ch(t)]);case 1:return e=n.sent(),this.currentUser=t,this.g_("'waitForPendingWrites' promise is rejected due to a user change."),this.t_.Ch(t,e.Nh,e.$h),[4,this.I_(e.Fh)];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))},e.prototype.enableNetwork=function(){return this.Zl.enableNetwork()},e.prototype.disableNetwork=function(){return this.Zl.disableNetwork()},e.prototype.xe=function(t){var e=this.h_.get(t);if(e&&e.Xl)return pt().add(e.key);var n=pt(),r=this.i_.get(t);if(!r)return n;for(var i=0,o=r;i<o.length;i++){var a=o[i],s=this.s_.get(a);n=n.Ct(s.view.kl)}return n},e}();function Wo(t,e,n,r,i,o){return new $o(t,e,n,r,i,o)}var Qo=function(e){function n(t,n,r,i,o,a){var s=this;return(s=e.call(this,t,n,r,i,o,a)||this).zu=t,s.D_=void 0,s}return o.__extends(n,e),Object.defineProperty(n.prototype,"__",{get:function(){return!0===this.D_},enumerable:!1,configurable:!0}),n.prototype.enableNetwork=function(){return this.zu.ur(!0),e.prototype.enableNetwork.call(this)},n.prototype.disableNetwork=function(){return this.zu.ur(!1),e.prototype.disableNetwork.call(this)},n.prototype.C_=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n;return o.__generator(this,(function(r){switch(r.label){case 0:return[4,this.zu.Gh(t.query,!0)];case 1:return e=r.sent(),n=t.view.jl(e),[2,(this.D_&&this.w_(t.targetId,n.Ul),n)]}}))}))},n.prototype.Ql=function(t,n){this.__&&0===n&&(e.prototype.Ql.call(this,t,n),this.t_.Tl(t)),this.__||1!==n||e.prototype.Ql.call(this,t,n)},n.prototype.yl=function(t,e,n){return o.__awaiter(this,void 0,void 0,(function(){var r;return o.__generator(this,(function(i){switch(i.label){case 0:return this.f_("applyBatchState()"),[4,this.zu.Yh(t)];case 1:return null===(r=i.sent())?[3,6]:"pending"!==e?[3,3]:[4,this.Zl.wc()];case 2:return i.sent(),[3,4];case 3:"acknowledged"===e||"rejected"===e?(this.R_(t,n||null),this.zu.Jh(t)):y(),i.label=4;case 4:return[4,this.I_(r)];case 5:return i.sent(),[3,7];case 6:f("SyncEngine","Cannot apply mutation batch with id: "+t),i.label=7;case 7:return[2]}}))}))},n.prototype.Mc=function(e){return o.__awaiter(this,void 0,void 0,(function(){var n,r,i,a,s,c,u,l=this;return o.__generator(this,(function(o){switch(o.label){case 0:return!0!==e||!0===this.D_?[3,3]:(n=this.t_.nl(),[4,this.F_(n.F(),!0)]);case 1:return r=o.sent(),this.D_=!0,[4,this.Zl.Mc(!0)];case 2:for(o.sent(),i=0,a=r;i<a.length;i++)s=a[i],this.Zl.listen(s);return[3,7];case 3:return!1!==e||!1===this.D_?[3,7]:(c=[],u=t.resolve(),this.i_.forEach((function(t,e){l.t_._l(e)?c.push(e):u=u.then((function(){return l.T_(e),l.zu.Kh(e,!0)})),l.Zl.mc(e)})),[4,u]);case 4:return o.sent(),[4,this.F_(c,!1)];case 5:return o.sent(),this.N_(),this.D_=!1,[4,this.Zl.Mc(!1)];case 6:o.sent(),o.label=7;case 7:return[2]}}))}))},n.prototype.N_=function(){var t=this;this.h_.forEach((function(e,n){t.Zl.mc(n)})),this.a_.ha(),this.h_=new Map,this.o_=new et(F.P)},n.prototype.F_=function(t,e){return o.__awaiter(this,void 0,void 0,(function(){var e,n,r,i,a,s,c,u,l,h,d,p,f;return o.__generator(this,(function(o){switch(o.label){case 0:e=[],n=[],r=0,i=t,o.label=1;case 1:return r<i.length?(a=i[r],s=void 0,(c=this.i_.get(a))&&0!==c.length?[4,this.zu.jh(c[0].We())]:[3,7]):[3,13];case 2:s=o.sent(),u=0,l=c,o.label=3;case 3:return u<l.length?(h=l[u],d=this.s_.get(h),[4,this.C_(d)]):[3,6];case 4:(p=o.sent()).snapshot&&n.push(p.snapshot),o.label=5;case 5:return u++,[3,3];case 6:return[3,11];case 7:return[4,this.zu.Xh(a)];case 8:return f=o.sent(),[4,this.zu.jh(f)];case 9:return s=o.sent(),[4,this.d_(this.k_(f),a,!1)];case 10:o.sent(),o.label=11;case 11:e.push(s),o.label=12;case 12:return r++,[3,1];case 13:return[2,(this.n_.Eu(n),e)]}}))}))},n.prototype.k_=function(t){return new cn(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)},n.prototype.Sr=function(){return this.zu.Sr()},n.prototype.pl=function(t,e,n){return o.__awaiter(this,void 0,void 0,(function(){var r,i;return o.__generator(this,(function(o){switch(o.label){case 0:return this.D_?(f("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!this.i_.has(t))return[3,8];switch(e){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,this.zu.si()];case 3:return r=o.sent(),i=bt.Gt(t,"current"===e),[4,this.I_(r,i)];case 4:return o.sent(),[3,8];case 5:return[4,this.zu.Kh(t,!0)];case 6:return o.sent(),this.T_(t,n),[3,8];case 7:y(),o.label=8;case 8:return[2]}}))}))},n.prototype.bl=function(t,e){return o.__awaiter(this,void 0,void 0,(function(){var n,r,i,a,s,c,u,l,h,d,p=this;return o.__generator(this,(function(v){switch(v.label){case 0:if(!this.D_)return[3,10];n=0,r=t,v.label=1;case 1:return n<r.length?(i=r[n],this.i_.has(i)?(f("SyncEngine","Adding an already active target "+i),[3,5]):[4,this.zu.Xh(i)]):[3,6];case 2:return a=v.sent(),[4,this.zu.jh(a)];case 3:return s=v.sent(),[4,this.d_(this.k_(a),s.targetId,!1)];case 4:v.sent(),this.Zl.listen(s),v.label=5;case 5:return n++,[3,1];case 6:c=function(t){return o.__generator(this,(function(e){switch(e.label){case 0:return u.i_.has(t)?[4,u.zu.Kh(t,!1).then((function(){p.Zl.mc(t),p.T_(t)})).catch(di)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},u=this,l=0,h=e,v.label=7;case 7:return l<h.length?(d=h[l],[5,c(d)]):[3,10];case 8:v.sent(),v.label=9;case 9:return l++,[3,7];case 10:return[2]}}))}))},n}($o),Ko=function(){this.x_=void 0,this.listeners=[]},Jo=function(){function t(t){this.Rc=t,this.M_=new R((function(t){return ln(t)}),un),this.onlineState="Unknown",this.O_=new Set,this.Rc.subscribe(this)}return t.prototype.listen=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n,r,i,a,s;return o.__generator(this,(function(o){switch(o.label){case 0:if(e=t.query,n=!1,(r=this.M_.get(e))||(n=!0,r=new Ko),!n)return[3,4];o.label=1;case 1:return o.trys.push([1,3,,4]),i=r,[4,this.Rc.listen(e)];case 2:return i.x_=o.sent(),[3,4];case 3:return a=o.sent(),s=ni(a,"Initialization of query '"+hn(t.query)+"' failed"),[2,void t.onError(s)];case 4:return this.M_.set(e,r),r.listeners.push(t),t.Ql(this.onlineState),r.x_&&t.L_(r.x_)&&this.B_(),[2]}}))}))},t.prototype.mc=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n,r,i;return o.__generator(this,(function(o){return e=t.query,n=!1,(r=this.M_.get(e))&&(i=r.listeners.indexOf(t))>=0&&(r.listeners.splice(i,1),n=0===r.listeners.length),n?[2,(this.M_.delete(e),this.Rc.mc(e))]:[2]}))}))},t.prototype.Eu=function(t){for(var e=!1,n=0,r=t;n<r.length;n++){var i=r[n],o=i.query,a=this.M_.get(o);if(a){for(var s=0,c=a.listeners;s<c.length;s++)c[s].L_(i)&&(e=!0);a.x_=i}}e&&this.B_()},t.prototype.y_=function(t,e){var n=this.M_.get(t);if(n)for(var r=0,i=n.listeners;r<i.length;r++)i[r].onError(e);this.M_.delete(t)},t.prototype.m_=function(t){this.onlineState=t;var e=!1;this.M_.forEach((function(n,r){for(var i=0,o=r.listeners;i<o.length;i++)o[i].Ql(t)&&(e=!0)})),e&&this.B_()},t.prototype.q_=function(t){this.O_.add(t),t.next()},t.prototype.U_=function(t){this.O_.delete(t)},t.prototype.B_=function(){this.O_.forEach((function(t){t.next()}))},t}(),Xo=function(){function t(t,e,n){this.query=t,this.Q_=e,this.W_=!1,this.j_=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.L_=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new mt(t.query,t.docs,t.Ot,e,t.Lt,t.fromCache,t.Bt,!0)}var o=!1;return this.W_?this.K_(t)&&(this.Q_.next(t),o=!0):this.G_(t,this.onlineState)&&(this.z_(t),o=!0),this.j_=t,o},t.prototype.onError=function(t){this.Q_.error(t)},t.prototype.Ql=function(t){this.onlineState=t;var e=!1;return this.j_&&!this.W_&&this.G_(this.j_,t)&&(this.z_(this.j_),e=!0),e},t.prototype.G_=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.H_&&n||t.docs._()&&"Offline"!==e)},t.prototype.K_=function(t){if(t.docChanges.length>0)return!0;var e=this.j_&&this.j_.hasPendingWrites!==t.hasPendingWrites;return!(!t.Bt&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.z_=function(t){t=mt.Ut(t.query,t.docs,t.Lt,t.fromCache),this.W_=!0,this.Q_.next(t)},t}(),Yo=function(){function t(){}return t.prototype.Dh=function(t){this.Y_=t},t.prototype._s=function(t,e,n,r){var i=this;return e.En()||n.isEqual(j.min())?this.J_(t,e):this.Y_.us(t,r).next((function(o){var a=i.X_(e,o);return(e.In()||e.mn())&&i.Ll(e.nn,a,r,n)?i.J_(t,e):(p()<=s.LogLevel.DEBUG&&f("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),hn(e)),i.Y_._s(t,e,n).next((function(t){return a.forEach((function(e){t=t.nt(e.key,e)})),t})))}))},t.prototype.X_=function(t,e){var n=new it(pn(t));return e.forEach((function(e,r){r instanceof on&&dn(t,r)&&(n=n.add(r))})),n},t.prototype.Ll=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.o(r)>0)},t.prototype.J_=function(t,e){return p()<=s.LogLevel.DEBUG&&f("IndexFreeQueryEngine","Using full collection scan to execute query:",hn(e)),this.Y_._s(t,e,j.min())},t}(),Zo=function(){function t(t,e){this.ss=t,this.wi=e,this.ns=[],this.Z_=1,this.tf=new it(fi.ta)}return t.prototype.Hr=function(t){return In.resolve(0===this.ns.length)},t.prototype.Yr=function(t,e,n,r){var i=this.Z_;this.Z_++,this.ns.length>0&&this.ns[this.ns.length-1];var o=new An(i,e,n,r);this.ns.push(o);for(var a=0,s=r;a<s.length;a++){var c=s[a];this.tf=this.tf.add(new fi(c.key,i)),this.ss.Us(t,c.key.path.p())}return In.resolve(o)},t.prototype.Jr=function(t,e){return In.resolve(this.ef(e))},t.prototype.Zr=function(t,e){var n=e+1,r=this.nf(n),i=r<0?0:r;return In.resolve(this.ns.length>i?this.ns[i]:null)},t.prototype.to=function(){return In.resolve(0===this.ns.length?-1:this.Z_-1)},t.prototype.eo=function(t){return In.resolve(this.ns.slice())},t.prototype.os=function(t,e){var n=this,r=new fi(e,0),i=new fi(e,Number.POSITIVE_INFINITY),o=[];return this.tf.vt([r,i],(function(t){var e=n.ef(t.ua);o.push(e)})),In.resolve(o)},t.prototype.ls=function(t,e){var n=this,r=new it(x);return e.forEach((function(t){var e=new fi(t,0),i=new fi(t,Number.POSITIVE_INFINITY);n.tf.vt([e,i],(function(t){r=r.add(t.ua)}))})),In.resolve(this.sf(r))},t.prototype.Es=function(t,e){var n=e.path,r=n.length+1,i=n;F.W(i)||(i=i.child(""));var o=new fi(new F(i),0),a=new it(x);return this.tf.St((function(t){var e=t.key.path;return!!n.D(e)&&(e.length===r&&(a=a.add(t.ua)),!0)}),o),In.resolve(this.sf(a))},t.prototype.sf=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.ef(t);null!==r&&n.push(r)})),n},t.prototype.so=function(t,e){var n=this;m(0===this.if(e.batchId,"removed")),this.ns.shift();var r=this.tf;return In.forEach(e.mutations,(function(i){var o=new fi(i.key,e.batchId);return r=r.delete(o),n.wi.qr(t,i.key)})).next((function(){n.tf=r}))},t.prototype.io=function(t){},t.prototype.Mi=function(t,e){var n=new fi(e,0),r=this.tf.Dt(n);return In.resolve(e.isEqual(r&&r.key))},t.prototype.ro=function(t){return this.ns.length,In.resolve()},t.prototype.if=function(t,e){return this.nf(t)},t.prototype.nf=function(t){return 0===this.ns.length?0:t-this.ns[0].batchId},t.prototype.ef=function(t){var e=this.nf(t);return e<0||e>=this.ns.length?null:this.ns[e]},t}(),ta=function(){function t(t,e){this.ss=t,this.rf=e,this.docs=new et(F.P),this.size=0}return t.prototype.jn=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,a=this.rf(e);return this.docs=this.docs.nt(r,{Ys:e,size:a,readTime:n}),this.size+=a-o,this.ss.Us(t,r.path.p())},t.prototype.Gn=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.zn=function(t,e){var n=this.docs.get(e);return In.resolve(n?n.Ys:null)},t.prototype.getEntries=function(t,e){var n=this,r=ct();return e.forEach((function(t){var e=n.docs.get(t);r=r.nt(t,e?e.Ys:null)})),In.resolve(r)},t.prototype._s=function(t,e,n){for(var r=lt(),i=new F(e.path.child("")),o=this.docs.ut(i);o.wt();){var a=o.dt(),s=a.key,c=a.value,u=c.Ys,l=c.readTime;if(!e.path.D(s.path))break;l.o(n)<=0||u instanceof on&&dn(e,u)&&(r=r.nt(u.key,u))}return In.resolve(r)},t.prototype.hf=function(t,e){return In.forEach(this.docs,(function(t){return e(t)}))},t.prototype.oi=function(e){return new t.hi(this)},t.prototype.ui=function(t){return In.resolve(this.size)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ta.hi=function(t){function e(e){var n=this;return(n=t.call(this)||this).ci=e,n}return o.__extends(e,t),e.prototype.Jn=function(t){var e=this,n=[];return this.Un.forEach((function(r,i){i?n.push(e.ci.jn(t,i,e.readTime)):e.ci.Gn(r)})),In.Bn(n)},e.prototype.Hn=function(t,e){return this.ci.zn(t,e)},e.prototype.Yn=function(t,e){return this.ci.getEntries(t,e)},e}(Rn);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ea=function(){function t(t){this.persistence=t,this.af=new R((function(t){return z(t)}),$),this.lastRemoteSnapshotVersion=j.min(),this.highestTargetId=0,this.uf=0,this.cf=new pi,this.targetCount=0,this.lf=sr.fi()}return t.prototype.pe=function(t,e){return this.af.forEach((function(t,n){return e(n)})),In.resolve()},t.prototype.mi=function(t){return In.resolve(this.lastRemoteSnapshotVersion)},t.prototype.Ai=function(t){return In.resolve(this.uf)},t.prototype.Ti=function(t){return this.highestTargetId=this.lf.next(),In.resolve(this.highestTargetId)},t.prototype.Ri=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.uf&&(this.uf=e),In.resolve()},t.prototype.Vi=function(t){this.af.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.lf=new sr(e),this.highestTargetId=e),t.sequenceNumber>this.uf&&(this.uf=t.sequenceNumber)},t.prototype.Pi=function(t,e){return this.Vi(e),this.targetCount+=1,In.resolve()},t.prototype.yi=function(t,e){return this.Vi(e),In.resolve()},t.prototype.pi=function(t,e){return this.af.delete(e.target),this.cf.oa(e.targetId),this.targetCount-=1,In.resolve()},t.prototype.vi=function(t,e,n){var r=this,i=0,o=[];return this.af.forEach((function(a,s){s.sequenceNumber<=e&&null===n.get(s.targetId)&&(r.af.delete(a),o.push(r.bi(t,s.targetId)),i++)})),In.Bn(o).next((function(){return i}))},t.prototype.Si=function(t){return In.resolve(this.targetCount)},t.prototype.Di=function(t,e){var n=this.af.get(e)||null;return In.resolve(n)},t.prototype.Ci=function(t,e,n){return this.cf.sa(e,n),In.resolve()},t.prototype.Ni=function(t,e,n){this.cf.ra(e,n);var r=this.persistence.wi,i=[];return r&&e.forEach((function(e){i.push(r.qr(t,e))})),In.Bn(i)},t.prototype.bi=function(t,e){return this.cf.oa(e),In.resolve()},t.prototype.ki=function(t,e){var n=this.cf.aa(e);return In.resolve(n)},t.prototype.Mi=function(t,e){return In.resolve(this.cf.Mi(e))},t}(),na=function(){function e(t){var e=this;this._f={},this.Ui=new Bn(0),this.Qi=!1,this.Qi=!0,this.wi=t(this),this.Ji=new ea(this),this.ss=new Gn,this.es=new ta(this.ss,(function(t){return e.wi.ff(t)}))}return e.prototype.start=function(){return t.resolve()},e.prototype.gr=function(){return this.Qi=!1,t.resolve()},Object.defineProperty(e.prototype,"or",{get:function(){return this.Qi},enumerable:!1,configurable:!0}),e.prototype.hr=function(){},e.prototype.$r=function(){return this.ss},e.prototype.Dr=function(t){var e=this._f[t.ka()];return e||(e=new Zo(this.ss,this.wi),this._f[t.ka()]=e),e},e.prototype.Fr=function(){return this.Ji},e.prototype.Nr=function(){return this.es},e.prototype.runTransaction=function(t,e,n){var r=this;f("MemoryPersistence","Starting transaction:",t);var i=new ra(this.Ui.next());return this.wi.df(),n(i).next((function(t){return r.wi.wf(i).next((function(){return t}))})).On().then((function(t){return i.ts(),t}))},e.prototype.Tf=function(t,e){return In.qn(Object.values(this._f).map((function(n){return function(){return n.Mi(t,e)}})))},e}(),ra=function(t){function e(e){var n=this;return(n=t.call(this)||this).Li=e,n}return o.__extends(e,t),e}(Nn),ia=function(){function t(t){this.persistence=t,this.Ef=new pi,this.If=null}return t.mf=function(e){return new t(e)},Object.defineProperty(t.prototype,"Af",{get:function(){if(this.If)return this.If;throw y()},enumerable:!1,configurable:!0}),t.prototype.Fi=function(t,e,n){return this.Ef.Fi(n,e),this.Af.delete(n),In.resolve()},t.prototype.$i=function(t,e,n){return this.Ef.$i(n,e),this.Af.add(n),In.resolve()},t.prototype.qr=function(t,e){return this.Af.add(e),In.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.Ef.oa(e.targetId).forEach((function(t){return n.Af.add(t)}));var r=this.persistence.Fr();return r.ki(t,e.targetId).next((function(t){t.forEach((function(t){return n.Af.add(t)}))})).next((function(){return r.pi(t,e)}))},t.prototype.df=function(){this.If=new Set},t.prototype.wf=function(t){var e=this,n=this.persistence.Nr().oi();return In.forEach(this.Af,(function(r){return e.Rf(t,r).next((function(t){t||n.Gn(r)}))})).next((function(){return e.If=null,n.apply(t)}))},t.prototype.jr=function(t,e){var n=this;return this.Rf(t,e).next((function(t){t?n.Af.delete(e):n.Af.add(e)}))},t.prototype.ff=function(t){return 0},t.prototype.Rf=function(t,e){var n=this;return In.qn([function(){return In.resolve(n.Ef.Mi(e))},function(){return n.persistence.Fr().Mi(t,e)},function(){return n.persistence.Tf(t,e)}])},t}(),oa=function(){function t(t){this.Pf=t.Pf,this.Vf=t.Vf}return t.prototype.wu=function(t){this.gf=t},t.prototype.cu=function(t){this.yf=t},t.prototype.onMessage=function(t){this.pf=t},t.prototype.close=function(){this.Vf()},t.prototype.send=function(t){this.Pf(t)},t.prototype.bf=function(){this.gf()},t.prototype.vf=function(t){this.yf(t)},t.prototype.Sf=function(t){this.pf(t)},t}(),aa={BatchGetDocuments:"batchGet",Commit:"commit"},sa="gl-js/ fire/"+h,ca=function(){function e(t){this.s=t.s;var e=t.ssl?"https":"http";this.Df=e+"://"+t.host,this.forceLongPolling=t.forceLongPolling}return e.prototype.Cf=function(t,e){if(e)for(var n in e.Oa)e.Oa.hasOwnProperty(n)&&(t[n]=e.Oa[n]);t["X-Goog-Api-Client"]=sa},e.prototype.vu=function(e,n,r){var i=this,o=this.Ff(e);return new t((function(t,a){var s=new u.XhrIo;s.listenOnce(u.EventType.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case u.ErrorCode.NO_ERROR:var n=s.getResponseJson();f("Connection","XHR received:",JSON.stringify(n)),t(n);break;case u.ErrorCode.TIMEOUT:f("Connection",'RPC "'+e+'" timed out'),a(new N(O.DEADLINE_EXCEEDED,"Request time out"));break;case u.ErrorCode.HTTP_ERROR:var r=s.getStatus();if(f("Connection",'RPC "'+e+'" failed with status:',r,"response text:",s.getResponseText()),r>0){var i=s.getResponseJson().error;if(i&&i.status&&i.message){var o=function(t){var e=t.toLowerCase().replace("_","-");return Object.values(O).indexOf(e)>=0?e:O.UNKNOWN}(i.status);a(new N(o,i.message))}else a(new N(O.UNKNOWN,"Server responded with status "+s.getStatus()))}else f("Connection",'RPC "'+e+'" failed'),a(new N(O.UNAVAILABLE,"Connection failed."));break;default:y()}}finally{f("Connection",'RPC "'+e+'" completed.')}}));var c=Object.assign({},n);delete c.database;var l=JSON.stringify(c);f("Connection","XHR sending: ",o+" "+l);var h={"Content-Type":"text/plain"};i.Cf(h,r),s.send(o,"POST",l,h,15)}))},e.prototype.Su=function(t,e,n){return this.vu(t,e,n)},e.prototype.Tu=function(t,e){var n=[this.Df,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=u.createWebChannelTransport(),i={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.s.projectId+"/databases/"+this.s.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.Cf(i.initMessageHeaders,e),c.isMobileCordova()||c.isReactNative()||c.isElectron()||c.isIE()||c.isUWP()||c.isBrowserExtension()||(i.httpHeadersOverwriteParam="$httpHeaders");var a=n.join("");f("Connection","Creating WebChannel: "+a+" "+i);var l=r.createWebChannel(a,i),p=!1,v=!1,y=new oa({Pf:function(t){v?f("Connection","Not sending because WebChannel is closed:",t):(p||(f("Connection","Opening WebChannel transport."),l.open(),p=!0),f("Connection","WebChannel sending:",t),l.send(t))},Vf:function(){return l.close()}}),b=function(t,e){l.listen(t,(function(t){try{e(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return b(u.WebChannel.EventType.OPEN,(function(){v||f("Connection","WebChannel transport opened.")})),b(u.WebChannel.EventType.CLOSE,(function(){v||(v=!0,f("Connection","WebChannel transport closed"),y.vf())})),b(u.WebChannel.EventType.ERROR,(function(t){v||(v=!0,function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(d.logLevel<=s.LogLevel.WARN){var r=e.map(g);d.warn.apply(d,o.__spreadArrays(["Firestore ("+h+"): "+t],r))}}("Connection","WebChannel transport errored:",t),y.vf(new N(O.UNAVAILABLE,"The operation could not be completed")))})),b(u.WebChannel.EventType.MESSAGE,(function(t){var e;if(!v){var n=t.data[0];m(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){f("Connection","WebChannel received error:",i);var o=i.status,a=function(t){var e=K[t];if(void 0!==e)return tt(e)}(o),s=i.message;void 0===a&&(a=O.INTERNAL,s="Unknown error status: "+o+" with message "+i.message),v=!0,y.vf(new N(a,s)),l.close()}else f("Connection","WebChannel received:",n),y.Sf(n)}})),setTimeout((function(){y.bf()}),0),y},e.prototype.Ff=function(t){var e=aa[t];return this.Df+"/v1/projects/"+this.s.projectId+"/databases/"+this.s.database+"/documents:"+e},e}(),ua=function(){function t(){var t=this;this.Nf=function(){return t.$f()},this.kf=function(){return t.xf()},this.Mf=[],this.Of()}return t.prototype.tc=function(t){this.Mf.push(t)},t.prototype.gr=function(){window.removeEventListener("online",this.Nf),window.removeEventListener("offline",this.kf)},t.prototype.Of=function(){window.addEventListener("online",this.Nf),window.addEventListener("offline",this.kf)},t.prototype.$f=function(){f("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.Mf;t<e.length;t++)(0,e[t])(0)},t.prototype.xf=function(){f("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.Mf;t<e.length;t++)(0,e[t])(1)},t.Hi=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),la=function(){function t(){}return t.prototype.tc=function(t){},t.prototype.gr=function(){},t}(),ha="You are using the memory-only build of Firestore. Persistence support is only available via the @firebase/firestore bundle or the firebase-firestore.js build.",da=function(){function t(){}return t.prototype.initialize=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e=this;return o.__generator(this,(function(n){switch(n.label){case 0:return this.t_=this.Lf(t),this.persistence=this.Bf(t),[4,this.persistence.start()];case 1:return n.sent(),this.qf=this.Uf(t),this.zu=this.Qf(t),this.Zl=this.Wf(t),this.Rc=this.jf(t),this.Kf=this.Gf(t),this.t_.Lu=function(t){return e.Rc.Ql(t,1)},this.Zl.Rc=this.Rc,[4,this.zu.start()];case 2:return n.sent(),[4,this.t_.start()];case 3:return n.sent(),[4,this.Zl.start()];case 4:return n.sent(),[4,this.Zl.Mc(this.Rc.__)];case 5:return n.sent(),[2]}}))}))},t.prototype.Gf=function(t){return new Jo(this.Rc)},t.prototype.Uf=function(t){return null},t.prototype.Qf=function(t){return li(this.persistence,new Yo,t.zf)},t.prototype.Bf=function(t){if(t.Yf.Hf)throw new N(O.FAILED_PRECONDITION,ha);return new na(ia.mf)},t.prototype.Wf=function(t){var e=this;return new Io(this.zu,t.Du,t.mo,(function(t){return e.Rc.Ql(t,0)}),ua.Hi()?new ua:new la)},t.prototype.Lf=function(t){return new Fo},t.prototype.jf=function(t){return Wo(this.zu,this.Zl,t.Du,this.t_,t.zf,t.e_)},t.prototype.clearPersistence=function(t,e){throw new N(O.FAILED_PRECONDITION,ha)},t}(),pa=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e.prototype.initialize=function(e){return o.__awaiter(this,void 0,void 0,(function(){var n=this;return o.__generator(this,(function(r){switch(r.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return r.sent(),[4,this.persistence.rr((function(t){return o.__awaiter(n,void 0,void 0,(function(){return o.__generator(this,(function(e){switch(e.label){case 0:return[4,this.Rc.Mc(t)];case 1:return e.sent(),this.qf&&(t&&!this.qf.or?this.qf.start(this.zu):t||this.qf.stop()),[2]}}))}))}))];case 2:return r.sent(),[2]}}))}))},e.prototype.Qf=function(t){return e=this.persistence,n=new Yo,r=t.zf,new hi(e,n,r);var e,n,r},e.prototype.jf=function(t){var e,n,r,i,o,a,s=(e=this.zu,n=this.Zl,r=t.Du,i=this.t_,o=t.zf,a=t.e_,new Qo(e,n,r,i,o,a));return this.t_ instanceof Po&&(this.t_.Rc=s),s},e.prototype.Lf=function(t){if(t.Yf.Hf&&t.Yf.synchronizeTabs){var e=Zr();if(!Po.Hi(e))throw new N(O.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=br(t.Jf.s,t.Jf.persistenceKey);return new Po(e,t.mo,n,t.clientId,t.zf)}return new Fo},e}(function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(n,e),n.prototype.Qf=function(t){return li(this.persistence,new Yo,t.zf)},n.prototype.jf=function(t){return Wo(this.zu,this.Zl,t.Du,this.t_,t.zf,t.e_)},n.prototype.Uf=function(t){var e=this.persistence.wi.xr;return new si(e,t.mo)},n.prototype.Bf=function(t){var e=br(t.Jf.s,t.Jf.persistenceKey),n=Ji(t.Jf.s);return new fr(t.Yf.synchronizeTabs,e,t.clientId,ai.oh(t.Yf.cacheSizeBytes),t.mo,Zr(),"undefined"!=typeof document?document:null,n,this.t_,t.Yf.qi)},n.prototype.Lf=function(t){return new Fo},n.prototype.clearPersistence=function(e,n){return function(e){return o.__awaiter(this,void 0,void 0,(function(){var n;return o.__generator(this,(function(r){switch(r.label){case 0:return Hr.Hi()?(n=e+"main",[4,Hr.delete(n)]):[2,t.resolve()];case 1:return r.sent(),[2]}}))}))}(br(e,n))},n}(da)),fa=function(){function e(t,e){this.credentials=t,this.mo=e,this.clientId=_.t()}return e.prototype.start=function(t,e,n){var r=this;this.bu(),this.Jf=t;var i=new Mn,o=new Mn,a=!1;return this.credentials.qa((function(t){if(!a)return a=!0,f("FirestoreClient","Initializing. user=",t.uid),r.Xf(e,n,t,o).then(i.resolve,i.reject);r.mo._r((function(){return r.Zl.xc(t)}))})),this.mo.cr((function(){return i.promise})),o.promise},e.prototype.enableNetwork=function(){var t=this;return this.bu(),this.mo.enqueue((function(){return t.Rc.enableNetwork()}))},e.prototype.Xf=function(e,n,r,i){return o.__awaiter(this,void 0,void 0,(function(){var a,s,c,u,l,h=this;return o.__generator(this,(function(d){switch(d.label){case 0:return d.trys.push([0,3,,4]),[4,(l=this.Jf,t.resolve(new ca(l)))];case 1:return a=d.sent(),s=Ji(this.Jf.s),c=function(t,e,n){return new ko(t,e,n)}(a,this.credentials,s),[4,e.initialize({mo:this.mo,Jf:this.Jf,Du:c,clientId:this.clientId,zf:r,e_:100,Yf:n})];case 2:return d.sent(),this.persistence=e.persistence,this.t_=e.t_,this.zu=e.zu,this.Zl=e.Zl,this.Rc=e.Rc,this.qf=e.qf,this.Zf=e.Kf,this.persistence.hr((function(){return o.__awaiter(h,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return[4,this.terminate()];case 1:return t.sent(),[2]}}))}))})),i.resolve(),[3,4];case 3:if(u=d.sent(),i.reject(u),!this.td(u))throw u;return[2,(console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+u),this.Xf(new da,{Hf:!1},r,i))];case 4:return[2]}}))}))},e.prototype.td=function(t){return"FirebaseError"===t.name?t.code===O.FAILED_PRECONDITION||t.code===O.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code},e.prototype.bu=function(){if(this.mo.xo)throw new N(O.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.disableNetwork=function(){var t=this;return this.bu(),this.mo.enqueue((function(){return t.Rc.disableNetwork()}))},e.prototype.terminate=function(){var t=this;return this.mo.qo((function(){return o.__awaiter(t,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return this.qf&&this.qf.stop(),[4,this.Zl.gr()];case 1:return t.sent(),[4,this.t_.gr()];case 2:return t.sent(),[4,this.persistence.gr()];case 3:return t.sent(),this.credentials.Ua(),[2]}}))}))}))},e.prototype.waitForPendingWrites=function(){var t=this;this.bu();var e=new Mn;return this.mo.cr((function(){return t.Rc.V_(e)})),e.promise},e.prototype.listen=function(t,e,n){var r=this;this.bu();var i=new Xo(t,e,n);return this.mo.cr((function(){return r.Zf.listen(i)})),i},e.prototype.mc=function(t){var e=this;this.ed||this.mo.cr((function(){return e.Zf.mc(t)}))},e.prototype.nd=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n=this;return o.__generator(this,(function(r){switch(r.label){case 0:return this.bu(),e=new Mn,[4,this.mo.enqueue((function(){return o.__awaiter(n,void 0,void 0,(function(){var n,r,i;return o.__generator(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this.zu.Wh(t)];case 1:return(n=o.sent())instanceof on?e.resolve(n):n instanceof an?e.resolve(null):e.reject(new N(O.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=ni(r,"Failed to get document '"+t+" from cache"),e.reject(i),[3,3];case 3:return[2]}}))}))}))];case 1:return[2,(r.sent(),e.promise)]}}))}))},e.prototype.sd=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n=this;return o.__generator(this,(function(r){switch(r.label){case 0:return this.bu(),e=new Mn,[4,this.mo.enqueue((function(){return o.__awaiter(n,void 0,void 0,(function(){var n,r,i,a,s,c;return o.__generator(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,this.zu.Gh(t,!0)];case 1:return n=o.sent(),r=new Go(t,n.zh),i=r.xl(n.documents),a=r.Jn(i,!1),e.resolve(a.snapshot),[3,3];case 2:return s=o.sent(),c=ni(s,"Failed to execute query '"+t+" against cache"),e.reject(c),[3,3];case 3:return[2]}}))}))}))];case 1:return[2,(r.sent(),e.promise)]}}))}))},e.prototype.write=function(t){var e=this;this.bu();var n=new Mn;return this.mo.cr((function(){return e.Rc.write(t,n)})),n.promise},e.prototype.s=function(){return this.Jf.s},e.prototype.q_=function(e){var n=this;this.bu(),this.mo.cr((function(){return n.Zf.q_(e),t.resolve()}))},e.prototype.U_=function(e){var n=this;this.ed||this.mo.cr((function(){return n.Zf.U_(e),t.resolve()}))},Object.defineProperty(e.prototype,"ed",{get:function(){return this.mo.xo},enumerable:!1,configurable:!0}),e.prototype.transaction=function(e){var n=this;this.bu();var r=new Mn;return this.mo.cr((function(){return n.Rc.runTransaction(n.mo,e,r),t.resolve()})),r.promise},e}(),va=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.rd(this.observer.next,t)},t.prototype.error=function(t){this.rd(this.observer.error,t)},t.prototype.od=function(){this.muted=!0},t.prototype.rd=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ga(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var ya=function(){function t(t,e,n,r){this.s=t,this.timestampsInSnapshots=e,this.hd=n,this.ad=r}return t.prototype.ud=function(t){switch(Ot(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Pt(t.integerValue||t.doubleValue);case 3:return this.ld(t.timestampValue);case 4:return this._d(t);case 5:return t.stringValue;case 6:return new Mi(Ft(t.bytesValue));case 7:return this.fd(t.referenceValue);case 8:return this.dd(t.geoPointValue);case 9:return this.wd(t.arrayValue);case 10:return this.Td(t.mapValue);default:throw y()}},t.prototype.Td=function(t){var e=this,n={};return T(t.fields||{},(function(t,r){n[t]=e.ud(r)})),n},t.prototype.dd=function(t){return new Ki(Pt(t.latitude),Pt(t.longitude))},t.prototype.wd=function(t){var e=this;return(t.values||[]).map((function(t){return e.ud(t)}))},t.prototype._d=function(t){switch(this.hd){case"previous":var e=function t(e){var n=e.mapValue.fields.__previous_value__;return Tt(n)?t(n):n}(t);return null==e?null:this.ud(e);case"estimate":return this.ld(It(t));default:return null}},t.prototype.ld=function(t){var e=Dt(t),n=new L(e.seconds,e.nanos);return this.timestampsInSnapshots?n:n.toDate()},t.prototype.fd=function(t){var e=M.$(t);m(xe(e));var n=new k(e.get(1),e.get(3)),r=new F(e.g(5));return n.isEqual(this.s)||v("Document "+r+" contains a document reference within a different database ("+n.projectId+"/"+n.database+") which is not supported. It will be treated as a reference in the current database ("+this.s.projectId+"/"+this.s.database+") instead."),this.ad(r)},t}(),ma=ai.uh,ba=function(){function t(t){var e,n,r,i;if(void 0===t.host){if(void 0!==t.ssl)throw new N(O.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else _i("settings","non-empty string","host",t.host),this.host=t.host,xi("settings","boolean","ssl",t.ssl),this.ssl=null===(e=t.ssl)||void 0===e||e;if(Ii("settings",t,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling","ignoreUndefinedProperties"]),xi("settings","object","credentials",t.credentials),this.credentials=t.credentials,xi("settings","boolean","timestampsInSnapshots",t.timestampsInSnapshots),xi("settings","boolean","ignoreUndefinedProperties",t.ignoreUndefinedProperties),!0===t.timestampsInSnapshots?v("The setting 'timestampsInSnapshots: true' is no longer required and should be removed."):!1===t.timestampsInSnapshots&&v("Support for 'timestampsInSnapshots: false' will be removed soon. You must update your code to handle Timestamp objects."),this.timestampsInSnapshots=null===(n=t.timestampsInSnapshots)||void 0===n||n,this.ignoreUndefinedProperties=null!==(r=t.ignoreUndefinedProperties)&&void 0!==r&&r,xi("settings","number","cacheSizeBytes",t.cacheSizeBytes),void 0===t.cacheSizeBytes)this.cacheSizeBytes=ai._h;else{if(t.cacheSizeBytes!==ma&&t.cacheSizeBytes<ai.lh)throw new N(O.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+ai.lh);this.cacheSizeBytes=t.cacheSizeBytes}xi("settings","boolean","experimentalForceLongPolling",t.experimentalForceLongPolling),this.forceLongPolling=null!==(i=t.experimentalForceLongPolling)&&void 0!==i&&i}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.forceLongPolling===t.forceLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),wa=function(){function t(e,n,r){var i=this;if(void 0===r&&(r=new da),this.Ed=null,this.Id=new ei,this.INTERNAL={delete:function(){return o.__awaiter(i,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return this.md(),[4,this.Ad.terminate()];case 1:return t.sent(),[2]}}))}))}},"object"==typeof e.options){var a=e;this.Ed=a,this.Va=t.Rd(a),this.Pd=a.name,this.Vd=new wo(n)}else{var s=e;if(!s.projectId)throw new N(O.INVALID_ARGUMENT,"Must provide projectId");this.Va=new k(s.projectId,s.database),this.Pd="[DEFAULT]",this.Vd=new bo}this.gd=r,this.yd=new ba({})}return Object.defineProperty(t.prototype,"pd",{get:function(){return this.bd||(this.bd=new ro(this.Va,this.yd.ignoreUndefinedProperties)),this.bd},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){gi("Firestore.settings",arguments,1),bi("Firestore.settings","object",1,t);var e=new ba(t);if(this.Ad&&!this.yd.isEqual(e))throw new N(O.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this.yd=e,void 0!==e.credentials&&(this.Vd=function(t){if(!t)return new bo;switch(t.type){case"gapi":var e=t.vd;return m(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new xo(e,t.za||"0");case"provider":return t.vd;default:throw new N(O.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},t.prototype.enableNetwork=function(){return this.md(),this.Ad.enableNetwork()},t.prototype.disableNetwork=function(){return this.md(),this.Ad.disableNetwork()},t.prototype.enablePersistence=function(t){var e,n;if(this.Ad)throw new N(O.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var r=!1,i=!1;if(t&&(void 0!==t.experimentalTabSynchronization&&v("The 'experimentalTabSynchronization' setting will be removed. Use 'synchronizeTabs' instead."),r=null!==(n=null!==(e=t.synchronizeTabs)&&void 0!==e?e:t.experimentalTabSynchronization)&&void 0!==n&&n,i=!!t.experimentalForceOwningTab&&t.experimentalForceOwningTab,r&&i))throw new N(O.INVALID_ARGUMENT,"The 'experimentalForceOwningTab' setting cannot be used with 'synchronizeTabs'.");return this.Sd(this.gd,{Hf:!0,cacheSizeBytes:this.yd.cacheSizeBytes,synchronizeTabs:r,qi:i})},t.prototype.clearPersistence=function(){return o.__awaiter(this,void 0,void 0,(function(){var t,e=this;return o.__generator(this,(function(n){if(void 0!==this.Ad&&!this.Ad.ed)throw new N(O.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");return t=new Mn,[2,(this.Id.Mo((function(){return o.__awaiter(e,void 0,void 0,(function(){var e;return o.__generator(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.gd.clearPersistence(this.Va,this.Pd)];case 1:return n.sent(),t.resolve(),[3,3];case 2:return e=n.sent(),t.reject(e),[3,3];case 3:return[2]}}))}))})),t.promise)]}))}))},t.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(t.prototype,"Dd",{get:function(){return this.md(),this.Ad.ed},enumerable:!1,configurable:!0}),t.prototype.waitForPendingWrites=function(){return this.md(),this.Ad.waitForPendingWrites()},t.prototype.onSnapshotsInSync=function(t){if(this.md(),ga(t))return _a(this.Ad,t);bi("Firestore.onSnapshotsInSync","function",1,t);var e={next:t};return _a(this.Ad,e)},t.prototype.md=function(){return this.Ad||this.Sd(new da,{Hf:!1}),this.Ad},t.prototype.Cd=function(){return new S(this.Va,this.Pd,this.yd.host,this.yd.ssl,this.yd.forceLongPolling)},t.prototype.Sd=function(t,e){var n=this.Cd();return this.Ad=new fa(this.Vd,this.Id),this.Ad.start(n,t,e)},t.Rd=function(t){if(e=t.options,!Object.prototype.hasOwnProperty.call(e,"projectId"))throw new N(O.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var e,n=t.options.projectId;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(!n||"string"!=typeof n)throw new N(O.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new k(n)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.Ed)throw new N(O.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Ed},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){return gi("Firestore.collection",arguments,1),bi("Firestore.collection","non-empty string",1,t),this.md(),new La(M.$(t),this,null)},t.prototype.doc=function(t){return gi("Firestore.doc",arguments,1),bi("Firestore.doc","non-empty string",1,t),this.md(),Ca.Fd(M.$(t),this,null)},t.prototype.collectionGroup=function(t){if(gi("Firestore.collectionGroup",arguments,1),bi("Firestore.collectionGroup","non-empty string",1,t),t.indexOf("/")>=0)throw new N(O.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.md(),new Ra(new cn(M.k(),t),this,null)},t.prototype.runTransaction=function(t){var e=this;return gi("Firestore.runTransaction",arguments,1),bi("Firestore.runTransaction","function",1,t),this.md().transaction((function(n){return t(new xa(e,n))}))},t.prototype.batch=function(){return this.md(),new Ea(this)},Object.defineProperty(t,"logLevel",{get:function(){switch(p()){case s.LogLevel.DEBUG:return"debug";case s.LogLevel.ERROR:return"error";case s.LogLevel.SILENT:return"silent";case s.LogLevel.WARN:return"warn";case s.LogLevel.INFO:return"info";case s.LogLevel.VERBOSE:return"verbose";default:return"error"}},enumerable:!1,configurable:!0}),t.setLogLevel=function(t){var e;gi("Firestore.setLogLevel",arguments,1),Ci("setLogLevel",["debug","error","silent","warn","info","verbose"],1,t),e=t,d.setLogLevel(e)},t.prototype.Nd=function(){return this.yd.timestampsInSnapshots},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _a(t,e){var n=new va({next:function(){e.next&&e.next()},error:function(t){throw y()}});return t.q_(n),function(){n.od(),t.U_(n)}}var xa=function(){function t(t,e){this.$d=t,this.kd=e}return t.prototype.get=function(t){var e=this;gi("Transaction.get",arguments,1);var n=Da("Transaction.get",t,this.$d);return this.kd.ku([n.ga]).then((function(t){if(!t||1!==t.length)return y();var r=t[0];if(r instanceof an)return new Aa(e.$d,n.ga,null,!1,!1,n.ya);if(r instanceof on)return new Aa(e.$d,n.ga,r,!1,!1,n.ya);throw y()}))},t.prototype.set=function(t,e,n){mi("Transaction.set",arguments,2,3);var r=Da("Transaction.set",t,this.$d);n=ja("Transaction.set",n);var i=Fa(r.ya,e,n),o=io(this.$d.pd,"Transaction.set",r.ga,i,null!==r.ya,n);return this.kd.set(r.ga,o),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return"string"==typeof e||e instanceof Pi?(yi("Transaction.update",arguments,3),r=Da("Transaction.update",t,this.$d),i=ao(this.$d.pd,"Transaction.update",r.ga,e,n,o)):(gi("Transaction.update",arguments,2),r=Da("Transaction.update",t,this.$d),i=oo(this.$d.pd,"Transaction.update",r.ga,e)),this.kd.update(r.ga,i),this},t.prototype.delete=function(t){gi("Transaction.delete",arguments,1);var e=Da("Transaction.delete",t,this.$d);return this.kd.delete(e.ga),this},t}(),Ea=function(){function e(t){this.$d=t,this.xd=[],this.Md=!1}return e.prototype.set=function(t,e,n){mi("WriteBatch.set",arguments,2,3),this.Od();var r=Da("WriteBatch.set",t,this.$d);n=ja("WriteBatch.set",n);var i=Fa(r.ya,e,n),o=io(this.$d.pd,"WriteBatch.set",r.ga,i,null!==r.ya,n);return this.xd=this.xd.concat(o.pa(r.ga,Pe.Qe())),this},e.prototype.update=function(t,e,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return this.Od(),"string"==typeof e||e instanceof Pi?(yi("WriteBatch.update",arguments,3),r=Da("WriteBatch.update",t,this.$d),i=ao(this.$d.pd,"WriteBatch.update",r.ga,e,n,o)):(gi("WriteBatch.update",arguments,2),r=Da("WriteBatch.update",t,this.$d),i=oo(this.$d.pd,"WriteBatch.update",r.ga,e)),this.xd=this.xd.concat(i.pa(r.ga,Pe.exists(!0))),this},e.prototype.delete=function(t){gi("WriteBatch.delete",arguments,1),this.Od();var e=Da("WriteBatch.delete",t,this.$d);return this.xd=this.xd.concat(new Ye(e.ga,Pe.Qe())),this},e.prototype.commit=function(){return this.Od(),this.Md=!0,this.xd.length>0?this.$d.md().write(this.xd):t.resolve()},e.prototype.Od=function(){if(this.Md)throw new N(O.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},e}(),Ca=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n.Va,e,r)||this).ga=e,i.firestore=n,i.ya=r,i.Ad=i.firestore.md(),i}return o.__extends(e,t),e.Fd=function(t,n,r){if(t.length%2!=0)throw new N(O.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.N()+" has "+t.length);return new e(new F(t),n,r)},Object.defineProperty(e.prototype,"id",{get:function(){return this.ga.path.S()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new La(this.ga.path.p(),this.firestore,this.ya)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.ga.path.N()},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){if(gi("DocumentReference.collection",arguments,1),bi("DocumentReference.collection","non-empty string",1,t),!t)throw new N(O.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=M.$(t);return new La(this.ga.path.child(e),this.firestore,null)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw Ri("isEqual","DocumentReference",1,t);return this.firestore===t.firestore&&this.ga.isEqual(t.ga)&&this.ya===t.ya},e.prototype.set=function(t,e){mi("DocumentReference.set",arguments,1,2),e=ja("DocumentReference.set",e);var n=Fa(this.ya,t,e),r=io(this.firestore.pd,"DocumentReference.set",this.ga,n,null!==this.ya,e);return this.Ad.write(r.pa(this.ga,Pe.Qe()))},e.prototype.update=function(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return"string"==typeof t||t instanceof Pi?(yi("DocumentReference.update",arguments,2),n=ao(this.firestore.pd,"DocumentReference.update",this.ga,t,e,r)):(gi("DocumentReference.update",arguments,1),n=oo(this.firestore.pd,"DocumentReference.update",this.ga,t)),this.Ad.write(n.pa(this.ga,Pe.exists(!0)))},e.prototype.delete=function(){return gi("DocumentReference.delete",arguments,0),this.Ad.write([new Ye(this.ga,Pe.Qe())])},e.prototype.onSnapshot=function(){for(var t,e,n,r=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];mi("DocumentReference.onSnapshot",arguments,1,4);var a={includeMetadataChanges:!1},s=0;"object"!=typeof i[s]||ga(i[s])||(Ii("DocumentReference.onSnapshot",a=i[s],["includeMetadataChanges"]),xi("DocumentReference.onSnapshot","boolean","includeMetadataChanges",a.includeMetadataChanges),s++);var c={includeMetadataChanges:a.includeMetadataChanges};if(ga(i[s])){var u=i[s];i[s]=null===(t=u.next)||void 0===t?void 0:t.bind(u),i[s+1]=null===(e=u.error)||void 0===e?void 0:e.bind(u),i[s+2]=null===(n=u.complete)||void 0===n?void 0:n.bind(u)}else bi("DocumentReference.onSnapshot","function",s,i[s]),wi("DocumentReference.onSnapshot","function",s+1,i[s+1]),wi("DocumentReference.onSnapshot","function",s+2,i[s+2]);var l={next:function(t){i[s]&&i[s](r.Ld(t))},error:i[s+1],complete:i[s+2]};return Sa(this.Ad,this.ga,c,l)},e.prototype.get=function(t){var e=this;return mi("DocumentReference.get",arguments,0,1),Ma("DocumentReference.get",t),t&&"cache"===t.source?this.firestore.md().nd(this.ga).then((function(t){return new Aa(e.firestore,e.ga,t,!0,t instanceof on&&t.Ge,e.ya)})):function(t,e,n){var r=new Mn,i=Sa(t,e,{includeMetadataChanges:!0,H_:!0},{next:function(t){i();var o=t.docs.has(e);!o&&t.fromCache?r.reject(new N(O.UNAVAILABLE,"Failed to get document because the client is offline.")):o&&t.fromCache&&n&&"server"===n.source?r.reject(new N(O.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):r.resolve(t)},error:function(t){return r.reject(t)}});return r.promise}(this.Ad,this.ga,t).then((function(t){return e.Ld(t)}))},e.prototype.withConverter=function(t){return new e(this.ga,this.firestore,t)},e.prototype.Ld=function(t){var e=t.docs.get(this.ga);return new Aa(this.firestore,this.ga,e,t.fromCache,t.hasPendingWrites,this.ya)},e}(Yi);function Sa(t,e,n,r){var i=function(t){console.error("Uncaught Error in onSnapshot:",t)};r.error&&(i=r.error.bind(r));var o=new va({next:function(t){r.next&&r.next(t)},error:i}),a=t.listen(cn.hn(e.path),o,n);return function(){o.od(),t.mc(a)}}var ka=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Aa=function(){function t(t,e,n,r,i,o){this.$d=t,this.ga=e,this.Bd=n,this.qd=r,this.Ud=i,this.ya=o}return t.prototype.data=function(t){var e=this;if(mi("DocumentSnapshot.data",arguments,0,1),t=Ba("DocumentSnapshot.data",t),this.Bd){if(this.ya){var n=new Ta(this.$d,this.ga,this.Bd,this.qd,this.Ud,null);return this.ya.fromFirestore(n,t)}return new ya(this.$d.Va,this.$d.Nd(),t.serverTimestamps||"none",(function(t){return new Ca(t,e.$d,null)})).ud(this.Bd.tn())}},t.prototype.get=function(t,e){var n=this;if(mi("DocumentSnapshot.get",arguments,1,2),e=Ba("DocumentSnapshot.get",e),this.Bd){var r=this.Bd.data().field(po("DocumentSnapshot.get",t,this.ga));if(null!==r)return new ya(this.$d.Va,this.$d.Nd(),e.serverTimestamps||"none",(function(t){return new Ca(t,n.$d,n.ya)})).ud(r)}},Object.defineProperty(t.prototype,"id",{get:function(){return this.ga.path.S()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Ca(this.ga,this.$d,this.ya)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return null!==this.Bd},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return new ka(this.Ud,this.qd)},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){if(!(e instanceof t))throw Ri("isEqual","DocumentSnapshot",1,e);return this.$d===e.$d&&this.qd===e.qd&&this.ga.isEqual(e.ga)&&(null===this.Bd?null===e.Bd:this.Bd.isEqual(e.Bd))&&this.ya===e.ya},t}(),Ta=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o.__extends(e,t),e.prototype.data=function(e){return t.prototype.data.call(this,e)},e}(Aa);function Ia(t){if(t.mn()&&0===t.en.length)throw new N(O.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Ra=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n.Va,n.pd,e)||this).Qd=e,i.firestore=n,i.ya=r,i}return o.__extends(e,t),e.prototype.where=function(t,n,r){gi("Query.where",arguments,3),Ti("Query.where",3,r);var i=Ci("Query.where",["<","<=","==",">=",">","array-contains","in","array-contains-any"],2,n),o=po("Query.where",t),a=this.Wd(o,i,r);return new e(this.Qd.cn(a),this.firestore,this.ya)},e.prototype.orderBy=function(t,n){var r;if(mi("Query.orderBy",arguments,1,2),wi("Query.orderBy","non-empty string",2,n),void 0===n||"asc"===n)r="asc";else{if("desc"!==n)throw new N(O.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r="desc"}var i=po("Query.orderBy",t),o=this.zd(i,r);return new e(this.Qd.ln(o),this.firestore,this.ya)},e.prototype.limit=function(t){return gi("Query.limit",arguments,1),bi("Query.limit","number",1,t),Oi("Query.limit",1,t),new e(this.Qd._n(t),this.firestore,this.ya)},e.prototype.limitToLast=function(t){return gi("Query.limitToLast",arguments,1),bi("Query.limitToLast","number",1,t),Oi("Query.limitToLast",1,t),new e(this.Qd.fn(t),this.firestore,this.ya)},e.prototype.startAt=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];yi("Query.startAt",arguments,1);var i=this.Zd("Query.startAt",t,n,!0);return new e(this.Qd.dn(i),this.firestore,this.ya)},e.prototype.startAfter=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];yi("Query.startAfter",arguments,1);var i=this.Zd("Query.startAfter",t,n,!1);return new e(this.Qd.dn(i),this.firestore,this.ya)},e.prototype.endBefore=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];yi("Query.endBefore",arguments,1);var i=this.Zd("Query.endBefore",t,n,!0);return new e(this.Qd.wn(i),this.firestore,this.ya)},e.prototype.endAt=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];yi("Query.endAt",arguments,1);var i=this.Zd("Query.endAt",t,n,!1);return new e(this.Qd.wn(i),this.firestore,this.ya)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw Ri("isEqual","Query",1,t);return this.firestore===t.firestore&&un(this.Qd,t.Qd)&&this.ya===t.ya},e.prototype.withConverter=function(t){return new e(this.Qd,this.firestore,t)},e.prototype.Zd=function(t,e,n,r){if(Ti(t,1,e),e instanceof Aa)return gi(t,o.__spreadArrays([e],n),1),this.Yd(t,e.Bd,r);var i=[e].concat(n);return this.Jd(t,i,r)},e.prototype.onSnapshot=function(){for(var t,e,n,r=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];mi("Query.onSnapshot",arguments,1,4);var a={},s=0;if("object"!=typeof i[s]||ga(i[s])||(Ii("Query.onSnapshot",a=i[s],["includeMetadataChanges"]),xi("Query.onSnapshot","boolean","includeMetadataChanges",a.includeMetadataChanges),s++),ga(i[s])){var c=i[s];i[s]=null===(t=c.next)||void 0===t?void 0:t.bind(c),i[s+1]=null===(e=c.error)||void 0===e?void 0:e.bind(c),i[s+2]=null===(n=c.complete)||void 0===n?void 0:n.bind(c)}else bi("Query.onSnapshot","function",s,i[s]),wi("Query.onSnapshot","function",s+1,i[s+1]),wi("Query.onSnapshot","function",s+2,i[s+2]);var u={next:function(t){i[s]&&i[s](new Na(r.firestore,r.Qd,t,r.ya))},error:i[s+1],complete:i[s+2]};return Ia(this.Qd),Oa(this.firestore.md(),this.Qd,a,u)},e.prototype.get=function(t){var e=this;mi("Query.get",arguments,0,1),Ma("Query.get",t),Ia(this.Qd);var n=this.firestore.md();return(t&&"cache"===t.source?n.sd(this.Qd):function(t,e,n){var r=new Mn,i=Oa(t,e,{includeMetadataChanges:!0,H_:!0},{next:function(t){i(),t.fromCache&&n&&"server"===n.source?r.reject(new N(O.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):r.resolve(t)},error:function(t){return r.reject(t)}});return r.promise}(n,this.Qd,t)).then((function(t){return new Na(e.firestore,e.Qd,t,e.ya)}))},e}(function(){function t(t,e,n){this.Va=t,this.pd=e,this.Qd=n}return t.prototype.Wd=function(t,e,n){var r;if(t.O()){if("array-contains"===e||"array-contains-any"===e)throw new N(O.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+e+"' queries on FieldPath.documentId().");if("in"===e){this.jd(n,e);for(var i=[],o=0,a=n;o<a.length;o++){var s=a[o];i.push(this.Kd(s))}r={arrayValue:{values:i}}}else r=this.Kd(n)}else"in"!==e&&"array-contains-any"!==e||this.jd(n,e),r=so(this.pd,"Query.where",n,"in"===e);var c=fn.create(t,e,r);return this.Gd(c),c},t.prototype.zd=function(t,e){if(null!==this.Qd.startAt)throw new N(O.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this.Qd.endAt)throw new N(O.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var n=new Cn(t,e);return this.Hd(n),n},t.prototype.Yd=function(t,e,n){if(!e)throw new N(O.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+t+"().");for(var r=[],i=0,o=this.Qd.orderBy;i<o.length;i++){var a=o[i];if(a.field.O())r.push(Vt(this.Va,e.key));else{var s=e.field(a.field);if(Tt(s))throw new N(O.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===s){var c=a.field.N();throw new N(O.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+c+"' (used as the orderBy) does not exist.")}r.push(s)}}return new wn(r,n)},t.prototype.Jd=function(t,e,n){var r=this.Qd.en;if(e.length>r.length)throw new N(O.INVALID_ARGUMENT,"Too many arguments provided to "+t+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],o=0;o<e.length;o++){var a=e[o];if(r[o].field.O()){if("string"!=typeof a)throw new N(O.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+t+"(), but got a "+typeof a);if(!this.Qd.Vn()&&-1!==a.indexOf("/"))throw new N(O.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+t+"() must be a plain document ID, but '"+a+"' contains a slash.");var s=this.Qd.path.child(M.$(a));if(!F.W(s))throw new N(O.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+t+"() must result in a valid document path, but '"+s+"' is not because it contains an odd number of segments.");var c=new F(s);i.push(Vt(this.Va,c))}else{var u=so(this.pd,t,a);i.push(u)}}return new wn(i,n)},t.prototype.Kd=function(t){if("string"==typeof t){if(""===t)throw new N(O.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!this.Qd.Vn()&&-1!==t.indexOf("/"))throw new N(O.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+t+"' contains a '/' character.");var e=this.Qd.path.child(M.$(t));if(!F.W(e))throw new N(O.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+e+"' is not because it has an odd number of segments ("+e.length+").");return Vt(this.Va,new F(e))}if(t instanceof Yi)return Vt(this.Va,t.ga);throw new N(O.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Ai(t)+".")},t.prototype.jd=function(t,e){if(!Array.isArray(t)||0===t.length)throw new N(O.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new N(O.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.");if(t.indexOf(null)>=0)throw new N(O.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'null' in the value array.");if(t.filter((function(t){return Number.isNaN(t)})).length>0)throw new N(O.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'NaN' in the value array.")},t.prototype.Gd=function(t){if(t instanceof fn){var e=["array-contains","array-contains-any"],n=["in","array-contains-any"],r=e.indexOf(t.op)>=0,i=n.indexOf(t.op)>=0;if(t.An()){var o=this.Qd.an();if(null!==o&&!o.isEqual(t.field))throw new N(O.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+o.toString()+"' and '"+t.field.toString()+"'");var a=this.Qd.un();null!==a&&this.Xd(t.field,a)}else if(i||r){var s=null;if(i&&(s=this.Qd.Rn(n)),null===s&&r&&(s=this.Qd.Rn(e)),null!==s)throw s===t.op?new N(O.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+t.op.toString()+"' filter."):new N(O.INVALID_ARGUMENT,"Invalid query. You cannot use '"+t.op.toString()+"' filters with '"+s.toString()+"' filters.")}}},t.prototype.Hd=function(t){if(null===this.Qd.un()){var e=this.Qd.an();null!==e&&this.Xd(e,t.field)}},t.prototype.Xd=function(t,e){if(!e.isEqual(t))throw new N(O.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+e.toString()+"' instead.")},t}());function Oa(t,e,n,r){var i=function(t){console.error("Uncaught Error in onSnapshot:",t)};r.error&&(i=r.error.bind(r));var o=new va({next:function(t){r.next&&r.next(t)},error:i}),a=t.listen(e,o,n);return function(){o.od(),t.mc(a)}}var Na=function(){function t(t,e,n,r){this.$d=t,this.tw=e,this.ew=n,this.ya=r,this.nw=null,this.sw=null,this.metadata=new ka(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this.ew.docs._()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.ew.docs.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;mi("QuerySnapshot.forEach",arguments,1,2),bi("QuerySnapshot.forEach","function",1,t),this.ew.docs.forEach((function(r){t.call(e,n.iw(r,n.metadata.fromCache,n.ew.Lt.has(r.key)))}))},Object.defineProperty(t.prototype,"query",{get:function(){return new Ra(this.tw,this.$d,this.ya)},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){t&&(Ii("QuerySnapshot.docChanges",t,["includeMetadataChanges"]),xi("QuerySnapshot.docChanges","boolean","includeMetadataChanges",t.includeMetadataChanges));var e=!(!t||!t.includeMetadataChanges);if(e&&this.ew.qt)throw new N(O.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.nw&&this.sw===e||(this.nw=function(t,e,n){if(t.Ot._()){var r=0;return t.docChanges.map((function(e){var i=n(e.doc,t.fromCache,t.Lt.has(e.doc.key));return e.doc,{type:"added",doc:i,oldIndex:-1,newIndex:r++}}))}var i=t.Ot;return t.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var r=n(e.doc,t.fromCache,t.Lt.has(e.doc.key)),o=-1,a=-1;return 0!==e.type&&(o=i.indexOf(e.doc.key),i=i.delete(e.doc.key)),1!==e.type&&(a=(i=i.add(e.doc)).indexOf(e.doc.key)),{type:Pa(e.type),doc:r,oldIndex:o,newIndex:a}}))}(this.ew,e,this.iw.bind(this)),this.sw=e),this.nw},t.prototype.isEqual=function(e){if(!(e instanceof t))throw Ri("isEqual","QuerySnapshot",1,e);return this.$d===e.$d&&un(this.tw,e.tw)&&this.ew.isEqual(e.ew)&&this.ya===e.ya},t.prototype.iw=function(t,e,n){return new Ta(this.$d,t.key,t,e,n,this.ya)},t}(),La=function(t){function e(e,n,r){var i=this;if((i=t.call(this,cn.hn(e),n,r)||this).rw=e,e.length%2!=1)throw new N(O.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e.N()+" has "+e.length);return i}return o.__extends(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.Qd.path.S()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.Qd.path.p();return t._()?null:new Ca(new F(t),this.firestore,null)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.Qd.path.N()},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){mi("CollectionReference.doc",arguments,0,1),0===arguments.length&&(t=_.t()),bi("CollectionReference.doc","non-empty string",1,t);var e=M.$(t);return Ca.Fd(this.Qd.path.child(e),this.firestore,this.ya)},e.prototype.add=function(t){gi("CollectionReference.add",arguments,1),bi("CollectionReference.add","object",1,this.ya?this.ya.toFirestore(t):t);var e=this.doc();return e.set(t).then((function(){return e}))},e.prototype.withConverter=function(t){return new e(this.rw,this.firestore,t)},e}(Ra);function ja(t,e){if(void 0===e)return{merge:!1};if(Ii(t,e,["merge","mergeFields"]),xi(t,"boolean","merge",e.merge),function(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){if(!(r instanceof Array))throw new N(O.INVALID_ARGUMENT,"Function "+t+"() requires its "+e+" option to be an array, but it was: "+Ai(r));for(var o=0;o<r.length;++o)if(!i(r[o]))throw new N(O.INVALID_ARGUMENT,"Function "+t+"() requires all "+e+" elements to be a string or a FieldPath, but the value at index "+o+" was: "+Ai(r[o]))}(t,"mergeFields",0,r,(function(t){return"string"==typeof t||t instanceof Pi}))}(t,0,0,e.mergeFields),void 0!==e.mergeFields&&void 0!==e.merge)throw new N(O.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Ba(t,e){return void 0===e?{}:(Ii(t,e,["serverTimestamps"]),Ei(t,0,"serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function Ma(t,e){wi(t,"object",1,e),e&&(Ii(t,e,["source"]),Ei(t,0,"source",e.source,["default","server","cache"]))}function Da(t,e,n){if(e instanceof Yi){if(e.firestore!==n)throw new N(O.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw Ri(t,"DocumentReference",1,e)}function Pa(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return y()}}function Fa(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var Va={Firestore:wa,GeoPoint:Ki,Timestamp:L,Blob:Mi,Transaction:xa,WriteBatch:Ea,DocumentReference:Ca,DocumentSnapshot:Aa,Query:Ra,QueryDocumentSnapshot:Ta,QuerySnapshot:Na,CollectionReference:La,FieldPath:Pi,FieldValue:Wi,setLogLevel:wa.setLogLevel,CACHE_SIZE_UNLIMITED:ma};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qa(t){!function(t,e){t.INTERNAL.registerComponent(new l.Component("firestore",(function(t){return function(t,e){return new wa(t,e,new pa)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},Va)))}(t),t.registerVersion("@firebase/firestore","1.16.1")}qa(a),e.__PRIVATE_registerFirestore=qa}).call(this,n(7),n(15))},31:function(t,e,n){"use strict";n.r(e),function(t){n.d(e,"__extends",(function(){return i})),n.d(e,"__assign",(function(){return o})),n.d(e,"__rest",(function(){return a})),n.d(e,"__decorate",(function(){return s})),n.d(e,"__param",(function(){return c})),n.d(e,"__metadata",(function(){return u})),n.d(e,"__awaiter",(function(){return l})),n.d(e,"__generator",(function(){return h})),n.d(e,"__createBinding",(function(){return d})),n.d(e,"__exportStar",(function(){return p})),n.d(e,"__values",(function(){return f})),n.d(e,"__read",(function(){return v})),n.d(e,"__spread",(function(){return g})),n.d(e,"__spreadArrays",(function(){return y})),n.d(e,"__await",(function(){return m})),n.d(e,"__asyncGenerator",(function(){return b})),n.d(e,"__asyncDelegator",(function(){return w})),n.d(e,"__asyncValues",(function(){return _})),n.d(e,"__makeTemplateObject",(function(){return x})),n.d(e,"__importStar",(function(){return E})),n.d(e,"__importDefault",(function(){return C})),n.d(e,"__classPrivateFieldGet",(function(){return S})),n.d(e,"__classPrivateFieldSet",(function(){return k}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function a(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function s(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}function c(t,e){return function(n,r){e(n,r,t)}}function u(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function l(e,n,r,i){return new(r||(r=t))((function(t,o){function a(t){try{c(i.next(t))}catch(t){o(t)}}function s(t){try{c(i.throw(t))}catch(t){o(t)}}function c(e){var n;e.done?t(e.value):(n=e.value,n instanceof r?n:new r((function(t){t(n)}))).then(a,s)}c((i=i.apply(e,n||[])).next())}))}function h(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function d(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}function p(t,e){for(var n in t)"default"===n||e.hasOwnProperty(n)||(e[n]=t[n])}function f(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function v(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function g(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(v(arguments[e]));return t}function y(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function m(t){return this instanceof m?(this.v=t,this):new m(t)}function b(e,n,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,o=r.apply(e,n||[]),a=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(e){o[e]&&(i[e]=function(n){return new t((function(t,r){a.push([e,n,t,r])>1||c(e,n)}))})}function c(e,n){try{(r=o[e](n)).value instanceof m?t.resolve(r.value.v).then(u,l):h(a[0][2],r)}catch(t){h(a[0][3],t)}var r}function u(t){c("next",t)}function l(t){c("throw",t)}function h(t,e){t(e),a.shift(),a.length&&c(a[0][0],a[0][1])}}function w(t){var e,n;return e={},r("next"),r("throw",(function(t){throw t})),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){e[r]=t[r]?function(e){return(n=!n)?{value:m(t[r](e)),done:"return"===r}:i?i(e):e}:i}}function _(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,r=e[Symbol.asyncIterator];return r?r.call(e):(e=f(e),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(r){n[r]=e[r]&&function(n){return new t((function(i,o){(function(e,n,r,i){t.resolve(i).then((function(t){e({value:t,done:r})}),n)})(i,o,(n=e[r](n)).done,n.value)}))}}}function x(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function E(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function C(t){return t&&t.__esModule?t:{default:t}}function S(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function k(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}}.call(this,n(7))},32:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var r,i,o=n(33),a=n(22),s=n(25),c=n(26),u=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new a.ErrorFactory("app","Firebase",u),h=((i={})["@firebase/app"]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),d=new c.Logger("@firebase/app"),p=function(){function e(t,e,n){var r,i,c=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=a.deepCopy(t),this.container=new s.ComponentContainer(e.name),this._addComponent(new s.Component("app",(function(){return c}),"PUBLIC"));try{for(var u=o.__values(this.firebase_.INTERNAL.components.values()),l=u.next();!l.done;l=u.next()){var h=l.value;this._addComponent(h)}}catch(t){r={error:t}}finally{try{l&&!l.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}}return Object.defineProperty(e.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),e.prototype.delete=function(){var e=this;return new t((function(t){e.checkDestroyed_(),t()})).then((function(){return e.firebase_.INTERNAL.removeApp(e.name_),t.all(e.container.getProviders().map((function(t){return t.delete()})))})).then((function(){e.isDeleted_=!0}))},e.prototype._getService=function(t,e){return void 0===e&&(e="[DEFAULT]"),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},e.prototype._removeServiceInstance=function(t,e){void 0===e&&(e="[DEFAULT]"),this.container.getProvider(t).clearInstance(e)},e.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){d.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},e.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},e.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},e}();p.prototype.name&&p.prototype.options||p.prototype.delete||console.log("dc");var f=
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function t(){var e=
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={});if("object"!=typeof i||null===i){i={name:i}}var o=i;void 0===o.name&&(o.name="[DEFAULT]");var s=o.name;if("string"!=typeof s||!s)throw l.create("bad-app-name",{appName:String(s)});if(a.contains(e,s))throw l.create("duplicate-app",{appName:s});var c=new t(n,o,r);return e[s]=c,c},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=h[t])&&void 0!==r?r:t;n&&(i+="-"+n);var o=i.match(/\s|\//),a=e.match(/\s|\//);if(o||a){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return o&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&a&&c.push("and"),a&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void d.warn(c.join(" "))}u(new s.Component(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:c.setLogLevel,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument",{appName:name});c.setUserLogHandler(t,e)},apps:null,SDK_VERSION:"7.16.0",INTERNAL:{registerComponent:u,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function i(t){if(t=t||"[DEFAULT]",!a.contains(e,t))throw l.create("no-app",{appName:t});return e[t]}function u(s){var c,u,h=s.name;if(n.has(h))return d.debug("There were multiple attempts to register component "+h+"."),"PUBLIC"===s.type?r[h]:null;if(n.set(h,s),"PUBLIC"===s.type){var p=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[h])throw l.create("invalid-app-argument",{appName:h});return t[h]()};void 0!==s.serviceProps&&a.deepExtend(p,s.serviceProps),r[h]=p,t.prototype[h]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,h);return n.apply(this,s.multipleInstances?t:[])}}try{for(var f=o.__values(Object.keys(e)),v=f.next();!v.done;v=f.next()){var g=v.value;e[g]._addComponent(s)}}catch(t){c={error:t}}finally{try{v&&!v.done&&(u=f.return)&&u.call(f)}finally{if(c)throw c.error}}return"PUBLIC"===s.type?r[h]:null}return(r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r)}(p);return e.INTERNAL=o.__assign(o.__assign({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){a.deepExtend(e,t)},createSubscribe:a.createSubscribe,ErrorFactory:a.ErrorFactory,deepExtend:a.deepExtend}),e}(),v=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
if(a.isBrowser()&&void 0!==self.firebase){d.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var g=self.firebase.SDK_VERSION;g&&g.indexOf("LITE")>=0&&d.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var y=f.initializeApp;f.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return a.isNode()&&d.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),y.apply(void 0,t)};var m=f;!function(t,e){t.INTERNAL.registerComponent(new s.Component("platform-logger",(function(t){return new v(t)}),"PRIVATE")),t.registerVersion("@firebase/app","0.6.8",e),t.registerVersion("fire-js","")}(m),e.default=m,e.firebase=m}).call(this,n(7))},33:function(t,e,n){"use strict";n.r(e),function(t){n.d(e,"__extends",(function(){return i})),n.d(e,"__assign",(function(){return o})),n.d(e,"__rest",(function(){return a})),n.d(e,"__decorate",(function(){return s})),n.d(e,"__param",(function(){return c})),n.d(e,"__metadata",(function(){return u})),n.d(e,"__awaiter",(function(){return l})),n.d(e,"__generator",(function(){return h})),n.d(e,"__createBinding",(function(){return d})),n.d(e,"__exportStar",(function(){return p})),n.d(e,"__values",(function(){return f})),n.d(e,"__read",(function(){return v})),n.d(e,"__spread",(function(){return g})),n.d(e,"__spreadArrays",(function(){return y})),n.d(e,"__await",(function(){return m})),n.d(e,"__asyncGenerator",(function(){return b})),n.d(e,"__asyncDelegator",(function(){return w})),n.d(e,"__asyncValues",(function(){return _})),n.d(e,"__makeTemplateObject",(function(){return x})),n.d(e,"__importStar",(function(){return E})),n.d(e,"__importDefault",(function(){return C})),n.d(e,"__classPrivateFieldGet",(function(){return S})),n.d(e,"__classPrivateFieldSet",(function(){return k}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function a(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function s(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}function c(t,e){return function(n,r){e(n,r,t)}}function u(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function l(e,n,r,i){return new(r||(r=t))((function(t,o){function a(t){try{c(i.next(t))}catch(t){o(t)}}function s(t){try{c(i.throw(t))}catch(t){o(t)}}function c(e){var n;e.done?t(e.value):(n=e.value,n instanceof r?n:new r((function(t){t(n)}))).then(a,s)}c((i=i.apply(e,n||[])).next())}))}function h(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function d(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}function p(t,e){for(var n in t)"default"===n||e.hasOwnProperty(n)||(e[n]=t[n])}function f(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function v(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function g(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(v(arguments[e]));return t}function y(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function m(t){return this instanceof m?(this.v=t,this):new m(t)}function b(e,n,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,o=r.apply(e,n||[]),a=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(e){o[e]&&(i[e]=function(n){return new t((function(t,r){a.push([e,n,t,r])>1||c(e,n)}))})}function c(e,n){try{(r=o[e](n)).value instanceof m?t.resolve(r.value.v).then(u,l):h(a[0][2],r)}catch(t){h(a[0][3],t)}var r}function u(t){c("next",t)}function l(t){c("throw",t)}function h(t,e){t(e),a.shift(),a.length&&c(a[0][0],a[0][1])}}function w(t){var e,n;return e={},r("next"),r("throw",(function(t){throw t})),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){e[r]=t[r]?function(e){return(n=!n)?{value:m(t[r](e)),done:"return"===r}:i?i(e):e}:i}}function _(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,r=e[Symbol.asyncIterator];return r?r.call(e):(e=f(e),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(r){n[r]=e[r]&&function(n){return new t((function(i,o){(function(e,n,r,i){t.resolve(i).then((function(t){e({value:t,done:r})}),n)})(i,o,(n=e[r](n)).done,n.value)}))}}}function x(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function E(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function C(t){return t&&t.__esModule?t:{default:t}}function S(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function k(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}}.call(this,n(7))},34:function(t,e,n){"use strict";n.r(e),function(t){n.d(e,"__extends",(function(){return i})),n.d(e,"__assign",(function(){return o})),n.d(e,"__rest",(function(){return a})),n.d(e,"__decorate",(function(){return s})),n.d(e,"__param",(function(){return c})),n.d(e,"__metadata",(function(){return u})),n.d(e,"__awaiter",(function(){return l})),n.d(e,"__generator",(function(){return h})),n.d(e,"__createBinding",(function(){return d})),n.d(e,"__exportStar",(function(){return p})),n.d(e,"__values",(function(){return f})),n.d(e,"__read",(function(){return v})),n.d(e,"__spread",(function(){return g})),n.d(e,"__spreadArrays",(function(){return y})),n.d(e,"__await",(function(){return m})),n.d(e,"__asyncGenerator",(function(){return b})),n.d(e,"__asyncDelegator",(function(){return w})),n.d(e,"__asyncValues",(function(){return _})),n.d(e,"__makeTemplateObject",(function(){return x})),n.d(e,"__importStar",(function(){return E})),n.d(e,"__importDefault",(function(){return C})),n.d(e,"__classPrivateFieldGet",(function(){return S})),n.d(e,"__classPrivateFieldSet",(function(){return k}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function a(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function s(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}function c(t,e){return function(n,r){e(n,r,t)}}function u(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function l(e,n,r,i){return new(r||(r=t))((function(t,o){function a(t){try{c(i.next(t))}catch(t){o(t)}}function s(t){try{c(i.throw(t))}catch(t){o(t)}}function c(e){var n;e.done?t(e.value):(n=e.value,n instanceof r?n:new r((function(t){t(n)}))).then(a,s)}c((i=i.apply(e,n||[])).next())}))}function h(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function d(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}function p(t,e){for(var n in t)"default"===n||e.hasOwnProperty(n)||(e[n]=t[n])}function f(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function v(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function g(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(v(arguments[e]));return t}function y(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function m(t){return this instanceof m?(this.v=t,this):new m(t)}function b(e,n,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,o=r.apply(e,n||[]),a=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(e){o[e]&&(i[e]=function(n){return new t((function(t,r){a.push([e,n,t,r])>1||c(e,n)}))})}function c(e,n){try{(r=o[e](n)).value instanceof m?t.resolve(r.value.v).then(u,l):h(a[0][2],r)}catch(t){h(a[0][3],t)}var r}function u(t){c("next",t)}function l(t){c("throw",t)}function h(t,e){t(e),a.shift(),a.length&&c(a[0][0],a[0][1])}}function w(t){var e,n;return e={},r("next"),r("throw",(function(t){throw t})),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){e[r]=t[r]?function(e){return(n=!n)?{value:m(t[r](e)),done:"return"===r}:i?i(e):e}:i}}function _(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,r=e[Symbol.asyncIterator];return r?r.call(e):(e=f(e),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(r){n[r]=e[r]&&function(n){return new t((function(i,o){(function(e,n,r,i){t.resolve(i).then((function(t){e({value:t,done:r})}),n)})(i,o,(n=e[r](n)).done,n.value)}))}}}function x(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function E(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function C(t){return t&&t.__esModule?t:{default:t}}function S(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function k(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}}.call(this,n(7))},35:function(t,e,n){"use strict";n.r(e),function(t){n.d(e,"__extends",(function(){return i})),n.d(e,"__assign",(function(){return o})),n.d(e,"__rest",(function(){return a})),n.d(e,"__decorate",(function(){return s})),n.d(e,"__param",(function(){return c})),n.d(e,"__metadata",(function(){return u})),n.d(e,"__awaiter",(function(){return l})),n.d(e,"__generator",(function(){return h})),n.d(e,"__createBinding",(function(){return d})),n.d(e,"__exportStar",(function(){return p})),n.d(e,"__values",(function(){return f})),n.d(e,"__read",(function(){return v})),n.d(e,"__spread",(function(){return g})),n.d(e,"__spreadArrays",(function(){return y})),n.d(e,"__await",(function(){return m})),n.d(e,"__asyncGenerator",(function(){return b})),n.d(e,"__asyncDelegator",(function(){return w})),n.d(e,"__asyncValues",(function(){return _})),n.d(e,"__makeTemplateObject",(function(){return x})),n.d(e,"__importStar",(function(){return E})),n.d(e,"__importDefault",(function(){return C})),n.d(e,"__classPrivateFieldGet",(function(){return S})),n.d(e,"__classPrivateFieldSet",(function(){return k}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function a(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function s(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}function c(t,e){return function(n,r){e(n,r,t)}}function u(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function l(e,n,r,i){return new(r||(r=t))((function(t,o){function a(t){try{c(i.next(t))}catch(t){o(t)}}function s(t){try{c(i.throw(t))}catch(t){o(t)}}function c(e){var n;e.done?t(e.value):(n=e.value,n instanceof r?n:new r((function(t){t(n)}))).then(a,s)}c((i=i.apply(e,n||[])).next())}))}function h(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function d(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}function p(t,e){for(var n in t)"default"===n||e.hasOwnProperty(n)||(e[n]=t[n])}function f(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function v(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function g(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(v(arguments[e]));return t}function y(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function m(t){return this instanceof m?(this.v=t,this):new m(t)}function b(e,n,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,o=r.apply(e,n||[]),a=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(e){o[e]&&(i[e]=function(n){return new t((function(t,r){a.push([e,n,t,r])>1||c(e,n)}))})}function c(e,n){try{(r=o[e](n)).value instanceof m?t.resolve(r.value.v).then(u,l):h(a[0][2],r)}catch(t){h(a[0][3],t)}var r}function u(t){c("next",t)}function l(t){c("throw",t)}function h(t,e){t(e),a.shift(),a.length&&c(a[0][0],a[0][1])}}function w(t){var e,n;return e={},r("next"),r("throw",(function(t){throw t})),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){e[r]=t[r]?function(e){return(n=!n)?{value:m(t[r](e)),done:"return"===r}:i?i(e):e}:i}}function _(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,r=e[Symbol.asyncIterator];return r?r.call(e):(e=f(e),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(r){n[r]=e[r]&&function(n){return new t((function(i,o){(function(e,n,r,i){t.resolve(i).then((function(t){e({value:t,done:r})}),n)})(i,o,(n=e[r](n)).done,n.value)}))}}}function x(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function E(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function C(t){return t&&t.__esModule?t:{default:t}}function S(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function k(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}}.call(this,n(7))},36:function(t,e,n){"use strict";n.r(e),function(t){
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
function r(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}n.d(e,"ErrorCode",(function(){return Xn})),n.d(e,"EventType",(function(){return Yn})),n.d(e,"WebChannel",(function(){return Zn})),n.d(e,"XhrIo",(function(){return tr})),n.d(e,"createWebChannelTransport",(function(){return Jn}));var i,o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},a=a||{},s=o||self;function c(){}function u(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function l(t){var e=u(t);return"array"==e||"object"==e&&"number"==typeof t.length}function h(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var d="closure_uid_"+(1e9*Math.random()>>>0),p=0;function f(t,e,n){return t.call.apply(t.bind,arguments)}function v(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function g(t,e,n){return(g=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?f:v).apply(null,arguments)}function y(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var m=Date.now||function(){return+new Date};function b(t,e){function n(){}n.prototype=e.prototype,t.M=e.prototype,t.prototype=new n,t.prototype.constructor=t}function w(){this.j=this.j,this.i=this.i}w.prototype.j=!1,w.prototype.da=function(){if(!this.j&&(this.j=!0,this.C(),0))(function(t){Object.prototype.hasOwnProperty.call(t,d)&&t[d]||(t[d]=++p)})(this)},w.prototype.C=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var _=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},x=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function E(t){return Array.prototype.concat.apply([],arguments)}function C(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function S(t){return/^[\s\xa0]*$/.test(t)}var k,A=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function T(t,e){return-1!=t.indexOf(e)}function I(t,e){return t<e?-1:t>e?1:0}t:{var R=s.navigator;if(R){var O=R.userAgent;if(O){k=O;break t}}k=""}function N(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function L(t){var e={};for(var n in t)e[n]=t[n];return e}var j="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function B(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<j.length;o++)n=j[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function M(t){return M[" "](t),t}M[" "]=c;var D,P,F=T(k,"Opera"),V=T(k,"Trident")||T(k,"MSIE"),q=T(k,"Edge"),G=q||V,U=T(k,"Gecko")&&!(T(k.toLowerCase(),"webkit")&&!T(k,"Edge"))&&!(T(k,"Trident")||T(k,"MSIE"))&&!T(k,"Edge"),H=T(k.toLowerCase(),"webkit")&&!T(k,"Edge");function z(){var t=s.document;return t?t.documentMode:void 0}t:{var $="",W=(P=k,U?/rv:([^\);]+)(\)|;)/.exec(P):q?/Edge\/([\d\.]+)/.exec(P):V?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(P):H?/WebKit\/(\S+)/.exec(P):F?/(?:Version)[ \/]?(\S+)/.exec(P):void 0);if(W&&($=W?W[1]:""),V){var Q=z();if(null!=Q&&Q>parseFloat($)){D=String(Q);break t}}D=$}var K,J={};function X(t){return function(t,e){var n=J;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=A(String(D)).split("."),r=A(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=I(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||I(0==a[2].length,0==s[2].length)||I(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}))}if(s.document&&V){var Y=z();K=Y||(parseInt(D,10)||void 0)}else K=void 0;var Z=K,tt=!V||9<=Number(Z),et=V&&!X("9"),nt=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{s.addEventListener("test",c,e),s.removeEventListener("test",c,e)}catch(t){}return t}();function rt(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function it(t,e){if(rt.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(U){t:{try{M(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:ot[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}rt.prototype.b=function(){this.defaultPrevented=!0},b(it,rt);var ot={2:"touch",3:"pen",4:"mouse"};it.prototype.b=function(){it.M.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,et)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}};var at="closure_listenable_"+(1e6*Math.random()|0),st=0;function ct(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.aa=i,this.key=++st,this.V=this.X=!1}function ut(t){t.V=!0,t.listener=null,t.proxy=null,t.src=null,t.aa=null}function lt(t){this.src=t,this.a={},this.b=0}function ht(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=_(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(ut(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function dt(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.V&&o.listener==e&&o.capture==!!n&&o.aa==r)return i}return-1}lt.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=dt(t,e,r,i);return-1<a?(e=t[a],n||(e.X=!1)):((e=new ct(e,this.src,o,!!r,i)).X=n,t.push(e)),e};var pt="closure_lm_"+(1e6*Math.random()|0),ft={};function vt(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(Array.isArray(n)){for(var a=0;a<n.length;a++)t(e,n[a],r,i,o);return null}return r=Et(r),e&&e[at]?e.sa(n,r,h(i)?!!i.capture:!!i,o):gt(e,n,r,!0,i,o)}(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)vt(t,e[o],n,r,i);return null}return n=Et(n),t&&t[at]?t.ra(e,n,h(r)?!!r.capture:!!r,i):gt(t,e,n,!1,r,i)}function gt(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=h(i)?!!i.capture:!!i;if(a&&!tt)return null;var s=_t(t);if(s||(t[pt]=s=new lt(t)),(n=s.add(e,n,r,a,o)).proxy)return n;if(r=function(){var t=wt,e=tt?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)nt||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(mt(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function yt(t){if("number"!=typeof t&&t&&!t.V){var e=t.src;if(e&&e[at])ht(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(mt(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=_t(e))?(ht(n,t),0==n.b&&(n.src=null,e[pt]=null)):ut(t)}}}function mt(t){return t in ft?ft[t]:ft[t]="on"+t}function bt(t,e){var n=t.listener,r=t.aa||t.src;return t.X&&yt(t),n.call(r,e)}function wt(t,e){if(t.V)return!0;if(!tt){if(!e)t:{e=["window","event"];for(var n=s,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return bt(t,e=new it(e,this))}return bt(t,new it(e,this))}function _t(t){return(t=t[pt])instanceof lt?t:null}var xt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Et(t){return"function"==u(t)?t:(t[xt]||(t[xt]=function(e){return t.handleEvent(e)}),t[xt])}function Ct(){w.call(this),this.c=new lt(this),this.J=this,this.A=null}function St(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.V&&a.capture==n){var s=a.listener,c=a.aa||a.src;a.X&&ht(t.c,a),i=!1!==s.call(c,r)&&i}}return i&&!r.defaultPrevented}b(Ct,w),Ct.prototype[at]=!0,(i=Ct.prototype).addEventListener=function(t,e,n,r){vt(this,t,e,n,r)},i.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(Array.isArray(n))for(var a=0;a<n.length;a++)t(e,n[a],r,i,o);else i=h(i)?!!i.capture:!!i,r=Et(r),e&&e[at]?(e=e.c,(n=String(n).toString())in e.a&&(-1<(r=dt(a=e.a[n],r,i,o))&&(ut(a[r]),Array.prototype.splice.call(a,r,1),0==a.length&&(delete e.a[n],e.b--)))):e&&(e=_t(e))&&(n=e.a[n.toString()],e=-1,n&&(e=dt(n,r,i,o)),(r=-1<e?n[e]:null)&&yt(r))}(this,t,e,n,r)},i.dispatchEvent=function(t){var e,n=this.A;if(n)for(e=[];n;n=n.A)e.push(n);n=this.J;var r=t.type||t;if("string"==typeof t)t=new rt(t,n);else if(t instanceof rt)t.target=t.target||n;else{var i=t;B(t=new rt(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var a=t.a=e[o];i=St(a,r,!0,t)&&i}if(i=St(a=t.a=n,r,!0,t)&&i,i=St(a,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=St(a=t.a=e[o],r,!1,t)&&i;return i},i.C=function(){if(Ct.M.C.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)ut(n[r]);delete e.a[t],e.b--}}this.A=null},i.ra=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},i.sa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var kt=s.JSON.stringify;function At(){this.b=this.a=null}var Tt,It=new(function(){function t(t,e,n){this.f=n,this.c=t,this.g=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},t}())((function(){return new Ot}),(function(t){t.reset()}),100);function Rt(){var t=Bt,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Ot(){this.next=this.b=this.a=null}function Nt(t){s.setTimeout((function(){throw t}),0)}function Lt(t,e){Tt||function(){var t=s.Promise.resolve(void 0);Tt=function(){t.then(Mt)}}(),jt||(Tt(),jt=!0),Bt.add(t,e)}At.prototype.add=function(t,e){var n=It.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Ot.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Ot.prototype.reset=function(){this.next=this.b=this.a=null};var jt=!1,Bt=new At;function Mt(){for(var t;t=Rt();){try{t.a.call(t.b)}catch(t){Nt(t)}var e=It;e.g(t),e.b<e.f&&(e.b++,t.next=e.a,e.a=t)}jt=!1}function Dt(t,e){Ct.call(this),this.b=t||1,this.a=e||s,this.f=g(this.Ua,this),this.g=m()}function Pt(t){t.Z=!1,t.L&&(t.a.clearTimeout(t.L),t.L=null)}function Ft(t,e,n){if("function"==u(t))n&&(t=g(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=g(t.handleEvent,t)}return 2147483647<Number(e)?-1:s.setTimeout(t,e||0)}function Vt(t,e,n){w.call(this),this.f=null!=n?g(t,n):t,this.c=e,this.b=g(this.Pa,this),this.a=[]}function qt(t){t.T=Ft(t.b,t.c),t.f.apply(null,t.a)}function Gt(t){w.call(this),this.b=t,this.a={}}b(Dt,Ct),(i=Dt.prototype).Z=!1,i.L=null,i.Ua=function(){if(this.Z){var t=m()-this.g;0<t&&t<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-t):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.Z&&(Pt(this),this.start()))}},i.start=function(){this.Z=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=m())},i.C=function(){Dt.M.C.call(this),Pt(this),delete this.a},b(Vt,w),(i=Vt.prototype).ba=!1,i.T=null,i.Ia=function(t){this.a=arguments,this.T?this.ba=!0:qt(this)},i.C=function(){Vt.M.C.call(this),this.T&&(s.clearTimeout(this.T),this.T=null,this.ba=!1,this.a=[])},i.Pa=function(){this.T=null,this.ba&&(this.ba=!1,qt(this))},b(Gt,w);var Ut=[];function Ht(t,e,n,r){Array.isArray(n)||(n&&(Ut[0]=n.toString()),n=Ut);for(var i=0;i<n.length;i++){var o=vt(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function zt(t){N(t.a,(function(t,e){this.a.hasOwnProperty(e)&&yt(t)}),t),t.a={}}function $t(){}Gt.prototype.C=function(){Gt.M.C.call(this),zt(this)},Gt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Wt=null;function Qt(){return Wt=Wt||new Ct}function Kt(t){rt.call(this,"serverreachability",t)}function Jt(t){var e=Qt();e.dispatchEvent(new Kt(e,t))}function Xt(t){rt.call(this,"statevent",t)}function Yt(t){var e=Qt();e.dispatchEvent(new Xt(e,t))}function Zt(t){rt.call(this,"timingevent",t)}function te(t,e){if("function"!=u(t))throw Error("Fn must not be null and must be a function");return s.setTimeout((function(){t()}),e)}b(Kt,rt),b(Xt,rt),b(Zt,rt);var ee={NO_ERROR:0,Va:1,bb:2,ab:3,Ya:4,$a:5,cb:6,za:7,TIMEOUT:8,gb:9},ne={Xa:"complete",kb:"success",Aa:"error",za:"abort",ib:"ready",jb:"readystatechange",TIMEOUT:"timeout",eb:"incrementaldata",hb:"progress",Za:"downloadprogress",lb:"uploadprogress"};function re(){}function ie(t){var e;return(e=t.a)||(e=t.a={}),e}function oe(){}re.prototype.a=null;var ae,se={OPEN:"a",Wa:"b",Aa:"c",fb:"d"};function ce(){rt.call(this,"d")}function ue(){rt.call(this,"c")}function le(){}function he(t,e,n){this.g=t,this.W=e,this.U=n||1,this.G=new Gt(this),this.N=de,t=G?125:void 0,this.O=new Dt(t),this.m=null,this.b=!1,this.j=this.A=this.f=this.B=this.s=this.P=this.h=null,this.i=[],this.a=null,this.w=0,this.c=this.v=null,this.H=-1,this.l=!1,this.J=0,this.D=null,this.o=this.R=this.F=!1}b(ce,rt),b(ue,rt),b(le,re),ae=new le;var de=45e3,pe={},fe={};function ve(t,e,n){t.B=1,t.f=De(Oe(e)),t.j=n,t.F=!0,ge(t,null)}function ge(t,e){t.s=m(),be(t),t.A=Oe(t.f);var n=t.A,r=t.U;Array.isArray(r)||(r=[String(r)]),Je(n.b,"t",r),t.w=0,t.a=Gn(t.g,t.g.w?e:null),0<t.J&&(t.D=new Vt(g(t.ya,t,t.a),t.J)),Ht(t.G,t.a,"readystatechange",t.Sa),e=t.m?L(t.m):{},t.j?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.$(t.A,t.v,t.j,e)):(t.v="GET",t.a.$(t.A,t.v,null,e)),Jt(1)}function ye(t,e,n){for(var r=!0;!t.l&&t.w<n.length;){var i=me(t,n);if(i==fe){4==e&&(t.c=4,Yt(14),r=!1);break}if(i==pe){t.c=4,Yt(15),r=!1;break}Ce(t,i)}4==e&&0==n.length&&(t.c=1,Yt(16),r=!1),t.b=t.b&&r,r||(Ee(t),xe(t))}function me(t,e){var n=t.w,r=e.indexOf("\n",n);return-1==r?fe:(n=Number(e.substring(n,r)),isNaN(n)?pe:(r+=1)+n>e.length?fe:(e=e.substr(r,n),t.w=r+n,e))}function be(t){t.P=m()+t.N,we(t,t.N)}function we(t,e){if(null!=t.h)throw Error("WatchDog timer not null");t.h=te(g(t.Qa,t),e)}function _e(t){t.h&&(s.clearTimeout(t.h),t.h=null)}function xe(t){0==t.g.u||t.l||Dn(t.g,t)}function Ee(t){_e(t);var e=t.D;e&&"function"==typeof e.da&&e.da(),t.D=null,Pt(t.O),zt(t.G),t.a&&(e=t.a,t.a=null,e.abort(),e.da())}function Ce(t,e){try{var n=t.g;if(0!=n.u&&(n.a==t||rn(n.b,t)))if(n.A=t.H,!t.o&&rn(n.b,t)&&3==n.u){try{var r=n.ja.a.parse(e)}catch(t){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.i){if(n.a){if(!(n.a.s+3e3<t.s))break t;Mn(n),n.a.cancel(),n.a=null}Bn(n),Yt(18)}}else n.ia=i[1],0<n.ia-n.G&&37500>i[2]&&n.U&&0==n.m&&!n.l&&(n.l=te(g(n.Na,n),6e3));if(1>=nn(n.b)&&n.O){try{n.O()}catch(t){}n.O=void 0}}else Fn(n,11)}else if((t.o||n.a==t)&&Mn(n),!S(e))for(e=r=n.ja.a.parse(e),r=0;r<e.length;r++)if(i=e[r],n.G=i[0],i=i[1],2==n.u)if("c"==i[0]){n.B=i[1],n.R=i[2];var o=i[3];null!=o&&(n.oa=o);var a=i[5];null!=a&&"number"==typeof a&&0<a&&(n.D=1.5*a);var s=n,c=t.a;if(c){var u=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(u){var l=s.b;!l.a&&(T(u,"spdy")||T(u,"quic")||T(u,"h2"))&&(l.f=l.g,l.a=new Set,l.b&&(on(l,l.b),l.b=null))}if(s.s){var h=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;h&&(s.ha=h,Me(s.v,s.s,h))}}n.u=3,n.c&&n.c.na();var d=t;if((s=n).ea=qn(s,s.w?s.R:null,s.P),d.o){an(s.b,d);var p=d,f=s.D;f&&p.setTimeout(f),p.h&&(_e(p),be(p)),s.a=d}else jn(s);0<n.f.length&&Rn(n)}else"stop"!=i[0]&&"close"!=i[0]||Fn(n,7);else 3==n.u&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Fn(n,7):An(n):"noop"!=i[0]&&n.c&&n.c.ma(i),n.m=0);Jt(4)}catch(t){}}function Se(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(l(t)||"string"==typeof t)x(t,e,void 0);else{if(t.K&&"function"==typeof t.K)var n=t.K();else if(t.I&&"function"==typeof t.I)n=void 0;else if(l(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.I&&"function"==typeof t.I)return t.I();if("string"==typeof t)return t.split("");if(l(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function ke(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof ke)for(n=t.K(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Ae(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Te(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Te(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Te(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(i=he.prototype).setTimeout=function(t){this.N=t},i.Sa=function(t){t=t.target;var e=this.D;e&&3==En(t)?e.Ia():this.ya(t)},i.ya=function(t){try{if(t==this.a)t:{var e=En(this.a),n=this.a.qa(),r=this.a.S();if(!(3>e||3==e&&!G&&!this.a.Y())){this.l||4!=e||7==n||Jt(8==n||0>=r?3:2),_e(this);var i=this.a.S();this.H=i;var o=this.a.Y();if(this.b=200==i){if(this.R&&!this.o){e:{if(this.a){var a,s=this.a;if((a=s.a?s.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(a)){var c=a;break e}}c=null}if(!c){this.b=!1,this.c=3,Yt(12),Ee(this),xe(this);break t}this.o=!0,Ce(this,c)}this.F?(ye(this,e,o),G&&this.b&&3==e&&(Ht(this.G,this.O,"tick",this.Ra),this.O.start())):Ce(this,o),4==e&&Ee(this),this.b&&!this.l&&(4==e?Dn(this.g,this):(this.b=!1,be(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.c=3,Yt(12)):(this.c=0,Yt(13)),Ee(this),xe(this)}}}catch(t){}},i.Ra=function(){if(this.a){var t=En(this.a),e=this.a.Y();this.w<e.length&&(_e(this),ye(this,t,e),this.b&&4!=t&&be(this))}},i.cancel=function(){this.l=!0,Ee(this)},i.Qa=function(){this.h=null;var t=m();0<=t-this.P?(2!=this.B&&(Jt(3),Yt(17)),Ee(this),this.c=2,xe(this)):we(this,this.P-t)},(i=ke.prototype).I=function(){Ae(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},i.K=function(){return Ae(this),this.a.concat()},i.get=function(t,e){return Te(this.b,t)?this.b[t]:e},i.set=function(t,e){Te(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},i.forEach=function(t,e){for(var n=this.K(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Ie=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Re(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Re){this.a=void 0!==e?e:t.a,Ne(this,t.f),this.j=t.j,Le(this,t.c),je(this,t.h),this.g=t.g,e=t.b;var n=new $e;n.c=e.c,e.a&&(n.a=new ke(e.a),n.b=e.b),Be(this,n),this.i=t.i}else t&&(n=String(t).match(Ie))?(this.a=!!e,Ne(this,n[1]||"",!0),this.j=Pe(n[2]||""),Le(this,n[3]||"",!0),je(this,n[4]),this.g=Pe(n[5]||"",!0),Be(this,n[6]||"",!0),this.i=Pe(n[7]||"")):(this.a=!!e,this.b=new $e(null,this.a))}function Oe(t){return new Re(t)}function Ne(t,e,n){t.f=n?Pe(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Le(t,e,n){t.c=n?Pe(e,!0):e}function je(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Be(t,e,n){e instanceof $e?(t.b=e,function(t,e){e&&!t.f&&(We(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Qe(this,e),Je(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=Fe(e,He)),t.b=new $e(e,t.a))}function Me(t,e,n){t.b.set(e,n)}function De(t){return Me(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^m()).toString(36)),t}function Pe(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Fe(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Ve),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Ve(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Re.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Fe(e,qe,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(Fe(e,qe,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Fe(n,"/"==n.charAt(0)?Ue:Ge,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Fe(n,ze)),t.join("")};var qe=/[#\/\?@]/g,Ge=/[#\?:]/g,Ue=/[#\?]/g,He=/[#\?@]/g,ze=/#/g;function $e(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function We(t){t.a||(t.a=new ke,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Qe(t,e){We(t),e=Xe(t,e),Te(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Te((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Ae(t)))}function Ke(t,e){return We(t),e=Xe(t,e),Te(t.a.b,e)}function Je(t,e,n){Qe(t,e),0<n.length&&(t.c=null,t.a.set(Xe(t,e),C(n)),t.b+=n.length)}function Xe(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function Ye(t,e){this.b=t,this.a=e}function Ze(t){this.g=t||tn,s.PerformanceNavigationTiming?t=0<(t=s.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(s.ca&&s.ca.ua&&s.ca.ua()&&s.ca.ua().mb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}(i=$e.prototype).add=function(t,e){We(this),this.c=null,t=Xe(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},i.forEach=function(t,e){We(this),this.a.forEach((function(n,r){x(n,(function(n){t.call(e,n,r,this)}),this)}),this)},i.K=function(){We(this);for(var t=this.a.I(),e=this.a.K(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},i.I=function(t){We(this);var e=[];if("string"==typeof t)Ke(this,t)&&(e=E(e,this.a.get(Xe(this,t))));else{t=this.a.I();for(var n=0;n<t.length;n++)e=E(e,t[n])}return e},i.set=function(t,e){return We(this),this.c=null,Ke(this,t=Xe(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},i.get=function(t,e){return t&&0<(t=this.I(t)).length?String(t[0]):e},i.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.K(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.I(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var tn=10;function en(t){return!!t.b||!!t.a&&t.a.size>=t.f}function nn(t){return t.b?1:t.a?t.a.size:0}function rn(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function on(t,e){t.a?t.a.add(e):t.b=e}function an(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function sn(t){var e,n;if(null!=t.b)return t.c.concat(t.b.i);if(null!=t.a&&0!==t.a.size){var i=t.c;try{for(var o=r(t.a.values()),a=o.next();!a.done;a=o.next()){var s=a.value;i=i.concat(s.i)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return i}return C(t.c)}function cn(){}function un(){this.a=new cn}function ln(t,e,n){var r=n||"";try{Se(t,(function(t,n){var i=t;h(t)&&(i=kt(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function hn(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}Ze.prototype.cancel=function(){var t,e;if(this.c=sn(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=r(this.a.values()),i=n.next();!i.done;i=n.next()){i.value.cancel()}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},cn.prototype.stringify=function(t){return s.JSON.stringify(t,void 0)},cn.prototype.parse=function(t){return s.JSON.parse(t,void 0)};var dn=s.JSON.parse;function pn(t){Ct.call(this),this.headers=new ke,this.G=t||null,this.b=!1,this.s=this.a=null,this.D="",this.h=0,this.f="",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.H=fn,this.B=this.F=!1}b(pn,Ct);var fn="",vn=/^https?$/i,gn=["POST","PUT"];function yn(t){return"content-type"==t.toLowerCase()}function mn(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,bn(t),_n(t)}function bn(t){t.v||(t.v=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function wn(t){if(t.b&&void 0!==a&&(!t.s[1]||4!=En(t)||2!=t.S()))if(t.l&&4==En(t))Ft(t.va,0,t);else if(t.dispatchEvent("readystatechange"),4==En(t)){t.b=!1;try{var e,n=t.S();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.D).match(Ie)[1]||null;if(!o&&s.self&&s.self.location){var c=s.self.location.protocol;o=c.substr(0,c.length-1)}i=!vn.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{t.h=6;try{var u=2<En(t)?t.a.statusText:""}catch(t){u=""}t.f=u+" ["+t.S()+"]",bn(t)}}finally{_n(t)}}}function _n(t,e){if(t.a){xn(t);var n=t.a,r=t.s[0]?c:null;t.a=null,t.s=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){}}}function xn(t){t.a&&t.B&&(t.a.ontimeout=null),t.m&&(s.clearTimeout(t.m),t.m=null)}function En(t){return t.a?t.a.readyState:0}function Cn(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return N(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Me(t,e,n))}function Sn(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function kn(t){this.f=[],this.R=this.ea=this.v=this.P=this.a=this.ha=this.s=this.N=this.h=this.F=this.j=null,this.Fa=this.H=0,this.Ca=Sn("failFast",!1,t),this.U=this.l=this.i=this.g=this.c=null,this.W=!0,this.A=this.ia=this.G=-1,this.J=this.m=this.o=0,this.Ba=Sn("baseRetryDelayMs",5e3,t),this.Ga=Sn("retryDelaySeedMs",1e4,t),this.Da=Sn("forwardChannelMaxRetries",2,t),this.ga=Sn("forwardChannelRequestTimeoutMs",2e4,t),this.Ea=t&&t.nb||void 0,this.D=void 0,this.w=t&&t.supportsCrossDomainXhr||!1,this.B="",this.b=new Ze(t&&t.concurrentRequestLimit),this.ja=new un,this.fa=t&&t.fastHandshake||!1,t&&t.forceLongPolling&&(this.W=!1),this.O=void 0}function An(t){if(Tn(t),3==t.u){var e=t.H++,n=Oe(t.v);Me(n,"SID",t.B),Me(n,"RID",e),Me(n,"TYPE","terminate"),Nn(t,n),(e=new he(t,e,void 0)).B=2,e.f=De(Oe(n)),n=!1,s.navigator&&s.navigator.sendBeacon&&(n=s.navigator.sendBeacon(e.f.toString(),"")),!n&&s.Image&&((new Image).src=e.f,n=!0),n||(e.a=Gn(e.g,null),e.a.$(e.f)),e.s=m(),be(e)}Vn(t)}function Tn(t){t.a&&(t.a.cancel(),t.a=null),t.i&&(s.clearTimeout(t.i),t.i=null),Mn(t),t.b.cancel(),t.g&&("number"==typeof t.g&&s.clearTimeout(t.g),t.g=null)}function In(t,e){t.f.push(new Ye(t.Fa++,e)),3==t.u&&Rn(t)}function Rn(t){en(t.b)||t.g||(t.g=!0,Lt(t.xa,t),t.o=0)}function On(t,e){var n;n=e?e.W:t.H++;var r=Oe(t.v);Me(r,"SID",t.B),Me(r,"RID",n),Me(r,"AID",t.G),Nn(t,r),t.h&&t.j&&Cn(r,t.h,t.j),n=new he(t,n,t.o+1),null===t.h&&(n.m=t.j),e&&(t.f=e.i.concat(t.f)),e=Ln(t,n,1e3),n.setTimeout(Math.round(.5*t.ga)+Math.round(.5*t.ga*Math.random())),on(t.b,n),ve(n,r,e)}function Nn(t,e){t.c&&Se({},(function(t,n){Me(e,n,t)}))}function Ln(t,e,n){n=Math.min(t.f.length,n);var r=t.c?g(t.c.Ha,t.c,t):null;t:for(var i=t.f,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].b,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,c=0;c<n;c++){var u=i[c].b,l=i[c].a;if(0>(u-=o))o=Math.max(0,i[c].b-100),s=!1;else try{ln(l,a,"req"+u+"_")}catch(t){r&&r(l)}}if(s){r=a.join("&");break t}}return t=t.f.splice(0,n),e.i=t,r}function jn(t){t.a||t.i||(t.J=1,Lt(t.wa,t),t.m=0)}function Bn(t){return!(t.a||t.i||3<=t.m)&&(t.J++,t.i=te(g(t.wa,t),Pn(t,t.m)),t.m++,!0)}function Mn(t){null!=t.l&&(s.clearTimeout(t.l),t.l=null)}function Dn(t,e){var n=null;if(t.a==e){Mn(t),t.a=null;var r=2}else{if(!rn(t.b,e))return;n=e.i,an(t.b,e),r=1}if(t.A=e.H,0!=t.u)if(e.b)if(1==r){n=e.j?e.j.length:0,e=m()-e.s;var i=t.o;(r=Qt()).dispatchEvent(new Zt(r,n,e,i)),Rn(t)}else jn(t);else if(3==(i=e.c)||0==i&&0<t.A||!(1==r&&function(t,e){return!(nn(t.b)>=t.b.f-(t.g?1:0))&&(t.g?(t.f=e.i.concat(t.f),!0):!(1==t.u||2==t.u||t.o>=(t.Ca?0:t.Da))&&(t.g=te(g(t.xa,t,e),Pn(t,t.o)),t.o++,!0))}(t,e)||2==r&&Bn(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Fn(t,5);break;case 4:Fn(t,10);break;case 3:Fn(t,6);break;default:Fn(t,2)}}function Pn(t,e){var n=t.Ba+Math.floor(Math.random()*t.Ga);return t.c||(n*=2),n*e}function Fn(t,e){if(2==e){var n=null;t.c&&(n=null);var r=g(t.Ta,t);n||(n=new Re("//www.google.com/images/cleardot.gif"),s.location&&"http"==s.location.protocol||Ne(n,"https"),De(n)),function(t,e){var n=new $t;if(s.Image){var r=new Image;r.onload=y(hn,n,r,"TestLoadImage: loaded",!0,e),r.onerror=y(hn,n,r,"TestLoadImage: error",!1,e),r.onabort=y(hn,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=y(hn,n,r,"TestLoadImage: timeout",!1,e),s.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else Yt(2);t.u=0,t.c&&t.c.la(e),Vn(t),Tn(t)}function Vn(t){t.u=0,t.A=-1,t.c&&(0==sn(t.b).length&&0==t.f.length||(t.b.c.length=0,C(t.f),t.f.length=0),t.c.ka())}function qn(t,e,n){var r=function(t){return t instanceof Re?Oe(t):new Re(t,void 0)}(n);if(""!=r.c)e&&Le(r,e+"."+r.c),je(r,r.h);else{var i=s.location;r=function(t,e,n,r){var i=new Re(null,void 0);return t&&Ne(i,t),e&&Le(i,e),n&&je(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.N&&N(t.N,(function(t,e){Me(r,e,t)})),e=t.s,n=t.ha,e&&n&&Me(r,e,n),Me(r,"VER",t.oa),Nn(t,r),r}function Gn(t,e){if(e&&!t.w)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new pn(t.Ea)).F=t.w,e}function Un(){}function Hn(){if(V&&!(10<=Number(Z)))throw Error("Environmental error: no available transport.")}function zn(t,e){Ct.call(this),this.a=new kn(e),this.l=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.j=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.pa&&(t?t["X-WebChannel-Client-Profile"]=e.pa:t={"X-WebChannel-Client-Profile":e.pa}),this.a.F=t,(t=e&&e.httpHeadersOverwriteParam)&&!S(t)&&(this.a.h=t),this.h=e&&e.supportsCrossDomainXhr||!1,this.g=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!S(e)&&(this.a.s=e,null!==(t=this.b)&&e in t&&(e in(t=this.b)&&delete t[e])),this.f=new Qn(this)}function $n(t){ce.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Wn(){ue.call(this),this.status=1}function Qn(t){this.a=t}(i=pn.prototype).$=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+t);e=e?e.toUpperCase():"GET",this.D=t,this.f="",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.G?ie(this.G):ie(ae),this.a.onreadystatechange=g(this.va,this);try{this.w=!0,this.a.open(e,String(t),!0),this.w=!1}catch(t){return void mn(this,t)}t=n||"";var i=new ke(this.headers);r&&Se(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=yn,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.K()),n=s.FormData&&t instanceof s.FormData,!(0<=_(gn,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.H&&(this.a.responseType=this.H),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{xn(this),0<this.o&&((this.B=function(t){return V&&X(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=g(this.ta,this)):this.m=Ft(this.ta,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){mn(this,t)}},i.ta=function(){void 0!==a&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},i.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),_n(this))},i.C=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),_n(this,!0)),pn.M.C.call(this)},i.va=function(){this.j||(this.w||this.l||this.g?wn(this):this.Oa())},i.Oa=function(){wn(this)},i.S=function(){try{return 2<En(this)?this.a.status:-1}catch(t){return-1}},i.Y=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},i.Ja=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),dn(e)}},i.qa=function(){return this.h},i.Ma=function(){return"string"==typeof this.f?this.f:String(this.f)},(i=kn.prototype).oa=8,i.u=1,i.xa=function(t){if(this.g)if(this.g=null,1==this.u){if(!t){this.H=Math.floor(1e5*Math.random());var e,n=new he(this,t=this.H++,void 0),r=this.j;if(this.F&&(r?B(r=L(r),this.F):r=this.F),null===this.h&&(n.m=r),this.fa)t:{for(var i=e=0;i<this.f.length;i++){var o=this.f[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.f.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Ln(this,n,e),Me(i=Oe(this.v),"RID",t),Me(i,"CVER",22),this.s&&Me(i,"X-HTTP-Session-Id",this.s),Nn(this,i),this.h&&r&&Cn(i,this.h,r),on(this.b,n),this.fa?(Me(i,"$req",e),Me(i,"SID","null"),n.R=!0,ve(n,i,null)):ve(n,i,e),this.u=2}}else 3==this.u&&(t?On(this,t):0==this.f.length||en(this.b)||On(this))},i.wa=function(){this.i=null,this.a=new he(this,"rpc",this.J),null===this.h&&(this.a.m=this.j),this.a.J=0;var t=Oe(this.ea);Me(t,"RID","rpc"),Me(t,"SID",this.B),Me(t,"CI",this.U?"0":"1"),Me(t,"AID",this.G),Nn(this,t),Me(t,"TYPE","xmlhttp"),this.h&&this.j&&Cn(t,this.h,this.j),this.D&&this.a.setTimeout(this.D);var e=this.a,n=this.R;e.B=1,e.f=De(Oe(t)),e.j=null,e.F=!0,ge(e,n)},i.Na=function(){null!=this.l&&(this.l=null,this.a.cancel(),this.a=null,Bn(this),Yt(19))},i.Ta=function(t){Yt(t?2:1)},(i=Un.prototype).na=function(){},i.ma=function(){},i.la=function(){},i.ka=function(){},i.Ha=function(){},Hn.prototype.a=function(t,e){return new zn(t,e)},b(zn,Ct),(i=zn.prototype).addEventListener=function(t,e,n,r){zn.M.addEventListener.call(this,t,e,n,r)},i.removeEventListener=function(t,e,n,r){zn.M.removeEventListener.call(this,t,e,n,r)},i.Ka=function(){this.a.c=this.f,this.h&&(this.a.w=!0);var t=this.a,e=this.l,n=this.b||void 0;Yt(0),t.P=e,t.N=n||{},t.U=t.W,t.v=qn(t,null,t.P),Rn(t)},i.close=function(){An(this.a)},i.La=function(t){if("string"==typeof t){var e={};e.__data__=t,In(this.a,e)}else this.g?((e={}).__data__=kt(t),In(this.a,e)):In(this.a,t)},i.C=function(){this.a.c=null,delete this.f,An(this.a),delete this.a,zn.M.C.call(this)},b($n,ce),b(Wn,ue),b(Qn,Un),Qn.prototype.na=function(){this.a.dispatchEvent("a")},Qn.prototype.ma=function(t){this.a.dispatchEvent(new $n(t))},Qn.prototype.la=function(t){this.a.dispatchEvent(new Wn(t))},Qn.prototype.ka=function(){this.a.dispatchEvent("b")},Hn.prototype.createWebChannel=Hn.prototype.a,zn.prototype.send=zn.prototype.La,zn.prototype.open=zn.prototype.Ka,zn.prototype.close=zn.prototype.close,ee.NO_ERROR=0,ee.TIMEOUT=8,ee.HTTP_ERROR=6,ne.COMPLETE="complete",oe.EventType=se,se.OPEN="a",se.CLOSE="b",se.ERROR="c",se.MESSAGE="d",Ct.prototype.listen=Ct.prototype.ra,pn.prototype.listenOnce=pn.prototype.sa,pn.prototype.getLastError=pn.prototype.Ma,pn.prototype.getLastErrorCode=pn.prototype.qa,pn.prototype.getStatus=pn.prototype.S,pn.prototype.getResponseJson=pn.prototype.Ja,pn.prototype.getResponseText=pn.prototype.Y,pn.prototype.send=pn.prototype.$;var Kn={createWebChannelTransport:function(){return new Hn},ErrorCode:ee,EventType:ne,WebChannel:oe,XhrIo:pn},Jn=Kn.createWebChannelTransport,Xn=Kn.ErrorCode,Yn=Kn.EventType,Zn=Kn.WebChannel,tr=Kn.XhrIo;e.default=Kn}.call(this,n(11))},37:function(t,e,n){"use strict";n.r(e);var r,i=n(0);Object.defineProperty(i.d,"Loader",{get:function(){return r||(r=n(38).WebpackLoader)},set:function(t){r=t}})},38:function(t,e,n){"use strict";n.r(e),function(t,r){n.d(e,"TextTemplateLoader",(function(){return h})),n.d(e,"ensureOriginOnExports",(function(){return d})),n.d(e,"WebpackLoader",(function(){return p}));var i,o=n(1),a=n(10),s=n(0),c=(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),u=function(e,n,r,i){return new(r||(r=t))((function(t,o){function a(t){try{c(i.next(t))}catch(t){o(t)}}function s(t){try{c(i.throw(t))}catch(t){o(t)}}function c(e){e.done?t(e.value):new r((function(t){t(e.value)})).then(a,s)}c((i=i.apply(e,n||[])).next())}))},l=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},h=function(){function t(){}return t.prototype.loadTemplate=function(t,e){return u(this,void 0,void 0,(function(){var n;return l(this,(function(r){switch(r.label){case 0:return[4,t.loadText(e.address)];case 1:return n=r.sent(),e.template=s.b.createTemplateFromMarkup(n),[2]}}))}))},t}();function d(t,e){var n,r,i=t;if(i.__useDefault&&(i=i.default),o.a.set(i,new o.a(e,"default")),"object"==typeof i)for(n in i)"function"==typeof(r=i[n])&&o.a.set(r,new o.a(e,n));return t}var p=function(e){function i(){var t=e.call(this)||this;return t.moduleRegistry=Object.create(null),t.loaderPlugins=Object.create(null),t.modulesBeingLoaded=new Map,t.useTemplateLoader(new h),t.addPlugin("template-registry-entry",{fetch:function(e){return u(t,void 0,void 0,(function(){var t;return l(this,(function(n){switch(n.label){case 0:return(t=this.getOrCreateTemplateRegistryEntry(e)).templateIsLoaded?[3,2]:[4,this.templateLoader.loadTemplate(this,t)];case 1:n.sent(),n.label=2;case 2:return[2,t]}}))}))}}),s.d.eachModule=function(t){var e=n.c;Object.getOwnPropertyNames(e).some((function(n){var r=e[n].exports;return"object"==typeof r&&t(n,r)}))},t}return c(i,e),i.prototype._import=function(e,i){return void 0===i&&(i=!0),u(this,void 0,void 0,(function(){var o,a,s,c,u,h,d=this;return l(this,(function(l){switch(l.label){case 0:if(o=e.split("!"),a=o.splice(o.length-1,1)[0],!(s=1===o.length?o[0]:null))return[3,2];if(!(c=this.loaderPlugins[s]))throw new Error("Plugin "+s+" is not registered in the loader.");return[4,c.fetch(a)];case 1:return[2,l.sent()];case 2:return n.m[a]?(i&&r.hot&&this.hmrContext&&r.hot.accept(a,(function(){return d.hmrContext.handleModuleChange(a,r.hot)})),[2,n(a)]):(u="async!"+a,n.m[u]?(i&&r.hot&&this.hmrContext&&(r.hot.accept(a,(function(){return d.hmrContext.handleModuleChange(a,r.hot)})),r.hot.accept(u,(function(){return d.hmrContext.handleModuleChange(a,r.hot)}))),h=n(u),[4,new t(h)]):[3,4]);case 3:return[2,l.sent()];case 4:throw new Error("Unable to find module with ID: "+a)}}))}))},i.prototype.map=function(t,e){},i.prototype.normalizeSync=function(t,e){return t},i.prototype.normalize=function(e,n){return t.resolve(e)},i.prototype.useTemplateLoader=function(t){this.templateLoader=t},i.prototype.loadAllModules=function(e){var n=this;return t.all(e.map((function(t){return n.loadModule(t)})))},i.prototype.loadModule=function(t,e){return void 0===e&&(e=!0),u(this,void 0,void 0,(function(){var n,r,i;return l(this,(function(o){switch(o.label){case 0:return(n=this.moduleRegistry[t])?[2,n]:(r=this.modulesBeingLoaded.get(t))?[2,r]:(r=this._import(t,e),this.modulesBeingLoaded.set(t,r),[4,r]);case 1:return i=o.sent(),this.moduleRegistry[t]=d(i,t),this.modulesBeingLoaded.delete(t),[2,i]}}))}))},i.prototype.loadTemplate=function(t){return this.loadModule(this.applyPluginToUrl(t,"template-registry-entry"),!1)},i.prototype.loadText=function(t){return u(this,void 0,void 0,(function(){var e;return l(this,(function(n){switch(n.label){case 0:return[4,this.loadModule(t,!1)];case 1:return(e=n.sent())instanceof Array&&e[0]instanceof Array&&e.hasOwnProperty("toString")?[2,e.toString()]:[2,e]}}))}))},i.prototype.applyPluginToUrl=function(t,e){return e+"!"+t},i.prototype.addPlugin=function(t,e){this.loaderPlugins[t]=e},i}(a.a);s.d.Loader=p}.call(this,n(7),n(39)(t))},39:function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},4:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return o}));class r{constructor(t,e,n){this.id=t,this.parentFaeSide=e,this.intraSideIndex=n}isAcct(){return this instanceof o}isAnnotation(){return this instanceof i}compareTo(t){return this.parentFaeSide.id==t.parentFaeSide.id?this.intraSideIndex>t.intraSideIndex?1:-1:this.parentFaeSide.id>t.parentFaeSide.id?1:-1}}class i extends r{constructor(t,e,n,r){super(t,e,n),this.annoText=r}clone(){return new i(this.id,this.parentFaeSide,this.intraSideIndex,this.annoText)}}class o extends r{constructor(t,e,n,r,i){super(t,e,n),this.auxInfo="",this.bchgList=[],this.endingBalance=0,this.title=r,this.normalBalance=i}sortBchgList(){this.bchgList.sort((t,e)=>t.compareToInAcct(e))}refresh(){this.sortBchgList(),this.endingBalance=0;for(let t of this.bchgList)this.endingBalance+=t.amt,t.newBalance=this.endingBalance}clone(){let t=new o(this.id,this.parentFaeSide,this.intraSideIndex,this.title,this.normalBalance);t.endingBalance=this.endingBalance;for(let e of this.bchgList){let n=e.clone(e.sourceTran,t);t.bchgList.push(n)}return t}}},40:function(t,e,n){"use strict";n.r(e),function(t,r){n.d(e,"bootstrap",(function(){return p})),n.d(e,"starting",(function(){return f}));n(41);var i=n(0),o=("function"==typeof Symbol&&Symbol.iterator,[]),a=void 0,s=new t((function(t){return a=t})),c=i.d.global,u=void 0!==r&&!r.browser;function l(){return i.d.Loader?t.resolve(new i.d.Loader):t.reject("No PLATFORM.Loader is defined and there is neither a System API (ES6) or a Require API (AMD) globally available to load your app.")}function h(e){var n=function(t,n){return e.normalize(t,n).then((function(n){return e.map(t,n),n}))};return function(e){if(i.f)return t.resolve();var n=void 0,o=u&&("renderer"===r.type||r.versions["node-webkit"]);if(u&&!o)n="nodejs";else if("undefined"!=typeof window)n="browser";else{if("undefined"==typeof self)throw new Error("Could not determine platform implementation to load.");n="worker"}return e.loadModule("aurelia-pal-"+n).then((function(t){return"nodejs"===n&&!i.f&&t.globalize()||t.initialize()}))}(e).then((function(){return e.normalize("aurelia-bootstrapper")})).then((function(e){var r=n("aurelia-framework",e);return t.all([r,r.then((function(t){return n("aurelia-dependency-injection",t)})),n("aurelia-router",e),n("aurelia-logging-console",e)])})).then((function(t){var n=t[0];return e.loadModule(n)})).then((function(t){return a((function(){return new t.Aurelia(e)}))}))}function d(t,e,n){return n.host=t,n.configModuleId=e||null,e?n.loader.loadModule(e).then((function(t){if(!t.configure)throw new Error("Cannot initialize module '"+e+"' without a configure function.");return t.configure(n)})):(n.use.standardConfiguration().developmentLogging(),n.start().then((function(){return n.setRoot()})))}function p(t){var e=s.then((function(e){return t(e())}));return o&&o.push(e),e}var f=(c.document&&"complete"!==c.document.readyState?new t((function(t){function e(){c.document.removeEventListener("DOMContentLoaded",e),c.removeEventListener("load",e),t()}c.document.addEventListener("DOMContentLoaded",e),c.addEventListener("load",e)})):t.resolve()).then(l).then(h).then((function(){for(var e=c.document.querySelectorAll("[aurelia-app],[data-aurelia-app]"),n=0,r=e.length;n<r;++n){var i=e[n],a=i.getAttribute("aurelia-app")||i.getAttribute("data-aurelia-app");p(d.bind(null,i,a))}var s=console.error.bind(console),u=o.map((function(t){return t.catch(s)}));return o=null,t.all(u)}))}.call(this,n(7),n(15))},41:function(t,e,n){"use strict";var r,i,o,a,s,c,u,l,h=n(0),d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};if("undefined"==typeof FEATURE_NO_ES2015&&(function(t,e){if(!(e in t)){var n,r=h.d.global,i=0,o=""+Math.random(),a="__symbol:",s=a.length,c="__symbol@@"+o,u="defineProperty",l="defineProperties",p="getOwnPropertyNames",f="getOwnPropertyDescriptor",v="propertyIsEnumerable",g=t[p],y=t[f],m=t.create,b=t.keys,w=t[u],_=t[l],x=y(t,p),E=t.prototype,C=E.hasOwnProperty,S=E[v],k=E.toString,A=(Array.prototype.indexOf,function(t,e,n){C.call(t,c)||w(t,c,{enumerable:!1,configurable:!1,writable:!1,value:{}}),t[c]["@@"+e]=n}),T=function(t,e){var n=m(t);return null!==e&&"object"===(void 0===e?"undefined":d(e))&&g(e).forEach((function(t){N.call(e,t)&&P(n,t,e[t])})),n},I=function(){},R=function(t){return t!=c&&!C.call(B,t)},O=function(t){return t!=c&&C.call(B,t)},N=function(t){var e=""+t;return O(e)?C.call(this,e)&&this[c]&&this[c]["@@"+e]:S.call(this,t)},L=function(e){return w(E,e,{enumerable:!1,configurable:!0,get:I,set:function(t){n(this,e,{enumerable:!1,configurable:!0,writable:!0,value:t}),A(this,e,!0)}}),B[e]=w(t(e),"constructor",M)},j=function(t){if(this&&this!==r)throw new TypeError("Symbol is not a constructor");return L(a.concat(t||"",o,++i))},B=m(null),M={value:j},D=function(t){return B[t]},P=function(t,e,r){var i=""+e;return O(i)?(n(t,i,r.enumerable?function(t){var e=m(t);return e.enumerable=!1,e}(r):r),A(t,i,!!r.enumerable)):w(t,e,r),t},F=function(e){return e="[object String]"===k.call(e)?e.split(""):t(e),g(e).filter(O).map(D)};x.value=P,w(t,u,x),x.value=F,w(t,e,x);var V="object"===("undefined"==typeof window?"undefined":d(window))?t.getOwnPropertyNames(window):[],q=t.getOwnPropertyNames;x.value=function(t){if("[object Window]"===k.call(t))try{return q(t)}catch(t){return[].concat([],V)}return g(t).filter(R)},w(t,p,x),x.value=function(t,e){var n=F(e);return n.length?b(e).concat(n).forEach((function(n){N.call(e,n)&&P(t,n,e[n])})):_(t,e),t},w(t,l,x),x.value=N,w(E,v,x),x.value=j,w(r,"Symbol",x),x.value=function(t){var e=a.concat(a,t,o);return e in E?B[e]:L(e)},w(j,"for",x),x.value=function(t){return C.call(B,t)?t.slice(2*s,-o.length):void 0},w(j,"keyFor",x),x.value=function(t,e){var n=y(t,e);return n&&O(e)&&(n.enumerable=N.call(t,e)),n},w(t,f,x),x.value=function(t,e){return 1===arguments.length?m(t):T(t,e)},w(t,"create",x),x.value=function(){var t=k.call(this);return"[object String]"===t&&O(this)?"[object Symbol]":t},w(E,"toString",x);try{n=m(w({},a,{get:function(){return w(this,a,{value:!1})[a]}}))[a]||w}catch(t){n=function(t,e,n){var r=y(E,e);delete E[e],w(t,e,n),w(E,e,r)}}}}(Object,"getOwnPropertySymbols"),r=Object,Symbol,o=r.defineProperty,a=r.prototype,s=a.toString,["iterator","match","replace","search","split","hasInstance","isConcatSpreadable","unscopables","species","toPrimitive",c="toStringTag"].forEach((function(t){if(!(t in Symbol))switch(o(Symbol,t,{value:Symbol(t)}),t){case c:(i=r.getOwnPropertyDescriptor(a,"toString")).value=function(){var t=s.call(this),e=null==this?void 0:this[Symbol.toStringTag];return void 0===e?t:"[object "+e+"]"},o(a,"toString",i)}})),function(t,e,n){function r(){return this}e[t]||(e[t]=function(){var e=0,n=this,i={next:function(){var t=n.length<=e;return t?{done:t}:{done:t,value:n[e++]}}};return i[t]=r,i}),n[t]||(n[t]=function(){var e=String.fromCodePoint,n=this,i=0,o=n.length,a={next:function(){var t=o<=i,r=t?"":e(n.codePointAt(i));return i+=r.length,t?{done:t}:{done:t,value:r}}};return a[t]=r,a})}(Symbol.iterator,Array.prototype,String.prototype)),"undefined"==typeof FEATURE_NO_ES2015&&(Number.isNaN=Number.isNaN||function(t){return t!=t},Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)}),String.prototype.endsWith&&!function(){try{return!"ab".endsWith("a",1)}catch(t){return!0}}()||(String.prototype.endsWith=function(t,e){var n=this.toString();("number"!=typeof e||!isFinite(e)||Math.floor(e)!==e||e>n.length)&&(e=n.length),e-=t.length;var r=n.indexOf(t,e);return-1!==r&&r===e}),String.prototype.startsWith&&!function(){try{return!"ab".startsWith("b",1)}catch(t){return!0}}()||(String.prototype.startsWith=function(t,e){return e=e||0,this.substr(e,t.length)===t}),"undefined"==typeof FEATURE_NO_ES2015&&(Array.from||(Array.from=(u=function(t){return t>0?Math.min(function(t){return isNaN(t=+t)?0:(t>0?Math.floor:Math.ceil)(t)}(t),9007199254740991):0},l=function(t,e,n,r){try{return e(n,r)}catch(e){throw"function"==typeof t.return&&t.return(),e}},function(t){var e,n,r,i,o=Object(t),a="function"==typeof this?this:Array,s=arguments.length,c=s>1?arguments[1]:void 0,h=void 0!==c,d=0,p=o[Symbol.iterator];if(h&&(c=c.bind(s>2?arguments[2]:void 0)),null==p||Array.isArray(t))for(n=new a(e=u(o.length));e>d;d++)n[d]=h?c(o[d],d):o[d];else for(i=p.call(o),n=new a;!(r=i.next()).done;d++)n[d]=h?l(i,c,r.value,d):r.value;return n.length=d,n})),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{configurable:!0,writable:!0,enumerable:!1,value:function(t){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var e,n=Object(this),r=n.length>>>0,i=arguments[1],o=0;o<r;o++)if(e=n[o],t.call(i,e,o,n))return e}}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{configurable:!0,writable:!0,enumerable:!1,value:function(t){if(null===this)throw new TypeError("Array.prototype.findIndex called on null or undefined");if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var e,n=Object(this),r=n.length>>>0,i=arguments[1],o=0;o<r;o++)if(e=n[o],t.call(i,e,o,n))return o;return-1}})),"undefined"!=typeof FEATURE_NO_ES2016||Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{configurable:!0,writable:!0,enumerable:!1,value:function(t){var e=Object(this),n=parseInt(e.length)||0;if(0===n)return!1;var r,i,o=parseInt(arguments[1])||0;for(o>=0?r=o:(r=n+o)<0&&(r=0);r<n;){if(t===(i=e[r])||t!=t&&i!=i)return!0;r++}return!1}}),"undefined"==typeof FEATURE_NO_ES2015&&(!function(){var t,e,n,r,i=!1;try{var o=Object.keys("a");i=1!==o.length||"0"!==o[0]}catch(t){i=!0}i&&(Object.keys=(t=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),r=(n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"]).length,function(i){if(null==i)throw TypeError("Cannot convert undefined or null to object");i=Object(i);var o,a,s=[];for(o in i)t.call(i,o)&&s.push(o);if(e)for(a=0;a<r;a++)t.call(i,n[a])&&s.push(n[a]);return s}))}(),function(t){var e,n,r;"assign"in t||t.defineProperty(t,"assign",{configurable:!0,writable:!0,value:(e=t.getOwnPropertySymbols,n=t.propertyIsEnumerable,r=e?function(t){return e(t).filter(n,t)}:function(){return Array.prototype},function(n){function i(t){n[t]=s[t]}!e||n instanceof t||console.warn("problematic Symbols",n);for(var o=1,a=arguments.length;o<a;++o){var s=arguments[o];null!=s&&t.keys(s).concat(r(s)).forEach(i)}return n})})}(Object),Object.is||(Object.is=function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e})),"undefined"==typeof FEATURE_NO_ES2015&&function(t){var e,n,r,i=Object.defineProperty;("undefined"==typeof WeakMap&&(t.WeakMap=o({delete:s,clear:f,get:c,has:h,set:d},!0)),"undefined"!=typeof Map&&"function"==typeof(new Map).values&&(new Map).values().next)||(t.Map=o(((n={delete:s,has:h,get:c,set:d,keys:function(){return y(this._itp,this._keys)},values:v,entries:g,forEach:b,clear:f})[Symbol.iterator]=g,n)));"undefined"!=typeof Set&&"function"==typeof(new Set).values&&(new Set).values().next||(t.Set=o(((r={has:l,add:p,delete:s,clear:f,keys:v,values:v,entries:function(){return y(this._itp,this._values,this._values)},forEach:b})[Symbol.iterator]=v,r)));function o(t,e){function n(t){if(!this||this.constructor!==n)return new n(t);this._keys=[],this._values=[],this._itp=[],this.objectOnly=e,t&&a.call(this,t)}return e||i(t,"size",{get:m}),t.constructor=n,n.prototype=t,n}function a(t){this.add?t.forEach(this.add,this):t.forEach((function(t){this.set(t[0],t[1])}),this)}function s(t){return this.has(t)&&(this._keys.splice(e,1),this._values.splice(e,1),this._itp.forEach((function(t){e<t[0]&&t[0]--}))),-1<e}function c(t){return this.has(t)?this._values[e]:void 0}function u(t,n){if(this.objectOnly&&n!==Object(n))throw new TypeError("Invalid value used as weak collection key");if(n!=n||0===n)for(e=t.length;e--&&((r=t[e])!==(i=n)&&(r==r||i==i)););else e=t.indexOf(n);var r,i;return-1<e}function l(t){return u.call(this,this._values,t)}function h(t){return u.call(this,this._keys,t)}function d(t,n){return this.has(t)?this._values[e]=n:this._values[this._keys.push(t)-1]=n,this}function p(t){return this.has(t)||this._values.push(t),this}function f(){(this._keys||0).length=this._values.length=0}function v(){return y(this._itp,this._values)}function g(){return y(this._itp,this._keys,this._values)}function y(t,e,n){var r,i=[0],o=!1;return t.push(i),(r={})[Symbol.iterator]=function(){return this},r.next=function(){var r,a=i[0];return!o&&a<e.length?(r=n?[e[a],n[a]]:e[a],i[0]++):(o=!0,t.splice(t.indexOf(i),1)),{done:o,value:r}},r}function m(){return this._values.length}function b(t,e){for(var n=this.entries();;){var r=n.next();if(r.done)break;t.call(e,r.value[1],r.value[0],this)}}"undefined"==typeof WeakSet&&(t.WeakSet=o({delete:s,add:p,clear:f,has:l},!0))}(h.d.global),"undefined"==typeof FEATURE_NO_ES2015){var p=Function.prototype.bind;void 0===h.d.global.Reflect&&(h.d.global.Reflect={}),"function"!=typeof Reflect.defineProperty&&(Reflect.defineProperty=function(t,e,n){if("object"===(void 0===t?"undefined":d(t))?null===t:"function"!=typeof t)throw new TypeError("Reflect.defineProperty called on non-object");try{return Object.defineProperty(t,e,n),!0}catch(t){return!1}}),"function"!=typeof Reflect.construct&&(Reflect.construct=function(t,e){if(e)switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var n=[null];return n.push.apply(n,e),new(p.apply(t,n))}),"function"!=typeof Reflect.ownKeys&&(Reflect.ownKeys=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))})}if("undefined"==typeof FEATURE_NO_ESNEXT){var f=Object.freeze({});"function"!=typeof Reflect.getOwnMetadata&&(Reflect.getOwnMetadata=function(t,e,n){if(e.hasOwnProperty("__metadata__"))return(e.__metadata__[n]||f)[t]}),"function"!=typeof Reflect.defineMetadata&&(Reflect.defineMetadata=function(t,e,n,r){var i=n.hasOwnProperty("__metadata__")?n.__metadata__:n.__metadata__={};(i[r]||(i[r]={}))[t]=e}),"function"!=typeof Reflect.metadata&&(Reflect.metadata=function(t,e){return function(n,r){Reflect.defineMetadata(t,e,n,r)}})}},5:function(t,e,n){"use strict";n.r(e),n.d(e,"logLevel",(function(){return r})),n.d(e,"getLogger",(function(){return p})),n.d(e,"addAppender",(function(){return f})),n.d(e,"removeAppender",(function(){return v})),n.d(e,"getAppenders",(function(){return g})),n.d(e,"clearAppenders",(function(){return y})),n.d(e,"addCustomLevel",(function(){return m})),n.d(e,"removeCustomLevel",(function(){return b})),n.d(e,"setLevel",(function(){return w})),n.d(e,"getLevel",(function(){return _})),n.d(e,"Logger",(function(){return x}));var r={none:0,error:10,warn:20,info:30,debug:40},i={},o=[],a=r.none,s=["none","error","warn","info","debug"];function c(t){return s.filter((function(e){return e===t})).length>0}function u(){return[this].concat(Array.prototype.slice.call(arguments))}function l(t){var e=r[t];return function(){if(!(this.level<e))for(var n=u.apply(this,arguments),r=o.length;r--;){var i;(i=o[r])[t].apply(i,n)}}}function h(t){var e=r[t];return function(){if(!(this.level<e))for(var n=u.apply(this,arguments),r=o.length;r--;){var i=o[r];void 0!==i[t]&&i[t].apply(i,n)}}}function d(){var t=x.prototype;for(var e in r)c(e)?"none"!==e&&(t[e]=l(e)):t[e]=h(e)}function p(t){return i[t]||new x(t)}function f(t){1===o.push(t)&&d()}function v(t){o=o.filter((function(e){return e!==t}))}function g(){return[].concat(o)}function y(){o=[],function(){var t=x.prototype;for(var e in r)"none"!==e&&(t[e]=function(){})}()}function m(t,e){if(void 0!==r[t])throw Error('Log level "'+t+'" already exists.');if(isNaN(e))throw Error("Value must be a number.");r[t]=e,o.length>0?d():x.prototype[t]=function(){}}function b(t){if(void 0!==r[t]){if(c(t))throw Error('Built-in log level "'+t+'" cannot be removed.');delete r[t],delete x.prototype[t]}}function w(t){for(var e in a=t,i)i[e].setLevel(t)}function _(){return a}var x=function(){function t(t){var e=i[t];if(e)return e;i[t]=this,this.id=t,this.level=a}return t.prototype.debug=function(t){},t.prototype.info=function(t){},t.prototype.warn=function(t){},t.prototype.error=function(t){},t.prototype.setLevel=function(t){this.level=t},t.prototype.isDebugEnabled=function(){return this.level===r.debug},t}()},6:function(t,e,n){"use strict";n.d(e,"a",(function(){return b})),n.d(e,"c",(function(){return c})),n.d(e,"d",(function(){return l})),n.d(e,"b",(function(){return p}));var r=n(1),i=n(0);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
function o(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}function a(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function s(t){var e=function(t){t.hasOwnProperty("inject")||(t.inject=(r.b.getOwn(r.b.paramTypes,t)||v).slice(),t.inject&&t.inject.length>0&&t.inject[t.inject.length-1]===Object&&t.inject.splice(-1,1))};return function(t){return!!t}(t)?e(t):e}function c(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e,n,r){if("number"==typeof r)return s(e),void(1===t.length&&(e.inject[r]=t[0]));r?r.value.inject=t:e.inject=t}}var u,l=r.d.create("aurelia:resolver",(function(t){return"function"==typeof t.get||"Resolvers must implement: get(container: Container, key: any): any"}));function h(t,e,n){return t===e}!function(t){t[t.instance=0]="instance",t[t.singleton=1]="singleton",t[t.transient=2]="transient",t[t.function=3]="function",t[t.array=4]="array",t[t.alias=5]="alias"}(u||(u={}));var d=function(){function t(t,e){this.strategy=t,this.state=e}return t.prototype.get=function(t,e){if(h(this.strategy,u.instance,this.state))return this.state;if(h(this.strategy,u.singleton,this.state)){var n=t.invoke(this.state);return this.state=n,this.strategy=0,n}if(h(this.strategy,u.transient,this.state))return t.invoke(this.state);if(h(this.strategy,u.function,this.state))return this.state(t,e,this);if(h(this.strategy,u.array,this.state))return this.state[0].get(t,e);if(h(this.strategy,u.alias,this.state))return t.get(this.state);throw new Error("Invalid strategy: "+this.strategy)},t=o([l(),a("design:paramtypes",[Number,Object])],t)}(),p=(function(){function t(t){this._key=t}var e;e=t,t.prototype.get=function(t){var e=this;return function(){return t.get(e._key)}},t.of=function(t){return new e(t)},t=e=o([l(),a("design:paramtypes",[Object])],t)}(),function(){function t(t){this._key=t}var e;e=t,t.prototype.get=function(t){return t.getAll(this._key)},t.of=function(t){return new e(t)},t=e=o([l(),a("design:paramtypes",[Object])],t)}(),function(){function t(t,e){void 0===e&&(e=!0),this._key=t,this._checkParent=e}var e;return e=t,t.prototype.get=function(t){return t.hasResolver(this._key,this._checkParent)?t.get(this._key):null},t.of=function(t,n){return void 0===n&&(n=!0),new e(t,n)},t=e=o([l(),a("design:paramtypes",[Object,Boolean])],t)}());(function(){function t(t){this._key=t}var e;e=t,t.prototype.get=function(t){return t.parent?t.parent.get(this._key):null},t.of=function(t){return new e(t)},t=e=o([l(),a("design:paramtypes",[Object])],t)})(),function(){function t(t){this._key=t}var e;e=t,t.prototype.get=function(t){var e=this._key,n=t.getResolver(e);return n&&n.strategy===u.function&&(e=n.state),function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.invoke(e,n)}},t.of=function(t){return new e(t)},t=e=o([l(),a("design:paramtypes",[Object])],t)}(),function(){function t(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];this.key=t,this.asKey=t,this.dynamicDependencies=e}var e;e=t,t.prototype.get=function(t){var e=this.dynamicDependencies.length>0?this.dynamicDependencies.map((function(e){return e["protocol:aurelia:resolver"]?e.get(t):t.get(e)})):void 0,n=this.key,r=t.getResolver(n);r&&3===r.strategy&&(n=r.state);var i=t.invoke(n,e);return t.registerInstance(this.asKey,i),i},t.prototype.as=function(t){return this.asKey=t,this},t.of=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return new(e.bind.apply(e,[void 0,t].concat(n)))},t=e=o([l(),a("design:paramtypes",[Object,Object])],t)}();function f(t){if(null==t)throw new Error("key/value cannot be null or undefined. Are you trying to inject/register something that doesn't exist with DI?")}var v=Object.freeze([]);r.b.registration="aurelia:registration",r.b.invoker="aurelia:invoker";var g=l.decorates,y=function(){function t(t,e,n){this.fn=t,this.invoker=e,this.dependencies=n}return t.prototype.invoke=function(t,e){return void 0!==e?this.invoker.invokeWithDynamicDependencies(t,this.fn,this.dependencies,e):this.invoker.invoke(t,this.fn,this.dependencies)},t}();var m={invoke:function(t,e,n){var r=n.map((function(e){return t.get(e)}));return Reflect.construct(e,r)},invokeWithDynamicDependencies:function(t,e,n,r){for(var i,o=n.length,a=new Array(o);o--;){if(null==(i=n[o]))throw new Error("Constructor Parameter with index "+o+" cannot be null or undefined. Are you trying to inject/register something that doesn't exist with DI?");a[o]=t.get(i)}return void 0!==r&&(a=a.concat(r)),Reflect.construct(e,a)}};var b=function(){function t(t){void 0===t&&(t={}),this._configuration=t,this._onHandlerCreated=t.onHandlerCreated,this._handlers=t.handlers||(t.handlers=new Map),this._resolvers=new Map,this.root=this,this.parent=null}return t.prototype.makeGlobal=function(){return t.instance=this,this},t.prototype.setHandlerCreatedCallback=function(t){this._onHandlerCreated=t,this._configuration.onHandlerCreated=t},t.prototype.registerInstance=function(t,e){return this.registerResolver(t,new d(0,void 0===e?t:e))},t.prototype.registerSingleton=function(t,e){return this.registerResolver(t,new d(1,void 0===e?t:e))},t.prototype.registerTransient=function(t,e){return this.registerResolver(t,new d(2,void 0===e?t:e))},t.prototype.registerHandler=function(t,e){return this.registerResolver(t,new d(3,e))},t.prototype.registerAlias=function(t,e){return this.registerResolver(e,new d(5,t))},t.prototype.registerResolver=function(t,e){f(t);var n=this._resolvers,r=n.get(t);return void 0===r?n.set(t,e):4===r.strategy?r.state.push(e):n.set(t,new d(4,[r,e])),e},t.prototype.autoRegister=function(t,e){if("function"==typeof(e=void 0===e?t:e)){var n=r.b.get(r.b.registration,e);return void 0===n?this.registerResolver(t,new d(1,e)):n.registerResolver(this,t,e)}return this.registerResolver(t,new d(0,e))},t.prototype.autoRegisterAll=function(t){for(var e=t.length;e--;)this.autoRegister(t[e])},t.prototype.unregister=function(t){this._resolvers.delete(t)},t.prototype.hasResolver=function(t,e){return void 0===e&&(e=!1),f(t),this._resolvers.has(t)||e&&null!==this.parent&&this.parent.hasResolver(t,e)},t.prototype.getResolver=function(t){return this._resolvers.get(t)},t.prototype.get=function(e){if(f(e),e===t)return this;if(g(e))return e.get(this,e);var n=this._resolvers.get(e);if(void 0===n){if(null===this.parent)return this.autoRegister(e).get(this,e);var i=r.b.get(r.b.registration,e);return void 0===i?this.parent._get(e):i.registerResolver(this,e,e).get(this,e)}return n.get(this,e)},t.prototype._get=function(t){var e=this._resolvers.get(t);return void 0===e?null===this.parent?this.autoRegister(t).get(this,t):this.parent._get(t):e.get(this,t)},t.prototype.getAll=function(t){f(t);var e=this._resolvers.get(t);if(void 0===e)return null===this.parent?v:this.parent.getAll(t);if(4===e.strategy){for(var n=e.state,r=n.length,i=new Array(r);r--;)i[r]=n[r].get(this,t);return i}return[e.get(this,t)]},t.prototype.createChild=function(){var e=new t(this._configuration);return e.root=this.root,e.parent=this,e},t.prototype.invoke=function(t,e){try{var n=this._handlers.get(t);return void 0===n&&(n=this._createInvocationHandler(t),this._handlers.set(t,n)),n.invoke(this,e)}catch(e){throw new i.a("Error invoking "+t.name+". Check the inner error for details.",e,!0)}},t.prototype._createInvocationHandler=function(t){var e,n;if(void 0===t.inject)e=r.b.getOwn(r.b.paramTypes,t)||v;else{e=[];for(var i=t;"function"==typeof i;)e.push.apply(e,(n=i).hasOwnProperty("inject")?"function"==typeof n.inject?n.inject():n.inject:[]),i=Object.getPrototypeOf(i)}var o=r.b.getOwn(r.b.invoker,t)||m,a=new y(t,o,e);return void 0!==this._onHandlerCreated?this._onHandlerCreated(a):a},t}();var w=function(){function t(){}return t.prototype.invoke=function(t,e,n){for(var r=n.length,i=new Array(r);r--;)i[r]=t.get(n[r]);return e.apply(void 0,i)},t.prototype.invokeWithDynamicDependencies=function(t,e,n,r){for(var i=n.length,o=new Array(i);i--;)o[i]=t.get(n[i]);return void 0!==r&&(o=o.concat(r)),e.apply(void 0,o)},t}();w.instance=new w;(function(){function t(t){this._key=t}t.prototype.registerResolver=function(t,e,n){var r=t.getResolver(this._key||e);return void 0===r?t.registerTransient(this._key||e,n):r}})(),function(){function t(t,e){void 0===e&&(e=!1),"boolean"==typeof t?this._registerInChild=t:(this._key=t,this._registerInChild=e)}t.prototype.registerResolver=function(t,e,n){var r=this._registerInChild?t:t.root,i=r.getResolver(this._key||e);return void 0===i?r.registerSingleton(this._key||e,n):i}}()},7:function(t,e,n){(function(e){t.exports=e.Promise=n(19)}).call(this,n(11))},8:function(t,e,n){"use strict";n.d(e,"d",(function(){return i})),n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return u})),n.d(e,"c",(function(){return d}));var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function i(t,e){var n=e&&e.split("/"),r=t.trim().split("/");if("."===r[0].charAt(0)&&n){var i=n.slice(0,n.length-1);r.unshift.apply(r,i)}return function(t){for(var e=0;e<t.length;++e){var n=t[e];if("."===n)t.splice(e,1),e-=1;else if(".."===n){if(0===e||1===e&&".."===t[2]||".."===t[e-1])continue;e>0&&(t.splice(e-1,2),e-=2)}}}(r),r.join("/")}function o(t,e){if(!t)return e;if(!e)return t;var n=t.match(/^([^/]*?:)\//),r=n&&n.length>0?n[1]:"",i=void 0;i=0===(t=t.substr(r.length)).indexOf("///")&&"file:"===r?"///":0===t.indexOf("//")?"//":0===t.indexOf("/")?"/":"";for(var o="/"===e.slice(-1)?"/":"",a=t.split("/"),s=e.split("/"),c=[],u=0,l=a.length;u<l;++u)if(".."===a[u])c.length&&".."!==c[c.length-1]?c.pop():c.push(a[u]);else{if("."===a[u]||""===a[u])continue;c.push(a[u])}for(var h=0,d=s.length;h<d;++h)if(".."===s[h])c.length&&".."!==c[c.length-1]?c.pop():c.push(s[h]);else{if("."===s[h]||""===s[h])continue;c.push(s[h])}return r+i+c.join("/")+o}var a=encodeURIComponent,s=function(t){return a(t).replace("%24","$")};function c(t,e,n){var i=[];if(null==e)return i;if(Array.isArray(e))for(var o=0,u=e.length;o<u;o++)if(n)i.push(s(t)+"="+a(e[o]));else{var l=t+"["+("object"===r(e[o])&&null!==e[o]?o:"")+"]";i=i.concat(c(l,e[o]))}else if("object"!==(void 0===e?"undefined":r(e))||n)i.push(s(t)+"="+a(e));else for(var h in e)i=i.concat(c(t+"["+h+"]",e[h]));return i}function u(t,e){for(var n=[],r=Object.keys(t||{}).sort(),i=0,o=r.length;i<o;i++){var a=r[i];n=n.concat(c(a,t[a],e))}return 0===n.length?"":n.join("&")}function l(t,e){return Array.isArray(t)?(t.push(e),t):void 0!==t?[t,e]:e}function h(t,e,n){for(var i=t,o=e.length-1,a=0;a<=o;a++){var s=""===e[a]?i.length:e[a];if(a<o){var c=i[s]&&"object"!==r(i[s])?[i[s]]:i[s];i=i[s]=c||(isNaN(e[a+1])?{}:[])}else i=i[s]=n}}function d(t){var e={};if(!t||"string"!=typeof t)return e;var n=t;"?"===n.charAt(0)&&(n=n.substr(1));for(var r=n.replace(/\+/g," ").split("&"),i=0;i<r.length;i++){var o=r[i].split("="),a=decodeURIComponent(o[0]);if(a){var s=a.split("]["),c=s.length-1;if(/\[/.test(s[0])&&/\]$/.test(s[c])?(s[c]=s[c].replace(/\]$/,""),c=(s=s.shift().split("[").concat(s)).length-1):c=0,o.length>=2){var u=o[1]?decodeURIComponent(o[1]):"";c?h(e,s,u):e[a]=l(e[a],u)}else e[a]=!0}}return e}},9:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));class r{constructor(t,e,n,r,i){this.newBalance=0,this.id=t,this.sourceTran=e,this.targetAcct=n,this.desc=r,this.amt=i}compareToInAcct(t){return this.sourceTran.date==t.sourceTran.date?this.sourceTran.intraDateSorter>t.sourceTran.intraDateSorter?1:-1:this.sourceTran.date>t.sourceTran.date?1:-1}compareToInTran(t){return this.intraTranIndex>t.intraTranIndex?1:this.intraTranIndex<t.intraTranIndex?-1:0}clone(t,e){let n=new r(this.id,t,e,this.desc,this.amt);return n.intraTranIndex=this.intraTranIndex,n.newBalance=this.newBalance,n}registerToAcct(){this.targetAcct.bchgList.push(this)}unregisterFromAcct(){let t=this.targetAcct.bchgList.findIndex(t=>t.id==this.id);this.targetAcct.bchgList.splice(t,1)}unregisterFromTran(){let t=this.sourceTran.bchgList.findIndex(t=>t.id==this.id);this.sourceTran.bchgList.splice(t,1)}setAmtToBalanceTran(){let t=0,e=0;for(let n of this.sourceTran.bchgList)if(n.id!=this.id)switch(n.targetAcct.parentFaeSide.id){case"Assets":t+=n.amt;break;case"Equities":e+=n.amt;break;default:throw new Error(`acct.parentFaeSide.id has invalid value: "${this.targetAcct.parentFaeSide.id}"`)}switch(this.targetAcct.parentFaeSide.id){case"Assets":this.amt=e-t,t+=this.amt;break;case"Equities":this.amt=t-e,e+=this.amt;break;default:throw new Error(`acct.parentFaeSide.id has invalid value: "${this.targetAcct.parentFaeSide.id}"`)}this.sourceTran.totalChangesAssets=t,this.sourceTran.totalChangesEquities=e}}},app:function(t,e,n){"use strict";n.r(e);var r=n(12),i=n(4),o=n(9),a=n(16);class s{constructor(t){this.tranList=[],this.id=t}sortTranList(){this.tranList.sort((t,e)=>t.compareToInJrnl(e))}refresh(){this.sortTranList();for(let t of this.tranList)t.refresh()}}class c{constructor(t,e,n,i,o){this._nextSorter=1,this._nextAcctId=1,this._nextTranId=1,this._nextBchgId=1,this.stringifiedData="",this.entityName="test entity",this.faeSideAssets=new r.a("Assets"),this.faeSideEquities=new r.a("Equities"),this.jrnl=new s("Journal"),this.entityName=t,this._nextSorter=e,this._nextAcctId=n,this._nextTranId=i,this._nextBchgId=o}get nextSorter(){return this._nextSorter++}get nextAcctId(){return this._nextAcctId++}get nextTranId(){return this._nextTranId++}get nextBchgId(){return this._nextBchgId++}generateEmptyData(){console.log("\n********************************************\nGenerating test data..."),this.entityName="<programmatically generated empty data for testing>"}generateTestData(){let t,e,n,r,s,c,u;console.log("\n********************************************\nGenerating test data..."),this.entityName="<programmatically generated test data for testing>",u=`anno${this.nextAcctId}`,t=new i.b(u,this.faeSideAssets,this.nextSorter,`Test annotation (equationSide: ${this.faeSideAssets.id}; annoId: ${u};)`),this.faeSideAssets.acctList.push(t);for(let t=15;t>0;t--)c=`acct${this.nextAcctId}`,e=new i.a(c,this.faeSideAssets,this.nextSorter,`Test account (equationSide: ${this.faeSideAssets.id}, acctId: ${c};)`,1),this.faeSideAssets.acctList.push(e),c=`acct${this.nextAcctId}`,e=new i.a(c,this.faeSideEquities,this.nextSorter,`Test account (equationSide: ${this.faeSideEquities.id}; acctId: ${c};)`,1),this.faeSideEquities.acctList.push(e);this.faeSideAssets.reindexAcctList(),this.faeSideEquities.reindexAcctList();let l=this.faeSideAssets.acctList.filter(t=>t instanceof i.a),h=this.faeSideEquities.acctList.filter(t=>t instanceof i.a),d=l.concat(h);for(let t=1;t<=50;++t){let e;r=new a.a(`tran${this.nextTranId}`,this.jrnl,t%2?"2016-02-03":"2016-02-20",this.nextSorter),n=d[(Math.random()*(d.length-1)).toFixed(0)],e=`bchg${this.nextBchgId}`,s=new o.a(e,r,n,`<change desc: ${e}; ${r.id}; ${n.id}; >`,0),r.bchgList.push(s),n.bchgList.push(s),n=d[(Math.random()*(d.length-1)).toFixed(0)],e=`bchg${this.nextBchgId}`,s=new o.a(e,r,n,`<change desc: ${e}; ${r.id}; ${n.id}; >`,Math.round(1e6*Math.random())/100),r.bchgList.push(s),n.bchgList.push(s),r.bchgList[0].setAmtToBalanceTran(),this.jrnl.tranList.push(r)}this.faeSideAssets.refresh(),this.faeSideEquities.refresh(),this.jrnl.refresh(),console.log(this),console.log("Generation of test data completed!")}generateExample1Data(){let t,e,n,r;console.log("\n********************************************\nGenerating example data..."),this.entityName="Rene (an individual)",t=new i.a(`acct${this.nextAcctId}`,this.faeSideAssets,this.nextSorter,"Pocket money",1),this.faeSideAssets.acctList.push(t),t=new i.a(`acct${this.nextAcctId}`,this.faeSideAssets,this.nextSorter,"Tallahassee Bank - checking account",1),this.faeSideAssets.acctList.push(t),t=new i.a(`acct${this.nextAcctId}`,this.faeSideAssets,this.nextSorter,"2015 Subaru Outback",1),this.faeSideAssets.acctList.push(t),this.faeSideAssets.reindexAcctList(),t=new i.a(`acct${this.nextAcctId}`,this.faeSideEquities,this.nextSorter,"Citi MasterCard",1),this.faeSideEquities.acctList.push(t),t=new i.a(`acct${this.nextAcctId}`,this.faeSideEquities,this.nextSorter,"Rene's equity",1),this.faeSideEquities.acctList.push(t),this.faeSideEquities.reindexAcctList(),e=new a.a(`tran${this.nextTranId}`,this.jrnl,"2018-08-01",this.nextSorter),r=this.faeSideAssets.acctList[0],n=new o.a(`bchg${this.nextBchgId}`,e,r,"Opening position",12),e.bchgList.push(n),r.bchgList.push(n),r=this.faeSideAssets.acctList[1],n=new o.a(`bchg${this.nextBchgId}`,e,r,"Opening position",2700),e.bchgList.push(n),r.bchgList.push(n),r=this.faeSideAssets.acctList[2],n=new o.a(`bchg${this.nextBchgId}`,e,r,"Opening position",16e3),e.bchgList.push(n),r.bchgList.push(n),r=this.faeSideEquities.acctList[0],n=new o.a(`bchg${this.nextBchgId}`,e,r,"Opening position",900),e.bchgList.push(n),r.bchgList.push(n),r=this.faeSideEquities.acctList[1],n=new o.a(`bchg${this.nextBchgId}`,e,r,"Opening position",900),e.bchgList.push(n),r.bchgList.push(n),n.setAmtToBalanceTran(),this.jrnl.tranList.push(e),e=new a.a(`tran${this.nextTranId}`,this.jrnl,"2018-08-05",this.nextSorter),r=this.faeSideAssets.acctList[1],n=new o.a(`bchg${this.nextBchgId}`,e,r,"ATM cash withdrawal",-100),e.bchgList.push(n),r.bchgList.push(n),r=this.faeSideAssets.acctList[0],n=new o.a(`bchg${this.nextBchgId}`,e,r,"Replenish with cash from ATM withdrawal",0),e.bchgList.push(n),r.bchgList.push(n),n.setAmtToBalanceTran(),this.jrnl.tranList.push(e),this.faeSideAssets.refresh(),this.faeSideEquities.refresh(),this.jrnl.refresh(),console.log(this),console.log("\nGeneration of example data completed!\n********************************************")}stringifyData(){console.log("***** stringifiedData *****"),this.stringifiedData=JSON.stringify(this,this.replacer),console.log(this.stringifiedData)}replacer(t,e){return"parentFaeSide"==t||"sourceTran"==t||"targetAcct"==t||"parentJrnl"==t?e.id:e}reviveData(){console.log("***** parsedData *****");let t=JSON.parse(this.stringifiedData);console.log(t);let e,n,r,s,u,l=new c(t.entityName,t._nextSorter,t._nextAcctId,t._nextTranId,t._nextBchgId);console.log("***** revivedData *****");for(let r of[t.faeSideAssets,t.faeSideEquities]){e="Assets"==r.id?l.faeSideAssets:l.faeSideEquities;for(let t of r.acctList)"anno"==t.id.substring(0,4)?n=new i.b(t.id,e,t.intraSideIndex,t.annoText):(n=new i.a(t.id,e,t.intraSideIndex,t.title,t.normalBalance),n.endingBalance=t.endingBalance),e.acctList.push(n);u=l.faeSideAssets.acctList.concat(l.faeSideEquities.acctList),e.refresh()}for(let e of t.jrnl.tranList){r=new a.a(e.id,l.jrnl,e.date,e.intraDateSorter);for(let t of e.bchgList)s=new o.a(t.id,r,u.find(e=>e.id==t.targetAcct),t.desc,t.amt),r.bchgList.push(s);l.faeSideAssets.refresh(),l.faeSideEquities.refresh(),l.jrnl.refresh(),r.register()}l.jrnl.refresh(),console.log(l),this._nextSorter=l._nextSorter,this._nextAcctId=l._nextAcctId,this._nextTranId=l._nextTranId,this._nextBchgId=l._nextBchgId,this.entityName=l.entityName,this.faeSideAssets=l.faeSideAssets,this.faeSideEquities=l.faeSideEquities,this.jrnl=l.jrnl}}n(30);n.d(e,"App",(function(){return u}));class u{constructor(){this.navBtnReturn=null,this.selectedModule=this.MODULE_FAE,this.slectedMode=this.MODE_NAV,this.viewNavMode=!0,this.selectedAcct=null,this.selectedBchg=null,this.selectedTran=null,this.candidateSelectedAcct=null,this.candidateSelectedBchg=null,this.candidateSelectedTran=null,this.candidateTran=null,this.candidateFaeSideAssets=null,this.candidateFaeSideEquities=null,this.data=new c("",1,1,1,1),this.heightTest=75,window.onresize=this.onResize,window.app=this,console.log(`(window as any).app.heightTest: ${window.app.heightTest};`)}onResize(t){console.log("******** in onResize ********");let e=document.getElementById("observedElement").getBoundingClientRect();console.log(e),window.app.heightTest=window.app.heightTest+window.innerHeight-e.bottom-40,console.log(window.app.heightTest)}get MODULE_FAE(){return"fae"}get MODULE_ACCT(){return"acct"}get MODULE_BCHG(){return"bchg"}get MODULE_TRAN(){return"tran"}get MODULE_JRNL(){return"jrnl"}get ROW_SELECTED_CHAR(){return"&#xf111;"}get NAV_RIGHT_CHAR(){return String.fromCharCode(61524)}get MODE_NAV(){return"nav"}get MODE_EDIT(){return"edit"}get MODE_MOVE(){return"move"}bind(){console.log("******** in app.bind() ********"),this.data.generateExample1Data()}selectAcct(t){this.selectedAcct=t}selectAcctGoAcct(t){this.selectedAcct=t,this.filteredAcctList=this.selectedAcct.parentFaeSide.acctList.filter(t=>t instanceof i.a),this.goAcctModule(event)}selectBchg(t){this.selectedBchg=t,this.selectedAcct=t.targetAcct,this.selectedTran=t.sourceTran}selectAcctBchgGoTran(t){this.selectedBchg=t,this.selectedAcct=t.targetAcct,this.selectedTran=t.sourceTran,this.goTranModule(event)}selectTranBchgGoAcct(t){this.selectedBchg=t,this.selectedAcct=t.targetAcct,this.selectedTran=t.sourceTran,this.filteredAcctList=this.selectedAcct.parentFaeSide.acctList.filter(t=>t instanceof i.a),this.goAcctModule(event)}selectTran(t){this.selectedTran=t}selectTranGoTran(t){this.selectedTran=t,this.goTranModule(event)}goFaeModule(t){t.target.classList.toggle("aaNavModuleHover",!1),this.selectedModule=null,this.viewmodelFae.observeForScrollIntoView(),this.selectedModule=this.MODULE_FAE}goAcctModule(t){this.selectedBchg&&this.selectedBchg.targetAcct.id!=this.selectedAcct.id&&(this.selectedBchg=null),t.target.classList.toggle("aaNavModuleBtnHover",!1),this.filteredAcctList=this.selectedAcct.parentFaeSide.acctList.filter(t=>t instanceof i.a),this.selectedModule=null,this.viewmodelAcct.observeForScrollIntoView(),this.selectedModule=this.MODULE_ACCT}goBchgModule(t){t.target.classList.toggle("aaNavModuleBtnHover",!1),this.selectedModule=null,this.selectedModule=this.MODULE_BCHG}goTranModule(t){this.selectedBchg&&this.selectedBchg.sourceTran.id!=this.selectedTran.id&&(this.selectedBchg=null),t.target.classList.toggle("aaNavModuleBtnHover",!1),this.selectedModule=null,this.viewmodelTran.observeForScrollIntoView(),this.selectedModule=this.MODULE_TRAN}goJrnlModule(t){t.target.classList.toggle("aaNavModuleHover",!1),this.selectedModule=null,this.viewmodelJrnl.observeForScrollIntoView(),this.selectedModule=this.MODULE_JRNL}goPrevAcct(t){let e=this.filteredAcctList.findIndex(t=>t.id==this.selectedAcct.id);this.selectedAcct=this.filteredAcctList[e-1]}goNextAcct(t){let e=this.filteredAcctList.findIndex(t=>t.id==this.selectedAcct.id);this.selectedAcct=this.filteredAcctList[e+1]}goPrevTran(t){let e=this.data.jrnl.tranList.findIndex(t=>t.id==this.selectedTran.id);this.selectedTran=this.data.jrnl.tranList[e-1]}goNextTran(t){let e=this.data.jrnl.tranList.findIndex(t=>t.id==this.selectedTran.id);this.selectedTran=this.data.jrnl.tranList[e+1]}}},"app.css":function(t,e,n){(t.exports=n(29)(!1)).push([t.i,'* {\n  box-sizing: border-box;\n  /*border: 1px dashed red;*/\n\n}\n\nbody {\n  text-align: center;\n  color: #000;\n  background-color: #fff;\n  font-family: "Times New Roman", Cambria, serif, Serif;\n  font-weight: bold;\n  font-size: medium;\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  overflow: hidden;\n  /*border: 1px solid red;*/\n}\n\nh1, h2, h3 {\n  font-family: Arial, Helvetica, sans-serif, SansSerif;\n  font-weight: normal;\n}\n\nh1 {\n  letter-spacing: 2px;\n}\n\n.aaSansSerif {\n  font-family: Arial, Helvetica, sans-serif, SansSerif;\n  font-weight: normal;\n}\n\n.aaFontLabel {\n  font-family: Arial, Helvetica, sans-serif, SansSerif;\n  font-weight: normal;\n  font-size: small;\n  background-color: transparent;\n}\n\n.aaFontBold {\n  font-weight: bold;\n}\n\n.aaFontData {\n  color: #000;\n  font-family: "Times New Roman", Cambria, serif, Serif;\n  font-size: medium;\n  /*font-weight: normal;*/\n  font-weight: bold;\n}\n\n.aaIconBlack {\n  color: #000;\n}\n\n.aaIconRed {\n  color: #e00;\n}\n\n.aaIconGreen {\n  color: #090;\n}\n\n.aaIconBlue {\n  color: #00c;\n}\n\n.aaIconWhite {\n  color: #fff;\n}\n\n.aaIconTransparent {\n  color: transparent;\n}\n\n.aaAppToolBar {\n  display: inline-block;\n  margin: 0;\n  padding: 0.25pc 0;\n  border-top: 1px solid #4980B6;\n  border-bottom: 1px solid #4980B6;\n  /*background-color: #EBF2F8;*/\n  /*background-color: #4980B6;*/\n  background-color: #fff;\n  color: rgba(255, 255, 255, 0.9);\n  text-align: center;\n  white-space: nowrap;\n}\n\n.aaNavCell {\n  padding: 2px;\n}\n\n.aaNavBtn {\n  display: inline-block;\n  padding: 2px 4px;\n  border: 1px solid #4980B6;\n  border-radius: 0.25pc;\n}\n\n.aaNavBtnInert {\n  display: inline-block;\n  padding: 2px 4px;;\n  border: 1px solid #4980B6;\n  border-radius: 0.25pc;\n  border-style: dotted;\n}\n\n.aaNavBtn:hover {\n  background-color: #DBE6F0 !important;\n  cursor: pointer;\n}\n\n.aaNavBtn:active {\n  -webkit-box-shadow: 0px 0px 3px 1px #4980B6;\n  -moz-box-shadow: 0px 0px 3px 1px #4980B6;\n  box-shadow: 0px 0px 3px 1px #4980B6;\n  background-color: #fff !important;\n  cursor: pointer;\n}\n\n.aaNavBtnSelected {\n  /*border-style: none;*/\n  -webkit-box-shadow: 0px 0px 3px 1px #4980B6;\n  -moz-box-shadow: 0px 0px 3px 1px #4980B6;\n  box-shadow: 0px 0px 3px 1px #4980B6;\n  /*background-color: #ffffee;*/\n  background-color: #DBE6F0 !important;\n}\n\n.aaPanelContainer {\n  margin: 1pc;\n  display: block;\n  text-align: center;\n}\n\n.aaPanel {\n  display: inline-block;\n  border: 0.5ch solid #4980B6;\n  border-radius: 1ch;\n  background-color: #fff;\n  background-clip: border-box;\n  overflow: hidden;\n  font-size: medium;\n}\n\n.aaPanelBoxShadow {\n  /* -webkit-box-shadow: 4px 8px 5px 0px rgba(0, 0, 0, 0.4);\n   -moz-box-shadow: 4px 8px 5px 0px rgba(0, 0, 0, 0.4);\n   box-shadow: 4px 8px 5px 0px rgba(0, 0, 0, 0.4);*/\n}\n\n.aaPanelHeader {\n  padding: 0.25pc;\n  /*color: #f0f0f0;*/\n  color: #fff;\n  text-shadow: 3px 3px 0 #000;\n  background-color: #4980B6;\n  font-family: Arial, Helvetica, sans-serif, SansSerif;\n  font-weight: bold;\n  letter-spacing: 2px;\n  text-align: center;\n}\n\n.aaPanelHeaderModule {\n  font-size: 150%;\n  letter-spacing: 3px;\n}\n\n.aaPanelToolBar {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 0.25pc 1pc;\n  white-space: nowrap;\n  background-color: #fff;\n  text-align: left;\n  border-bottom: 1px solid #999;\n}\n\n.aaPanelBody {\n  padding: 2ch;\n  padding-bottom: 0;\n  white-space: nowrap;\n  /*background-color: #f0f0f0;*/\n}\n\n.aaForm {\n  /*margin-top: 1pc;*/\n  text-align: left;\n  font-size: medium;\n}\n\n.aaFormItemLabel {\n  padding: 0.30pc 0 0.20pc 0;\n  text-align: right;\n  /*vertical-align: middle;*/\n  font-family: Arial, Helvetica, sans-serif, SansSerif;\n  font-weight: normal;\n  font-size: small;\n}\n\n.aaFormItemData {\n  padding: 0.30pc 0.5pc 0.20pc 0.5pc;\n  font-size: medium;\n}\n\n.aaFormInputText {\n  padding: 1px 0.5pc;\n  background-color: #fff;\n  font-size: medium;\n  font-weight: bold;\n  border-style: solid;\n  border-width: 1px;\n  border-color: #999;\n  cursor: inherit; /* for when dragging row in mover */\n}\n\n.aaFormInputText:disabled {\n  border-style: solid;\n  background-color: transparent;\n  cursor: inherit; /* for when dragging row in mover */\n}\n\n.aaFormInputText:read-only {\n  background-color: transparent;\n  cursor: inherit; /* for when dragging row in mover */\n}\n\n.aaInlineBlock {\n  display: inline-block;\n}\n\n.aaInlineFlex {\n  display: inline-flex;\n  flex-direction: row;\n  justify-content: flex-start;\n}\n\n.aaVisible {\n  visibility: visible;\n}\n\n.aaHidden {\n  visibility: hidden;\n}\n\n.aaTransparent {\n  color: transparent;\n  background-color: transparent;\n  padding: 0 0.25pc;\n}\n\n.aaEquSideContainer {\n  display: inline-block;\n  vertical-align: top;\n  /*background-color: lightgreen;*/\n}\n\n.aaBtn {\n  display: inline-flex;\n  color: #333;\n  padding: 2px 0.25pc;\n  margin: 0 0.25pc;\n  text-align: center;\n  white-space: nowrap;\n  vertical-align: top;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  background-image: none;\n  border: 1px solid transparent;\n  border-radius: 0.25pc;\n  background-clip: border-box;\n  background-color: transparent;\n  outline-width: 0;\n  font-family: Arial, Helvetica, sans-serif, SansSerif;\n  font-weight: normal;\n  font-size: medium;\n}\n\n.aaBtn:disabled {\n  border-style: none;\n  opacity: 0.3;\n}\n\n.aaBtn:hover {\n  border-color: #333;\n  background-color: #ffffff;\n  cursor: pointer;\n}\n\n.aaBtn:active {\n  color: #000;\n  background-color: #B6CBE2;\n  border-color: #000;\n}\n\n.aaBtnFinish {\n  display: inline-flex;\n  padding: 2px 0.25pc;\n  margin: 0 0.25pc;\n  text-align: center;\n  white-space: nowrap;\n  vertical-align: top;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  border: 1px solid #B6CBE2;\n  border-radius: 0.25pc;\n  background-clip: border-box;\n  font-family: Arial, Helvetica, sans-serif, SansSerif;\n  font-weight: normal;\n  font-size: medium;\n  color: #fff;\n  background-color: #4980B6;\n}\n\n.aaBtnFinish:hover {\n  box-shadow: 0 0 0 3px #B6CBE2;\n}\n\n.aaBtnFinish:active {\n  color: #B6CBE2;\n}\n\n.aaDummyBtn {\n  display: inline-flex;\n  color: #333;\n  padding: 2px 0.25pc;\n  margin: 0 0.25pc;\n  text-align: center;\n  white-space: nowrap;\n  vertical-align: top;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  background-image: none;\n  border: 1px solid transparent;\n  border-radius: 0.25pc;\n  background-clip: border-box;\n  background-color: transparent;\n  outline-width: 0;\n  font-family: Arial, Helvetica, sans-serif, SansSerif;\n  font-weight: normal;\n  font-size: small;\n}\n\n.aaToolBarDivider {\n  display: inline-block;\n  color: transparent;\n  padding: 0.25pc 0;\n  margin: 0 1pc;\n  width: 0;\n  text-align: center;\n  white-space: nowrap;\n  vertical-align: middle;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  background-image: none;\n  border-left: 1px solid #999;\n  border-right: 1px solid #bbb;\n  background-color: transparent;\n  font-family: Arial, Helvetica, sans-serif, SansSerif;\n  font-weight: normal;\n  font-size: small;\n}\n\n.aaGridContainer {\n  margin-top: 1ch;\n  padding: 0;\n  border: 0.25ch solid #4980B6;\n  border-radius: 1ch;\n  background-clip: border-box;\n  overflow: hidden;\n  background-color: inherit;\n}\n\n.aaGridTitleBar {\n  padding: 0.25pc;\n  color: #000;\n  /*text-shadow: 1px 1px 0 #f0f0f0;*/\n  background-color: #A4BEDB;\n  border-bottom: 1px solid #999;\n  font-family: Arial, Helvetica, sans-serif, SansSerif;\n  font-size: medium;\n  font-weight: bold;\n  letter-spacing: 1px;\n  text-align: center;\n}\n\n.aaGridFooterBar {\n  background-color: #A4BEDB;\n  border-top: 1px solid #999;\n  padding-bottom: 1ch;\n  margin: 0;\n  height: 1ch;\n}\n\n.aaGridScrollableRows {\n  display: inline-flex;\n  flex-direction: column;\n  align-items: flex-start;\n  margin: 0;\n  padding: 0;\n  overflow-y: scroll;\n  height: auto;\n  white-space: nowrap;\n  background-color: #fff;\n}\n\n.aaGridHeightInFaeSide {\n  height: 20pc;\n}\n\n.aaGridHeightInAcct {\n  height: 22pc;\n}\n\n.aaGridHeightInTran {\n  height: 18pc;\n}\n\n.aaGridHeightInJrnl {\n  height: 25pc;\n}\n\n.aaGridFooterTotals {\n  padding-top: 0.5pc;\n  border-top: 3px solid #999;\n}\n\n.aaBgColorToolbar {\n  background-color: #fff;\n}\n\n.aaRowBgColorData {\n  background-color: #fff;\n}\n\n.aaRowBgColorNonData {\n  background-color: #fff;\n}\n\n.aaRowAssetEquityPanels {\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-start;\n  /*align-items: center; !* vertical axis *!*/\n  align-items: start; /* vertical axis */\n  column-gap: 4ch;\n  margin: 0;\n  text-align: left;\n  white-space: nowrap;\n  cursor: default;\n}\n\n.aaRow {\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-start;\n  align-items: center; /* vertical axis */\n  margin: 0;\n  text-align: left;\n  white-space: nowrap;\n  border-bottom: 1px solid #999;\n  cursor: default;\n}\n\n.aaRowColumnHeaders {\n  color: #333;\n  background-color: #ddd;\n  border-bottom: 0.5ch double #999;\n  text-decoration: underline;\n}\n\n.aaRowTotals {\n  display: flex;\n  align-items: center;\n  margin: 0;\n  text-align: left;\n  white-space: nowrap;\n}\n\n.aaRowOps {\n  display: inline-flex;\n  flex-direction: row;\n  justify-content: flex-start;\n  align-items: center; /* vertical axis */\n  white-space: nowrap;\n  overflow: hidden;\n  /*padding-top: 0.25pc;*/\n  align-self: stretch;\n}\n\n.aaRowOpsSelected {\n  /*background-color: #4980B6;*/\n  background-color: #009;\n  visibility: visible;\n  color: #fff;\n}\n\n.aaRowOpsEmpty {\n  width: 1.5pc;\n}\n\n.aaRowOpsMover {\n  background-color: #fff;\n  color: #fff;\n  padding: 0 0.25pc;\n}\n\n.aaRowOpsMoverSelected {\n  background-color: #009900;\n}\n\n.aaRowData {\n  display: inline-flex;\n  align-items: center; /* vertical axis */\n  align-self: stretch;\n  margin: 0;\n  text-align: left;\n  white-space: nowrap;\n  cursor: default;\n}\n\n.aaRowDataHover {\n  cursor: default;\n  background-color: #DBE6F0 !important;\n}\n\n.aaRowDataSelected {\n  -webkit-box-shadow: 0 0 0 2px #009 inset;\n  -moz-box-shadow: 0 0 0 2px #009 inset;\n  box-shadow: 0 0 0 2px #009 inset;\n}\n\n.aaCellId {\n  display: inline-flex;\n  width: 3pc;\n  text-align: left;\n}\n\n.aaCellRowOps {\n  display: inline-flex;\n  /*vertical-align: middle;*/\n  align-items: center; /* vertical axis */\n  white-space: nowrap;\n  overflow: hidden;\n  width: 2.5pc;\n  text-align: center;\n}\n\n.aaCellRowOpsFiller {\n  display: inline-flex;\n  /*padding: 0 0.35pc;*/\n  /*vertical-align: top;*/\n  align-items: center; /* vertical axis */\n  width: 2.5pc;\n  text-align: center;\n}\n\n.aaCellRowSelected {\n  display: inline-flex;\n  width: 1.5pc;\n  text-align: center;\n  font-weight: bold;\n}\n\n.aaCellBorder {\n  border: 0.05pc solid #999;\n}\n\n.aaCellBorderInHdg {\n  border: 0.05pc solid #666;\n}\n\n.aaCellInGrid {\n  margin: 4px;\n}\n\n.aaBchgCells {\n  display: inline-flex;\n  flex-direction: column;\n  align-items: flex-start;\n  padding: 0.4pc;\n}\n\n.aaBchgCellsRow {\n  display: inline-flex;\n  flex-direction: row;\n  align-items: center;\n}\n\n.aaBchgCellsRowSeparation {\n  margin-bottom: 0.4em; /* space between rows */\n}\n\n.aaCell {\n  display: inline-block;\n  padding: 0.30pc 0.5pc 0.20pc 0.5pc;\n  vertical-align: top;\n  white-space: nowrap;\n  overflow: hidden;\n}\n\n.aaCellTextEOL {\n  color: #666;\n  font-size: small;\n}\n\n.aaCellAcctTitle {\n  width: 25pc;\n  text-align: left;\n}\n\n.aaMissingAcctTitle {\n  color: red;\n  font-weight: normal;\n}\n\n.aaCellAnnoTitle {\n  width: 25pc;\n  text-align: left;\n  font-family: Arial, Helvetica, sans-serif, SansSerif;\n  font-weight: bold;\n  text-decoration: underline;\n  font-variant: small-caps;\n}\n\n.aaCellTranDate {\n  width: 7pc;\n  text-align: center;\n}\n.aaCellTranId {\n  width: 5pc;\n  text-align: center;\n}\n\n.aaCellBchgDesc {\n  width: 25pc;\n  text-align: left;\n}\n\ninput::placeholder {\n  color: #4980B6;\n  /*font-weight: normal;*/\n  font-style: italic;\n}\n\n.aaCellBchgAmt {\n  text-align: right;\n  width: 7pc;\n}\n\n.aaCellWrapper {\n  display: inline-flex;\n  flex-direction: row;\n  align-items: stretch;\n}\n\n.aaCellHelper {\n  display: inline-flex;\n  flex-direction: row;\n  align-self: stretch;\n  align-items: center;\n  color: #000;\n  background-color: #ddd;\n  border: 1px solid #999;\n  border-left-style: none;\n}\n\n.aaHelperBtn {\n  padding: 2px;\n  margin: 0 2px;\n}\n\n.aaCellErrorIndicater {\n  /*color: red;*/\n  border-color: red;\n  -webkit-box-shadow: 0px 0px 0 2px red inset;\n  -moz-box-shadow: 0px 0px 0 2px red inset;\n  box-shadow: 0px 0px 0 2px red inset;\n  background-color: #fdd;\n}\n\n.aaCellBchgBal {\n  width: 7pc;\n  text-align: right;\n}\n\n.aaCellEquSide {\n  width: 8pc;\n  text-align: center;\n}\n\n.aaInputText {\n  background-color: inherit;\n  padding: 0.25pc;\n  margin: 0.25pc;\n}\n\n.aaInputText:disabled {\n  border-color: transparent;\n}\n\n.aaHasFocus {\n  outline: 2px solid #4980B6;\n  outline-radius: 0.25pc;\n}\n\n.aaVerticalGridline {\n  display: inline-block;\n  width: 1px;\n  align-self: stretch;\n  background-color: #999;\n  overflow: hidden;\n}\n\n.aaVerticalGridlineWide {\n  width: 3px;\n}\n\n.aaVerticalGridlineSpacer {\n  display: inline-block;\n  width: 1px;\n  align-self: stretch;\n  background-color: transparent;\n  overflow: hidden;\n}\n\n.aaBchgAmtComputed {\n  border-color: transparent;\n  background-color: inherit;\n}\n\n.aaModal {\n  display: none; /* Hidden by default */\n  position: fixed; /* Stay in place */\n  z-index: 1; /* Sit on top */\n  left: 0;\n  top: 0;\n  width: 100%; /* Full width */\n  height: 100%; /* Full height */\n  overflow: auto; /* Enable scroll if needed */\n  background-color: rgb(0, 0, 0); /* Fallback color */\n  background-color: rgba(0, 0, 0, 0.6); /* Black w/ opacity */\n}\n\n.aaModalContent {\n  /*border: 1px solid #4980B6;*/\n  /*border-radius: 0.25pc;*/\n  background-clip: border-box;\n  overflow: hidden;\n  position: absolute;\n}\n\n.aaDragRow {\n  /* margin: 2pc;  */\n  /* padding: 2pc;  */\n  /* border: 1px solid black;  */\n  text-align: left;\n  width: 20pc;\n  margin: 0;\n  padding: 0.25pc 0.5pc;\n  border: 1px solid black;\n  cursor: default;\n}\n\n.aaDragging {\n  cursor: n-resize;\n  -webkit-box-shadow: 0px 0px 3px 1px #090 inset;\n  -moz-box-shadow: 0px 0px 3px 1px #090 inset;\n  box-shadow: 0 0 0 2px #090 inset; /*background-color: #C8D9E9 !important;*/\n  background-color: #EDF2F7 !important;\n}\n\n.aaPointerEventsNone {\n  pointer-events: none;\n}\n\n.aaMostRecentlySelectedRow {\n  -webkit-box-shadow: 0px 0px 3px 1px #4980B6 inset;\n  -moz-box-shadow: 0px 0px 3px 1px #4980B6 inset;\n  box-shadow: 0 0 3px 1px #4980B6 inset;\n}\n',""])},"app.html":function(t,e,n){t.exports='<template>\n  <require from="app.css"></require>\n  <require from="au-components/au-module-fae"></require>\n  <require from="au-components/au-module-acct"></require>\n  <require from="au-components/au-module-bchg"></require>\n  <require from="au-components/au-module-tran"></require>\n  <require from="au-components/au-module-jrnl"></require>\n  <require from="au-components/au-popup-alert"></require>\n  <require from="au-components/au-popup-acct-mover"></require>\n  <require from="au-components/au-popup-acct-picker"></require>\n  <require from="au-components/au-popup-bchg-mover"></require>\n  <require from="au-views/au-icon-nav-up.html"></require>\n  <require from="au-views/au-icon-nav-down.html"></require>\n  <require from="au-views/au-icon-map-marker.html"></require>\n  <require from="au-views/au-icon-map-marker-hidden.html"></require>\n  <style>\n    .aaAppTitleBar {\n      margin-top: 2ch;\n      padding: 0.25pc;\n      color: #000;\n      font-family: Arial, Helvetica, sans-serif, SansSerif;\n      font-weight: normal;\n      letter-spacing: 2px;\n      font-size: 200%;\n      align-self: stretch;\n    }\n\n    .aaNavRibbon {\n      display: inline-flex;\n      flex-direction: row;\n      align-self: stretch;\n      justify-content: center;\n      /*background-color: #fff;*/\n      padding: 0.5pc;\n      /*border-bottom: 1px solid #4980B6;*/\n    }\n\n    .aaNavigator {\n      display: inline-flex;\n      flex-direction: column;\n      align-items: center;\n      align-self: stretch;\n      background-color: #fff;\n      padding: 1ch;\n      font-family: Arial, Helvetica, sans-serif, SansSerif;\n      font-size: medium;\n      font-weight: normal;\n      border: 0.25ch solid #4980B6;\n      border-radius: 1ch;\n      /*-webkit-box-shadow: 4px 8px 5px 0px rgba(0, 0, 0, 0.2);\n      -moz-box-shadow: 4px 8px 5px 0px rgba(0, 0, 0, 0.2);\n      box-shadow: 4px 8px 5px 0px rgba(0, 0, 0, 0.2);*/\n    }\n\n    .aaNavMapHeader {\n      display: inline-flex;\n      flex-direction: row;\n      align-items: center;\n      letter-spacing: 2px;\n      font-weight: bold;\n    }\n\n    .aaNavMapBody {\n      display: inline-flex;\n      flex-direction: row;\n      align-items: flex-start;\n      column-gap: 1.3ch;\n    }\n\n    .aaNavModuleColumn {\n      display: inline-flex;\n      flex-direction: column;\n      align-items: center;\n      row-gap: 0.7ch;\n    }\n\n    .aaNavMapCell {\n      display: inline-flex;\n      flex-direction: row;\n      align-items: center;\n      column-gap: 1ch;\n      height: 25px;\n      letter-spacing: 1px;\n    }\n\n    .aaNavMapBtn {\n      padding: 0 5px;\n      letter-spacing: 1px;\n      border: 1px solid black;\n      border-radius: 0.25pc;\n      background-color: #fff;\n      white-space: nowrap;\n    }\n\n    .aaNavMapBtn:hover {\n      -webkit-box-shadow: 0 0 0 2px #4980B6;\n      -moz-box-shadow: 0 0 0 2px #4980B6;\n      box-shadow: 0 0 0 2px #4980B6;\n      padding: 0 5px;\n      color: #000;\n      letter-spacing: 1px;\n      border-color: #4980B6;\n    }\n\n    .aaNavMapBtn:active {\n      color: #fff;\n      background-color: #4980B6;\n    }\n\n    .aaNavMapBtn:disabled {\n      -webkit-box-shadow: none;\n      -moz-box-shadow: none;\n      box-shadow: none;\n      border-color: #bbb;\n      color: #bbb;\n      cursor: not-allowed;\n      /*background-color: #fff;*/\n      background-color: transparent;\n    }\n\n    .aaNavMapBtnHover {\n      -webkit-box-shadow: 0 0 0 2px #4980B6;\n      -moz-box-shadow: 0 0 0 2px #4980B6;\n      box-shadow: 0 0 0 2px #4980B6;\n      padding: 0 5px;\n      color: #000;\n      letter-spacing: 1px;\n      border-color: #4980B6;\n    }\n\n    .aaNavMapBtnSelected {\n      /*outline: 2px solid #4980B6;*/\n      /*outline-radius: 0.25pc;*/\n      -webkit-box-shadow: 0 0 0 2px #4980B6;\n      -moz-box-shadow: 0 0 0 2px #4980B6;\n      box-shadow: 0 0 0 2px #4980B6;\n      padding: 0 5px;\n      color: #000;\n      background-color: #EDF2F7;\n      letter-spacing: 1px;\n      /*text-shadow: 1px 1px 0 #000;*/\n      /*background-color: #4980B6;*/\n      border-color: #4980B6;\n      /*font-weight: bold;*/\n      /*-webkit-box-shadow: 0px 0px 3px 1px #4980B6;*/\n      /*-moz-box-shadow: 0px 0px 3px 1px #4980B6;*/\n      /*box-shadow: 0px 0px 2px 2px #4980B6;*/\n    }\n\n    .aaNavMapBtnSelected:disabled {\n    }\n\n    .aaNavMapArrow {\n      display: inline-flex;\n      color: #333;\n      padding: 2px 0.25pc;\n      margin: 0 0.25pc;\n      text-align: center;\n      white-space: nowrap;\n      vertical-align: top;\n      -webkit-user-select: none;\n      -moz-user-select: none;\n      -ms-user-select: none;\n      user-select: none;\n      background-image: none;\n      border: 1px solid transparent;\n      border-radius: 0.25pc;\n      background-clip: border-box;\n      background-color: transparent;\n      outline-width: 0;\n      font-family: Arial, Helvetica, sans-serif, SansSerif;\n      font-weight: normal;\n      font-size: medium;\n    }\n\n    .aaNavMapArrow:hover {\n      border-color: #333;\n      cursor: pointer;\n    }\n  </style>\n  <div style="display: flex;\n              flex-direction: column;\n              align-items: center;">\n    <div class="aaAppTitleBar">\n      ${data.entityName}\n    </div>\n    <div class="aaNavRibbon"\n         element.ref="elementNavRibbon">\n      <div class="aaNavigator">\n        <div class="aaNavMapHeader">Navigation map</div>\n        <div class="aaNavMapBody">\n          \x3c!-- Column 1: Asssts = Eqities --\x3e\n          <div class="aaNavModuleColumn">\n            <div class="aaNavMapCell">\n              <template if.bind="selectedModule == MODULE_FAE">\n                <au-icon-map-marker></au-icon-map-marker>\n                <button type="button"\n                        class="aaNavMapBtn aaNavMapBtnSelected">\n                  Assets = Equities\n                </button>\n              </template>\n              <template if.bind="selectedModule !== MODULE_FAE">\n                <au-icon-map-marker-hidden></au-icon-map-marker-hidden>\n                <button type="button"\n                        class="aaNavMapBtn"\n                        click.trigger="goFaeModule($event)"\n                        element.ref="navBtnFae">\n                  Assets = Equities\n                </button>\n              </template>\n            </div>\n          </div>\n          \x3c!-- Column 2: Account --\x3e\n          <div class="aaNavModuleColumn">\n            \x3c!-- Row 1: Up button --\x3e\n            <div class="aaNavMapCell">\n              <button type="button"\n                      class="aaNavMapArrow ${selectedModule != MODULE_ACCT ||\n                             selectedAcct.id == filteredAcctList[0].id ? \'aaHidden\' : \'\'}"\n                      click.trigger="goPrevAcct($event)"\n                      title="Go to previous account in list">\n                <au-icon-nav-up></au-icon-nav-up>\n              </button>\n            </div>\n            \x3c!-- Row 2: Go-to button --\x3e\n            <div class="aaNavMapCell">\n              <template if.bind="selectedAcct">\n                <template if.bind="selectedModule == MODULE_ACCT">\n                  <au-icon-map-marker></au-icon-map-marker>\n                  <button type="button"\n                          class="aaNavMapBtn aaNavMapBtnSelected">\n                    Account\n                  </button>\n                </template>\n                <template if.bind="selectedModule !== MODULE_ACCT">\n                  <au-icon-map-marker-hidden></au-icon-map-marker-hidden>\n                  <button type="button"\n                          class="aaNavMapBtn"\n                          click.trigger="goAcctModule($event)">\n                    Account\n                  </button>\n                </template>\n              </template>\n              <template if.bind="!selectedAcct">\n                <au-icon-map-marker-hidden></au-icon-map-marker-hidden>\n                <button type="button"\n                        class="aaNavMapBtn"\n                        disabled>\n                  Account\n                </button>\n              </template>\n            </div>\n            \x3c!-- Row 3: Down button --\x3e\n            <div class="aaNavMapCell">\n              <button type="button"\n                      class="aaNavMapArrow ${selectedModule != MODULE_ACCT ||\n                             selectedAcct.id == filteredAcctList[filteredAcctList.length - 1].id ? \'aaHidden\' : \'\'}"\n                      click.trigger="goNextAcct($event)"\n                      title="Go to next account in list">\n                <au-icon-nav-down></au-icon-nav-down>\n              </button>\n            </div>\n          </div>\n          \x3c!-- Column 3: Account balance change --\x3e\n          <div class="aaNavModuleColumn">\n            \x3c!-- Row 1: blank --\x3e\n            <div class="aaNavMapCell">&nbsp;</div>\n            \x3c!-- Row 2: blank --\x3e\n            <div class="aaNavMapCell">&nbsp;</div>\n            \x3c!-- Row 3: Go-to button --\x3e\n            <div class="aaNavMapCell">\n              <template if.bind="selectedBchg">\n                <template if.bind="selectedModule == MODULE_BCHG">\n                  <au-icon-map-marker></au-icon-map-marker>\n                  <button type="button"\n                          class="aaNavMapBtn aaNavMapBtnSelected">\n                    Account balance change\n                  </button>\n                </template>\n                <template if.bind="selectedModule !== MODULE_BCHG">\n                  <au-icon-map-marker-hidden></au-icon-map-marker-hidden>\n                  <button type="button"\n                          class="aaNavMapBtn"\n                          click.trigger="goBchgModule($event)">\n                    Account balance change\n                  </button>\n                </template>\n                <template if.bind="!selectedBchg">\n                  <au-icon-map-marker-hidden></au-icon-map-marker-hidden>\n                  <button type="button"\n                          class="aaNavMapBtn"\n                          disabled>\n                    Account balance change\n                  </button>\n                </template>\n              </template>\n              <template if.bind="!selectedBchg ">\n                <au-icon-map-marker-hidden></au-icon-map-marker-hidden>\n                <button type="button"\n                        class="aaNavMapBtn"\n                        disabled>\n                  Account balance change\n                </button>\n              </template>\n            </div>\n          </div>\n          \x3c!-- Column 4: Transaction --\x3e\n          <div class="aaNavModuleColumn">\n            \x3c!-- Row 1: Up button --\x3e\n            <div class="aaNavMapCell">\n              <button type="button"\n                      class="aaNavMapArrow ${selectedModule != MODULE_TRAN ||\n                             selectedTran.id == data.jrnl.tranList[0].id ? \'aaHidden\' : \'\'}"\n                      click.trigger="goPrevTran($event)"\n                      title="Go to previous transaction">\n                <au-icon-nav-up></au-icon-nav-up>\n              </button>\n            </div>\n            \x3c!-- Row 2: Go-to button --\x3e\n            <div class="aaNavMapCell">\n              <template if.bind="selectedTran">\n                <template if.bind="selectedModule == MODULE_TRAN">\n                  <au-icon-map-marker></au-icon-map-marker>\n                  <button type="button"\n                          class="aaNavMapBtn aaNavMapBtnSelected">\n                    Transaction\n                  </button>\n                </template>\n                <template if.bind="selectedModule !== MODULE_TRAN">\n                  <au-icon-map-marker-hidden></au-icon-map-marker-hidden>\n                  <button type="button"\n                          class="aaNavMapBtn"\n                          click.trigger="goTranModule($event)">\n                    Transaction\n                  </button>\n                </template>\n              </template>\n              <template if.bind="!selectedTran">\n                <au-icon-map-marker-hidden></au-icon-map-marker-hidden>\n                <button type="button"\n                        class="aaNavMapBtn"\n                        disabled>\n                  Transaction\n                </button>\n              </template>\n            </div>\n            \x3c!-- Row 3: Down button --\x3e\n            <div class="aaNavMapCell">\n              <button type="button"\n                      class="aaNavMapArrow ${selectedModule != MODULE_TRAN ||\n                             selectedTran.id == data.jrnl.tranList[data.jrnl.tranList.length - 1].id ? \'aaHidden\' : \'\'}"\n                      click.trigger="goNextTran($event)"\n                      title="Go to next transaction">\n                <au-icon-nav-down></au-icon-nav-down>\n              </button>\n            </div>\n          </div>\n\x3c!--\n          <div class="aaNavModuleColumn">\n            <div class="aaNavMapCell">\n              <button type="button"\n                      class="aaNavMapArrow ${selectedModule != MODULE_TRAN ||\n                                   selectedTran.id == data.jrnl.tranList[0].id ?\n                                   \'aaHidden\' : \'\'}"\n                      click.trigger="goPrevTran($event)"\n                      title="Go to previous transaction">\n                <au-icon-nav-up></au-icon-nav-up>\n              </button>\n            </div>\n            <div class="aaNavMapCell">\n              <i class="fas fa-map-marker-alt ${!selectedTran ? \'aaHidden\' : \'\'}"\n                 css="color: ${selectedModule == MODULE_TRAN ? \'#009\' : \'transparent\'};\n             font-size: large;\n             margin-right: 5px"></i>\n              <template if.bind="selectedTran">\n                <button type="button"\n                        class="aaNavMapBtn ${selectedModule == MODULE_TRANG ? \'aaNavMapBtnSelected\' : \'\'}"\n                        click.trigger="goTranModule($event)">\n                  Transaction\n                </button>\n              </template>\n              <template if.bind="!selectedTran ">\n                <button type="button"\n                        class="aaNavMapBtn ${selectedModule == MODULE_TRAN ? \'aaNavMapBtnSelected\' : \'\'}"\n                        css="-webkit-box-shadow: none; -moz-box-shadow: none; box-shadow: none;"\n                        disabled>\n                  Transaction\n                </button>\n              </template>\n              &lt;!&ndash;\n                            <button type="button"\n                                    class="aaNavMapBtn ${selectedModule == MODULE_TRAN ? \'aaNavMapBtnSelected\' : \'\'}"\n                                    click.trigger="goTranModule($event)"\n                                    element.ref="navBtnTran">\n                              Transaction\n                            </button>\n              &ndash;&gt;\n            </div>\n            <div class="aaNavMapCell">\n              <button type="button"\n                      class="aaNavMapArrow ${selectedModule != MODULE_TRAN ||\n                                   selectedTran.id == data.jrnl.tranList[data.jrnl.tranList.length - 1].id ?\n                                   \'aaHidden\' : \'\'}"\n                      click.trigger="goNextTran($event)"\n                      title="Go to next transaction">\n                <au-icon-nav-down></au-icon-nav-down>\n              </button>\n            </div>\n          </div>\n--\x3e\n          \x3c!-- Column 5: Transaaction Joutnal --\x3e\n          <div class="aaNavModuleColumn">\n            <div class="aaNavMapCell">\n              <template if.bind="selectedModule == MODULE_JRNL">\n                <au-icon-map-marker></au-icon-map-marker>\n                <button type="button"\n                        class="aaNavMapBtn aaNavMapBtnSelected"\n                        element.ref="navBtnFae">\n                  Transaction journal\n                </button>\n              </template>\n              <template if.bind="selectedModule !== MODULE_JRNL">\n                <au-icon-map-marker-hidden></au-icon-map-marker-hidden>\n                <button type="button"\n                        class="aaNavMapBtn"\n                        click.trigger="goJrnlModule($event)"\n                        element.ref="navBtnFae">\n                  Transaction journal\n                </button>\n              </template>\n\n              \x3c!--\n                            <i class="fas fa-map-marker-alt ${selectedModule == MODULE_JRNL ? \'\' : \'aaHidden\'}"\n                               css="font-size: large;\n                                    margin-right: 5px;"></i>\n                            <button type="button"\n                                    class="aaNavMapBtn ${selectedModule == MODULE_JRNL ? \'aaNavMapBtnSelected\' : \'\'}"\n                                    click.trigger="goJrnlModule($event)"\n                                    element.ref="navBtnJrnl">\n                              Transaction journal\n                            </button>\n              --\x3e\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class="aaPanelContainer">\n      <au-module-fae view-model.ref="viewmodelFae"></au-module-fae>\n      <au-module-acct view-model.ref="viewmodelAcct"></au-module-acct>\n      <au-module-bchg view-model.ref="viewmodelBchg"></au-module-bchg>\n      <au-module-tran view-model.ref="viewmodelTran"></au-module-tran>\n      <au-module-jrnl view-model.ref="viewmodelJrnl"></au-module-jrnl>\n    </div>\n  </div>\n  <au-popup-alert view-model.ref="viewmodelPopupAlert"></au-popup-alert>\n  <au-popup-acct-mover view-model.ref="viewmodelPopupAcctMover"></au-popup-acct-mover>\n  <au-popup-acct-picker view-model.ref="viewmodelPopupAcctPicker"></au-popup-acct-picker>\n  <au-popup-bchg-mover view-model.ref="viewmodelPopupBchgMover"></au-popup-bchg-mover>\n</template>\n'},"au-attributes/au-fae-side-data":function(t,e,n){"use strict";n.r(e),n.d(e,"AuFaeSideData",(function(){return a}));var r=n("aurelia-framework"),i=n("au-components/au-fae-side"),o=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};let a=class{constructor(t){this.auFaeSide=t}bind(){this.auFaeSide.faeSide=this.value}};a=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}([Object(r.c)("au-fae-side-data"),Object(r.e)(i.AuFaeSide),o("design:paramtypes",[i.AuFaeSide])],a)},"au-components/au-fae-side":function(t,e,n){"use strict";n.r(e),n.d(e,"AuFaeSide",(function(){return l}));var r=n("aurelia-framework"),i=n(12),o=n(4),a=n("app"),s=n("au-components/au-module-fae"),c=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},u=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};let l=class{constructor(t,e){this.Acct=o.a,this.Annotation=o.b,this.app=t,this.auModuleFae=e}onRowEnter(t,e){t.target.children[2].classList.toggle("aaRowDataHover",!0)}onRowLeave(t,e){t.target.children[2].classList.toggle("aaRowDataHover",!1)}onTitleFocus(t,e){this.app.candidateSelectedAcct=e}onRowOpsOpen(t,e){this.rowOpsBoundingClientRect=t.target.parentElement.getBoundingClientRect(),this.rowOpsMenuModal.style.display="block"}onRowOpsCancel(t){t.target==this.rowOpsMenuModal&&(this.rowOpsMenuModal.style.display="none")}acctNew(t,e){let n,r;n=e?e.intraSideIndex:this.faeSide.acctList.length,r=new o.a(`acct${this.app.data.nextAcctId}`,this.faeSide,0,"",1),this.faeSide.acctList.splice(n,0,r),this.faeSide.reindexAcctList(),this.app.candidateSelectedAcct=r,this.auModuleFae.observeForSetInputFocus()}annotationNew(t,e){let n,r;n=e?e.intraSideIndex:this.faeSide.acctList.length,r=new o.b(`anno${this.app.data.nextAcctId}`,this.faeSide,0,""),this.faeSide.acctList.splice(n,0,r),this.faeSide.reindexAcctList(),this.app.candidateSelectedAcct=r,this.auModuleFae.observeForSetInputFocus()}listItemDelete(t,e){let n=e.intraSideIndex;this.faeSide.acctList.splice(n,1),this.faeSide.reindexAcctList()}};c([r.b,u("design:type",i.a)],l.prototype,"faeSide",void 0),l=c([Object(r.d)("au-fae-side"),Object(r.e)(a.App,s.AuModuleFae),u("design:paramtypes",[Object,Object])],l)},"au-components/au-fae-side-edit":function(t,e,n){"use strict";n.r(e),n.d(e,"AuFaeSideEdit",(function(){return l}));var r=n("aurelia-framework"),i=n(12),o=n(4),a=n("app"),s=n("au-components/au-module-fae"),c=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},u=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};let l=class{constructor(t,e){this.Acct=o.a,this.Annotation=o.b,this.mutationObserver=new MutationObserver(this.onMutation),this.app=t,this.auModuleFae=e}bind(){this.candidateFaeSide=this.faeSide.clone()}missingTitleCnt(){let t=0;for(let e of this.candidateFaeSide.acctList)e instanceof o.a&&(e.title=e.title.trim(),0==e.title.length&&t++);return t}saveChanges(){let t=[];for(let e of this.faeSide.acctList){let n=this.candidateFaeSide.acctList.find(t=>t.id==e.id);void 0===n?t.push(e):(e.intraSideIndex=n.intraSideIndex,e instanceof o.a?e.title=n.title:e instanceof o.b&&(e.annoText=n.annoText))}for(let e of t){let t=this.faeSide.acctList.indexOf(e);this.faeSide.acctList.splice(t,1)}for(let t of this.candidateFaeSide.acctList){void 0===this.faeSide.acctList.find(e=>e.id==t.id)&&this.faeSide.acctList.push(t)}this.faeSide.sortAcctList(),this.faeSide.reindexAcctList(),this.candidateFaeSide=null}cancel(){this.candidateFaeSide=null}onRowEnter(t,e){t.target.children[2].classList.toggle("aaRowDataHover",!0)}onRowLeave(t,e){t.target.children[2].classList.toggle("aaRowDataHover",!1)}onTitleFocus(t,e){this.candidateSelectedAcct=e}onRowOpsOpen(t,e){this.rowOpsBoundingClientRect=t.target.parentElement.getBoundingClientRect(),this.rowOpsMenuModal.style.display="block"}onRowOpsCancel(t){t.target==this.rowOpsMenuModal&&(this.rowOpsMenuModal.style.display="none")}acctNew(t,e){let n,r;this.mutationObserver.observe(this.divGridRows,{subtree:!1,childList:!0}),n=e?e.intraSideIndex:this.candidateFaeSide.acctList.length,r=new o.a(`acct${this.app.data.nextAcctId}`,this.candidateFaeSide,0,"",1),this.mutationObserver.inputId=`${r.id}-title`,this.candidateFaeSide.acctList.splice(n,0,r),this.candidateFaeSide.reindexAcctList(),this.candidateSelectedAcct=r}annotationNew(t,e){let n,r;this.mutationObserver.observe(this.divGridRows,{subtree:!1,childList:!0}),n=e?e.intraSideIndex:this.candidateFaeSide.acctList.length,r=new o.b(`anno${this.app.data.nextAcctId}`,this.candidateFaeSide,0,""),this.mutationObserver.inputId=`${r.id}-annoText`,this.candidateFaeSide.acctList.splice(n,0,r),this.candidateFaeSide.reindexAcctList()}listItemDelete(t,e){let n=e.intraSideIndex;this.candidateFaeSide.acctList.splice(n,1),this.candidateFaeSide.reindexAcctList()}onMutation(t,e){console.log("************ mutationsList *********************"),console.log(t);let n=document.getElementById(e.inputId);n?n.focus():console.log("element not found"),e.disconnect()}};c([r.b,u("design:type",i.a)],l.prototype,"faeSide",void 0),l=c([Object(r.d)("au-fae-side-edit"),Object(r.e)(a.App,s.AuModuleFae),u("design:paramtypes",[Object,Object])],l)},"au-components/au-fae-side-edit.html":function(t,e,n){t.exports='<template>\n  <require from="au-views/au-icon-edit.html"></require>\n  <require from="au-views/au-icon-mover-rowops.html"></require>\n  <require from="au-views/au-icon-new.html"></require>\n  <require from="au-views/au-icon-delete.html"></require>\n  <require from="au-views/au-text-ellipsis.html"></require>\n  <require from="au-converters/au-currency-converter"></require>\n  <require from="au-converters/au-equation-side-converter"></require>\n  <require from="au-components/au-popup-acct-mover"></require>\n\n  <h1 css="margin: 0; text-align: ${faeSide.id == \'Assets\' ? \'right\' : \'left\'};">\n    ${faeSide.id}\n  </h1>\n  <div class="aaGridContainer">\n    <div class="aaGridTitleBar" style="font-size: larger;">${faeSide.id | auEquationSideConverter:true: false}\n      accounts\n    </div>\n    <div class="aaRow aaRowColumnHeaders">\n      <div class="aaRowOps aaHidden">\n          <span class="aaBtn">\n                      <au-icon-new></au-icon-new>\n                    </span>\n        <span class="aaBtn">\n                      <au-icon-new></au-icon-new>\n                    </span>\n        <span class="aaBtn">\n                      <au-icon-delete></au-icon-delete>\n                    </span>\n      </div>\n      <div class="aaVerticalGridline" style="background-color: #fff;" element.ref="popupLeft"></div>\n      <div class="aaRowData aaFontLabel aaFontBold">\n        <div class="aaCell aaCellAcctTitle aaCellInGrid">Title</div>\n        <div class="aaVerticalGridline" style="background-color: #fff;"></div>\n        <div class="aaCell aaCellBchgBal">Balance</div>\n        <div class="aaVerticalGridline" style="background-color: #fff;"></div>\n      </div>\n    </div>\n    <div element.ref="divGridRows"\n         class="aaGridScrollableRows aaGridHeightInFaeSide">\n      <template repeat.for="listItem of candidateFaeSide.acctList">\n        \x3c!--\n        NOTE: This datagrid is NOT in navigating mode, so the following row element must NOT have\n\n                     click.trigger="app.selectAcct(listItem)"\n\n              as usual for in the navigating mode. While editing I use candidateSelectedAcct,\n              and if the user cancels editing, I need selectedAcct to have its saved value to restore from.\n              If the above click.trigger were included in the row element and user clicks on a row,\n              that would overwrite the saved value of selectedAcct.\n        --\x3e\n        <div class="aaRow"\n             id="${listItem.id}"\n             mouseenter.trigger="onRowEnter($event, listItem)"\n             mouseleave.trigger="onRowLeave($event, listItem)">\n          <template if.bind="listItem.isAcct()">\n            <div class="aaRowOps aaBgColorToolbar aaFontLabel">\n                <span class="aaBtn"\n                      title="Insert new account row..."\n                      click.trigger="acctNew($event, listItem)">\n                  <au-icon-new></au-icon-new>\n                </span>\n              <span class="aaBtn"\n                    title="Insert new annotation row..."\n                    click.trigger="annotationNew($event, listItem)">\n                  <au-icon-new></au-icon-new>\n                </span>\n              <span class="aaBtn ${listItem.bchgList.length > 0 ? \'aaHidden\' : \'\'}"\n                    title="Delete row..."\n                    click.trigger="listItemDelete($event, listItem)">\n                  <au-icon-delete></au-icon-delete>\n                </span>\n            </div>\n            <div class="aaVerticalGridline"></div>\n            <div class="aaRowData aaRowBgColorData">\n              <input class="aaFormInputText aaCellAcctTitle aaCellInGrid"\n                     id="${listItem.id}-title"\n                     type="text"\n                     placeholder="Account title"\n                     focus.trigger="onTitleFocus($event, listItem)"\n                     value.two-way="listItem.title">\n              <div class="aaVerticalGridline"></div>\n              <span class="aaCell aaCellBchgBal">${listItem.endingBalance | auCurrencyConverter}</span>\n            </div>\n            <div class="aaVerticalGridline"></div>\n          </template>\n          <template if.bind="listItem.isAnnotation()">\n            <div class="aaRowOps aaBgColorToolbar aaFontLabel">\n                <span class="aaBtn"\n                      title="Insert new account row..."\n                      click.trigger="acctNew($event, listItem)">\n                  <au-icon-new></au-icon-new>\n                </span>\n              <span class="aaBtn"\n                    title="Insert new annotation row..."\n                    click.trigger="annotationNew($event, listItem)">\n                  <au-icon-new></au-icon-new>\n                </span>\n              <span class="aaBtn"\n                    title="Delete row..."\n                    click.trigger="listItemDelete($event, listItem)">\n                  <au-icon-delete></au-icon-delete>\n                </span>\n            </div>\n            <div class="aaVerticalGridline"></div>\n            <div class="aaRowData aaRowBgColorData">\n              <input class="aaFormInputText aaCellAnnoTitle aaCellInGrid"\n                     id="${listItem.id}-annoText"\n                     type="text"\n                     placeholder="Annotation text"\n                     focus.trigger="onTitleFocus($event, listItem)"\n                     value.two-way="listItem.annoText">\n              <div class="aaVerticalGridline"></div>\n              <span class="aaCell aaCellBchgBal"></span>\n            </div>\n            <div class="aaVerticalGridline"></div>\n          </template>\n        </div>\n      </template>\n      \x3c!-- End of list row --\x3e\n      <div class="aaRow"\n           mouseenter.trigger="onRowEnter($event, null)"\n           mouseleave.trigger="onRowLeave($event, null)">\n        <div class="aaRowOps aaBgColorToolbar aaFontLabel">\n              <span class="aaBtn"\n                    title="Insert new account row"\n                    click.trigger="acctNew($event, null)">\n                <au-icon-new></au-icon-new>\n              </span>\n          <span class="aaBtn"\n                title="Insert new annotation row"\n                click.trigger="annotationNew($event, null)">\n              <au-icon-new></au-icon-new>\n            </span>\n          <span class="aaBtn aaHidden">\n              <au-icon-delete></au-icon-delete>\n            </span>\n        </div>\n        <div class="aaVerticalGridline"></div>\n        <div class="aaRowData aaHidden">\n          <span class="aaCell aaCellAcctTitle aaCellInGrid">x</span>\n          <div class="aaVerticalGridline"></div>\n          <span class="aaCell aaCellBchgBal">0</span>\n        </div>\n        <div class="aaVerticalGridline"></div>\n      </div>\n      <template if.bind="faeSide.acctList.length == 0">\n        <div class="aaRow aaHidden">\n          <div class="aaRowOps aaRowOpsEmpty">\n          </div>\n          <div class="aaVerticalGridline"></div>\n          <div class="aaRowData aaRowBgColorData">\n            <span class="aaCell aaCellAcctTitle aaCellInGrid">x</span>\n            <div class="aaVerticalGridline"></div>\n            <span class="aaCell aaCellBchgBal">0</span>\n          </div>\n          <div class="aaVerticalGridline"></div>\n        </div>\n    </div>\n    <div class="aaGridFooterBar"></div>\n  </div>\n  \x3c!--<div class="aaGridTotals">--\x3e\n  <div class="aaGridContainer" style="border-color: transparent; background-color: transparent;">\n    <div class="aaRow" style="border-bottom-color: transparent; background-color: transparent;">\n      <template if.bind="app.viewNavMode">\n        <div class="aaRowOps aaRowOpsEmpty aaHidden">\n        </div>\n      </template>\n      <template if.bind="!app.viewNavMode">\n        <div class="aaRowOps aaHidden aaFontLabel">\n          <span class="aaBtn"\n                type="button">\n            <au-icon-new></au-icon-new>\n          </span>\n          <span class="aaBtn"\n                type="button">\n            <au-icon-new></au-icon-new>\n          </span>\n          <span class="aaBtn"\n                type="button">\n            <au-icon-delete></au-icon-delete>\n          </span>\n        </div>\n      </template>\n      <div class="aaVerticalGridline aaHidden"></div>\n      <div class="aaRowData">\n        <span class="aaCell aaCellAcctTitle" style="text-align: right;"><span\n          class="aaFontLabel">Total:</span></span>\n        <div class="aaVerticalGridline aaHidden"></div>\n        <span class="aaCell aaCellBchgBal">${faeSide.listTotal | auCurrencyConverter}</span>\n      </div>\n      <div class="aaVerticalGridline aaHidden"></div>\n    </div>\n  </div>\n</template>\n\n<div element.ref="rowOpsMenuModal" class="aaModal"\n     style="background: transparent;"\n     click.delegate="onRowOpsCancel($event)">\n  <div element.ref="rowOpsMenuContent"\n       css="display: inline-block;\n         text-align: left;\n         position: fixed;\n         top: ${rowOpsBoundingClientRect.top}px;\n         left: ${rowOpsBoundingClientRect.left}px">\n    \x3c!--\n            <span class="aaBtn" click.delegate="onRowOpsClose($event)">\n                <i class="fa fa-bars fa-fw" aria-hidden="true"></i></span>\n    --\x3e\n    <div class="btn-group">\n      \x3c!--\n              <a class="aaBtn dropdown-toggle" data-toggle="dropdown">\n                <span class="fa fa-bars fa-fw" aria-hidden="true"></span>\n              </a>\n      --\x3e\n      <ul class="dropdown-menu aaSansSerif" style="display: block; font-family: ">\n        <li><a><i class="fa fa-plus-circle fa-fw aaIconGreen"></i> Insert new account row</a></li>\n        <li><a><i class="fa fa-plus-circle fa-fw aaIconGreen"></i> Insert new annotation row</a></li>\n        <li class="divider"></li>\n        <li><a><i class="fa fa-minus-circle fa-fw aaIconRed"></i> Delete row...</a></li>\n      </ul>\n    </div>\n  </div>\n</div>\n\n</template>\n'},"au-components/au-fae-side-move":function(t,e,n){"use strict";n.r(e),n.d(e,"AuFaeSideMove",(function(){return l}));var r=n("aurelia-framework"),i=n(12),o=n(4),a=n("app"),s=n("au-components/au-module-fae"),c=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},u=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};let l=class{constructor(t,e){this.Acct=o.a,this.Annotation=o.b,this.mouseIsDown=!1,this.selectedMoverRow=null,this.rowEnterCnt=0,this.app=t,this.auModuleFae=e}saveChanges(){for(let t=0;t<this.divScrollableRows.children.length-1;t++){this.faeSide.acctList.find(e=>e.id==this.divScrollableRows.children[t].id).intraSideIndex=t}this.faeSide.sortAcctList()}cancel(){}onRowMouseDown(t){let e=t.currentTarget;e.children[0].classList.toggle("aaRowOpsMoverSelected",!0),e.children[2].classList.toggle("aaDragging",!0),e.children[2].classList.toggle("aaRowDataHover",!1),this.mouseIsDown=!0,this.selectedMoverRow=t.currentTarget}onRowMouseUp(t){let e=t.currentTarget;e.children[0].classList.toggle("aaRowOpsMoverSelected",!1),e.children[2].classList.toggle("aaDragging",!1),e.children[2].classList.toggle("aaRowDataHover",!0),this.mouseIsDown=!1,this.selectedMoverRow=null}onRowMouseLeave(t,e){if(!this.mouseIsDown){t.currentTarget.children[2].classList.toggle("aaRowDataHover",!1)}}onRowMouseEnter(t,e){let n=t.currentTarget;if(this.mouseIsDown&&this.selectedMoverRow)this.selectedMoverRow.previousElementSibling&&this.selectedMoverRow.previousElementSibling.id==n.id?(this.divScrollableRows.insertBefore(this.selectedMoverRow,n),this.selectedMoverRow.scrollIntoView({block:"center"})):this.selectedMoverRow.nextElementSibling&&this.selectedMoverRow.nextElementSibling.id==n.id&&(this.selectedMoverRow.parentElement.insertBefore(this.selectedMoverRow,n.nextSibling),this.selectedMoverRow.scrollIntoView({block:"nearest"}));else{t.currentTarget.children[2].classList.toggle("aaRowDataHover",!0)}}onListMouseLeave(t){this.mouseIsDown&&this.selectedMoverRow&&(this.selectedMoverRow.scrollIntoView({block:"center"}),this.selectedMoverRow.children[0].classList.toggle("aaRowOpsMoverSelected",!1),this.selectedMoverRow.children[2].classList.toggle("aaDragging",!1),this.selectedMoverRow.children[0].classList.toggle("aaRowDataHover",!1),this.mouseIsDown=!1,this.selectedMoverRow=null)}onTransparentRowMouseEnter(t){this.mouseIsDown&&this.selectedMoverRow&&(this.selectedMoverRow.children[0].classList.toggle("aaRowOpsMoverSelected",!1),this.selectedMoverRow.children[2].classList.toggle("aaDragging",!1),this.selectedMoverRow.children[0].classList.toggle("aaRowDataHover",!1),this.mouseIsDown=!1,this.selectedMoverRow=null)}};c([r.b,u("design:type",i.a)],l.prototype,"faeSide",void 0),l=c([Object(r.d)("au-fae-side-move"),Object(r.e)(a.App,s.AuModuleFae),u("design:paramtypes",[Object,Object])],l)},"au-components/au-fae-side-move.html":function(t,e,n){t.exports='<template>\n  <require from="au-views/au-icon-mover-rowops.html"></require>\n  <require from="au-views/au-icon-mover-toolbar.html"></require>\n  <require from="au-views/au-icon-mover-rowops-transparent.html"></require>\n  <require from="au-views/au-text-ellipsis.html"></require>\n  <require from="au-converters/au-currency-converter"></require>\n  <require from="au-converters/au-equation-side-converter"></require>\n\n  <h1 css="margin: 0; text-align: ${faeSide.id == \'Assets\' ? \'right\' : \'left\'};">\n    ${faeSide.id}\n  </h1>\n  <div class="aaGridContainer">\n    <div class="aaGridTitleBar" style="font-size: larger;">\n      ${faeSide.id | auEquationSideConverter:true: false} accounts\n    </div>\n\x3c!--\n    <div class="aaPanelToolBar" style="text-align: center;">\n      <span class="aaFontLabel">&mdash; Drag & drop row(s) to desired list position(s). &mdash;</span>\n    </div>\n--\x3e\n    <div class="aaRow aaRowColumnHeaders">\n      <div class="aaRowOps aaRowOpsMover aaHidden">\n        <au-icon-mover-rowops></au-icon-mover-rowops>\n      </div>\n      <div class="aaVerticalGridline"></div>\n      <div class="aaRowData aaFontLabel aaFontBold">\n        <div class="aaCell aaCellAcctTitle">Title</div>\n        <div class="aaVerticalGridline"></div>\n        <div class="aaCell aaCellBchgBal">Balance</div>\n        <div class="aaVerticalGridline"></div>\n      </div>\n    </div>\n    <div class="aaGridScrollableRows aaGridHeightInFaeSide"\n         element.ref="divScrollableRows"\n         mouseleave.trigger="onListMouseLeave($event)">\n      <template repeat.for="listItem of faeSide.acctList">\n        <div id="${listItem.id}"\n             class="aaRow"\n             list-item.to-view="listItem"\n             mouseenter.trigger="onRowMouseEnter($event, listItem)"\n             mouseleave.trigger="onRowMouseLeave($event, listItem)"\n             mousedown.trigger="onRowMouseDown($event)"\n             mouseup.trigger="onRowMouseUp($event)">\n          <div class="aaRowOps aaRowOpsMover">\n            <au-icon-mover-rowops></au-icon-mover-rowops>\n          </div>\n          <div class="aaVerticalGridline"></div>\n          <div class="aaRowData aaRowBgColorData">\n            <template if.bind="listItem.isAcct()">\n              <span class="aaCell aaFontData aaCellAcctTitle">${listItem.title}</span>\n              <div class="aaVerticalGridline"></div>\n              <span class="aaCell aaFontData aaCellBchgBal">${listItem.endingBalance | auCurrencyConverter}</span>\n            </template>\n            <template if.bind="listItem.isAnnotation()">\n              <span class="aaCell aaFontData aaCellAnnoTitle">${listItem.annoText}</span>\n              <div class="aaVerticalGridline"></div>\n              <span class="aaCell aaFontData aaCellBchgBal"></span>\n            </template>\n            <div class="aaVerticalGridline"></div>\n          </div>\n        </div>\n      </template>\n      \x3c!--\n      The following row serves to end any downward dragging operation when it reaches this last row\n      with its "mouseenter" vent handler. This row must not be hidden in order to fire the "mouseenter"\n       event, but I simulate "hidden" by making the color and background-color "transparent" for all\n       child elements so that it is indistinguishable from unoccupied grid rows.\n      --\x3e\n      <div class="aaRow"\n           style="color: transparent; background-color: transparent;"\n           mouseenter.trigger="onTransparentRowMouseEnter($event)">\n        <div class="aaRowOps aaRowOpsMover"\n          style="color: transparent; background-color: transparent;">\n          <au-icon-mover-rowops-transparent></au-icon-mover-rowops-transparent>\n        </div>\n        <div class="aaVerticalGridline"\n             style="color: transparent; background-color: transparent;"></div>\n        <div class="aaRowData"\n             style="color: transparent; background-color: transparent;">\n          <span class="aaCell aaFontData aaCellAcctTitle"\n                style="color: transparent; background-color: transparent;">x</span>\n          <div class="aaVerticalGridline"\n               style="color: transparent; background-color: transparent;"></div>\n          <span class="aaCell aaFontData aaCellBchgBal"\n                style="color: transparent; background-color: transparent;">x</span>\n          <div class="aaVerticalGridline"></div>\n        </div>\n      </div>\n    </div>\n    <div class="aaGridFooterBar"></div>\n  </div>\n</template>\n\n\x3c!--\n<div element.ref="rowOpsMenuModal" class="aaModal"\n     style="background: transparent;"\n     click.delegate="onRowOpsCancel($event)">\n  <div element.ref="rowOpsMenuContent"\n       css="display: inline-block;\n         text-align: left;\n         position: fixed;\n         top: ${rowOpsBoundingClientRect.top}px;\n         left: ${rowOpsBoundingClientRect.left}px">\n    &lt;!&ndash;\n            <span class="aaBtn" click.delegate="onRowOpsClose($event)">\n                <i class="fa fa-bars fa-fw" aria-hidden="true"></i></span>\n    &ndash;&gt;\n    <div class="btn-group">\n      &lt;!&ndash;\n              <a class="aaBtn dropdown-toggle" data-toggle="dropdown">\n                <span class="fa fa-bars fa-fw" aria-hidden="true"></span>\n              </a>\n      &ndash;&gt;\n      <ul class="dropdown-menu aaSansSerif" style="display: block; font-family: ">\n        <li><a><i class="fa fa-plus-circle fa-fw aaIconGreen"></i> Insert new account row</a></li>\n        <li><a><i class="fa fa-plus-circle fa-fw aaIconGreen"></i> Insert new annotation row</a></li>\n        <li class="divider"></li>\n        <li><a><i class="fa fa-minus-circle fa-fw aaIconRed"></i> Delete row...</a></li>\n      </ul>\n    </div>\n  </div>\n</div>\n--\x3e\n\n</template>\n'},"au-components/au-fae-side-picker":function(t,e,n){"use strict";n.r(e),n.d(e,"AuFaeSidePicker",(function(){return l}));var r=n("aurelia-framework"),i=n(12),o=n(4),a=n("app"),s=n("au-components/au-popup-acct-picker"),c=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},u=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};let l=class{constructor(t,e){this.Acct=o.a,this.Annotation=o.b,this.app=t,this.auPopupAcctPicker=e}onRowEnter(t,e){t.target.children[0].children[0].classList.toggle("aaRowDataHover",!0)}onRowLeave(t,e){t.target.children[0].children[0].classList.toggle("aaRowDataHover",!1)}};c([r.b,u("design:type",i.a)],l.prototype,"faeSide",void 0),l=c([Object(r.d)("au-fae-side-picker"),Object(r.e)(a.App,s.AuPopupAcctPicker),u("design:paramtypes",[Object,Object])],l)},"au-components/au-fae-side-picker.html":function(t,e,n){t.exports='<template>\n  <require from="au-converters/au-equation-side-converter"></require>\n\n  <h1 css="text-align: ${faeSide.id == \'Assets\' ? \'right\' : \'left\'};">\n    ${faeSide.id}\n  </h1>\n  <div class="aaGridContainer">\n    <div class="aaGridTitleBar" style="font-size: larger;">${faeSide.id | auEquationSideConverter:true: false}\n      accounts\n    </div>\n    <div class="aaGridScrollableRows aaGridHeightInFaeSide">\n      <template repeat.for="listItem of faeSide.acctList">\n        <div id="${listItem.id}"\n             class="aaRow">\n          <template if.bind="listItem.isAcct()">\n            <div class="aaRowOps"\n                 style="background-color: #fff; padding: 2px;">\n              <button type="button"\n                      class="aaBtn aaCellAcctTitle"\n                      style="font-family: inherit; font-weight: inherit;"\n                      click.trigger="auPopupAcctPicker.picked(listItem)">\n                ${listItem.title}\n              </button>\n            </div>\n          </template>\n          <template if.bind="listItem.isAnnotation()">\n            <div class="aaRowops aaRowBgColorData"\n                 style="padding: 2px;">\n              <span class="aaDummyBtn aaCellAnnoTitle">\n                ${listItem.annoText}\n              </span>\n            </div>\n          </template>\n          <div class="aaVerticalGridline"></div>\n        </div>\n      </template>\n      <template if.bind="faeSide.acctList.length == 0">\n        <div class="aaRowOps aaHidden">\n          <button type="button"\n                  class="aaBtn aaCellAcctTitle">\n            x\n          </button>\n        </div>\n      </template>\n\n    </div>\n    <div class="aaGridFooterBar"></div>\n  </div>\n  \x3c!--\n  Following is the coding for a row that shows the total of\n  all account balances. It is coded with invisible menu and nav buttons\n  as horizontal space holders to result in proper horizontal positioning\n  of the "Total" label amd the total amt.\n  --\x3e\n  </div>\n</template>\n'},"au-components/au-fae-side.html":function(t,e,n){t.exports='<template>\n  <require from="au-views/au-text-ellipsis.html"></require>\n  <require from="au-converters/au-currency-converter"></require>\n  <require from="au-converters/au-equation-side-converter"></require>\n  <h1 css="margin: 0; text-align: ${faeSide.id == \'Assets\' ? \'right\' : \'left\'};">\n    ${faeSide.id}\n  </h1>\n  <div class="aaGridContainer">\n    <div class="aaGridTitleBar" style="font-size: larger;">${faeSide.id | auEquationSideConverter:true: false}\n      accounts\n    </div>\n    <div class="aaRow aaRowColumnHeaders">\n      <div class="aaRowOps aaRowOpsEmpty aaHidden">\n      </div>\n      <div class="aaVerticalGridline" element.ref="popupLeft"></div>\n      <div class="aaRowData aaFontLabel aaFontBold">\n        <div class="aaCell aaCellAcctTitle">Title</div>\n        <div class="aaVerticalGridline"></div>\n        <div class="aaCell aaCellBchgBal">Balance</div>\n        <div class="aaVerticalGridline"></div>\n      </div>\n    </div>\n    <div class="aaGridScrollableRows"\n         css="height: ${app.heightTest}px;"\n         id="grid${faeSide.id | auEquationSideConverter:true: false}Rows">\n      <template repeat.for="listItem of faeSide.acctList">\n        <template if.bind="listItem.isAcct()">\n          <div class="aaRow"\n               id="${listItem.id}"\n               mouseenter.trigger="onRowEnter($event, listItem)"\n               mouseleave.trigger="onRowLeave($event, listItem)"\n               click.trigger="app.selectAcct(listItem)"\n               dblclick.trigger="app.selectAcctGoAcct(listItem)">\n            <div\n              class="aaRowOps aaRowOpsEmpty aaBgColorToolbar ${app.selectedAcct.id == listItem.id ? \'aaRowOpsSelected\' : \'\'}">\n            </div>\n            <div class="aaVerticalGridline"></div>\n            <div class="aaRowData aaRowBgColorData ${app.selectedAcct.id == listItem.id ? \'aaRowDataSelected\' : \'\'}">\n              <span class="aaCell aaCellAcctTitle">${listItem.title}</span>\n              <div class="aaVerticalGridline"></div>\n              <span class="aaCell aaCellBchgBal">${listItem.endingBalance | auCurrencyConverter}</span>\n            </div>\n            <div class="aaVerticalGridline"></div>\n          </div>\n        </template>\n        <template if.bind="listItem.isAnnotation()">\n          <div class="aaRow"\n               id="${listItem.id}"\n               mouseenter.trigger="onRowEnter($event, listItem)"\n               mouseleave.trigger="onRowLeave($event, listItem)">\n            <div\n              class="aaRowOps aaRowOpsEmpty aaBgColorToolbar ${app.selectedBchg.id == listItem.id ? \'aaRowOpsSelected\' : \'\'}">\n            </div>\n            <div class="aaVerticalGridline"></div>\n            <div class="aaRowData aaRowBgColorData">\n                <span class="aaCell aaCellAnnoTitle ${listItem.annoText.length == 0 ? \'aaHidden\' : \'\'}">\n                  ${listItem.annoText.length == 0 ? \'x\' : listItem.annoText}\n                </span>\n              <div class="aaVerticalGridline"></div>\n              <span class="aaCell aaCellBchgBal"></span>\n            </div>\n            <div class="aaVerticalGridline"></div>\n          </div>\n        </template>\n      </template>\n      <template if.bind="faeSide.acctList.length == 0">\n        <div class="aaRow aaHidden">\n          <div class="aaRowOps aaRowOpsEmpty aaBgColorToolbar">\n          </div>\n          <div class="aaVerticalGridline"></div>\n          <div class="aaRowData aaRowBgColorData">\n            <span class="aaCell aaCellAcctTitle">x</span>\n            <div class="aaVerticalGridline"></div>\n            <span class="aaCell aaCellBchgBal">0</span>\n          </div>\n          <div class="aaVerticalGridline"></div>\n        </div>\n      </template>\n    </div>\n    <div class="aaGridFooterBar"></div>\n  </div>\n  \x3c!--<div class="aaGridTotals">--\x3e\n  <div class="aaGridContainer" style="border-color: transparent; background-color: transparent;">\n    <div class="aaGridScrollableRows"\n         style="height: auto;\n                background-color: transparent;\n                overflow: hidden;\n                scrollbar-gutter: stable;">\n      <div class="aaRow" style="border-bottom-color: transparent; background-color: transparent;">\n        <div class="aaRowOps aaRowOpsEmpty aaHidden">\n        </div>\n        <div class="aaVerticalGridline aaHidden"></div>\n        <div class="aaRowData">\n        <span class="aaCell aaCellAcctTitle" style="text-align: right;"><span\n          class="aaFontLabel">Total:</span></span>\n          <div class="aaVerticalGridline aaHidden"></div>\n          <span class="aaCell aaCellBchgBal">${faeSide.listTotal | auCurrencyConverter}</span>\n        </div>\n        <div class="aaVerticalGridline aaHidden"></div>\n      </div>\n    </div>\n  </div>\n  <div element.ref="rowOpsMenuModal" class="aaModal"\n       style="background: transparent;"\n       click.delegate="onRowOpsCancel($event)">\n    <div element.ref="rowOpsMenuContent"\n         css="display: inline-block;\n         text-align: left;\n         position: fixed;\n         top: ${rowOpsBoundingClientRect.top}px;\n         left: ${rowOpsBoundingClientRect.left}px">\n      \x3c!--\n              <span class="aaBtn" click.delegate="onRowOpsClose($event)">\n                  <i class="fa fa-bars fa-fw" aria-hidden="true"></i></span>\n      --\x3e\n      <div class="btn-group">\n        \x3c!--\n                <a class="aaBtn dropdown-toggle" data-toggle="dropdown">\n                  <span class="fa fa-bars fa-fw" aria-hidden="true"></span>\n                </a>\n        --\x3e\n        <ul class="dropdown-menu aaSansSerif" style="display: block; font-family: ">\n          <li><a><i class="fa fa-plus-circle fa-fw aaIconGreen"></i> Insert new account row</a></li>\n          <li><a><i class="fa fa-plus-circle fa-fw aaIconGreen"></i> Insert new annotation row</a></li>\n          <li class="divider"></li>\n          <li><a><i class="fa fa-minus-circle fa-fw aaIconRed"></i> Delete row...</a></li>\n        </ul>\n      </div>\n    </div>\n  </div>\n</template>\n'},"au-components/au-grid-bchg-cells":function(t,e,n){"use strict";n.r(e),n.d(e,"AuGridBchgCells",(function(){return c}));var r=n("aurelia-framework"),i=n(9),o=n("app"),a=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},s=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};let c=class{constructor(t){this.app=null,this.app=t}};a([r.b,s("design:type",i.a)],c.prototype,"bchg",void 0),c=a([Object(r.d)("au-grid-bchg-cells"),Object(r.e)(o.App),s("design:paramtypes",[Object])],c)},"au-components/au-grid-bchg-cells-edit":function(t,e,n){"use strict";n.r(e),n.d(e,"AuGridBchgCells",(function(){return u}));var r=n("aurelia-framework"),i=n(9),o=n("app"),a=n("au-components/au-module-tran"),s=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},c=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};let u=class{constructor(t,e){this.app=null,this.auModuleTran=null,this.app=t,this.auModuleTran=e}onInputFocus(t,e){this.app.candidateSelectedBchg=e}pickAcct(){this.app.viewmodelPopupAcctPicker.open(this.bchg,this.callbackPickAcct)}callbackPickAcct(t,e,n){e.targetAcct=null,e.targetAcct=n,e.sourceTran.refresh()}callbackUserChangedCurrencyAmt(t){this.bchg.amt=t,this.bchg.sourceTran.refresh()}};s([r.b,c("design:type",i.a)],u.prototype,"bchg",void 0),u=s([Object(r.d)("au-grid-bchg-cells-edit"),Object(r.e)(o.App,a.AuModuleTran),c("design:paramtypes",[Object,Object])],u)},"au-components/au-grid-bchg-cells-edit.html":function(t,e,n){t.exports='<template>\n  <require from="au-components/au-input-currency"></require>\n  <require from="au-converters/au-currency-converter"></require>\n  <require from="au-views/au-icon-ellipsis.html"></require>\n  <require from="au-views/au-icon-balance-scale.html"></require>\n  <div class="aaBchgCells">\n    \x3c!-- 1st row --\x3e\n    <div class="aaBchgCellsRow aaBchgCellsRowSeparation">\n      \x3c!-- target account --\x3e\n      <div class="aaCellWrapper">\n        <div class="aaCell aaCellBorder aaCellAcctTitle ${bchg.targetAcct.title.length == 0 ? \'aaMissingAcctTitle\' : \'\'}">\n          ${bchg.targetAcct.title}\n          \x3c!--${bchg.targetAcct.title}--\x3e\n        </div>\n        <div class="aaCellHelper aaFontLabel">\n          <button type="button"\n                  class="aaBtn aaHelperBtn"\n                  title="Pick target account"\n                  click.trigger="pickAcct()">\n            <au-icon-ellipsis></au-icon-ellipsis>\n          </button>\n        </div>\n      </div>\n    </div>\n    \x3c!-- 2nd row --\x3e\n    <div class="aaBchgCellsRow">\n      \x3c!-- change description --\x3e\n      <input class="aaCell aaCellBorder aaCellBchgDesc"\n             id="${bchg.id}-desc"\n             type="text"\n             placeholder="Balance change descrption"\n             focus.trigger="onInputFocus($event, bchg)"\n             value.two-way="bchg.desc">\n      \x3c!-- change amount --\x3e\n      <div class="aaCellWrapper"\n           style="margin-left: 1pc;">\n        <au-input-currency\n          classes-string.one-time="\'aaCell aaCellBorder aaCellBchgAmt\'"\n          focus.trigger="onInputFocus($event, bchg)"\n          max-length.to-view="13"\n          currency-amt.to-view="bchg.amt"\n          user-changed-currency-amt.call="callbackUserChangedCurrencyAmt(newCurrencyAmt)">\n        </au-input-currency>\n      </div>\n      <div\n        class="aaCellHelper aaFontLabel ${bchg.sourceTran.totalChangesAssets == bchg.sourceTran.totalChangesEquities ? \'aaHidden\' : \'\'}">\n        <button type="button"\n                class="aaBtn aaHelperBtn"\n                title="Set amount to balance transaction"\n                click.trigger="bchg.setAmtToBalanceTran()">\n          <au-icon-balance-scale></au-icon-balance-scale>\n        </button>\n      </div>\n    </div>\n  </div>\n</template>\n'},"au-components/au-grid-bchg-cells-heading":function(t,e,n){"use strict";n.r(e),n.d(e,"AuGridBchgCellsHeading",(function(){return s}));var r=n("aurelia-framework"),i=n("app"),o=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},a=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};let s=class{constructor(t){this.app=null,this.app=t}};o([r.b,a("design:type",String)],s.prototype,"faeSide",void 0),s=o([Object(r.d)("au-grid-bchg-cells-heading"),Object(r.e)(i.App),a("design:paramtypes",[Object])],s)},"au-components/au-grid-bchg-cells-heading.html":function(t,e,n){t.exports='<template>\n  <require from="au-converters/au-equation-side-converter"></require>\n  <div class="aaBchgCells">\n    \x3c!-- 1st row --\x3e\n    <div class="aaBchgCellsRow aaBchgCellsRowSeparation">\n      \x3c!-- target account --\x3e\n      <div class="aaCellWrapper">\n        <div class="aaCell aaCellBorderInHdg aaCellAcctTitle">\n\x3c!--\n          <span class="aaFontLabel aaFontBold">Target ${faeSideId | auEquationSideConverter:false:false} account</span>\n--\x3e\n          <span class="aaFontLabel aaFontBold">Target ${faeSide} account</span>\n        </div>\n        <div class="aaCellHelper aaHidden">\n          <button type="button" class="aaBtn aaHelperBtn">\n            <span class="fa fa-ellipsis-h fa-fw" aria-hidden="true"></span>\n          </button>\n        </div>\n      </div>\n    </div>\n    \x3c!-- 2nd row --\x3e\n    <div class="aaBchgCellsRow">\n      \x3c!-- change description --\x3e\n      <div class="aaCell aaCellBorderInHdg aaCellBchgDesc">\n        <span class="aaFontLabel aaFontBold">Description</span>\n      </div>\n      \x3c!-- change amount --\x3e\n      <div class="aaCellWrapper" style="margin-left: 1pc;">\n        <div class="aaCell aaCellBorderInHdg aaCellBchgAmt">\n          <span class="aaFontLabel aaFontBold">Amount</span>\n        </div>\n        <div class="aaCellHelper aaHidden">\n          <button type="button" class="aaBtn aaHelperBtn">\n            <span class="fa fa-balance-scale fa-fw" aria-hidden="true"></span>\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n'},"au-components/au-grid-bchg-cells-total":function(t,e,n){"use strict";n.r(e),n.d(e,"AuGridBchgCellsTotal",(function(){return a}));var r=n("aurelia-framework"),i=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},o=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};let a=class{constructor(){}};i([r.b,o("design:type",String)],a.prototype,"faeSide",void 0),i([r.b,o("design:type",Number)],a.prototype,"sideTotalChanges",void 0),i([r.b,o("design:type",Number)],a.prototype,"otherSideTotalChanges",void 0),a=i([Object(r.d)("au-grid-bchg-cells-total"),o("design:paramtypes",[])],a)},"au-components/au-grid-bchg-cells-total.html":function(t,e,n){t.exports='<template>\n  <require from="au-converters/au-equation-side-converter"></require>\n  <require from="au-converters/au-currency-converter"></require>\n  <div class="aaBchgCells"\n       style="padding-top: 0; padding-bottom: 0;">\n    \x3c!-- 1st row\n    NOT NEEDED\n    --\x3e\n\n    \x3c!-- 2nd row --\x3e\n    <div class="aaBchgCellsRow aaFontData">\n      \x3c!-- change description --\x3e\n      <div class="aaCell aaCellBorder aaCellBchgDesc aaFontLabel"\n           style="text-align: right; border-color: transparent;">\n        Total changes to ${faeSide}:\n      </div>\n      \x3c!-- change amount --\x3e\n      <div class="aaCellWrapper" style="margin-left: 1pc;">\n        <div class="aaCell aaCellBorder aaCellBchgAmt ${sideTotalChanges != otherSideTotalChanges ? \'aaCellErrorIndicater\' : \'\'}">\n          ${sideTotalChanges | auCurrencyConverter}\n        </div>\n        <div class="aaCellHelper aaHidden">\n          <button type="button" class="aaBtn aaHelperBtn">\n            <span class="fa fa-balance-scale fa-fw" aria-hidden="true"></span>\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n'},"au-components/au-grid-bchg-cells.html":function(t,e,n){t.exports='<template>\n  <require from="au-converters/au-currency-converter"></require>\n  <require from="au-views/au-icon-ellipsis.html"></require>\n  <require from="au-views/au-icon-balance-scale.html"></require>\n  <div class="aaBchgCells">\n    \x3c!-- 1st row --\x3e\n    <div class="aaBchgCellsRow aaBchgCellsRowSeparation">\n      \x3c!-- target account\n           **************\n      --\x3e\n      <div class="aaCellWrapper">\n        <div class="aaCell aaCellBorder aaCellAcctTitle">\n          ${bchg.targetAcct.title}\n        </div>\n        <div class="aaCellHelper aaFontLabel aaHidden">\n          <button type="button" class="aaBtn aaHelperBtn">\n            <au-icon-ellipsis></au-icon-ellipsis>\n          </button>\n        </div>\n      </div>\n    </div>\n    \x3c!-- 2nd row --\x3e\n    <div class="aaBchgCellsRow">\n      \x3c!-- change description\n           ******************\n           declarations involving bchg.desc.length == 0\n           are for keeping the cell from collapsing vertically\n           when the change description is blank\n      --\x3e\n      <div class="aaCell aaCellBorder aaCellBchgDesc"\n           css="${bchg.desc.length == 0 ? \'color: transparent;\' : \'\'}">\n        ${bchg.desc.length == 0 ? "x" : bchg.desc}\n      </div>\n      \x3c!-- change amount\n           *************\n      --\x3e\n      <div class="aaCellWrapper"\n           style="margin-left: 1pc;">\n        <div class="aaCell aaCellBorder aaCellBchgAmt">\n          ${bchg.amt | auCurrencyConverter}\n        </div>\n        <div class="aaCellHelper aaHidden">\n          <button type="button" class="aaBtn aaHelperBtn">\n            <au-icon-balance-scale></au-icon-balance-scale>\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n'},"au-components/au-input-currency":function(t,e,n){"use strict";n.r(e),n.d(e,"AuInputCurrency",(function(){return a}));var r=n("aurelia-framework"),i=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},o=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};let a=class{constructor(){this.isReadonly=!1,this.isDisabled=!1,this.currencyAmt=0}onFocus(){this.originalInputValue=this.inputCurrencyElement.value,this.inputCurrencyElement.value=this.wellformedFloatString(this.originalInputValue),this.inputCurrencyElement.setSelectionRange(0,0),this.originalCurrencyAmt=parseFloat(this.inputCurrencyElement.value)}onBlur(){let t=parseFloat(this.inputCurrencyElement.value);t==this.originalCurrencyAmt?this.inputCurrencyElement.value=this.originalInputValue:this.userChangedCurrencyAmt({newCurrencyAmt:t})}onKeydown(t){let e=this.inputCurrencyElement.value.indexOf(".");if(t.key>="0"&&t.key<="9"){if(!(this.inputCurrencyElement.selectionStart<=e)){if(this.inputCurrencyElement.selectionStart==this.inputCurrencyElement.value.length)return!1;{let n=this.inputCurrencyElement.value.substring(e);if(this.inputCurrencyElement.selectionStart==e+1){let r="."+t.key+this.inputCurrencyElement.value.charAt(e+1);this.inputCurrencyElement.value=this.inputCurrencyElement.value.replace(n,r)}else{let r="."+this.inputCurrencyElement.value.charAt(e+1)+t.key;this.inputCurrencyElement.value=this.inputCurrencyElement.value.replace(n,r)}return this.inputCurrencyElement.setSelectionRange(e+2,e+2),!1}}if(0==this.inputCurrencyElement.selectionStart&&"-"==this.inputCurrencyElement.value.charAt(0))return!1;if("0"==t.key){if(0==this.inputCurrencyElement.selectionStart&&"-"!=this.inputCurrencyElement.value.charAt(0))return!1;if(1==this.inputCurrencyElement.selectionStart&&"-"==this.inputCurrencyElement.value.charAt(0))return!1}return!0}if("."==t.key){let t=this.inputCurrencyElement.value.indexOf(".")+1;return this.inputCurrencyElement.setSelectionRange(t,t),!1}if("-"==t.key){let t=this.inputCurrencyElement.selectionStart;return 0==t&&("-"!=this.inputCurrencyElement.value.charAt(0)||(this.inputCurrencyElement.setSelectionRange(t+1,t+1),!1))}if("Delete"==t.key){if(this.inputCurrencyElement.selectionStart<e)return!0;if(this.inputCurrencyElement.selectionStart==e)return this.inputCurrencyElement.setSelectionRange(e+1,e+1),!1;{let t=this.inputCurrencyElement.value.substring(e);if(this.inputCurrencyElement.selectionStart==e+1){let n="."+this.inputCurrencyElement.value.charAt(e+2)+"0";this.inputCurrencyElement.value=this.inputCurrencyElement.value.replace(t,n),this.inputCurrencyElement.setSelectionRange(e+1,e+1)}else if(this.inputCurrencyElement.selectionStart==e+2){let n="."+this.inputCurrencyElement.value.charAt(e+1)+"0";this.inputCurrencyElement.value=this.inputCurrencyElement.value.replace(t,n),this.inputCurrencyElement.setSelectionRange(e+2,e+2)}return!1}}if("Backspace"==t.key){if(this.inputCurrencyElement.selectionStart<=e)return!0;{let t=this.inputCurrencyElement.value.substring(e);if(this.inputCurrencyElement.selectionStart==e+1)this.inputCurrencyElement.setSelectionRange(e,e);else if(this.inputCurrencyElement.selectionStart==e+2){let n="."+this.inputCurrencyElement.value.charAt(e+2)+"0";this.inputCurrencyElement.value=this.inputCurrencyElement.value.replace(t,n),this.inputCurrencyElement.setSelectionRange(e+1,e+1)}else{let n="."+this.inputCurrencyElement.value.charAt(e+1)+"0";this.inputCurrencyElement.value=this.inputCurrencyElement.value.replace(t,n),this.inputCurrencyElement.setSelectionRange(e+2,e+2)}return!1}}return"Enter"==t.key||"Tab"==t.key||"Escape"==t.key||"ArrowLeft"==t.key||"ArrowRight"==t.key}onKeyup(t){let e;return 0==this.inputCurrencyElement.value.length?(this.inputCurrencyElement.value=".00",void this.inputCurrencyElement.setSelectionRange(0,0)):this.inputCurrencyElement.value.indexOf(".")<0?(this.inputCurrencyElement.value=this.inputCurrencyElement.value+".00",e=this.inputCurrencyElement.value.indexOf("."),void this.inputCurrencyElement.setSelectionRange(e,e)):"Enter"==t.key?(this.inputCurrencyElement.blur(),!1):"Escape"==t.key?(this.inputCurrencyElement.value=this.wellformedFloatString(this.originalInputValue),void this.inputCurrencyElement.setSelectionRange(0,0)):void 0}wellformedFloatString(t){let e,n=t;for(;e=n.indexOf(","),!(e<0);)n=n.substring(0,e)+n.substring(e+1);return"0"==n.substring(0,1)?n=n.substring(1):"-0"==n.substring(0,2)&&(n="-"+n.substring(2)),n}};i([r.b,o("design:type",String)],a.prototype,"classesString",void 0),i([r.b,o("design:type",Boolean)],a.prototype,"isReadonly",void 0),i([r.b,o("design:type",Boolean)],a.prototype,"isDisabled",void 0),i([r.b,o("design:type",Number)],a.prototype,"currencyAmt",void 0),i([r.b,o("design:type",Function)],a.prototype,"userChangedCurrencyAmt",void 0),i([r.b,o("design:type",Number)],a.prototype,"maxLength",void 0),a=i([Object(r.d)("au-input-currency"),o("design:paramtypes",[])],a)},"au-components/au-input-currency.html":function(t,e,n){t.exports='<template>\n  <require from="au-converters/au-currency-converter"></require>\n  <input element.ref="inputCurrencyElement"\n         type="text"\n    class="${classesString}"\n    maxlength=${maxLength}\n    readonly="${isReadonly ? \'readonly\' : \'\'}"\n    disabled="${isDisabled ? \'disabled\' : \'\'}"\n    focus.trigger="onFocus()"\n    blur.trigger="onBlur()"\n    keydown.trigger="onKeydown($event)"\n    keyup.trigger="onKeyup($event)"\n    value.to-view="currencyAmt | auCurrencyConverter">\n</template>\n'},"au-components/au-module-acct":function(t,e,n){"use strict";n.r(e),n.d(e,"AuModuleAcct",(function(){return s}));var r=n(4),i=n("aurelia-framework"),o=n("app"),a=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};let s=class{constructor(t){this.observerScrollIntoView=new MutationObserver(this.callbackScrollIntoView),this.Acct=r.a,this.Annotation=r.b,this.app=t}observeForScrollIntoView(){this.observerScrollIntoView.app=this.app,this.observerScrollIntoView.observe(this.moduleRootElement,{childList:!1,attributeFilter:["style"],subtree:!1})}callbackScrollIntoView(t,e){if(e.app.selectedBchg){let t=document.getElementById(`acct-${e.app.selectedBchg.id}`);t&&t.scrollIntoView({behavior:"smooth",block:"center"})}e.disconnect()}onRowEnter(t,e){t.target.children[2].classList.toggle("aaRowDataHover",!0)}onRowLeave(t,e){t.target.children[2].classList.toggle("aaRowDataHover",!1)}};s=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}([Object(i.d)("au-module-acct"),Object(i.e)(o.App),a("design:paramtypes",[Object])],s)},"au-components/au-module-acct.html":function(t,e,n){t.exports='<template>\n  <require from="au-views/au-icon-nav-up.html"></require>\n  <require from="au-views/au-icon-nav-down.html"></require>\n  <require from="au-views/au-icon-edit.html"></require>\n  <require from="au-views/au-acct-panel-spacer.html"></require>\n  <require from="au-converters/au-currency-converter"></require>\n  <require from="au-converters/au-equation-side-converter"></require>\n  <div class="aaRowAssetEquityPanels"\n       element.ref="moduleRootElement"\n       css="${app.selectedModule == app.MODULE_ACCT ? \'\' : \'display: none;\'}">\n    <template if.bind="app.selectedAcct.parentFaeSide.id == \'Equities\'">\n      \x3c!-- blank space for asset acct column --\x3e\n      <au-acct-panel-spacer></au-acct-panel-spacer>\n    </template>\n    <div class="aaPanel aaPanelBoxShadow"\n         id="observedElement">\n      <div class="aaPanelHeader aaPanelHeaderModule">${app.selectedAcct.parentFaeSide.id |\n        auEquationSideConverter:true:false} account\n      </div>\n      <div class="aaPanelBody">\n        <div class="aaForm">\n          <table border="0" style="border-collapse: collapse;">\n            \x3c!--\n                        <tr>\n                          <td class="aaFormItemLabel">Equation side:</td>\n                          <td class="aaFormItemData">${app.selectedAcct.parentFaeSide.id | auEquationSideConverter:true:true}</td>\n                        </tr>\n            --\x3e\n            <tr>\n              <td class="aaFormItemLabel">Account title:</td>\n              <td class="aaFormItemData">\n                ${app.selectedAcct.title}\n              </td>\n            </tr>\n          </table>\n        </div>\n        <div class="aaGridContainer">\n          <div class="aaGridTitleBar">Balance changes</div>\n          <div class="aaRow aaRowColumnHeaders">\n            <div class="aaRowOps aaRowOpsEmpty aaHidden">\n            </div>\n            <div class="aaVerticalGridline"></div>\n            <div class="aaRowData aaFontLabel aaFontBold">\n              <div class="aaCell aaCellTranDate">Date</div>\n              <div class="aaVerticalGridline"></div>\n              <div class="aaCell aaCellBchgDesc">Description</div>\n              <div class="aaVerticalGridline"></div>\n              <div class="aaCell aaCellBchgAmt">Amount</div>\n              <div class="aaVerticalGridline"></div>\n              <div class="aaCell aaCellBchgBal">New balance</div>\n              <div class="aaVerticalGridline"></div>\n            </div>\n          </div>\n          <div class="aaGridScrollableRows aaGridHeightInAcct"\n               id="acctModule-${app.selectedAcct.id}">\n            <template repeat.for="bchg of app.selectedAcct.bchgList">\n              <div class="aaRow aaRowBgColorToolbar"\n                   id="acct-${bchg.id}"\n                   mouseenter.trigger="onRowEnter($event, bchg)"\n                   mouseleave.trigger="onRowLeave($event, bchg)"\n                   click.trigger="app.selectBchg(bchg)"\n                   dblclick.trigger="app.selectAcctBchgGoTran(bchg)">\n                <div\n                  class="aaRowOps aaRowOpsEmpty aaBgColorToolbar ${app.selectedBchg.id == bchg.id ? \'aaRowOpsSelected\' : \'\'}">\n                </div>\n                <div class="aaVerticalGridline"></div>\n                <div class="aaRowData aaRowBgColorData ${app.selectedBchg.id == bchg.id ? \'aaRowDataSelected\' : \'\'}">\n                  <div class="aaCell aaFontData aaCellTranDate">${bchg.sourceTran.date}</div>\n                  <div class="aaVerticalGridline"></div>\n                  <div class="aaCell aaFontData aaCellBchgDesc">${bchg.desc}</div>\n                  <div class="aaVerticalGridline"></div>\n                  <div class="aaCell aaFontData aaCellBchgAmt">${bchg.amt | auCurrencyConverter}</div>\n                  <div class="aaVerticalGridline"></div>\n                  <div class="aaCell aaFontData aaCellBchgBal">${bchg.newBalance | auCurrencyConverter}</div>\n                </div>\n                <div class="aaVerticalGridline"></div>\n              </div>\n            </template>\n            \x3c!--\n            The purpose of having the following invisible end-of-list row\n            is to provide an invisible horizontal spacer if acct.bchgList is empty\n            so as to display the column headings row properly..\n            --\x3e\n            <div class="aaRow aaHidden">\n              <div class="aaRowOps aaRowOpsEmpty aaBgColorToolbar">\n              </div>\n              <div class="aaVerticalGridline"></div>\n              <div class="aaRowData aaRowBgColorData">\n                <div class="aaCell aaFontData aaCellTranDate"></div>\n                <div class="aaVerticalGridline"></div>\n                <div class="aaCell aaFontData aaCellBchgDesc">(ending invsible row)</div>\n                <div class="aaVerticalGridline"></div>\n                <div class="aaCell aaFontData aaCellBchgAmt"></div>\n                <div class="aaVerticalGridline"></div>\n                <div class="aaCell aaFontData aaCellBchgBal"></div>\n              </div>\n              <div class="aaVerticalGridline"></div>\n            </div>\n          </div>\n          <div class="aaGridFooterBar"></div>\n        </div>\n      </div>\n    </div>\n    <template if.bind="app.selectedAcct.parentFaeSide.id == \'Assets\'">\n      \x3c!-- blank space for equity acct column --\x3e\n      <au-acct-panel-spacer></au-acct-panel-spacer>\n    </template>\n  </div>\n</template>\n'},"au-components/au-module-bchg":function(t,e,n){"use strict";n.r(e),n.d(e,"AuModuleBchg",(function(){return a}));var r=n("aurelia-framework"),i=n("app"),o=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};let a=class{constructor(t){this.app=null,this.app=t}};a=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}([Object(r.d)("au-module-bchg"),Object(r.e)(i.App),o("design:paramtypes",[Object])],a)},"au-components/au-module-bchg.html":function(t,e,n){t.exports='<template>\n  <require from="au-views/au-bchg-panel-spacer.html"></require>\n  <require from="au-converters/au-currency-converter"></require>\n  <require from="au-converters/au-equation-side-converter"></require>\n  <div class="aaRowAssetEquityPanels"\n       element.ref="moduleRootElement"\n       css="${app.selectedModule == app.MODULE_BCHG ? \'\' : \'display: none;\'}">\n    <template if.bind="app.selectedAcct.parentFaeSide.id == \'Equities\'">\n      \x3c!-- blank space for asset bchg column --\x3e\n      <au-bchg-panel-spacer></au-bchg-panel-spacer>\n    </template>\n    <div class="aaPanel aaPanelBoxShadow"\n         css="${app.selectedModule == app.MODULE_BCHG ? \'\' : \'display: none;\'}">\n      <div class="aaPanelHeader aaPanelHeaderModule">${app.selectedBchg.targetAcct.parentFaeSide.id | auEquationSideConverter:true:false} account balance change</div>\n      <div class="aaPanelBody">\n        <div style="text-align: center;">\n          \x3c!--Target account--\x3e\n          <div class="aaGridContainer aaInlineBlock" style="margin-right: 1pc;">\n            <div class="aaGridTitleBar">Target account</div>\n            <div class="aaRow aaRowColumnHeaders aaFontLabel aaFontBold">\n\x3c!--\n              <div class="aaCell aaCellEquSide">Equation side</div>\n              <div class="aaVerticalGridline"></div>\n--\x3e\n              <div class="aaCell aaCellAcctTitle"><span class="aaFontLabel aaFontBold">Title</span></div>\n            </div>\n            <div class="aaRow aaRowBgColorNonData" style="border-bottom-style: none;">\n              <div class="aaRowData">\n\x3c!--\n                <div class="aaCell aaFontData aaCellEquSide">\n                  ${app.selectedBchg.targetAcct.parentFaeSide.id}\n                </div>\n                <div class="aaVerticalGridline"></div>\n--\x3e\n                <div class="aaCell aaFontData aaCellAcctTitle">${app.selectedBchg.targetAcct.title}</div>\n              </div>\n            </div>\n          </div>\n          \x3c!--Source transaction--\x3e\n          <div class="aaGridContainer aaInlineBlock">\n            <div class="aaGridTitleBar">\n              Source transaction\n            </div>\n            <div class="aaRow aaRowColumnHeaders aaFontLabel aaFontBold">\n              <div class="aaCell aaCellTranId">ID</div>\n              <div class="aaVerticalGridline"></div>\n              <div class="aaCell aaCellTranDate">Date</div>\n              <div class="aaVerticalGridline"></div>\n            </div>\n            <div class="aaRow aaRowBgColorNonData" style="border-bottom-style: none;">\n              <div class="aaRowData">\n                <div class="aaCell aaFontData aaCellTranId">${app.selectedBchg.sourceTran.id.substring(4).padStart(3, "0")}</div>\n                <div class="aaVerticalGridline"></div>\n                <div class="aaCell aaFontData aaCellTranDate">${app.selectedBchg.sourceTran.date}</div>\n                <div class="aaVerticalGridline"></div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div style="margin-top: 2pc; text-align: center;">\n          \x3c!--Balance change--\x3e\n          <div class="aaGridContainer aaInlineBlock" style="margin-top: 0;">\n            \x3c!--Balance change--\x3e\n            <div class="aaGridTitleBar">Balance change</div>\n            <div class="aaRow aaRowColumnHeaders aaFontLabel aaFontBold">\n              <div class="aaCell aaCellBchgDesc">Description</div>\n              <div class="aaVerticalGridline"></div>\n              <div class="aaCell aaCellBchgAmt">Amount</div>\n            </div>\n            <div class="aaRow aaRowBgColorNonData" style="border-bottom-style: none;">\n              <div class="aaRowData">\n                <div class="aaCell aaCellBchgDesc">${app.selectedBchg.desc}</div>\n                <div class="aaVerticalGridline"></div>\n                <div class="aaCell aaCellBchgAmt">${app.selectedBchg.amt | auCurrencyConverter}</div>\n              </div>\n            </div>\n          </div>\n          \x3c!--\n                  <span click.trigger="onGoTran($event)"\n                        class="aaBtn">Show in source transaction\n                      <i class="fa fa-chevron-right fa-fw" aria-hidden="true"></i>\n                    </span>\n          --\x3e\n        </div>\n      </div>\n    </div>\n    <template if.bind="app.selectedAcct.parentFaeSide.id == \'Assets\'">\n      \x3c!-- blank space for equaity bchg column --\x3e\n      <au-bchg-panel-spacer></au-bchg-panel-spacer>\n    </template>\n  </div>\n</template>\n'},"au-components/au-module-fae":function(t,e,n){"use strict";n.r(e),n.d(e,"AuModuleFae",(function(){return a}));var r=n("aurelia-framework"),i=n("app"),o=(n(4),function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)});let a=class{constructor(t){this.observerScrollIntoView=new MutationObserver(this.callbackScrollIntoView),this.observerSetInputFocus=new MutationObserver(this.callbackSetInputFocus),this.app=t,this.moduleMode=this.app.MODE_NAV}editOpen(){this.moduleMode=this.app.MODE_EDIT,this.app.elementNavRibbon.classList.toggle("aaHidden",!0)}editSaveChanges(){let t=this.vmFaeSideEditAssets.missingTitleCnt()+this.vmFaeSideEditEquities.missingTitleCnt();t>0?this.app.viewmodelPopupAlert.open("Save changes",this.panelToolBar.getBoundingClientRect().bottom,`Account title is missing for ${t} account(s).`):(this.vmFaeSideEditAssets.saveChanges(),this.vmFaeSideEditEquities.saveChanges(),this.moduleMode=this.app.MODE_NAV,this.app.elementNavRibbon.classList.toggle("aaHidden",!1))}editCancel(){this.vmFaeSideEditAssets.cancel(),this.vmFaeSideEditEquities.cancel(),this.moduleMode=this.app.MODE_NAV,this.app.elementNavRibbon.classList.toggle("aaHidden",!1)}moveOpen(){this.moduleMode=this.app.MODE_MOVE,this.app.elementNavRibbon.classList.toggle("aaHidden",!0),this.app.selectedAcct=null}moveSaveChanges(){this.vmFaeSideMoveAssets.saveChanges(),this.vmFaeSideMoveEquities.saveChanges(),this.moduleMode=this.app.MODE_NAV,this.app.elementNavRibbon.classList.toggle("aaHidden",!1)}moveCancel(){this.vmFaeSideMoveAssets.cancel(),this.vmFaeSideMoveEquities.cancel(),this.moduleMode=this.app.MODE_NAV,this.app.elementNavRibbon.classList.toggle("aaHidden",!1)}observeForScrollIntoView(){this.observerScrollIntoView.app=this.app,this.observerScrollIntoView.observe(this.moduleRootElement,{attributeFilter:["style"]})}callbackScrollIntoView(t,e){if(e.app.selectedAcct){let t=document.getElementById(e.app.selectedAcct.id);t&&t.scrollIntoView({behavior:"smooth",block:"center"})}e.disconnect()}observeForSetInputFocus(){this.observerSetInputFocus.app=this.app,this.observerSetInputFocus.observe(this.moduleRootElement,{childList:!0,subtree:!0})}callbackSetInputFocus(t,e){if(e.app.candidateSelectedAcct){let t=document.getElementById(`${e.app.candidateSelectedAcct.id}-title`);t&&t.focus()}e.disconnect()}faeSidesEdit(t){this.vmFaeSideEditAssets.initialize(),this.vmFaeSideEditEquities.initialize()}faeSidesEditDone(t){let e=this.vmFaeSideEditAssets.missingTitleCnt()+this.vmFaeSideEditEquities.missingTitleCnt();e>0?this.app.viewmodelPopupAlert.open("Save changes",this.panelToolBar.getBoundingClientRect().bottom,`Account title is missing for ${e} account(s).`):(this.vmFaeSideEditAssets.saveChanges(),this.vmFaeSideEditEquities.saveChanges(),this.app.selectedAcct=this.app.candidateSelectedAcct,this.app.candidateSelectedAcct=null,this.app.data.faeSideAssets.refresh(),this.app.data.faeSideEquities.refresh(),this.moduleMode=this.app.MODE_NAV)}faeSidesEditCancel(t){this.vmFaeSideEditAssets.cancel(),this.vmFaeSideEditEquities.cancel(),this.app.candidateFaeSideAssets=null,this.app.candidateFaeSideEquities=null,this.app.candidateSelectedAcct=null,this.moduleMode=this.app.MODE_NAV,this.app.elementNavRibbon.classList.toggle("aaHidden",!1)}};a=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}([Object(r.d)("au-module-fae"),Object(r.e)(i.App),o("design:paramtypes",[Object])],a)},"au-components/au-module-fae.html":function(t,e,n){t.exports='<template>\n  <require from="au-views/au-icon-edit.html"></require>\n  <require from="au-views/au-icon-mover-toolbar.html"></require>\n  <require from="au-views/au-text-ellipsis.html"></require>\n  <require from="au-components/au-fae-side"></require>\n  <require from="au-components/au-fae-side-edit"></require>\n  <require from="au-components/au-fae-side-move"></require>\n  <require from="au-attributes/au-fae-side-data"></require>\n  \x3c!--\n    <require from="au-components/au-popup-acct-mover"></require>\n  --\x3e\n\n  <div class="aaPanel aaPanelBoxShadow"\n       css="${app.selectedModule == app.MODULE_FAE ? \'\' : \'display: none;\'}"\n       element.ref="moduleRootElement"\n       id="observedElement">\n    <div class="aaPanelHeader aaPanelHeaderModule">The fundamental accounting equation</div>\n    <div class="aaPanelToolBar"\n         css="${moduleMode == app.MODE_NAV ? \'\' : \'display: none;\'}">\n\x3c!--\n      <span class="aaToolBarDivider">.</span>\n--\x3e\n      <button type="button"\n              class="aaBtn"\n              click.trigger="editOpen()">\n        <au-icon-edit></au-icon-edit>\n        &nbsp;Edit account lists\n        <au-text-ellipsis></au-text-ellipsis>\n      </button>\n      <span class="aaToolBarDivider aaHidden">.</span>\n      <button class="aaBtn"\n              type="button"\n              click.trigger="moveOpen()">\n        <au-icon-mover-toolbar></au-icon-mover-toolbar>\n        Move row(s) in account list(s)\n        <au-text-ellipsis></au-text-ellipsis>\n      </button>\n\x3c!--\n      <span class="aaToolBarDivider">.</span>\n--\x3e\n    </div>\n    <div class="aaPanelToolBar"\n         element.ref="panelToolBar"\n         css="${moduleMode == app.MODE_EDIT ? \'\' : \'display: none;\'}">\n\x3c!--\n      <span class="aaToolBarDivider">.</span>\n--\x3e\n      <span><au-icon-edit></au-icon-edit><span class="aaFontLabel aaFontBold">Editing account lists:</span></span>\n      <span class="aaToolBarDivider aaHidden">.</span>\n      <button type="button" class="aaBtnFinish" click.trigger="editSaveChanges($event)">Save changes</button>\n      <span class="aaToolBarDivider aaHidden">.</span>\n      <button type="button" class="aaBtn" click.trigger="editCancel($event)">Cancel</button>\n\x3c!--\n      <span class="aaToolBarDivider">.</span>\n--\x3e\n    </div>\n    <div class="aaPanelToolBar"\n         css="${moduleMode == app.MODE_MOVE ? \'\' : \'display: none;\'} border-bottom-width: 0;">\n      \x3c!--\n            <span class="aaToolBarDivider">.</span>\n      --\x3e\n      <span class="aaFontLabel">&mdash; Drag & drop row(s) to desired list position(s). &mdash;</span>\n    </div>\n    <div class="aaPanelToolBar"\n         css="${moduleMode == app.MODE_MOVE ? \'\' : \'display: none;\'}">\n\x3c!--\n      <span class="aaToolBarDivider">.</span>\n--\x3e\n      <span><au-icon-mover-toolbar></au-icon-mover-toolbar><span class="aaFontLabel aaFontBold">Moving row(s):</span></span>\n      <span class="aaToolBarDivider aaHidden">.</span>\n      <button type="button" class="aaBtnFinish" click.trigger="moveSaveChanges($event)">Save changes</button>\n      <span class="aaToolBarDivider aaHidden">.</span>\n      <button type="button" class="aaBtn" click.trigger="moveCancel($event)">Cancel</button>\n\x3c!--\n      <span class="aaToolBarDivider">.</span>\n--\x3e\n    </div>\n    <div class="aaPanelBody"\n         css="${moduleMode == app.MODE_NAV ? \'\' : \'display: none;\'}">\n      <div class="aaEquSideContainer">\n        <au-fae-side\n          fae-side.to-view="app.data.faeSideAssets">\n        </au-fae-side>\n      </div>\n      \x3c!-- equation\'s "equal" sign --\x3e\n      <div class="aaEquSideContainer" style="padding: 0 1pc;">\n        <h1 style="margin: 0;">=</h1>\n      </div>\n      <div class="aaEquSideContainer">\n        <au-fae-side\n          fae-side.to-view="app.data.faeSideEquities">\n        </au-fae-side>\n      </div>\n    </div>\n    <template if.bind="moduleMode === app.MODE_EDIT">\n      <div class="aaPanelBody">\n        <div class="aaEquSideContainer">\n          <au-fae-side-edit\n            fae-side.to-view="app.data.faeSideAssets"\n            view-model.ref="vmFaeSideEditAssets">\n          </au-fae-side-edit>\n        </div>\n        <div class="aaEquSideContainer"\n             style="padding: 0 1pc;">\n          <h1 style="margin: 0;">=</h1>\n        </div>\n        <div class="aaEquSideContainer">\n          <au-fae-side-edit\n            fae-side.to-view="app.data.faeSideEquities"\n            view-model.ref="vmFaeSideEditEquities">\n          </au-fae-side-edit>\n        </div>\n      </div>\n    </template>\n    <template if.bind="moduleMode === app.MODE_MOVE">\n      <div class="aaPanelBody">\n        <div class="aaEquSideContainer">\n          <au-fae-side-move\n            fae-side.to-view="app.data.faeSideAssets"\n            view-model.ref="vmFaeSideMoveAssets">\n          </au-fae-side-move>\n        </div>\n        <div class="aaEquSideContainer" style="padding: 0 1pc;">\n          <h1 style="margin: 0;">=</h1>\n        </div>\n        <div class="aaEquSideContainer">\n          <au-fae-side-move\n            fae-side.to-view="app.data.faeSideEquities"\n            view-model.ref="vmFaeSideMoveEquities">\n          </au-fae-side-move>\n        </div>\n      </div>\n    </template>\n  </div>\n</template>\n'},"au-components/au-module-jrnl":function(t,e,n){"use strict";n.r(e),n.d(e,"AuModuleJrnl",(function(){return a}));var r=n("aurelia-framework"),i=n("app"),o=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};let a=class{constructor(t){this.observerScrollIntoView=new MutationObserver(this.callbackScrollIntoView),this.app=t}observeForScrollIntoView(){this.observerScrollIntoView.app=this.app,this.observerScrollIntoView.observe(this.moduleRootElement,{childList:!1,attributeFilter:["style"],attributeOldValue:!0,subtree:!1})}callbackScrollIntoView(t,e){if(e.app.selectedTran){let t=document.getElementById(e.app.selectedTran.id);t&&t.scrollIntoView({behavior:"smooth",block:"center"})}e.disconnect()}onRowEnter(t){t.target.children[2].children[0].classList.toggle("aaRowDataHover",!0),t.target.children[2].children[1].classList.toggle("aaRowDataHover",!0)}onRowLeave(t){t.target.children[2].children[0].classList.toggle("aaRowDataHover",!1),t.target.children[2].children[1].classList.toggle("aaRowDataHover",!1)}tranNew(t){this.app.navBtnReturn=this.app.navBtnJrnl,this.app.selectedModule=this.app.MODULE_TRAN,this.app.viewmodelTran.tranNew()}tranEdit(t){this.app.selectedTran&&(this.app.navBtnReturn=this.app.navBtnJrnl,this.app.navBtnTran.click(),this.app.viewmodelTran.tranEdit())}tranDelete(t){this.app.selectedTran&&(this.app.navBtnReturn=this.app.navBtnJrnl,this.app.navBtnTran.click(),this.app.viewmodelTran.tranDelete())}};a=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}([Object(r.d)("au-module-jrnl"),Object(r.e)(i.App),o("design:paramtypes",[Object])],a)},"au-components/au-module-jrnl.html":function(t,e,n){t.exports='<template>\n  <require from="au-views/au-icon-new.html"></require>\n  <require from="au-views/au-icon-edit.html"></require>\n  <require from="au-views/au-icon-delete.html"></require>\n  <require from="au-views/au-grid-bchg-cells-spacer.html"></require>\n  <require from="au-components/au-grid-bchg-cells"></require>\n  <require from="au-components/au-grid-bchg-cells-heading"></require>\n  <div class="aaPanel aaPanelBoxShadow"\n       css="${app.selectedModule == app.MODULE_JRNL ? \'\' : \'display: none;\'}"\n       element.ref="moduleRootElement"\n       id="observedElement">\n    <div class="aaPanelHeader aaPanelHeaderModule">Transaction journal</div>\n    <div class="aaPanelToolBar">\n      <div class="aaInlineFlex" style="justify-content: center;">\n        <span class="aaToolBarDivider">.</span>\n        <button type="button"\n                class="aaBtn"\n                click.trigger="tranNew($event)">\n          <au-icon-new></au-icon-new>\n          &nbsp;New transaction\n        </button>\n        <button type="button"\n                class="aaBtn"\n                click.trigger="tranEdit($event)"\n                disabled.bind="!app.selectedTran">\n          <au-icon-edit></au-icon-edit>\n          &nbsp;Edit selected transaction\n        </button>\n        <button type="button"\n                class="aaBtn"\n                click.trigger="tranDelete($event)"\n                disabled.bind="!app.selectedTran">\n          <au-icon-delete></au-icon-delete>\n          &nbsp;Delete selected transaction\n          <au-text-ellipsis></au-text-ellipsis>\n        </button>\n        <span class="aaToolBarDivider">.</span>\n      </div>\n    </div>\n    <div class="aaPanelBody">\n      <div class="aaGridContainer" style="margin-top: 0;">\n        <div class="aaGridTitleBar" style="height: 1.5ch;">&nbsp;</div>\n\x3c!--\n        <div class="aaGridFooterBar"></div>\n--\x3e\n\n        <div class="aaRow aaRowColumnHeaders aaFontLabel" style="border-bottom-width: 3px;">\n          <div class="aaRowOps aaRowOpsEmpty aaHidden">\n          </div>\n          <div class="aaVerticalGridline aaVerticalGridlineWide"></div>\n          <div style="display: inline-flex; flex-direction: column; align-items: flex-start; justify-content: flex-start; padding: 2px;">\n            <div class="aaRowData aaFontBold">\n              <au-grid-bchg-cells-heading fae-side.one-time="\'asset\'"></au-grid-bchg-cells-heading>\n              <div class="aaVerticalGridline aaVerticalGridlineWide"></div>\n              <au-grid-bchg-cells-heading fae-side.one-time="\'equity\'"></au-grid-bchg-cells-heading>\n            </div>\n          </div>\n          <div class="aaVerticalGridline aaVerticalGridlineWide"></div>\n        </div>\n        <div class="aaGridScrollableRows aaGridHeightInJrnl"\n             id="jrnlGridBodyContainer">\n          <template repeat.for="tran of app.data.jrnl.tranList">\n            <div class="aaRow"\n                 id="${tran.id}"\n                 style="margin-bottom: 1.5pc;"\n                 mouseenter.trigger="onRowEnter($event)"\n                 mouseleave.trigger="onRowLeave($event)"\n                 click.trigger="app.selectTran(tran)"\n                 dblclick.trigger="app.selectTranGoTran(tran)">\n              <div class="aaRowOps aaRowOpsEmpty aaBgColorToolbar aaFontLabel ${app.selectedTran.id == tran.id ? \'aaRowOpsSelected\' : \'\'}"\n                   style="border-bottom: 3px solid #ccc;">\n              </div>\n              <div class="aaVerticalGridline" style="width: 3px;"></div>\n              <div class="${app.selectedTran.id == tran.id ? \'aaRowDataSelected\' : \'\'}"\n                   style="padding: 2px; display: inline-flex; flex-direction: column; align-items: flex-start; justify-content: flex-start; padding: 2px;">\n                <div class="aaRowBgColorData"\n                     style="display: inline-flex; align-items: center; justify-content: center; border-bottom: 3px solid #ccc; padding: 0.4pc">\n                  <div class="aaCell aaFontData aaCellTranDate aaCellBorder">${tran.date}</div>\n                </div>\n                <div class="aaRowBgColorData"\n                     style="display: flex; flex-direction: column; align-items: flex-start; justify-content: flex-start">\n                  <template repeat.for="bchg of tran.bchgList">\n                    <div class="aaRow"\n                         style="border-bottom-width: 3px;">\n                      <div class="aaRowData">\n                        \x3c!-- spacer if equities side --\x3e\n                        <template if.bind="bchg.targetAcct.parentFaeSide.id == \'Equities\'">\n                          \x3c!-- put blank space in change-to-asset column --\x3e\n                          <au-grid-bchg-cells-spacer></au-grid-bchg-cells-spacer>\n                          <div class="aaVerticalGridline" style="width: 3px;"></div>\n                        </template>\n                        \x3c!-- simulate data cells with spacer --\x3e\n                        <au-grid-bchg-cells bchg.one-way="bchg"></au-grid-bchg-cells>\n                        <template if.bind="bchg.targetAcct.parentFaeSide.id == \'Assets\'">\n                          \x3c!-- put blank space in change-to-equity column --\x3e\n                          <div class="aaVerticalGridline" style="width: 3px;"></div>\n                          <au-grid-bchg-cells-spacer></au-grid-bchg-cells-spacer>\n                        </template>\n                      </div>\n                      <div class="aaVerticalGridline" style="width: 3px;"></div>\n                    </div>\n                  </template>\n                </div>\n              </div>\n              \x3c!--\n                            <div class="aaVerticalGridline"></div>\n              --\x3e\n            </div>\n            \x3c!-- End of tran --\x3e\n          </template>\n          \x3c!--\n          *** End of list row ***\n          In case no rows in the list, this hidden end-of-row list is needed to\n          take as much horizontal space as if there were some rows in order to keep\n          the scrollable rows div from collapsing, and to make grid column headings to look right.\n          --\x3e\n          <div class="aaRow aaHidden" style="border-bottom-width: 3px;">\n            <div class="aaRowOps aaRowOpsEmpty"\n                 style="border-bottom: 3px solid #ccc;">\n            </div>\n            <div class="aaVerticalGridline" style="width: 3px;"></div>\n            <div class="aaHidden"\n                 style="padding: 2px; display: inline-flex; flex-direction: column; align-items: flex-start; justify-content: flex-start; padding: 2px;">\n              <div class="aaRowBgColorData"\n                   style="display: flex; flex-direction: column; align-items: flex-start; justify-content: flex-start">\n                <div class="aaRow"\n                     style="border-bottom-width: 3px;">\n                  <div class="aaRowData">\n                    <au-grid-bchg-cells-spacer></au-grid-bchg-cells-spacer>\n                    <div class="aaVerticalGridline" style="width: 3px;"></div>\n                    <au-grid-bchg-cells-spacer></au-grid-bchg-cells-spacer>\n                  </div>\n                  <div class="aaVerticalGridline" style="width: 3px;"></div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class="aaGridFooterBar"></div>\n      </div>\n    </div>\n  </div>\n</template>\n'},"au-components/au-module-tran":function(t,e,n){"use strict";n.r(e),n.d(e,"AuModuleTran",(function(){return c}));var r=n("aurelia-framework"),i=n("app"),o=n(16),a=n(9),s=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};let c=class{constructor(t){this.tranInputDate=document.getElementById("tranInputDate"),this.observerScrollIntoView=new MutationObserver(this.callbackScrollIntoView),this.observerSetInputFocus=new MutationObserver(this.callbackSetInputFocus),this.tranOp="",this.app=t}get TRAN_OP_NEW(){return"new"}get TRAN_OP_EDIT(){return"edit"}get TRAN_OP_DELETE(){return"deleteedit"}observeForScrollIntoView(){this.observerScrollIntoView.app=this.app,this.observerScrollIntoView.observe(this.moduleRootElement,{childList:!0,attributeFilter:["style"],subtree:!0})}callbackScrollIntoView(t,e){if(e.app.selectedBchg){let t=document.getElementById(`tran-${e.app.selectedBchg.id}`);t&&t.scrollIntoView({behavior:"smooth",block:"center"})}e.disconnect()}observeForSetInputFocus(){this.observerSetInputFocus.app=this.app,this.observerSetInputFocus.observe(this.moduleRootElement,{attributeFilter:["style"],childList:!0,subtree:!0})}callbackSetInputFocus(t,e){let n;n=document.getElementById("tranInputDate"),n&&n.focus(),e.app.candidateSelectedBchg&&(n=document.getElementById(`${e.app.candidateSelectedBchg.id}-desc`),n&&n.focus()),e.disconnect()}onRowEnter(t,e){e&&t.target.children[2].classList.toggle("aaRowDataHover",!0)}onRowLeave(t,e){e&&t.target.children[2].classList.toggle("aaRowDataHover",!1)}tranNew(t){this.app.candidateSelectedBchg=null,this.app.candidateTran=new o.a(`tran${this.app.data.nextTranId}`,this.app.data.jrnl,(new Date).toISOString().slice(0,10),this.app.data.nextSorter),this.app.viewNavMode=!1,this.tranOp=this.TRAN_OP_NEW,this.app.viewmodelTran.observeForSetInputFocus()}tranValid(){return this.app.candidateTran.totalChangesAssets!=this.app.candidateTran.totalChangesEquities?(this.app.viewmodelPopupAlert.open("Save changes",this.panelToolBar.getBoundingClientRect().bottom,"Transaction is out of balance."),!1):""!=this.app.candidateTran.date||(this.app.viewmodelPopupAlert.open("Save changes",this.panelToolBar.getBoundingClientRect().bottom,"Transaction date is missing or invalid."),!1)}tranNewDone(t){this.tranValid()&&(this.app.candidateTran.intraDateSorter=this.app.data.nextSorter,this.app.candidateTran.register(),this.app.selectedTran=this.app.candidateTran,this.app.candidateSelectedBchg&&(this.app.selectedBchg=this.app.candidateSelectedBchg,this.app.selectedAcct=this.app.selectedBchg.targetAcct),this.app.candidateTran=null,this.app.candidateSelectedBchg=null,this.app.data.jrnl.refresh(),this.app.data.faeSideAssets.refresh(),this.app.data.faeSideEquities.refresh(),this.tranOp=null,this.app.viewNavMode=!0,this.app.navBtnReturn&&(this.app.navBtnReturn.click(),this.app.navBtnReturn=null))}tranNewCancel(t){this.app.candidateTran=null,this.app.candidateSelectedBchg=null,this.tranOp=null,this.app.viewNavMode=!0,this.app.navBtnReturn&&(this.app.navBtnReturn.click(),this.app.navBtnReturn=null)}tranEdit(t){let e=document.activeElement;e&&e.blur(),this.app.candidateTran=this.app.selectedTran.clone(),this.app.selectedBchg&&(this.app.candidateSelectedBchg=this.app.candidateTran.bchgList.find(t=>t.id==this.app.selectedBchg.id)),this.tranOp=this.TRAN_OP_EDIT,this.app.viewNavMode=!1,this.app.viewmodelTran.observeForSetInputFocus(),this.app.elementNavRibbon.classList.toggle("aaHidden",!0)}tranEditDone(t){if(!this.tranValid())return;let e=!1;this.app.candidateTran.date!=this.app.selectedTran.date&&(this.app.candidateTran.intraDateSorter=this.app.data.nextSorter,e=!0),this.app.selectedTran.unregister(),this.app.selectedTran=null,this.app.selectedBchg=null,this.app.candidateTran.refresh(),this.app.candidateTran.register(),this.app.selectedTran=this.app.candidateTran,this.app.candidateSelectedBchg&&(this.app.selectedBchg=this.app.candidateSelectedBchg,this.app.selectedAcct=this.app.selectedBchg.targetAcct,this.app.candidateSelectedBchg=null),this.app.candidateTran=null,this.app.candidateSelectedAcct=null,this.app.data.jrnl.refresh(),e&&this.app.data.jrnl.sortTranList(),this.app.data.faeSideAssets.refresh(),this.app.data.faeSideEquities.refresh(),this.tranOp=null,this.app.viewNavMode=!0,this.app.navBtnReturn&&(this.app.navBtnReturn.click(),this.app.navBtnReturn=null),this.app.elementNavRibbon.classList.toggle("aaHidden",!1)}tranEditCancel(t){this.app.candidateTran=null,this.app.candidateSelectedBchg=null,this.tranOp=null,this.app.viewNavMode=!0,this.app.navBtnReturn&&(this.app.navBtnReturn.click(),this.app.navBtnReturn=null),this.app.elementNavRibbon.classList.toggle("aaHidden",!1)}tranDelete(t){this.tranOp=this.TRAN_OP_DELETE,this.app.viewNavMode=!1}tranDeleteConfirmed(t){let e;if(1==this.app.selectedTran.parentJrnl.tranList.length)e=null;else{let t=this.app.selectedTran.parentJrnl.tranList.findIndex(t=>t.id==this.app.selectedTran.id);e=t<this.app.selectedTran.parentJrnl.tranList.length-1?this.app.selectedTran.parentJrnl.tranList[t+1]:this.app.selectedTran.parentJrnl.tranList[t-1]}this.app.selectedTran.unregister(),this.app.selectedTran=null,this.app.selectedBchg=null,this.app.data.faeSideAssets.refresh(),this.app.data.faeSideEquities.refresh(),this.app.selectedTran=e,this.tranOp=null,this.app.viewNavMode=!0,this.app.navBtnReturn?(this.app.navBtnReturn.click(),this.app.navBtnReturn=null):this.app.selectedTran||this.app.navBtnJrnl.click()}tranDeleteCancel(t){this.app.viewNavMode=!0,this.app.navBtnReturn&&(this.app.navBtnReturn.click(),this.app.navBtnReturn=null)}bchgNew(t){this.app.viewmodelPopupAcctPicker.open(t,this.callbackBchgNew)}callbackBchgNew(t,e,n){let r;r=e?e.intraTranIndex:this.app.candidateTran.bchgList.length;let i=new a.a(`bchg${t.data.nextBchgId}`,t.candidateTran,n,"",0);t.candidateSelectedBchg=i,t.candidateTran.bchgList.splice(r,0,i),t.candidateTran.refresh(),t.viewmodelTran.observeForSetInputFocus()}bchgDelete(t){let e=t.sourceTran;e.bchgList.splice(t.intraTranIndex,1),e.refresh()}};c=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}([Object(r.d)("au-module-tran"),Object(r.e)(i.App),s("design:paramtypes",[Object])],c)},"au-components/au-module-tran.html":function(t,e,n){t.exports='<template>\n  <require from="au-views/au-icon-nav-up.html"></require>\n  <require from="au-views/au-icon-nav-down.html"></require>\n  <require from="au-views/au-icon-new.html"></require>\n  <require from="au-views/au-icon-edit.html"></require>\n  <require from="au-views/au-icon-delete.html"></require>\n  <require from="au-views/au-icon-mover-rowops.html"></require>\n  <require from="au-views/au-icon-ellipsis.html"></require>\n  <require from="au-views/au-text-ellipsis.html"></require>\n  <require from="au-views/au-grid-bchg-cells-spacer.html"></require>\n  <require from="au-converters/au-currency-converter"></require>\n  <require from="au-components/au-grid-bchg-cells-heading"></require>\n  <require from="au-components/au-grid-bchg-cells"></require>\n  <require from="au-components/au-grid-bchg-cells-edit"></require>\n  <require from="au-components/au-grid-bchg-cells-total"></require>\n\n  <div class="aaPanel aaPanelBoxShadow"\n       css="${app.selectedModule == app.MODULE_TRAN ? \'\' : \'display: none;\'}"\n       element.ref="moduleRootElement"\n       id="observedElement">\n    <div class="aaPanelHeader aaPanelHeaderModule">Transaction</div>\n    <template if.bind="app.viewNavMode">\n      <div class="aaPanelToolBar">\n        <div class="aaInlineFlex" style="justify-content: center;">\n          <span class="aaToolBarDivider">.</span>\n          <button type="button"\n                  class="aaBtn"\n                  click.trigger="tranNew($event)">\n            <au-icon-new></au-icon-new>\n            &nbsp;New transaction\n          </button>\n          <button type="button"\n                  class="aaBtn"\n                  click.trigger="tranEdit($event)">\n            <au-icon-edit></au-icon-edit>\n            &nbsp;Edit this transaction\n          </button>\n          <button type="button"\n                  class="aaBtn"\n                  click.trigger="tranDelete($event)">\n            <au-icon-delete></au-icon-delete>\n            &nbsp;Delete this transaction\n            <au-text-ellipsis></au-text-ellipsis>\n          </button>\n          <span class="aaToolBarDivider">.</span>\n        </div>\n      </div>\n      <div class="aaPanelBody">\n        <div class="aaRow"\n             style="border-bottom-style: none;">\n          <label class="aaFormItemLabel">\n            Date:&nbsp;&nbsp;\n          </label>\n          <span class="aaCell aaCellBorder aaCellTranDate">${app.selectedTran.date}</span>\n        </div>\n        <div class="aaGridContainer">\n          <div class="aaGridTitleBar">Account balance changes</div>\n          <div class="aaRow aaRowColumnHeaders" style="border-bottom-width: 3px;">\n            <div class="aaRowOps aaRowOpsEmpty aaHidden">\n            </div>\n            <div class="aaVerticalGridline aaVerticalGridlineWide"></div>\n            <div class="aaRowData aaFontLabel aaFontBold">\n              <au-grid-bchg-cells-heading fae-side.one-time="\'asset\'"></au-grid-bchg-cells-heading>\n              <div class="aaVerticalGridline aaVerticalGridlineWide"></div>\n              <au-grid-bchg-cells-heading fae-side.one-time="\'equity\'"></au-grid-bchg-cells-heading>\n            </div>\n            <div class="aaVerticalGridline aaVerticalGridlineWide"></div>\n          </div>\n          <div class="aaGridScrollableRows aaGridHeightInTran">\n            <template repeat.for="bchg of app.selectedTran.bchgList">\n              <div class="aaRow"\n                   style="border-bottom-width: 3px;"\n                   id="tran-${bchg.id}"\n                   mouseenter.trigger="onRowEnter($event, bchg)"\n                   mouseleave.trigger="onRowLeave($event, bchg)"\n                   click.trigger="app.selectBchg(bchg)"\n                   dblclick.trigger="app.selectTranBchgGoAcct(bchg)">\n                <div class="aaRowOps aaRowOpsEmpty aaBgColorToolbar ${app.selectedBchg.id == bchg.id ? \'aaRowOpsSelected\' : \'\'}">\n                </div>\n                <div class="aaVerticalGridline aaVerticalGridlineWide"></div>\n                <div class="aaRowData aaRowBgColorData  ${app.selectedBchg.id == bchg.id ? \'aaRowDataSelected\' : \'\'}">\n                  <template if.bind="bchg.targetAcct.parentFaeSide.id == \'Equities\'">\n                    \x3c!-- blank space in change-to-asset column --\x3e\n                    <au-grid-bchg-cells-spacer></au-grid-bchg-cells-spacer>\n                    <div class="aaVerticalGridline aaVerticalGridlineWide"></div>\n                  </template>\n                  \x3c!-- column with read-only data cells --\x3e\n                  <au-grid-bchg-cells bchg.one-way="bchg"></au-grid-bchg-cells>\n                  <template if.bind="bchg.targetAcct.parentFaeSide.id == \'Assets\'">\n                    \x3c!-- blank space in change-to-equity column --\x3e\n                    <div class="aaVerticalGridline aaVerticalGridlineWide"></div>\n                    <au-grid-bchg-cells-spacer></au-grid-bchg-cells-spacer>\n                  </template>\n                </div>\n                <div class="aaVerticalGridline aaVerticalGridlineWide"></div>\n              </div>\n            </template>\n            \x3c!--\n            The purpose of having the following invisible end-of-list row\n            is to provide an invisible horizontal spacer if tran.bchgList is empty\n            so as to display the column headings row properly..\n            --\x3e\n            <div class="aaRow aaHidden"\n                 style="border-bottom-width: 3px;">\n              <template if.bind="app.viewNavMode">\n                <div class="aaRowOps aaRowOpsEmpty aaBgColorToolbar">\n                </div>\n                <div class="aaVerticalGridline aaVerticalGridlineWide"></div>\n              </template>\n              <div class="aaRowData aaHidden">\n                <au-grid-bchg-cells-spacer></au-grid-bchg-cells-spacer>\n                <div class="aaVerticalGridline aaVerticalGridlineWide"></div>\n                <au-grid-bchg-cells-spacer></au-grid-bchg-cells-spacer>\n              </div>\n              <div class="aaVerticalGridline aaVerticalGridlineWide"></div>\n            </div>\n          </div>\n          <div class="aaGridFooterBar"></div>\n        </div>\n        \x3c!-- net change amt for eash side --\x3e\n        <div class="aaGridContainer"\n             style="border-color: transparent; background-color: transparent;">\n          <div class="aaRow aaFontLabel" style="border-color: transparent; background-color: transparent;">\n            <div class="aaRowOps aaRowOpsEmpty aaHidden">\n            </div>\n            <div class="aaVerticalGridline aaVerticalGridlineWide aaHidden"></div>\n            <div class="aaRowData">\n              <au-grid-bchg-cells-total\n                fae-side.one-way="\'assets\'"\n                side-total-changes.one-way="app.selectedTran.totalChangesAssets"\n                other-side-total-changes.one-way="app.selectedTran.totalChangesEquities">\n              </au-grid-bchg-cells-total>\n\n              <div class="aaVerticalGridline aaVerticalGridlineWide aaHidden"></div>\n              <au-grid-bchg-cells-total\n                fae-side.one-way="\'equities\'"\n                side-total-changes.one-way="app.selectedTran.totalChangesEquities"\n                other-side-total-changes.one-way="app.selectedTran.totalChangesAssets">\n              </au-grid-bchg-cells-total>\n            </div>\n            <div class="aaVerticalGridline aaVerticalGridlineWide aaHidden"></div>\n          </div>\n        </div>\n      </div>\n    </template>\n    <template if.bind="!app.viewNavMode && tranOp == TRAN_OP_DELETE">\n      <div class="aaPanelToolBar">\n        <span class="aaToolBarDivider">.</span>\n        <span class="aaFontLabel aaFontBold">Delete transaction:</span>\n        <span class="aaToolBarDivider aaHidden">.</span>\n        <button type="button" class="aaBtnFinish" click.trigger="tranDeleteConfirmed($event)">Confirm</button>\n        <span class="aaToolBarDivider aaHidden">.</span>\n        <button type="button" class="aaBtn" click.trigger="tranDeleteCancel($event)">Cancel</button>\n        <span class="aaToolBarDivider">.</span>\n      </div>\n      <div class="aaPanelBody">\n        <div class="aaRow"\n             style="border-bottom-style: none;">\n          <label class="aaFormItemLabel">\n            Date:&nbsp;&nbsp;\n          </label>\n          <span class="aaCell aaCellBorder aaCellTranDate">${app.selectedTran.date}</span>\n        </div>\n        <div class="aaGridContainer">\n          <div class="aaGridTitleBar">Account balance changes</div>\n          <div class="aaRow aaRowColumnHeaders" style="border-bottom-width: 3px;">\n            <div class="aaRowData aaFontLabel aaFontBold">\n              <au-grid-bchg-cells-heading fae-side.one-time="\'asset\'"></au-grid-bchg-cells-heading>\n              <div class="aaVerticalGridline aaVerticalGridlineWide"></div>\n              <au-grid-bchg-cells-heading fae-side.one-time="\'equity\'"></au-grid-bchg-cells-heading>\n            </div>\n            <div class="aaVerticalGridline aaVerticalGridlineWide"></div>\n          </div>\n\n          <div class="aaGridScrollableRows aaGridHeightInTran">\n            <template repeat.for="bchg of app.selectedTran.bchgList">\n              <div class="aaRow"\n                   style="border-bottom-width: 3px;"\n                   mouseenter.trigger="onRowEnter($event, bchg)"\n                   mouseleave.trigger="onRowLeave($event, bchg)">\n                <div class="aaRowOps aaRowOpsEmpty aaBgColorToolbar"\n                     style="display: none;">\n                </div>\n                <div class="aaVerticalGridline"\n                     style="display: none;"></div>\n                <div class="aaRowData aaRowBgColorData">\n                  <template if.bind="bchg.targetAcct.parentFaeSide.id == \'Equities\'">\n                    \x3c!-- blank space in change-to-asset column --\x3e\n                    <au-grid-bchg-cells-spacer></au-grid-bchg-cells-spacer>\n                    <div class="aaVerticalGridline aaVerticalGridlineWide"></div>\n                  </template>\n                  \x3c!-- column with read-only data cells --\x3e\n                  <au-grid-bchg-cells bchg.one-way="bchg"></au-grid-bchg-cells>\n                  <template if.bind="bchg.targetAcct.parentFaeSide.id == \'Assets\'">\n                    \x3c!-- blank space in change-to-equity column --\x3e\n                    <div class="aaVerticalGridline aaVerticalGridlineWide"></div>\n                    <au-grid-bchg-cells-spacer></au-grid-bchg-cells-spacer>\n                  </template>\n                </div>\n                <div class="aaVerticalGridline aaVerticalGridlineWide"></div>\n              </div>\n            </template>\n            \x3c!--\n            The purpose of having the following invisible end-of-list row\n            is to provide an invisible horizontal spacer if tran.bchgList is empty\n            so as to display the column headings row properly..\n            --\x3e\n            <div class="aaRow aaHidden" style="border-bottom-width: 3px;">\n              <div class="aaRowData aaHidden">\n                <au-grid-bchg-cells-spacer></au-grid-bchg-cells-spacer>\n                <div class="aaVerticalGridline aaVerticalGridlineWide"></div>\n                <au-grid-bchg-cells-spacer></au-grid-bchg-cells-spacer>\n              </div>\n              <div class="aaVerticalGridline aaVerticalGridlineWide"></div>\n            </div>\n          </div>\n          <div class="aaGridFooterBar"></div>\n        </div>\n        \x3c!-- net change amt for eash side --\x3e\n        <div class="aaGridContainer"\n             style="border-color: transparent; background-color: transparent;">\n          <div class="aaRow aaFontLabel" style="border-color: transparent; background-color: transparent;">\n            <div class="aaRowData">\n              <au-grid-bchg-cells-total\n                fae-side.one-way="\'assets\'"\n                side-total-changes.one-way="app.selectedTran.totalChangesAssets"\n                other-side-total-changes.one-way="app.selectedTran.totalChangesEquities">\n              </au-grid-bchg-cells-total>\n\n              <div class="aaVerticalGridline aaVerticalGridlineWide aaHidden"></div>\n              <au-grid-bchg-cells-total\n                fae-side.one-way="\'equities\'"\n                side-total-changes.one-way="app.selectedTran.totalChangesEquities"\n                other-side-total-changes.one-way="app.selectedTran.totalChangesAssets">\n              </au-grid-bchg-cells-total>\n            </div>\n            <div class="aaVerticalGridline aaVerticalGridlineWide aaHidden"></div>\n          </div>\n        </div>\n      </div>\n    </template>\n    <template if.bind="!app.viewNavMode && (tranOp == TRAN_OP_NEW || tranOp == TRAN_OP_EDIT)" )>\n      <div class="aaPanelToolBar"\n           element.ref="panelToolBar">\n        <span class="aaToolBarDivider">.</span>\n        <template if.bind="tranOp == TRAN_OP_EDIT">\n          <span class="aaFontLabel aaFontBold">Editing transaction:</span>\n          <span class="aaToolBarDivider aaHidden">.</span>\n          <button type="button" class="aaBtnFinish" click.trigger="tranEditDone($event)">Save changes</button>\n          <span class="aaToolBarDivider aaHidden">.</span>\n          <button type="button" class="aaBtn" click.trigger="tranEditCancel($event)">Cancel</button>\n          <span class="aaToolBarDivider">.</span>\n        </template>\n        <template if.bind="tranOp == TRAN_OP_NEW">\n          <span class="aaFontLabel aaFontBold">Creating new transaction:</span>\n          <span class="aaToolBarDivider aaHidden">.</span>\n          <button type="button" class="aaBtnFinish" click.trigger="tranNewDone($event)">Save changes</button>\n          <span class="aaToolBarDivider aaHidden">.</span>\n          <button type="button" class="aaBtn" click.trigger="tranNewCancel($event)">Cancel</button>\n          <span class="aaToolBarDivider">.</span>\n        </template>\n        <div class="aaInlineBlock"></div>\n      </div>\n      <div class="aaPanelBody"\n           element.ref="popupTop">\n        <div class="aaRow"\n             style="border-bottom-style: none;">\n          <label class="aaFormItemLabel">\n            Date:&nbsp;&nbsp;\n          </label>\n          <input type="date"\n                 class="aaCell aaFontData aaCellBorder aaCellTranDate  ${app.candidateTran.date.length == 0 ? \'aaCellErrorIndicater\' : \'\'}"\n                 id="tranInputDate"\n                 value.bind="app.candidateTran.date">\n        </div>\n        <div class="aaGridContainer">\n          <div class="aaGridTitleBar">Account balance changes</div>\n          <div class="aaPanelToolBar" style="text-align: center;">\n            <button type="button"\n                    class="aaBtn"\n                    click.trigger="app.viewmodelPopupBchgMover.open()">\n              <au-icon-mover-rowops></au-icon-mover-rowops>\n              &nbsp;Move rows\n              <au-text-ellipsis></au-text-ellipsis>\n            </button>\n          </div>\n          <div class="aaRow aaRowColumnHeaders" style="border-bottom-width: 3px;">\n            <div class="aaRowOps aaFontLabel aaHidden">\n                <span class="aaBtn">\n                  <au-icon-new></au-icon-new>\n                </span>\n              <span class="aaBtn">\n                  <au-icon-delete></au-icon-delete>\n                </span>\n            </div>\n            <div class="aaVerticalGridline aaVerticalGridlineWide"></div>\n            <div class="aaRowData aaFontLabel aaFontBold">\n              <au-grid-bchg-cells-heading fae-side.one-time="\'asset\'"></au-grid-bchg-cells-heading>\n              <div class="aaVerticalGridline aaVerticalGridlineWide"></div>\n              <au-grid-bchg-cells-heading fae-side.one-time="\'equity\'"></au-grid-bchg-cells-heading>\n            </div>\n            <div class="aaVerticalGridline aaVerticalGridlineWide"></div>\n          </div>\n          <div class="aaGridScrollableRows aaGridHeightInTran">\n            <template repeat.for="bchg of app.candidateTran.bchgList">\n              <div class="aaRow"\n                   style="border-bottom-width: 3px;"\n                   mouseenter.trigger="onRowEnter($event, bchg)"\n                   mouseleave.trigger="onRowLeave($event, bchg)">\n                <div class="aaRowOps aaBgColorToolbar aaFontLabel">\n                    <span class="aaBtn"\n                          title="Insert new row..."\n                          click.trigger="bchgNew(bchg)">\n                      <au-icon-new></au-icon-new>\n                    </span>\n                  <span class="aaBtn"\n                        title="Delete row..."\n                        click.trigger="bchgDelete(bchg)">\n                      <au-icon-delete></au-icon-delete>\n                    </span>\n                </div>\n                <div class="aaVerticalGridline aaVerticalGridlineWide"></div>\n                <div class="aaRowData aaRowBgColorData">\n                  \x3c!-- spacer if equities side --\x3e\n                  <template if.bind="bchg.targetAcct.parentFaeSide.id == \'Equities\'">\n                    \x3c!-- blank space in change-to-asset column --\x3e\n                    <au-grid-bchg-cells-spacer></au-grid-bchg-cells-spacer>\n                    <div class="aaVerticalGridline aaVerticalGridlineWide"></div>\n                  </template>\n                  \x3c!-- column for editable data cells --\x3e\n                  <au-grid-bchg-cells-edit bchg.one-way="bchg"\n                                           viewmodel-popup-acct-picker.one-time="viewmodelPopupAcctPicker">\n                  </au-grid-bchg-cells-edit>\n                  <template if.bind="bchg.targetAcct.parentFaeSide.id == \'Assets\'">\n                    \x3c!-- blank space in change-to-equity column --\x3e\n                    <div class="aaVerticalGridline aaVerticalGridlineWide"></div>\n                    <au-grid-bchg-cells-spacer></au-grid-bchg-cells-spacer>\n                  </template>\n                </div>\n                <div class="aaVerticalGridline aaVerticalGridlineWide"></div>\n              </div>\n            </template>\n            \x3c!-- End of list row --\x3e\n            <div class="aaRow" style="border-bottom-width: 3px;"\n                 mouseenter.trigger="onRowEnter($event, null)"\n                 mouseleave.trigger="onRowLeave($event, null)">\n              <div class="aaRowOps aaBgColorToolbar aaFontLabel">\n                  <span class="aaBtn"\n                        title="Insert new row..."\n                        click.trigger="bchgNew(null)">\n                    <au-icon-new></au-icon-new>\n                  </span>\n                <span class="aaBtn aaHidden">\n                      <au-icon-delete></au-icon-delete>\n                    </span>\n              </div>\n              <div class="aaVerticalGridline aaVerticalGridlineWide"></div>\n              <div class="aaRowData aaHidden">\n                <au-grid-bchg-cells-spacer></au-grid-bchg-cells-spacer>\n                <div class="aaVerticalGridline aaVerticalGridlineWide"></div>\n                <au-grid-bchg-cells-spacer></au-grid-bchg-cells-spacer>\n              </div>\n              <div class="aaVerticalGridline aaVerticalGridlineWide"></div>\n            </div>\n          </div>\n          <div class="aaGridFooterBar"></div>\n        </div>\n        \x3c!-- net change amt for eash side --\x3e\n        <div class="aaGridContainer"\n             style="border-color: transparent; background-color: transparent;">\n          <div class="aaRow aaFontLabel" style="border-color: transparent; background-color: transparent;">\n            <div class="aaRowOps aaFontLabel aaHidden">\n              <button type="button" class="aaBtn">\n                <au-icon-new></au-icon-new>\n              </button>\n              <button type="button" class="aaBtn">\n                <au-icon-delete></au-icon-delete>\n              </button>\n            </div>\n            <div class="aaVerticalGridline aaVerticalGridlineWide aaHidden"></div>\n            <div class="aaRowData">\n              <au-grid-bchg-cells-total\n                fae-side.one-way="\'assets\'"\n                side-total-changes.one-way="app.candidateTran.totalChangesAssets"\n                other-side-total-changes.one-way="app.candidateTran.totalChangesEquities">\n              </au-grid-bchg-cells-total>\n              <div class="aaVerticalGridline aaVerticalGridlineWide aaHidden"></div>\n              <au-grid-bchg-cells-total\n                fae-side.one-way="\'equities\'"\n                side-total-changes.one-way="app.candidateTran.totalChangesEquities"\n                other-side-total-changes.one-way="app.candidateTran.totalChangesAssets">\n              </au-grid-bchg-cells-total>\n            </div>\n            <div class="aaVerticalGridline aaVerticalGridlineWide aaHidden"></div>\n          </div>\n        </div>\n      </div>\n    </template>\n  </div>\n</template>\n'},"au-components/au-popup-acct-mover":function(t,e,n){"use strict";n.r(e),n.d(e,"AuPopupAcctMover",(function(){return a}));var r=n("aurelia-framework"),i=n("app"),o=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};let a=class{constructor(t){this.moverAcctList=[],this.mouseIsDown=!1,this.selectedMoverRow=null,this.app=t}open(t,e,n){let r;r=t.getBoundingClientRect(),this.moverDialogContent.style.top=`${r.top}px`,r=e.getBoundingClientRect(),this.moverDialogContent.style.left=`${r.left}px`,this.faeSide=n,this.moverAcctList.push(...this.faeSide.acctList),this.moverDialogModal.style.display="flex"}done(){if(this.moverAcctList.length>=2){for(let t=0;t<this.moverGridRows.childElementCount;t++){this.moverGridRows.children[t].listItem.intraSideIndex=t}this.faeSide.sortAcctList(),this.faeSide.reindexAcctList()}this.moverAcctList.splice(0,this.moverAcctList.length),this.moverDialogModal.style.display="none"}cancel(){this.moverAcctList.splice(0,this.moverAcctList.length),this.moverDialogModal.style.display="none"}onRowMouseDown(t){let e=t.currentTarget;e.children[0].classList.toggle("aaRowOpsSelected",!0),e.children[2].classList.toggle("aaDragging",!0),e.children[2].classList.toggle("aaRowDataHover",!1),this.mouseIsDown=!0,this.selectedMoverRow=t.currentTarget}onRowMouseUp(t){let e=t.currentTarget;e.children[0].classList.toggle("aaRowOpsSelected",!1),e.children[2].classList.toggle("aaDragging",!1),e.children[2].classList.toggle("aaRowDataHover",!0),this.mouseIsDown=!1,this.selectedMoverRow=null}onRowMouseLeave(t,e){if(!this.mouseIsDown){t.currentTarget.children[2].classList.toggle("aaRowDataHover",!1)}}onRowMouseEnter(t,e){if(!this.mouseIsDown){t.currentTarget.children[2].classList.toggle("aaRowDataHover",!0)}}onListMouseMove(t){if(!this.mouseIsDown||!this.selectedMoverRow)return;let e=t.clientY,n=t.currentTarget,r=this.selectedMoverRow.previousElementSibling;if(r&&e<this.selectedMoverRow.getBoundingClientRect().top)return void n.insertBefore(this.selectedMoverRow,r);let i=this.selectedMoverRow.nextElementSibling;i&&e>=i.getBoundingClientRect().top&&n.insertBefore(i,this.selectedMoverRow)}onListMouseLeave(t){if(this.mouseIsDown&&this.selectedMoverRow)return this.selectedMoverRow.children[0].classList.toggle("aaDragging",!1),this.selectedMoverRow.children[0].classList.toggle("aaRowDataHover",!1),this.mouseIsDown=!1,void(this.selectedMoverRow=null)}};a=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}([Object(r.d)("au-popup-acct-mover"),Object(r.e)(i.App),o("design:paramtypes",[Object])],a)},"au-components/au-popup-acct-mover.html":function(t,e,n){t.exports='<template>\n  <require from="au-views/au-icon-mover-rowops.html"></require>\n  <require from="au-converters/au-currency-converter"></require>\n  <require from="au-converters/au-equation-side-converter"></require>\n\n  <div class="aaModal"\n       style="display: none; flex-direction: row; align-items: flex-start; justify-content: center;"\n       element.ref="moverDialogModal">\n    <div class="aaModalContent aaInlineBlock aaPanelBoxShadow"\n         element.ref="moverDialogContent">\n      <div class="aaGridContainer" style="margin-top: 0;">\n        <div class="aaGridTitleBar" style="font-size: larger;">Move rows<br><span class="aaFontLabel">&mdash; Drag & drop row(s) to desired list position(s). &mdash;</span>\n        </div>\n        <div class="aaPanelToolBar">\n          <div style="text-align: center;">\n            <button type="button" class="aaBtnFinish" click.trigger="done()">Done</button>\n            <button type="button" class="aaBtn" style="margin-left: 4pc;" click.trigger="cancel()">Cancel</button>\n          </div>\n        </div>\n        <div class="aaRow aaRowColumnHeaders">\n          <div class="aaRowOps aaRowOpsEmpty aaHidden">\n          </div>\n          <div class="aaVerticalGridline"></div>\n          <div class="aaRowData aaFontLabel aaFontBold">\n            <div class="aaCell aaCellAcctTitle">Title</div>\n            <div class="aaVerticalGridline"></div>\n            <div class="aaCell aaCellBchgBal">Balance</div>\n            <div class="aaVerticalGridline"></div>\n          </div>\n        </div>\n        <div class="aaGridScrollableRows aaGridHeightInFaeSide"\n             element.ref="moverGridRows"\n             mousemove.trigger="onListMouseMove($event)"\n             mouseleave.trigger="onListMouseLeave($event)">\n          <template repeat.for="listItem of moverAcctList">\n            <div class="aaRow"\n                 list-item.to-view="listItem"\n                 mouseenter.trigger="onRowMouseEnter($event, listItem)"\n                 mouseleave.trigger="onRowMouseLeave($event, listItem)"\n                 mousedown.trigger="onRowMouseDown($event)"\n                 mouseup.trigger="onRowMouseUp($event)">\n              <div class="aaRowOps aaRowOpsEmpty aaBgColorToolbar">\n              </div>\n              <div class="aaVerticalGridline"></div>\n              <div class="aaRowData aaRowBgColorData">\n                <template if.bind="listItem.isAcct()">\n                  <span class="aaCell aaFontData aaCellAcctTitle">${listItem.title}</span>\n                  <div class="aaVerticalGridline"></div>\n                  <span class="aaCell aaFontData aaCellBchgBal">${listItem.endingBalance | auCurrencyConverter}</span>\n                </template>\n                <template if.bind="listItem.isAnnotation()">\n                  <span class="aaCell aaFontData aaCellAnnoTitle">${listItem.annoText}</span>\n                  <div class="aaVerticalGridline"></div>\n                  <span class="aaCell aaFontData aaCellBchgBal"></span>\n                </template>\n                <div class="aaVerticalGridline"></div>\n              </div>\n            </div>\n          </template>\n          <template if.bind="moverAcctList.length == 0">\n            <div class="aaRow aaHidden">\n              <div class="aaRowOps aaRowOpsEmpty aaBgColorToolbar">\n              </div>\n              <div class="aaVerticalGridline"></div>\n              <div class="aaRowData aaRowBgColorData">\n                <span class="aaCell aaFontData aaCellAcctTitle">x</span>\n                <div class="aaVerticalGridline"></div>\n                <span class="aaCell aaFontData aaCellBchgBal">0</span>\n                <div class="aaVerticalGridline"></div>\n              </div>\n            </div>\n          </template>\n        </div>\n        <div class="aaGridFooterBar"></div>\n      </div>\n    </div>\n  </div>\n</template>\n'},"au-components/au-popup-acct-picker":function(t,e,n){"use strict";n.r(e),n.d(e,"AuPopupAcctPicker",(function(){return a}));var r=n("aurelia-framework"),i=n("app"),o=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};let a=class{constructor(t){this.app=t}open(t,e){this.bchg=t,this.callbackPicked=e;let n=this.app.viewmodelTran.popupTop.getBoundingClientRect();this.pickerDialogContent.style.marginTop=`${n.top}px`,this.pickerDialogModal.style.display="flex"}picked(t){this.callbackPicked(this.app,this.bchg,t),this.pickerDialogModal.style.display="none"}cancel(){this.pickerDialogModal.style.display="none"}};a=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}([Object(r.d)("au-popup-acct-picker"),Object(r.e)(i.App),o("design:paramtypes",[Object])],a)},"au-components/au-popup-acct-picker.html":function(t,e,n){t.exports='<template>\n  <require from="au-components/au-fae-side-picker"></require>\n  <require from="au-converters/au-equation-side-converter"></require>\n  <div class="aaModal"\n       style="display: none; flex-direction: row; align-items: flex-start; justify-content: center;"\n       element.ref="pickerDialogModal">\n    <div class="aaModalContent aaInlineBlock aaPanelBoxShadow"\n         style="text-align: center;"\n         element.ref="pickerDialogContent">\n      <div\n        class="aaGridTitleBar"\n        style="font-size: larger;">Pick target account\n      </div>\n      <div class="aaPanelToolBar">\n        <div style="text-align: center;">\n          <button type="button" class="aaBtn" click.trigger="cancel()">Cancel</button>\n        </div>\n      </div>\n      <div class="aaPanelBody">\n        <div class="aaEquSideContainer">\n          <au-fae-side-picker\n            fae-side.one-way="app.data.faeSideAssets">\n          </au-fae-side-picker>\n        </div>\n        <div class="aaEquSideContainer" style="padding: 0 1pc;">\n          <h1>=</h1>\n        </div>\n        <div class="aaEquSideContainer">\n          <au-fae-side-picker\n            fae-side.one-way="app.data.faeSideEquities">\n          </au-fae-side-picker>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n'},"au-components/au-popup-alert":function(t,e,n){"use strict";n.r(e),n.d(e,"AuPopupAlert",(function(){return a}));var r=n("aurelia-framework"),i=n("app"),o=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};let a=class{constructor(t){this.app=t}open(t,e,n){this.alertTitle=t,this.marginTop=e,this.alertMsg=n,this.alertDialogModal.style.display="flex"}close(){this.alertDialogModal.style.display="none"}};a=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}([Object(r.d)("au-popup-alert"),Object(r.e)(i.App),o("design:paramtypes",[i.App])],a)},"au-components/au-popup-alert.html":function(t,e){t.exports='<template>\n  <style>\n    .aaAlert {\n      background-color: #f0f0f0;\n      display: inline-flex;\n      flex-direction: column;\n      align-items: stretch;\n      justify-content: flex-start;\n      padding: 10px;\n    }\n\n    .aaAlertTitleBar {\n      display: block;\n      margin: 0 0 15px 0;\n      border-bottom: 1px solid #4980B6;\n    }\n\n    .aaAlertBody {\n      display: inline-flex;\n      flex-direction: row;\n      align-items: center;\n      background-color: #fff;\n      border: 1px solid #4980B6;\n      padding: 5px;\n    }\n\n    /* The Close Button */\n    .aaClose {\n      color: #000;\n      float: right;\n      font-weight: bold;\n      padding: 0 6px;\n      margin-bottom: 5px;\n      border: 1px solid transparent;\n      border-radius: 0.25pc;\n    }\n\n    .aaClose:hover,\n    .aaClose:focus {\n      color: #333;\n      text-decoration: none;\n      cursor: pointer;\n      border-color: #333;\n    }\n  </style>\n  <div class="aaModal"\n       style="display: none;\n              flex-direction: row;\n              align-items: flex-start;\n              justify-content: center;"\n       element.ref="alertDialogModal">\n    <div class="aaModalContent aaAlert aaPanelBoxShadow aaPanel aaSansSerif"\n         css="margin-top: ${marginTop}px;"\n         element.ref="alertDialogContent">\n      <div class="aaAlertTitleBar">\n        <span class="aaClose"\n              click.trigger="close()">\n            &times;\n        </span>\n        <div style="display: flex; color: #000;">\n          ${alertTitle}\n        </div>\n      </div>\n      <div class="aaAlertBody">\n        <div style="color:red;\n                    margin: 5px;\n                    font-size: x-large;">\n\x3c!--\n          <i class="fas fa-ban"></i>\n          <i class="fas fa-exclamation"></i>\n          <i class="fas fa-circle"></i>\n          <i class="far fa-exclamation-circle"></i>\n          <i class="fas fa-exclamation-triangle"></i>\n          <i class="far fa-exclamation-triangle"></i>\n          <i class="fas fa-exclamation-circle"></i>\n          <i class="far fa-meh"></i>\n--\x3e\n          <i class="fas fa-meh"></i>\n        </div>\n        <div class="aaFontData"\n             style="margin: 5px;">\n          ${alertMsg}\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n'},"au-components/au-popup-bchg-mover":function(t,e,n){"use strict";n.r(e),n.d(e,"AuPopupBchgMover",(function(){return a}));var r=n("aurelia-framework"),i=n("app"),o=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};let a=class{constructor(t){this.moverBchgList=[],this.mouseIsDown=!1,this.selectedMoverRow=null,this.app=t}open(){this.moverBchgList.push(...this.app.candidateTran.bchgList);let t=this.app.viewmodelTran.popupTop.getBoundingClientRect();this.moverDialogContent.style.marginTop=`${t.top}px`,this.moverDialogModal.style.display="flex"}done(t){if(this.moverBchgList.length>=2){for(let t=0;t<this.moverGridRows.childElementCount;t++){this.moverGridRows.children[t].moverBchg.intraTranIndex=t}this.app.candidateTran.sortBchgList()}this.moverBchgList.splice(0,this.moverBchgList.length),this.moverDialogModal.style.display="none"}cancel(t){this.moverBchgList.splice(0,this.moverBchgList.length),this.moverDialogModal.style.display="none"}onRowMouseDown(t){let e=t.currentTarget;e.children[0].classList.toggle("aaRowOpsSelected",!0),e.children[2].classList.toggle("aaDragging",!0),e.children[2].classList.toggle("aaRowDataHover",!1),this.mouseIsDown=!0,this.selectedMoverRow=t.currentTarget}onRowMouseUp(t){let e=t.currentTarget;e.children[0].classList.toggle("aaRowOpsSelected",!1),e.children[2].classList.toggle("aaDragging",!1),e.children[2].classList.toggle("aaRowDataHover",!0),this.mouseIsDown=!1,this.selectedMoverRow=null}onRowMouseLeave(t,e){if(!this.mouseIsDown){t.currentTarget.children[2].classList.toggle("aaRowDataHover",!1)}}onRowMouseEnter(t,e){if(!this.mouseIsDown){t.currentTarget.children[2].classList.toggle("aaRowDataHover",!0)}}onListMouseMove(t){if(!this.mouseIsDown||!this.selectedMoverRow)return;let e=t.clientY,n=t.currentTarget,r=this.selectedMoverRow.previousElementSibling;if(r&&e<this.selectedMoverRow.getBoundingClientRect().top)return void n.insertBefore(this.selectedMoverRow,r);let i=this.selectedMoverRow.nextElementSibling;i&&e>=i.getBoundingClientRect().top&&n.insertBefore(i,this.selectedMoverRow)}onListMouseLeave(t){if(this.mouseIsDown&&this.selectedMoverRow)return this.selectedMoverRow.children[0].classList.toggle("aaDragging",!1),this.selectedMoverRow.children[0].classList.toggle("aaRowDataHover",!1),this.mouseIsDown=!1,void(this.selectedMoverRow=null)}};a=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}([Object(r.d)("au-popup-bchg-mover"),Object(r.e)(i.App),o("design:paramtypes",[i.App])],a)},"au-components/au-popup-bchg-mover.html":function(t,e,n){t.exports='<template>\n  <require from="au-converters/au-currency-converter"></require>\n  <require from="au-converters/au-equation-side-converter"></require>\n  <require from="au-components/au-grid-bchg-cells"></require>\n  <require from="au-views/au-grid-bchg-cells-spacer.html"></require>\n  <require from="au-components/au-grid-bchg-cells-heading"></require>\n\n  <div class="aaModal"\n       style="display: none; flex-direction: row; align-items: flex-start; justify-content: center;"\n       element.ref="moverDialogModal">\n    <div class="aaModalContent aaInlineBlock aaPanelBoxShadow"\n         element.ref="moverDialogContent">\n      <div class="aaGridContainer" style="margintop: 0;">\n        <div class="aaGridTitleBar" style="font-size: larger;">Move rows<br><span class="aaFontLabel">&mdash; Drag & drop row(s) to desired list position(s). &mdash;</span>\n        </div>\n        <div class="aaPanelToolBar">\n          <div style="text-align: center;">\n            <span click.trigger="done($event)" class="aaBtnFinish">Done</span>\n            <span click.trigger="cancel($event)" class="aaBtn" style="margin-left: 4pc;">Cancel</span>\n          </div>\n        </div>\n        <div class="aaRow aaRowColumnHeaders aaFontLabel aaFontBold" style="border-bottom-width: 3px;">\n          <div class="aaRowOps aaRowOpsEmpty aaHidden">\n          </div>\n          <div class="aaVerticalGridline aaVerticalGridlineWide"></div>\n          <div class="aaRowData">\n            <au-grid-bchg-cells-heading fae-side.one-time="\'asset\'"></au-grid-bchg-cells-heading>\n            <div class="aaVerticalGridline aaVerticalGridlineWide"></div>\n            <au-grid-bchg-cells-heading fae-side.one-time="\'equity\'"></au-grid-bchg-cells-heading>\n          </div>\n          <div class="aaVerticalGridline aaVerticalGridlineWide"></div>\n        </div>\n        <div class="aaGridScrollableRows aaGridHeightInFaeSide"\n             element.ref="moverGridRows"\n             mousemove.trigger="onListMouseMove($event)"\n             mouseleave.trigger="onListMouseLeave($event)">\n          <template repeat.for="bchg of moverBchgList">\n            <div class="aaRow"\n                 style="border-bottom-width: 3px;"\n                 mover-bchg.one-time="bchg"\n                 mouseenter.trigger="onRowMouseEnter($event, bchg)"\n                 mouseleave.trigger="onRowMouseLeave($event, bchg)"\n                 mousedown.trigger="onRowMouseDown($event)"\n                 mouseup.trigger="onRowMouseUp($event)">\n              <div class="aaRowOps aaRowOpsEmpty aaBgColorToolbar">\n              </div>\n              <div class="aaVerticalGridline" style="width: 3px;"></div>\n              <div class="aaRowData aaRowBgColorData">\n                \x3c!-- spacer if equities side --\x3e\n                <template if.bind="bchg.targetAcct.parentFaeSide.id == \'Equities\'">\n                  \x3c!-- put blank space in change-to-asset column --\x3e\n                  <au-grid-bchg-cells-spacer></au-grid-bchg-cells-spacer>\n                  <div class="aaVerticalGridline" style="width: 3px;"></div>\n                </template>\n                \x3c!-- simulate data cells with spacer --\x3e\n                <au-grid-bchg-cells bchg.one-way="bchg"></au-grid-bchg-cells>\n                <template if.bind="bchg.targetAcct.parentFaeSide.id == \'Assets\'">\n                  \x3c!-- put blank space in change-to-equity column --\x3e\n                  <div class="aaVerticalGridline" style="width: 3px;"></div>\n                  <au-grid-bchg-cells-spacer></au-grid-bchg-cells-spacer>\n                </template>\n              </div>\n              <div class="aaVerticalGridline" style="width: 3px;"></div>\n            </div>\n          </template>\n          <template if.bind="moverBchgList.length == 0">\n            <div class="aaRow aaHidden" style="border-bottom-width: 3px;">\n              <div class="aaRowOps aaRowOpsEmpty aaBgColorToolbar">\n              </div>\n              <div class="aaVerticalGridline" style="width: 3px;"></div>\n              <div class="aaRowData aaRowBgColorData">\n                <au-grid-bchg-cells-spacer></au-grid-bchg-cells-spacer>\n                <div class="aaVerticalGridline" style="width: 3px;"></div>\n                <au-grid-bchg-cells-spacer></au-grid-bchg-cells-spacer>\n              </div>\n              <div class="aaVerticalGridline" style="width: 3px;"></div>\n            </div>\n          </template>\n        </div>\n        <div class="aaGridFooterBar"></div>\n      </div>\n    </div>\n  </div>\n</template>\n'},"au-converters/au-currency-converter":function(t,e,n){"use strict";n.r(e),n.d(e,"AuCurrencyConverter",(function(){return i}));var r=n("aurelia-framework");let i=class{toView(t){return Intl.NumberFormat("en-US",{style:"decimal",useGrouping:!0,minimumIntegerDigits:1,minimumFractionDigits:2,maximumFractionDigits:2}).format(t)}};i=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}([Object(r.f)("auCurrencyConverter")],i)},"au-converters/au-equation-side-converter":function(t,e,n){"use strict";n.r(e),n.d(e,"AuEquationSideConverter",(function(){return a}));var r=n("aurelia-framework"),i=n("app"),o=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};let a=class{constructor(t){this.app=null,this.app=t}toView(t,e,n){return"Assets"==t?`${e?"A":"a"}sset${n?"s":""}`:"Equities"==t?`${e?"E":"e"}quit${n?"ies":"y"}`:"[equation side logic fault]"}};a=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}([Object(r.f)("auEquationSideConverter"),Object(r.e)(i.App),o("design:paramtypes",[Object])],a)},"au-views/au-acct-panel-spacer.html":function(t,e,n){t.exports='<template>\n  <require from="au-views/au-icon-nav-up.html"></require>\n  <require from="au-views/au-icon-nav-down.html"></require>\n  <require from="au-views/au-icon-edit.html"></require>\n  <require from="au-converters/au-currency-converter"></require>\n  <require from="au-converters/au-equation-side-converter"></require>\n  <div class="aaPanel aaPanelBoxShadow" style="border-color: #ddd;">\n    <div class="aaPanelHeader aaPanelHeaderModule"\n         style="visibility: hidden; background-color: #ddd;"><span style="visibility: hidden;">(spacer)</span></div>\n      <div class="aaPanelBody aaHidden">\n        <div class="aaForm">\n          <table border="0" style="border-collapse: collapse;">\n            <tr>\n              <td class="aaFormItemLabel">Account title:</td>\n              <td class="aaFormItemData">x</td>\n            </tr>\n          </table>\n        </div>\n        <div class="aaGridContainer">\n          <div class="aaGridTitleBar">Balance changes</div>\n          <div class="aaRow aaRowColumnHeaders">\n            <div class="aaRowOps aaRowOpsEmpty aaHidden">\n            </div>\n            <div class="aaVerticalGridline"></div>\n            <div class="aaRowData aaFontLabel aaFontBold">\n              <div class="aaCell aaCellTranDate">Date</div>\n              <div class="aaVerticalGridline"></div>\n              <div class="aaCell aaCellBchgDesc">Description</div>\n              <div class="aaVerticalGridline"></div>\n              <div class="aaCell aaCellBchgAmt">Amount</div>\n              <div class="aaVerticalGridline"></div>\n              <div class="aaCell aaCellBchgBal">New balance</div>\n              <div class="aaVerticalGridline"></div>\n            </div>\n          </div>\n          <div class="aaGridScrollableRows aaGridHeightInAcct"\n               id="acctModule-${app.selectedAcct.id}">\n            <div class="aaRow aaHidden">\n              <div class="aaRowOps aaRowOpsEmpty aaBgColorToolbar">\n              </div>\n              <div class="aaVerticalGridline"></div>\n              <div class="aaRowData aaRowBgColorData">\n                <div class="aaCell aaFontData aaCellTranDate"></div>\n                <div class="aaVerticalGridline"></div>\n                <div class="aaCell aaFontData aaCellBchgDesc">(ending invsible row)</div>\n                <div class="aaVerticalGridline"></div>\n                <div class="aaCell aaFontData aaCellBchgAmt"></div>\n                <div class="aaVerticalGridline"></div>\n                <div class="aaCell aaFontData aaCellBchgBal"></div>\n              </div>\n              <div class="aaVerticalGridline"></div>\n            </div>\n          </div>\n          <div class="aaGridFooterBar"></div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n'},"au-views/au-bchg-panel-spacer.html":function(t,e){t.exports='<template>\n  <div class="aaPanel aaPanelBoxShadow" style="border-color: #ddd;">\n    <div class="aaPanelHeader aaPanelHeaderModule"\n         style="visibility: hidden; background-color; #ddd;"><span style="visibility: hidden;">(spacer)</span></div>\n    <div class="aaPanelBody aaHidden">\n      <div style="text-align: center;">\n        \x3c!--Target account--\x3e\n        <div class="aaGridContainer aaInlineBlock" style="margin-right: 1pc;">\n          <div class="aaGridTitleBar">Target account</div>\n          <div class="aaRow aaRowColumnHeaders aaFontLabel aaFontBold">\n\x3c!--\n            <div class="aaCell aaCellEquSide">Equation side</div>\n            <div class="aaVerticalGridline"></div>\n--\x3e\n            <div class="aaCell aaCellAcctTitle"><span class="aaFontLabel aaFontBold">Title</span></div>\n          </div>\n          <div class="aaRow aaRowBgColorNonData" style="border-bottom-style: none;">\n            <div class="aaRowData">\n\x3c!--\n              <div class="aaCell aaFontData aaCellEquSide">X</div>\n              <div class="aaVerticalGridline"></div>\n--\x3e\n              <div class="aaCell aaFontData aaCellAcctTitle">X</div>\n            </div>\n          </div>\n        </div>\n        \x3c!--Source transaction--\x3e\n        <div class="aaGridContainer aaInlineBlock">\n          <div class="aaGridTitleBar">\n            Source transaction\n          </div>\n          <div class="aaRow aaRowColumnHeaders aaFontLabel aaFontBold">\n            <div class="aaCell aaCellTranId">ID</div>\n            <div class="aaVerticalGridline"></div>\n            <div class="aaCell aaCellTranDate">Date</div>\n            <div class="aaVerticalGridline"></div>\n          </div>\n          <div class="aaRow aaRowBgColorNonData" style="border-bottom-style: none;">\n            <div class="aaRowData">\n              <div class="aaCell aaFontData aaCellTranId">999</div>\n              <div class="aaVerticalGridline"></div>\n              <div class="aaCell aaFontData aaCellTranDate">9999/99/99</div>\n              <div class="aaVerticalGridline"></div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div style="margin-top: 2pc; text-align: center;">\n        \x3c!--Balance change--\x3e\n        <div class="aaGridContainer aaInlineBlock" style="margin-top: 0;">\n          \x3c!--Balance change--\x3e\n          <div class="aaGridTitleBar">Balance change</div>\n          <div class="aaRow aaRowColumnHeaders aaFontLabel aaFontBold">\n            <div class="aaCell aaCellBchgDesc">Description</div>\n            <div class="aaVerticalGridline"></div>\n            <div class="aaCell aaCellBchgAmt">Amount</div>\n          </div>\n          <div class="aaRow aaRowBgColorNonData" style="border-bottom-style: none;">\n            <div class="aaRowData">\n              <div class="aaCell aaCellBchgDesc">x</div>\n              <div class="aaVerticalGridline"></div>\n              <div class="aaCell aaCellBchgAmt">0.00</div>\n            </div>\n          </div>\n        </div>\n        \x3c!--\n                <span click.trigger="onGoTran($event)"\n                      class="aaBtn">Show in source transaction\n                    <i class="fa fa-chevron-right fa-fw" aria-hidden="true"></i>\n                  </span>\n        --\x3e\n      </div>\n    </div>\n  </div>\n</template>\n'},"au-views/au-grid-bchg-cells-spacer.html":function(t,e){t.exports='  <template>\n    <div class="aaBchgCells aaHidden">\n      \x3c!-- 1st row\n      NOT NEEDED\n      --\x3e\n\n      \x3c!-- 2nd row --\x3e\n      <div class="aaBchgCellsRow">\n        \x3c!-- change description --\x3e\n        <div class="aaCell aaCellBorder aaCellBchgDesc">\n        </div>\n        \x3c!-- change amount --\x3e\n        <div class="aaCellWrapper" style="margin-left: 1pc;">\n          <div class="aaCell aaCellBorder aaCellBchgAmt">\n          </div>\n          <div class="aaCellHelper aaHidden">\n            <button type="button" class="aaBtn aaHelperBtn">\n              <span class="fa fa-balance-scale fa-fw" aria-hidden="true"></span>\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </template>\n\n'},"au-views/au-icon-balance-scale.html":function(t,e){t.exports='<template>\n  <span class="fa fa-balance-scale fa-fw aaIconBlack" aria-hidden="true" aria-hidden="true"></span>\n</template>\n'},"au-views/au-icon-delete.html":function(t,e){t.exports='<template>\n  <span class="fa fa-minus-circle fa-fw aaIconRed" aria-hidden="true"></span>\n</template>\n'},"au-views/au-icon-edit.html":function(t,e){t.exports='<template>\n  <span class="fa fa-pencil-square-o fa-fw aaIconBlue" aria-hidden="true"></span>\n</template>\n'},"au-views/au-icon-ellipsis.html":function(t,e){t.exports='<template>\n  <span class="fa fa-ellipsis-h fa-fw aaIconBlack" aria-hidden="true" aria-hidden="true"></span>\n</template>\n'},"au-views/au-icon-map-marker-hidden.html":function(t,e){t.exports='<template>\n  <i class="fas fa-map-marker-alt"\n     style="color: #009; font-size: large; visibility: hidden;"></i>\n</template>\n\n'},"au-views/au-icon-map-marker.html":function(t,e){t.exports='<template>\n  <i class="fas fa-map-marker-alt"\n     style="color: #009; font-size: large; visibility: visible;"></i>\n</template>\n\n'},"au-views/au-icon-mover-rowops-transparent.html":function(t,e){t.exports='<template>\n  <span class="fa fa-arrows-v fa-fw" style="color: transparent; background-color: transparent;" aria-hidden="true"></span>\n</template>\n'},"au-views/au-icon-mover-rowops.html":function(t,e){t.exports='<template>\n  <span class="fa fa-arrows-v fa-fw aaIconWhite" aria-hidden="true"></span>\n</template>\n'},"au-views/au-icon-mover-toolbar.html":function(t,e){t.exports='<template>\n  <span class="fa fa-arrows-v fa-fw aaIconBlue" aria-hidden="true"></span>\n</template>\n'},"au-views/au-icon-nav-down.html":function(t,e){t.exports='<template>\n  <span class="fa fa-arrow-down fa-fw" aria-hidden="true"></span>\n</template>\n'},"au-views/au-icon-nav-up.html":function(t,e){t.exports='<template>\n  <span class="fa fa-arrow-up fa-fw" aria-hidden="true"></span>\n</template>\n'},"au-views/au-icon-new.html":function(t,e){t.exports='<template>\n  <span class="fa fa-plus-circle fa-fw aaIconGreen" aria-hidden="true"></span>\n</template>\n'},"au-views/au-text-ellipsis.html":function(t,e){t.exports='<template>\n  <span class="aaFontBold">...</span>\n</template>\n'},"aurelia-event-aggregator":function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"configure",(function(){return c}));var r=n(5).getLogger("event-aggregator"),i=function(){function t(t,e){this.messageType=t,this.callback=e}return t.prototype.handle=function(t){t instanceof this.messageType&&this.callback.call(null,t)},t}();function o(t,e,n){try{t(e,n)}catch(t){r.error(t)}}function a(t,e){try{t.handle(e)}catch(t){r.error(t)}}var s=function(){function t(){this.eventLookup={},this.messageHandlers=[]}return t.prototype.publish=function(t,e){var n=void 0,r=void 0;if(!t)throw new Error("Event was invalid.");if("string"==typeof t){if(n=this.eventLookup[t])for(r=(n=n.slice()).length;r--;)o(n[r],e,t)}else for(r=(n=this.messageHandlers.slice()).length;r--;)a(n[r],t)},t.prototype.subscribe=function(t,e){var n=void 0,r=void 0;if(!t)throw new Error("Event channel/type was invalid.");return"string"==typeof t?(n=e,r=this.eventLookup[t]||(this.eventLookup[t]=[])):(n=new i(t,e),r=this.messageHandlers),r.push(n),{dispose:function(){var t=r.indexOf(n);-1!==t&&r.splice(t,1)}}},t.prototype.subscribeOnce=function(t,e){var n=this.subscribe(t,(function(t,r){return n.dispose(),e(t,r)}));return n},t}();function c(t){var e,n;t.instance(s,(e=t.aurelia,n=new s,e.subscribeOnce=function(t,e){return n.subscribeOnce(t,e)},e.subscribe=function(t,e){return n.subscribe(t,e)},e.publish=function(t,e){n.publish(t,e)},n))}},"aurelia-framework":function(t,e,n){"use strict";(function(t){n.d(e,"Aurelia",(function(){return h}));var r=n(5),i=n(6),o=n(10),a=n(3),s=n(0),c=n(8);n.d(e,"e",(function(){return i.c}));var u=n(2);n.d(e,"f",(function(){return u.A}));n(1);n.d(e,"b",(function(){return a.q})),n.d(e,"c",(function(){return a.r})),n.d(e,"d",(function(){return a.s}));n(14);var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};var h=function(){function e(t,n,c){this.loader=t||new s.d.Loader,this.container=n||(new i.a).makeGlobal(),this.resources=c||new a.o,this.use=new w(this),this.logger=r.getLogger("aurelia"),this.hostConfigured=!1,this.host=null,this.use.instance(e,this),this.use.instance(o.a,this.loader),this.use.instance(a.o,this.resources)}return e.prototype.start=function(){var t=this;return this._started?this._started:(this.logger.info("Aurelia Starting"),this._started=this.use.apply().then((function(){if(s.b.addEventListener("submit",(function(t){var e=t.target,n=e.action;"form"!==e.tagName.toLowerCase()||n||t.preventDefault()})),!t.container.hasResolver(a.c)){var e="You must configure Aurelia with a BindingLanguage implementation.";throw t.logger.error(e),new Error(e)}t.logger.info("Aurelia Started");var n=s.b.createCustomEvent("aurelia-started",{bubbles:!0,cancelable:!0});return s.b.dispatchEvent(n),t})))},e.prototype.enhance=function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._configureHost(r||s.b.querySelectorAll("body")[0]),new t((function(t){var r=e.container.get(a.k);e.root=r.enhance({container:e.container,element:e.host,resources:e.resources,bindingContext:n}),e.root.attached(),e._onAureliaComposed(),t(e)}))},e.prototype.setRoot=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r={};this.root&&this.root.viewModel&&this.root.viewModel.router&&(this.root.viewModel.router.deactivate(),this.root.viewModel.router.reset()),this._configureHost(n);var i=this.container.get(a.k),o=this.container.get(a.f);return delete o.initialComposition,e||(e=this.configModuleId?Object(c.d)("./app",this.configModuleId):"app"),r.viewModel=e,r.container=r.childContainer=this.container,r.viewSlot=this.hostSlot,r.host=this.host,i.compose(r).then((function(e){return t.root=e,r.viewSlot.attached(),t._onAureliaComposed(),t}))},e.prototype._configureHost=function(t){if(!this.hostConfigured){if(t=t||this.host,this.host=t&&"string"!=typeof t?t:s.b.getElementById(t||"applicationHost"),!this.host)throw new Error("No applicationHost was specified.");this.hostConfigured=!0,this.host.aurelia=this,this.hostSlot=new a.p(this.host,!0),this.hostSlot.transformChildNodesIntoView(),this.container.registerInstance(s.b.boundary,this.host)}},e.prototype._onAureliaComposed=function(){var t=s.b.createCustomEvent("aurelia-composed",{bubbles:!0,cancelable:!0});setTimeout((function(){return s.b.dispatchEvent(t)}),1)},e}(),d=r.getLogger("aurelia"),p=/\.[^/.]+$/;function f(e,n){var r=void 0;return function i(){return(r=n.shift())?t.resolve(r(e)).then(i):t.resolve()}()}function v(e,n,r){if(0===Object.keys(n).length)return t.resolve();var i=e.container.get(a.m);return t.all(Object.keys(n).map((function(t){return function(t){var n=t.moduleId,r=g(n);o(n)&&(n=s(n));return e.loader.normalize(n,t.relativeTo).then((function(e){return{name:t.moduleId,importId:o(t.moduleId)?c(e,r):e}}))}(n[t])}))).then((function(t){var e=[],n=[];return t.forEach((function(t){e.push(void 0),n.push(t.importId)})),i.importViewResources(n,e,r)}));function o(t){var e=g(t);return!!e&&(""!==e&&(".js"!==e&&".ts"!==e))}function s(t){return t.replace(p,"")}function c(t,e){return s(t)+"."+e}}function g(t){var e=t.match(p);if(e&&e.length>0)return e[0].split(".")[1]}function y(e){return t.all(e.behaviorsToLoad.map((function(t){return t.load(e.container,t.target)}))).then((function(){e.behaviorsToLoad=null}))}function m(t){if(t.processed)throw new Error("This config instance has already been applied. To load more plugins or global resources, create a new FrameworkConfiguration instance.")}function b(t,e){return"Invalid "+e+" ["+t+"], "+e+" must be specified as functions or relative module IDs."}var w=function(){function e(t){var e=this;this.aurelia=t,this.container=t.container,this.info=[],this.processed=!1,this.preTasks=[],this.postTasks=[],this.behaviorsToLoad=[],this.configuredPlugins=[],this.resourcesToLoad={},this.preTask((function(){return t.loader.normalize("aurelia-bootstrapper").then((function(t){return e.bootstrapperName=t}))})),this.postTask((function(){return v(t,e.resourcesToLoad,t.resources)}))}return e.prototype.instance=function(t,e){return this.container.registerInstance(t,e),this},e.prototype.singleton=function(t,e){return this.container.registerSingleton(t,e),this},e.prototype.transient=function(t,e){return this.container.registerTransient(t,e),this},e.prototype.preTask=function(t){return m(this),this.preTasks.push(t),this},e.prototype.postTask=function(t){return m(this),this.postTasks.push(t),this},e.prototype.feature=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(void 0===t?"undefined":l(t)){case"string":var n=/\/index$/i.test(t),r=n||g(t)?t:t+"/index",i=n?t.substr(0,t.length-6):t;this.info.push({moduleId:r,resourcesRelativeTo:[i,""],config:e});break;case"function":this.info.push({configure:t,config:e||{}});break;default:throw new Error(b(t,"feature"))}return this},e.prototype.globalResources=function(t){var e=this;m(this);for(var n=Array.isArray(t)?t:arguments,r=void 0,i=this.resourcesRelativeTo||["",""],o=0,s=n.length;o<s;++o)switch(void 0===(r=n[o])?"undefined":l(r)){case"string":var u=i[0],h=i[1],d=r;(r.startsWith("./")||r.startsWith("../"))&&""!==u&&(d=Object(c.b)(u,r)),this.resourcesToLoad[d]={moduleId:d,relativeTo:h};break;case"function":var p=this.aurelia.resources.autoRegister(this.container,r);p instanceof a.g&&null!==p.elementName&&1===this.behaviorsToLoad.push(p)&&this.postTask((function(){return y(e)}));break;default:throw new Error(b(r,"resource"))}return this},e.prototype.globalName=function(t,e){return m(this),this.resourcesToLoad[t]={moduleId:e,relativeTo:""},this},e.prototype.plugin=function(t,e){m(this);var n=void 0;switch(void 0===t?"undefined":l(t)){case"string":n={moduleId:t,resourcesRelativeTo:[t,""],config:e||{}};break;case"function":n={configure:t,config:e||{}};break;default:throw new Error(b(t,"plugin"))}return this.info.push(n),this},e.prototype._addNormalizedPlugin=function(e,n){var r=this,i={moduleId:e,resourcesRelativeTo:[e,""],config:n||{}};return this.info.push(i),this.preTask((function(){var n=[e,r.bootstrapperName];return i.moduleId=e,i.resourcesRelativeTo=n,t.resolve()})),this},e.prototype.defaultBindingLanguage=function(){return this._addNormalizedPlugin("aurelia-templating-binding")},e.prototype.router=function(){return this._addNormalizedPlugin("aurelia-templating-router")},e.prototype.history=function(){return this._addNormalizedPlugin("aurelia-history-browser")},e.prototype.defaultResources=function(){return this._addNormalizedPlugin("aurelia-templating-resources")},e.prototype.eventAggregator=function(){return this._addNormalizedPlugin("aurelia-event-aggregator")},e.prototype.basicConfiguration=function(){return this.defaultBindingLanguage().defaultResources().eventAggregator()},e.prototype.standardConfiguration=function(){return this.basicConfiguration().history().router()},e.prototype.developmentLogging=function(t){var e=this,n=t?r.logLevel[t]:void 0;return void 0===n&&(n=r.logLevel.debug),this.preTask((function(){return e.aurelia.loader.normalize("aurelia-logging-console",e.bootstrapperName).then((function(t){return e.aurelia.loader.loadModule(t).then((function(t){r.addAppender(new t.ConsoleAppender),r.setLevel(n)}))}))})),this},e.prototype.apply=function(){var e=this;return this.processed?t.resolve():f(this,this.preTasks).then((function(){var n=e.aurelia.loader,r=e.info,i=void 0;return function o(){return(i=r.shift())?function(e,n,r){if(d.debug("Loading plugin "+r.moduleId+"."),"string"==typeof r.moduleId){e.resourcesRelativeTo=r.resourcesRelativeTo;var i=r.moduleId;return r.resourcesRelativeTo.length>1?n.normalize(r.moduleId,r.resourcesRelativeTo[1]).then((function(t){return o(t)})):o(i)}if("function"==typeof r.configure)return-1!==e.configuredPlugins.indexOf(r.configure)?t.resolve():(e.configuredPlugins.push(r.configure),t.resolve(r.configure.call(null,e,r.config||{})));throw new Error(b(r.moduleId||r.configure,"plugin"));function o(i){return n.loadModule(i).then((function(n){if("configure"in n)return-1!==e.configuredPlugins.indexOf(n.configure)?t.resolve():t.resolve(n.configure(e,r.config||{})).then((function(){e.configuredPlugins.push(n.configure),e.resourcesRelativeTo=null,d.debug("Configured plugin "+r.moduleId+".")}));e.resourcesRelativeTo=null,d.debug("Loaded plugin "+r.moduleId+".")}))}}(e,n,i).then(o):(e.processed=!0,e.configuredPlugins=null,t.resolve())}().then((function(){return f(e,e.postTasks)}))}))},e}()}).call(this,n(7))},"aurelia-history-browser":function(t,e,n){"use strict";n.d(e,"configure",(function(){return v}));var r=n(18),i=n(0),o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function a(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var s=function(){function t(){}return t.prototype.activate=function(t){},t.prototype.deactivate=function(){},t}(),c=function(t){function e(){var n=t.call(this)||this;return n.handler=function(t){var r=e.getEventInfo(t),i=r.shouldHandleEvent,o=r.href;i&&(t.preventDefault(),n.history.navigate(o))},n}return a(e,t),e.prototype.activate=function(t){t._hasPushState&&(this.history=t,i.b.addEventListener("click",this.handler,!0))},e.prototype.deactivate=function(){i.b.removeEventListener("click",this.handler,!0)},e.getEventInfo=function(t){var n=t,r={shouldHandleEvent:!1,href:null,anchor:null},i=e.findClosestAnchor(n.target);if(!i||!e.targetIsThisWindow(i))return r;if(u(i,"download")||u(i,"router-ignore")||u(i,"data-router-ignore"))return r;if(n.altKey||n.ctrlKey||n.metaKey||n.shiftKey)return r;var o=i.getAttribute("href");r.anchor=i,r.href=o;var a=1===n.which,s=o&&!("#"===o.charAt(0)||/^[a-z]+:/i.test(o));return r.shouldHandleEvent=a&&s,r},e.findClosestAnchor=function(t){for(;t;){if("A"===t.tagName)return t;t=t.parentNode}},e.targetIsThisWindow=function(t){var e=t.getAttribute("target"),n=i.d.global;return!e||e===n.name||"_self"===e},e}(s),u=function(t,e){return t.hasAttribute(e)},l=function(t){function e(e){var n=t.call(this)||this;return n._isActive=!1,n._checkUrlCallback=n._checkUrl.bind(n),n.location=i.d.location,n.history=i.d.history,n.linkHandler=e,n}return a(e,t),e.prototype.activate=function(t){if(this._isActive)throw new Error("History has already been activated.");var e=this.history,n=!!t.pushState;this._isActive=!0;var r,o=this.options=Object.assign({},{root:"/"},this.options,t),a=this.root=("/"+o.root+"/").replace(d,"/"),s=this._wantsHashChange=!1!==o.hashChange,c=this._hasPushState=!!(o.pushState&&e&&e.pushState);if(c?r="popstate":s&&(r="hashchange"),i.d.addEventListener(r,this._checkUrlCallback),s&&n){var u=this.location,l=u.pathname.replace(/[^\/]$/,"$&/")===a;if(!c&&!l){var p=this.fragment=this._getFragment(null,!0);return u.replace(a+u.search+"#"+p),!0}if(c&&l&&u.hash){p=this.fragment=this._getHash().replace(h,"");e.replaceState({},i.b.title,a+p+u.search)}}if(this.fragment||(this.fragment=this._getFragment("")),this.linkHandler.activate(this),!o.silent)return this._loadUrl("")},e.prototype.deactivate=function(){var t=this._checkUrlCallback;i.d.removeEventListener("popstate",t),i.d.removeEventListener("hashchange",t),this._isActive=!1,this.linkHandler.deactivate()},e.prototype.getAbsoluteRoot=function(){var t,e,n,r=this.location;return""+(t=r.protocol,e=r.hostname,n=r.port,t+"//"+e+(n?":"+n:""))+this.root},e.prototype.navigate=function(t,e){var n=void 0===e?{}:e,r=n.trigger,o=void 0===r||r,a=n.replace,s=void 0!==a&&a,c=this.location;if(t&&f.test(t))return c.href=t,!0;if(!this._isActive)return!1;if(t=this._getFragment(t||""),this.fragment===t&&!s)return!1;this.fragment=t;var u=this.root+t;return""===t&&"/"!==u&&(u=u.slice(0,-1)),this._hasPushState?(u=u.replace("//","/"),this.history[s?"replaceState":"pushState"]({},i.b.title,u)):this._wantsHashChange?function(t,e,n){if(n){var r=t.href.replace(/(javascript:|#).*$/,"");t.replace(r+"#"+e)}else t.hash="#"+e}(c,t,s):c.assign(u),!o||this._loadUrl(t)},e.prototype.navigateBack=function(){this.history.back()},e.prototype.setTitle=function(t){i.b.title=t},e.prototype.setState=function(t,e){var n=this.history,r=Object.assign({},n.state),i=this.location,o=i.pathname,a=i.search,s=i.hash;r[t]=e,n.replaceState(r,null,""+o+a+s)},e.prototype.getState=function(t){return Object.assign({},this.history.state)[t]},e.prototype.getHistoryIndex=function(){var t=this.getState("HistoryIndex");return void 0===t&&(t=this.history.length-1,this.setState("HistoryIndex",t)),t},e.prototype.go=function(t){this.history.go(t)},e.prototype._getHash=function(){return this.location.hash.substr(1)},e.prototype._getFragment=function(t,e){var n;if(!t)if(this._hasPushState||!this._wantsHashChange||e){var r=this.location;t=r.pathname+r.search,n=this.root.replace(p,""),t.indexOf(n)||(t=t.substr(n.length))}else t=this._getHash();return"/"+t.replace(h,"")},e.prototype._checkUrl=function(){this._getFragment("")!==this.fragment&&this._loadUrl("")},e.prototype._loadUrl=function(t){var e=this.fragment=this._getFragment(t);return!!this.options.routeHandler&&this.options.routeHandler(e)},e.inject=[s],e}(r.a),h=/^#?\/*|\s+$/g,d=/^\/+|\/+$/g,p=/\/$/,f=/^([a-z][a-z0-9+\-.]*:)?\/\//i;function v(t){var e=t;e.singleton(r.a,l),e.transient(s,c)}},"aurelia-logging-console":function(t,e,n){"use strict";n.d(e,"ConsoleAppender",(function(){return r}));var r=function(){function t(){}return t.prototype.debug=function(t){for(var e,n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(e=console).debug.apply(e,["DEBUG ["+t.id+"]"].concat(r))},t.prototype.info=function(t){for(var e,n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(e=console).info.apply(e,["INFO ["+t.id+"]"].concat(r))},t.prototype.warn=function(t){for(var e,n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(e=console).warn.apply(e,["WARN ["+t.id+"]"].concat(r))},t.prototype.error=function(t){for(var e,n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(e=console).error.apply(e,["ERROR ["+t.id+"]"].concat(r))},t}()},"aurelia-pal-browser":function(t,e,n){"use strict";n.r(e),n.d(e,"_PLATFORM",(function(){return o})),n.d(e,"_FEATURE",(function(){return k})),n.d(e,"_DOM",(function(){return R})),n.d(e,"initialize",(function(){return O}));var r=n(0),i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o={location:window.location,history:window.history,addEventListener:function(t,e,n){this.global.addEventListener(t,e,n)},removeEventListener:function(t,e,n){this.global.removeEventListener(t,e,n)},performance:window.performance,requestAnimationFrame:function(t){return this.global.requestAnimationFrame(t)}};if("undefined"==typeof FEATURE_NO_IE){void 0===function(){}.name&&Object.defineProperty(Function.prototype,"name",{get:function(){var t=this.toString().match(/^\s*function\s*(\S*)\s*\(/)[1];return Object.defineProperty(this,"name",{value:t}),t}})}if("undefined"==typeof FEATURE_NO_IE)if("classList"in document.createElement("_")&&(!document.createElementNS||"classList"in document.createElementNS("http://www.w3.org/2000/svg","g"))){var a=document.createElement("_");if(a.classList.add("c1","c2"),!a.classList.contains("c2")){var s=function(t){var e=DOMTokenList.prototype[t];DOMTokenList.prototype[t]=function(t){for(var n=0,r=arguments.length;n<r;++n)t=arguments[n],e.call(this,t)}};s("add"),s("remove")}if(a.classList.toggle("c3",!1),a.classList.contains("c3")){var c=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(t,e){return 1 in arguments&&!this.contains(t)==!e?e:c.call(this,t)}}a=null}else{var u=String.prototype.trim,l=Array.prototype.indexOf,h=[],d=function(t,e){this.name=t,this.code=DOMException[t],this.message=e},p=function(t,e){if(""===e)throw new d("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(e))throw new d("INVALID_CHARACTER_ERR","String contains an invalid character");return l.call(t,e)},f=function(t){for(var e=u.call(t.getAttribute("class")||""),n=e?e.split(/\s+/):h,r=0,i=n.length;r<i;++r)this.push(n[r]);this._updateClassName=function(){t.setAttribute("class",this.toString())}},v=f.prototype=[];d.prototype=Error.prototype,v.item=function(t){return this[t]||null},v.contains=function(t){return-1!==p(this,t+="")},v.add=function(){var t=arguments,e=0,n=t.length,r=void 0,i=!1;do{r=t[e]+"",-1===p(this,r)&&(this.push(r),i=!0)}while(++e<n);i&&this._updateClassName()},v.remove=function(){var t=arguments,e=0,n=t.length,r=void 0,i=!1,o=void 0;do{for(r=t[e]+"",o=p(this,r);-1!==o;)this.splice(o,1),i=!0,o=p(this,r)}while(++e<n);i&&this._updateClassName()},v.toggle=function(t,e){t+="";var n=this.contains(t),r=n?!0!==e&&"remove":!1!==e&&"add";return r&&this[r](t),!0===e||!1===e?e:!n},v.toString=function(){return this.join(" ")},Object.defineProperty(Element.prototype,"classList",{get:function(){return new f(this)},enumerable:!0,configurable:!0})}if("undefined"==typeof FEATURE_NO_IE){var g=function(t,e){for(var n=0,r=b.length,i=[];n<r;n++)b[n][t]==e&&i.push(b[n]);return i},y=function(t,e){for(var n,r=b.length;r--;)(n=b[r]).entryType!=t||void 0!==e&&n.name!=e||b.splice(r,1)};if(
// @license http://opensource.org/licenses/MIT
"performance"in window==!1&&(window.performance={}),"now"in window.performance==!1){var m=Date.now();performance.timing&&performance.timing.navigationStart&&(m=performance.timing.navigationStart),window.performance.now=function(){return Date.now()-m}}Date.now?Date.now():new Date;var b=[],w={};window.performance.mark||(window.performance.mark=window.performance.webkitMark||function(t){var e={name:t,entryType:"mark",startTime:window.performance.now(),duration:0};b.push(e),w[t]=e}),window.performance.measure||(window.performance.measure=window.performance.webkitMeasure||function(t,e,n){e=w[e].startTime,n=w[n].startTime,b.push({name:t,entryType:"measure",startTime:e,duration:n-e})}),window.performance.getEntriesByType||(window.performance.getEntriesByType=window.performance.webkitGetEntriesByType||function(t){return g("entryType",t)}),window.performance.getEntriesByName||(window.performance.getEntriesByName=window.performance.webkitGetEntriesByName||function(t){return g("name",t)}),window.performance.clearMarks||(window.performance.clearMarks=window.performance.webkitClearMarks||function(t){y("mark",t)}),window.performance.clearMeasures||(window.performance.clearMeasures=window.performance.webkitClearMeasures||function(t){y("measure",t)}),o.performance=window.performance}if("undefined"==typeof FEATURE_NO_IE){var _=window.console=window.console||{},x=function(){};_.memory||(_.memory={}),"assert,clear,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profiles,profileEnd,show,table,time,timeEnd,timeline,timelineEnd,timeStamp,trace,warn".split(",").forEach((function(t){_[t]||(_[t]=x)})),"object"===i(_.log)&&"log,info,warn,error,assert,dir,clear,profile,profileEnd".split(",").forEach((function(t){console[t]=this.bind(console[t],console)}),Function.prototype.call)}if("undefined"==typeof FEATURE_NO_IE&&(!window.CustomEvent||"function"!=typeof window.CustomEvent)){var E=function(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n};E.prototype=window.Event.prototype,window.CustomEvent=E}if(Element&&!Element.prototype.matches){var C=Element.prototype;C.matches=C.matchesSelector||C.mozMatchesSelector||C.msMatchesSelector||C.oMatchesSelector||C.webkitMatchesSelector}var S,k={shadowDOM:!!HTMLElement.prototype.attachShadow,scopedCSS:"scoped"in document.createElement("style"),htmlTemplateElement:(S=document.createElement("div"),S.innerHTML="<template></template>","content"in S.children[0]),mutationObserver:!(!window.MutationObserver&&!window.WebKitMutationObserver),ensureHTMLTemplateElement:function(t){return t}};if("undefined"==typeof FEATURE_NO_IE){var A=function(t){var e=t.ownerDocument.createElement("template"),n=t.attributes,r=n.length,i=void 0;for(t.parentNode.insertBefore(e,t);r-- >0;)i=n[r],e.setAttribute(i.name,i.value),t.removeAttribute(i.name);return t.parentNode.removeChild(t),T(e)},T=function(t){for(var e=t.content=document.createDocumentFragment(),n=void 0;n=t.firstChild;)e.appendChild(n);return t};k.htmlTemplateElement||(k.ensureHTMLTemplateElement=function(t){for(var e,n=T(t).content.querySelectorAll("template"),r=0,i=n.length;r<i;++r){var o=n[r];"template"===(e=o).tagName&&"http://www.w3.org/2000/svg"===e.namespaceURI?A(o):T(o)}return t})}var I=window.ShadowDOMPolyfill||null,R={Element:Element,NodeList:NodeList,SVGElement:SVGElement,boundary:"aurelia-dom-boundary",addEventListener:function(t,e,n){document.addEventListener(t,e,n)},removeEventListener:function(t,e,n){document.removeEventListener(t,e,n)},adoptNode:function(t){return document.adoptNode(t)},createAttribute:function(t){return document.createAttribute(t)},createElement:function(t){return document.createElement(t)},createTextNode:function(t){return document.createTextNode(t)},createComment:function(t){return document.createComment(t)},createDocumentFragment:function(){return document.createDocumentFragment()},createTemplateElement:function(){var t=document.createElement("template");return k.ensureHTMLTemplateElement(t)},createMutationObserver:function(t){return new(window.MutationObserver||window.WebKitMutationObserver)(t)},createCustomEvent:function(t,e){return new window.CustomEvent(t,e)},dispatchEvent:function(t){document.dispatchEvent(t)},getComputedStyle:function(t){return window.getComputedStyle(t)},getElementById:function(t){return document.getElementById(t)},querySelector:function(t){return document.querySelector(t)},querySelectorAll:function(t){return document.querySelectorAll(t)},nextElementSibling:function(t){if(t.nextElementSibling)return t.nextElementSibling;do{t=t.nextSibling}while(t&&1!==t.nodeType);return t},createTemplateFromMarkup:function(t){var e=document.createElement("div");e.innerHTML=t;var n=e.firstElementChild;if(!n||"TEMPLATE"!==n.nodeName)throw new Error("Template markup must be wrapped in a <template> element e.g. <template> \x3c!-- markup here --\x3e </template>");return k.ensureHTMLTemplateElement(n)},appendNode:function(t,e){(e||document.body).appendChild(t)},replaceNode:function(t,e,n){e.parentNode?e.parentNode.replaceChild(t,e):null!==I?I.unwrap(n).replaceChild(I.unwrap(t),I.unwrap(e)):n.replaceChild(t,e)},removeNode:function(t,e){t.parentNode?t.parentNode.removeChild(t):e&&(null!==I?I.unwrap(e).removeChild(I.unwrap(t)):e.removeChild(t))},injectStyles:function(t,e,n,r){if(r){var i=document.getElementById(r);if(i){if("style"===i.tagName.toLowerCase())return void(i.innerHTML=t);throw new Error("The provided id does not indicate a style tag.")}}var o=document.createElement("style");return o.innerHTML=t,o.type="text/css",r&&(o.id=r),e=e||document.head,n&&e.childNodes.length>0?e.insertBefore(o,e.childNodes[0]):e.appendChild(o),o}};function O(){r.f||Object(r.e)((function(t,e,n){Object.assign(t,o),Object.assign(e,k),Object.assign(n,R),Object.defineProperty(n,"title",{get:function(){return document.title},set:function(t){document.title=t}}),Object.defineProperty(n,"activeElement",{get:function(){return document.activeElement}}),Object.defineProperty(t,"XMLHttpRequest",{get:function(){return t.global.XMLHttpRequest}})}))}},"aurelia-templating-binding":function(t,e,n){"use strict";n.d(e,"configure",(function(){return k}));var r,i,o,a,s,c,u,l,h=n(5),d=n(2),p=n(3);var f=(i=r=function(){function t(t){this.elements=Object.create(null),this.allElements=Object.create(null),this.svg=t,this.registerUniversal("accesskey","accessKey"),this.registerUniversal("contenteditable","contentEditable"),this.registerUniversal("tabindex","tabIndex"),this.registerUniversal("textcontent","textContent"),this.registerUniversal("innerhtml","innerHTML"),this.registerUniversal("scrolltop","scrollTop"),this.registerUniversal("scrollleft","scrollLeft"),this.registerUniversal("readonly","readOnly"),this.register("label","for","htmlFor"),this.register("img","usemap","useMap"),this.register("input","maxlength","maxLength"),this.register("input","minlength","minLength"),this.register("input","formaction","formAction"),this.register("input","formenctype","formEncType"),this.register("input","formmethod","formMethod"),this.register("input","formnovalidate","formNoValidate"),this.register("input","formtarget","formTarget"),this.register("textarea","maxlength","maxLength"),this.register("td","rowspan","rowSpan"),this.register("td","colspan","colSpan"),this.register("th","rowspan","rowSpan"),this.register("th","colspan","colSpan")}return t.prototype.register=function(t,e,n){t=t.toLowerCase(),e=e.toLowerCase(),(this.elements[t]=this.elements[t]||Object.create(null))[e]=n},t.prototype.registerUniversal=function(t,e){t=t.toLowerCase(),this.allElements[t]=e},t.prototype.map=function(t,e){if(this.svg.isStandardSvgAttribute(t,e))return e;t=t.toLowerCase(),e=e.toLowerCase();var n=this.elements[t];return void 0!==n&&e in n?n[e]:e in this.allElements?this.allElements[e]:/(?:^data-)|(?:^aria-)|:/.test(e)?e:Object(d.r)(e)},t}(),r.inject=[d.m],i),v=function(){function t(t,e,n,r,i,o){this.observerLocator=t,this.targetProperty=e,this.parts=n,this.mode=r,this.lookupFunctions=i,this.attribute=this.attrToRemove=o,this.discrete=!1}return t.prototype.createBinding=function(t){return 3===this.parts.length?new m(t,this.observerLocator,this.parts[1],this.mode,this.lookupFunctions,this.targetProperty,this.parts[0],this.parts[2]):new y(this.observerLocator,this.parts,t,this.targetProperty,this.mode,this.lookupFunctions)},t}();function g(t,e){if("style"===e)h.getLogger("templating-binding").info('Internet Explorer does not support interpolation in "style" attributes.  Use the style attribute\'s alias, "css" instead.');else if(t.parentElement&&"TEXTAREA"===t.parentElement.nodeName&&"textContent"===e)throw new Error('Interpolation binding cannot be used in the content of a textarea element.  Use <textarea value.bind="expression"></textarea> instead.')}var y=function(){function t(t,e,n,r,i,o){g(n,r),this.observerLocator=t,this.parts=e,this.target=n,this.targetProperty=r,this.targetAccessor=t.getAccessor(n,r),this.mode=i,this.lookupFunctions=o}return t.prototype.interpolate=function(){if(this.isBound){for(var t="",e=this.parts,n=0,r=e.length;n<r;n++)t+=n%2==0?e[n]:this["childBinding"+n].value;this.targetAccessor.setValue(t,this.target,this.targetProperty)}},t.prototype.updateOneTimeBindings=function(){for(var t=1,e=this.parts.length;t<e;t+=2){var n=this["childBinding"+t];n.mode===d.q.oneTime&&n.call()}},t.prototype.bind=function(t){if(this.isBound){if(this.source===t)return;this.unbind()}this.source=t;for(var e=this.parts,n=1,r=e.length;n<r;n+=2){var i=new m(this,this.observerLocator,e[n],this.mode,this.lookupFunctions);i.bind(t),this["childBinding"+n]=i}this.isBound=!0,this.interpolate()},t.prototype.unbind=function(){if(this.isBound){this.isBound=!1,this.source=null;for(var t=1,e=this.parts.length;t<e;t+=2){this["childBinding"+t].unbind()}}},t}(),m=Object(d.s)()(o=function(){function t(t,e,n,r,i,o,a,s){t instanceof y?this.parent=t:(g(t,o),this.target=t,this.targetProperty=o,this.targetAccessor=e.getAccessor(t,o)),this.observerLocator=e,this.sourceExpression=n,this.mode=r,this.lookupFunctions=i,this.left=a,this.right=s}return t.prototype.updateTarget=function(t){(t=null==t?"":t.toString())!==this.value&&(this.value=t,this.parent?this.parent.interpolate():this.targetAccessor.setValue(this.left+t+this.right,this.target,this.targetProperty))},t.prototype.call=function(){this.isBound&&(this.rawValue=this.sourceExpression.evaluate(this.source,this.lookupFunctions),this.updateTarget(this.rawValue),this.mode!==d.q.oneTime&&(this._version++,this.sourceExpression.connect(this,this.source),this.rawValue instanceof Array&&this.observeArray(this.rawValue),this.unobserve(!1)))},t.prototype.bind=function(t){if(this.isBound){if(this.source===t)return;this.unbind()}this.isBound=!0,this.source=t;var e=this.sourceExpression;e.bind&&e.bind(this,t,this.lookupFunctions),this.rawValue=e.evaluate(t,this.lookupFunctions),this.updateTarget(this.rawValue),this.mode===d.q.oneWay&&Object(d.v)(this)},t.prototype.unbind=function(){if(this.isBound){this.isBound=!1;var t=this.sourceExpression;t.unbind&&t.unbind(this,this.source),this.source=null,this.value=null,this.rawValue=null,this.unobserve(!0)}},t.prototype.connect=function(t){this.isBound&&(t&&(this.rawValue=this.sourceExpression.evaluate(this.source,this.lookupFunctions),this.updateTarget(this.rawValue)),this.sourceExpression.connect(this,this.source),this.rawValue instanceof Array&&this.observeArray(this.rawValue))},t}())||o,b=function(){function t(t,e,n,r,i){this.observerLocator=t,this.sourceExpression=n,this.targetProperty=e,this.lookupFunctions=r,this.toBindingContext=i}return t.prototype.createBinding=function(){return new w(this.observerLocator,this.sourceExpression,this.targetProperty,this.lookupFunctions,this.toBindingContext)},t}(),w=Object(d.s)()(a=function(){function t(t,e,n,r,i){this.observerLocator=t,this.sourceExpression=e,this.targetProperty=n,this.lookupFunctions=r,this.source=null,this.target=null,this.toBindingContext=i}return t.prototype.updateTarget=function(){var t=this.sourceExpression.evaluate(this.source,this.lookupFunctions);this.target[this.targetProperty]=t},t.prototype.call=function(t){if(this.isBound){if(t!==d.x)throw new Error("Unexpected call context "+t);this.updateTarget()}},t.prototype.bind=function(t){if(this.isBound){if(this.source===t)return;this.unbind()}this.isBound=!0,this.source=t,this.target=this.toBindingContext?t.bindingContext:t.overrideContext,this.sourceExpression.bind&&this.sourceExpression.bind(this,t,this.lookupFunctions),Object(d.v)(this)},t.prototype.unbind=function(){this.isBound&&(this.isBound=!1,this.sourceExpression.unbind&&this.sourceExpression.unbind(this,this.source),this.source=null,this.target=null,this.unobserve(!0))},t.prototype.connect=function(){this.isBound&&(this.updateTarget(),this.sourceExpression.connect(this,this.source))},t}())||a,_=function(){function t(t,e,n,r,i){this.observerLocator=t,this.targetProperty=e,this.parts=n,this.lookupFunctions=r,this.toBindingContext=i}return t.prototype.createBinding=function(){return new x(this.observerLocator,this.targetProperty,this.parts,this.lookupFunctions,this.toBindingContext)},t}(),x=function(){function t(t,e,n,r,i){this.observerLocator=t,this.parts=n,this.targetProperty=e,this.lookupFunctions=r,this.toBindingContext=i,this.target=null}return t.prototype.bind=function(t){if(this.isBound){if(this.source===t)return;this.unbind()}this.isBound=!0,this.source=t,this.target=this.toBindingContext?t.bindingContext:t.overrideContext,this.interpolationBinding=this.createInterpolationBinding(),this.interpolationBinding.bind(t)},t.prototype.unbind=function(){this.isBound&&(this.isBound=!1,this.source=null,this.target=null,this.interpolationBinding.unbind(),this.interpolationBinding=null)},t.prototype.createInterpolationBinding=function(){return 3===this.parts.length?new m(this.target,this.observerLocator,this.parts[1],d.q.oneWay,this.lookupFunctions,this.targetProperty,this.parts[0],this.parts[2]):new y(this.observerLocator,this.parts,this.target,this.targetProperty,d.q.oneWay,this.lookupFunctions)},t}(),E=(c=s=function(){function t(t,e,n,r){this.parser=t,this.observerLocator=e,this.eventManager=n,this.attributeMap=r}return t.prototype.interpret=function(t,e,n,r,i){return n.command in this?this[n.command](t,e,n,r,i):this.handleUnknownCommand(t,e,n,r,i)},t.prototype.handleUnknownCommand=function(t,e,n,r,i){return h.getLogger("templating-binding").warn("Unknown binding command.",n),r},t.prototype.determineDefaultBindingMode=function(t,e,n){var r=t.tagName.toLowerCase();return"input"===r&&("value"===e||"files"===e)&&"checkbox"!==t.type&&"radio"!==t.type||"input"===r&&"checked"===e&&("checkbox"===t.type||"radio"===t.type)||("textarea"===r||"select"===r)&&"value"===e||("textcontent"===e||"innerhtml"===e)&&"true"===t.contentEditable||"scrolltop"===e||"scrollleft"===e?d.q.twoWay:n&&e in n.attributes&&n.attributes[e]&&n.attributes[e].defaultBindingMode>=d.q.oneTime?n.attributes[e].defaultBindingMode:d.q.oneWay},t.prototype.bind=function(t,e,n,r,i){var o=r||p.b.attribute(n.attrName);return o.attributes[n.attrName]=new d.c(this.observerLocator,this.attributeMap.map(e.tagName,n.attrName),this.parser.parse(n.attrValue),void 0===n.defaultBindingMode||null===n.defaultBindingMode?this.determineDefaultBindingMode(e,n.attrName,i):n.defaultBindingMode,t.lookupFunctions),o},t.prototype.trigger=function(t,e,n){return new d.h(this.eventManager,n.attrName,this.parser.parse(n.attrValue),d.u.none,!0,t.lookupFunctions)},t.prototype.capture=function(t,e,n){return new d.h(this.eventManager,n.attrName,this.parser.parse(n.attrValue),d.u.capturing,!0,t.lookupFunctions)},t.prototype.delegate=function(t,e,n){return new d.h(this.eventManager,n.attrName,this.parser.parse(n.attrValue),d.u.bubbling,!0,t.lookupFunctions)},t.prototype.call=function(t,e,n,r){var i=r||p.b.attribute(n.attrName);return i.attributes[n.attrName]=new d.d(this.observerLocator,n.attrName,this.parser.parse(n.attrValue),t.lookupFunctions),i},t.prototype.options=function(t,e,n,r,i){var o,a=r||p.b.attribute(n.attrName),s=n.attrValue,c=this.language,u=null,l="",h=void 0,d=void 0,f=!1,v=!1,g=!1;for(d=0,o=s.length;d<o;++d){if(";"!==(h=s[d])||f)if(":"===h&&null===u)g=!0,u=l.trim(),l="";else{if("\\"===h){l+=h,v=!0;continue}l+=h,null!==u&&!1===v&&"'"===h&&(f=!f)}else g||(u=this._getPrimaryPropertyName(t,i)),n=c.inspectAttribute(t,"?",u,l.trim()),c.createAttributeInstruction(t,e,n,a,i),a.attributes[n.attrName]||(a.attributes[n.attrName]=n.attrValue),l="",u=null;v=!1}return g||(u=this._getPrimaryPropertyName(t,i)),null!==u&&(n=c.inspectAttribute(t,"?",u,l.trim()),c.createAttributeInstruction(t,e,n,a,i),a.attributes[n.attrName]||(a.attributes[n.attrName]=n.attrValue)),a},t.prototype._getPrimaryPropertyName=function(t,e){var n=t.getAttribute(e.attributeName);return n&&n.primaryProperty?n.primaryProperty.attribute:null},t.prototype.for=function(t,e,n,r){var i,o=void 0,a=void 0,s=void 0,c=void 0;if(2!==(o=(i=(c=n.attrValue).match(/^ *[[].+[\]]/))?c.split("of "):c.split(" of ")).length)throw new Error('Incorrect syntax for "for". The form is: "$local of $items" or "[$key, $value] of $items".');return s=r||p.b.attribute(n.attrName),i?(a=o[0].replace(/[[\]]/g,"").replace(/,/g," ").replace(/\s+/g," ").trim().split(" "),s.attributes.key=a[0],s.attributes.value=a[1]):s.attributes.local=o[0],s.attributes.items=new d.c(this.observerLocator,"items",this.parser.parse(o[1]),d.q.oneWay,t.lookupFunctions),s},t.prototype["two-way"]=function(t,e,n,r){var i=r||p.b.attribute(n.attrName);return i.attributes[n.attrName]=new d.c(this.observerLocator,this.attributeMap.map(e.tagName,n.attrName),this.parser.parse(n.attrValue),d.q.twoWay,t.lookupFunctions),i},t.prototype["to-view"]=function(t,e,n,r){var i=r||p.b.attribute(n.attrName);return i.attributes[n.attrName]=new d.c(this.observerLocator,this.attributeMap.map(e.tagName,n.attrName),this.parser.parse(n.attrValue),d.q.toView,t.lookupFunctions),i},t.prototype["from-view"]=function(t,e,n,r){var i=r||p.b.attribute(n.attrName);return i.attributes[n.attrName]=new d.c(this.observerLocator,this.attributeMap.map(e.tagName,n.attrName),this.parser.parse(n.attrValue),d.q.fromView,t.lookupFunctions),i},t.prototype["one-time"]=function(t,e,n,r){var i=r||p.b.attribute(n.attrName);return i.attributes[n.attrName]=new d.c(this.observerLocator,this.attributeMap.map(e.tagName,n.attrName),this.parser.parse(n.attrValue),d.q.oneTime,t.lookupFunctions),i},t}(),s.inject=[d.l,d.k,d.f,f],c);E.prototype["one-way"]=E.prototype["to-view"];var C={},S=(l=u=function(t){function e(e,n,r,i){var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return o.parser=e,o.observerLocator=n,o.syntaxInterpreter=r,o.emptyStringExpression=o.parser.parse("''"),r.language=o,o.attributeMap=i,o.toBindingContextAttr="to-binding-context",o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.inspectAttribute=function(t,e,n,r){var i=n.split(".");if(C.defaultBindingMode=null,2===i.length)C.attrName=i[0].trim(),C.attrValue=r,C.command=i[1].trim(),"ref"===C.command?(C.expression=new d.j(this.parser.parse(r),C.attrName,t.lookupFunctions),C.command=null,C.attrName="ref"):C.expression=null;else if("ref"===n)C.attrName=n,C.attrValue=r,C.command=null,C.expression=new d.j(this.parser.parse(r),"element",t.lookupFunctions);else{C.attrName=n,C.attrValue=r,C.command=null;var o=this.parseInterpolation(t,r);C.expression=null===o?null:new v(this.observerLocator,this.attributeMap.map(e,n),o,d.q.oneWay,t.lookupFunctions,n)}return C},e.prototype.createAttributeInstruction=function(t,e,n,r,i){var o=void 0;if(n.expression){if("ref"===n.attrName)return n.expression;(o=r||p.b.attribute(n.attrName)).attributes[n.attrName]=n.expression}else n.command&&(o=this.syntaxInterpreter.interpret(t,e,n,r,i));return o},e.prototype.createLetExpressions=function(t,e){for(var n=[],r=e.attributes,i=void 0,o=void 0,a=void 0,s=void 0,c=this.toBindingContextAttr,u=e.hasAttribute(c),l=0,p=r.length;p>l;++l)if(a=(i=r[l]).name,s=i.nodeValue,o=a.split("."),a!==c)if(2===o.length){if("bind"!==o[1]){h.getLogger("templating-binding-language").warn('Detected invalid let command. Expected "'+o[0]+'.bind", given "'+a+'"');continue}n.push(new b(this.observerLocator,Object(d.r)(o[0]),this.parser.parse(s),t.lookupFunctions,u))}else a=Object(d.r)(a),null===(o=this.parseInterpolation(t,s))&&h.getLogger("templating-binding-language").warn('Detected string literal in let bindings. Did you mean "'+a+".bind="+s+'" or "'+a+"=${"+s+'}" ?'),o?n.push(new _(this.observerLocator,a,o,t.lookupFunctions,u)):n.push(new b(this.observerLocator,a,new d.i(s),t.lookupFunctions,u));return n},e.prototype.inspectTextContent=function(t,e){var n=this.parseInterpolation(t,e);return null===n?null:new v(this.observerLocator,"textContent",n,d.q.oneWay,t.lookupFunctions,"textContent")},e.prototype.parseInterpolation=function(t,e){for(var n=e.indexOf("${",0),r=e.length,i=void 0,o=0,a=0,s=null,c=void 0,u=void 0,l=0;n>=0&&n<r-2;){a=1,c=n,n+=2;do{i=e[n],n++,"'"!==i&&'"'!==i?"\\"!==i?null===s&&("{"===i?a++:"}"===i&&a--):n++:null===s?s=i:s===i&&(s=null)}while(a>0&&n<r);if(0!==a)break;u=u||[],"\\"===e[c-1]&&"\\"!==e[c-2]?(u[l]=e.substring(o,c-1)+e.substring(c,n),u[++l]=this.emptyStringExpression,l++):(u[l]=e.substring(o,c),u[++l]=this.parser.parse(e.substring(c+2,n-1)),l++),o=n,n=e.indexOf("${",n)}return 0===l?null:(u[l]=e.substr(o),u)},e}(p.c),u.inject=[d.l,d.k,E,f],l);function k(t){t.container.registerSingleton(p.c,S),t.container.registerAlias(p.c,S)}},"aurelia-templating-resources":function(t,e,n){"use strict";(function(t){n.d(e,"configure",(function(){return _t}));var r,i=n(6),o=n(0),a=n(14),s=n(3),c=n(2),u=n(5),l=n(10),h=n(8),d=n(1),p=function(t,e){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function f(t,e){function n(){this.constructor=t}p(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function v(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}!function(t){t.InvokeLifecycle="invoke-lifecycle",t.Replace="replace"}(r||(r={}));var g=function(){function t(t,e,n,i,o,a){this.activationStrategy=r.InvokeLifecycle,this.element=t,this.container=e,this.compositionEngine=n,this.viewSlot=i,this.viewResources=o,this.taskQueue=a,this.currentController=null,this.currentViewModel=null,this.changes=Object.create(null)}return t.inject=function(){return[o.b.Element,i.a,s.e,s.p,s.o,a.a]},t.prototype.created=function(t){this.owningView=t},t.prototype.bind=function(t,e){this.bindingContext=t,this.overrideContext=e;var n=this.changes;n.view=this.view,n.viewModel=this.viewModel,n.model=this.model,this.pendingTask||y(this)},t.prototype.unbind=function(){this.changes=Object.create(null),this.bindingContext=null,this.overrideContext=null;this.viewSlot.removeAll(!0,!0)},t.prototype.modelChanged=function(t,e){this.changes.model=t,b(this)},t.prototype.viewChanged=function(t,e){this.changes.view=t,b(this)},t.prototype.viewModelChanged=function(t,e){this.changes.viewModel=t,b(this)},v([s.q],t.prototype,"model",void 0),v([s.q],t.prototype,"view",void 0),v([s.q],t.prototype,"viewModel",void 0),v([s.q],t.prototype,"activationStrategy",void 0),v([s.q],t.prototype,"swapOrder",void 0),t=v([s.u,Object(s.s)("compose")],t)}();function y(e){var n=e.changes;if(e.changes=Object.create(null),function(t,e){var n=t.activationStrategy,i=t.currentViewModel;i&&"function"==typeof i.determineActivationStrategy&&(n=i.determineActivationStrategy());return"view"in e||"viewModel"in e||n===r.Replace}(e,n)){var i={view:e.view,viewModel:e.currentViewModel||e.viewModel,model:e.model};i=Object.assign(i,n),i=function(t,e){return Object.assign(e,{bindingContext:t.bindingContext,overrideContext:t.overrideContext,owningView:t.owningView,container:t.container,viewSlot:t.viewSlot,viewResources:t.viewResources,currentController:t.currentController,host:t.element,swapOrder:t.swapOrder})}(e,i),e.pendingTask=e.compositionEngine.compose(i).then((function(t){e.currentController=t,e.currentViewModel=t?t.viewModel:null}))}else if(e.pendingTask=function(e,n){if(e&&"function"==typeof e.activate)return t.resolve(e.activate(n))}(e.currentViewModel,n.model),!e.pendingTask)return;e.pendingTask=e.pendingTask.then((function(){m(e)}),(function(t){throw m(e),t}))}function m(t){t.pendingTask=null,function(t){for(var e in t)return!1;return!0}(t.changes)||y(t)}function b(t){t.pendingTask||t.updateRequested||(t.updateRequested=!0,t.taskQueue.queueMicroTask((function(){t.updateRequested=!1,y(t)})))}var w=function(){function e(t,e){this.viewFactory=t,this.viewSlot=e,this.view=null,this.bindingContext=null,this.overrideContext=null,this.showing=!1,this.cache=!0}return e.prototype.bind=function(t,e){this.bindingContext=t,this.overrideContext=e},e.prototype.unbind=function(){null!==this.view&&(this.view.unbind(),this.viewFactory.isCaching&&(this.showing?(this.showing=!1,this.viewSlot.remove(this.view,!0,!0)):this.view.returnToCache(),this.view=null))},e.prototype._show=function(){if(!this.showing)return null===this.view&&(this.view=this.viewFactory.create()),this.view.isBound||this.view.bind(this.bindingContext,this.overrideContext),this.showing=!0,this.viewSlot.add(this.view);this.view.isBound||this.view.bind(this.bindingContext,this.overrideContext)},e.prototype._hide=function(){var e=this;if(this.showing){this.showing=!1;var n=this.viewSlot.remove(this.view);if(n instanceof t)return n.then((function(){e._unbindView()}));this._unbindView()}},e.prototype._unbindView=function(){var t="false"!==this.cache&&!!this.cache;this.view.unbind(),t||(this.view=null)},e}(),_=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.cache=!0,t}return f(n,e),n.prototype.bind=function(t,n){e.prototype.bind.call(this,t,n),this.condition?this._show():this._hide()},n.prototype.conditionChanged=function(t){this._update(t)},n.prototype._update=function(t){var e,n=this;this.animating||(e=this.elseVm?t?this._swap(this.elseVm,this):this._swap(this,this.elseVm):t?this._show():this._hide())&&(this.animating=!0,e.then((function(){n.animating=!1,n.condition!==n.showing&&n._update(n.condition)})))},n.prototype._swap=function(e,n){switch(this.swapOrder){case"before":return t.resolve(n._show()).then((function(){return e._hide()}));case"with":return t.all([e._hide(),n._show()]);default:var r=e._hide();return r?r.then((function(){return n._show()})):n._show()}},v([Object(s.q)({primaryProperty:!0})],n.prototype,"condition",void 0),v([s.q],n.prototype,"swapOrder",void 0),v([s.q],n.prototype,"cache",void 0),n=v([Object(s.r)("if"),s.w,Object(i.c)(s.d,s.p)],n)}(w),x=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r._registerInIf(),r}return f(e,t),e.prototype.bind=function(e,n){t.prototype.bind.call(this,e,n),this.ifVm.condition?this._hide():this._show()},e.prototype._registerInIf=function(){for(var t=this.viewSlot.anchor.previousSibling;t&&!t.au;)t=t.previousSibling;if(!t||!t.au.if)throw new Error("Can't find matching If for Else custom attribute.");this.ifVm=t.au.if.viewModel,this.ifVm.elseVm=this},e=v([Object(s.r)("else"),s.w,Object(i.c)(s.d,s.p)],e)}(w),E=function(){function t(t,e){this.viewFactory=t,this.viewSlot=e,this.parentOverrideContext=null,this.view=null}return t.prototype.bind=function(t,e){this.parentOverrideContext=e,this.valueChanged(this.value)},t.prototype.valueChanged=function(t){var e=Object(c.t)(t,this.parentOverrideContext),n=this.view;n?n.bind(t,e):((n=this.view=this.viewFactory.create()).bind(t,e),this.viewSlot.add(n))},t.prototype.unbind=function(){var t=this.view;this.parentOverrideContext=null,t&&t.unbind()},t=v([Object(s.r)("with"),s.w,Object(i.c)(s.d,s.p)],t)}(),C=c.q.oneTime;function S(t,e){var n=t.length;for(e>0&&(e-=1);e<n;++e)A(t[e].overrideContext,e,n)}function k(t,e,n,r,i){var o={},a=Object(c.t)(o,t.scope.overrideContext);return void 0!==i?(o[t.key]=i,o[t.value]=e):o[t.local]=e,A(a,n,r),a}function A(t,e,n){var r=0===e,i=e===n-1,o=e%2==0;t.$index=e,t.$first=r,t.$last=i,t.$middle=!(r||i),t.$odd=!o,t.$even=o}function T(t){t.call&&t.mode===C?t.call(c.x):t.updateOneTimeBindings&&t.updateOneTimeBindings()}function I(t,e,n,r){if(!n)return t.indexOf(e);for(var i=t.length,o=r||0;o<i;o++)if(n(t[o],e))return o;return-1}var R=function(){function e(){}return e.prototype.getCollectionObserver=function(t,e){return t.getArrayObserver(e)},e.prototype.instanceChanged=function(e,n){var r=this,i=e,o=n.length;if(n&&0!==o){var a=i.views(),s=a.length;if(0!==s)if(i.viewsRequireLifecycle){for(var c=a.slice(0),u=i.local,l=i.matcher(),h=[],d=[],p=0;p<s;p++){var f=c[p],v=f.bindingContext[u];-1===I(n,v,l)?d.push(f):h.push(v)}var g=void 0,y=void 0;h.length>0?(y=i.removeViews(d,!0,!i.viewsRequireLifecycle),g=function(){for(var t=0;t<o;t++){var e=n[t],s=I(h,e,l,t),c=void 0;if(-1===s){var u=k(i,n[t],t,o);i.insertView(t,u.bindingContext,u),h.splice(t,0,void 0)}else s===t?(c=a[s],h[s]=void 0):(c=a[s],i.moveView(s,t),h.splice(s,1),h.splice(t,0,void 0));c&&A(c.overrideContext,t,o)}r._inPlaceProcessItems(i,n)}):(y=i.removeAllViews(!0,!i.viewsRequireLifecycle),g=function(){return r._standardProcessInstanceChanged(i,n)}),y instanceof t?y.then(g):g()}else this._inPlaceProcessItems(i,n);else this._standardProcessInstanceChanged(i,n)}else i.removeAllViews(!0,!i.viewsRequireLifecycle)},e.prototype._standardProcessInstanceChanged=function(t,e){for(var n=0,r=e.length;n<r;n++){var i=k(t,e[n],n,r);t.addView(i.bindingContext,i)}},e.prototype._inPlaceProcessItems=function(t,e){for(var n=e.length,r=t.viewCount();r>n;)r--,t.removeView(r,!0,!t.viewsRequireLifecycle);for(var i=t.local,o=0;o<r;o++){var a=t.view(o),s=o===n-1,c=0!==o&&!s,u=a.bindingContext,l=a.overrideContext;u[i]===e[o]&&l.$middle===c&&l.$last===s||(u[i]=e[o],l.$middle=c,l.$last=s,t.updateBindings(a))}for(o=r;o<n;o++){l=k(t,e[o],o,n);t.addView(l.bindingContext,l)}},e.prototype.instanceMutated=function(e,n,r){var i=this;if(e.__queuedSplices){for(var o=0,a=r.length;o<a;++o){var s=r[o],u=s.index,l=s.removed,h=s.addedCount;Object(c.w)(e.__queuedSplices,u,l,h)}e.__array=n.slice(0)}else{var d=this._runSplices(e,n.slice(0),r);if(d instanceof t){var p=e.__queuedSplices=[],f=function(){if(!p.length)return e.__queuedSplices=void 0,void(e.__array=void 0);var n=i._runSplices(e,e.__array,p)||t.resolve();p=e.__queuedSplices=[],n.then(f)};d.then(f)}}},e.prototype._runSplices=function(e,n,r){for(var i=this,o=0,a=[],s=0,c=r.length;s<c;++s){for(var u=r[s],l=0,h=u.removed.length;l<h;++l){var d=e.removeView(u.index+o+a.length,!0);d instanceof t&&a.push(d)}o-=u.addedCount}if(a.length>0)return t.all(a).then((function(){var t=i._handleAddedSplices(e,n,r);S(e.views(),t)}));var p=this._handleAddedSplices(e,n,r);S(e.views(),p)},e.prototype._handleAddedSplices=function(t,e,n){for(var r,i,o=e.length,a=0,s=n.length;a<s;++a){var c=n[a],u=r=c.index,l=c.index+c.addedCount;for((null==i||i>c.index)&&(i=r);u<l;++u){var h=k(t,e[u],u,o);t.insertView(u,h.bindingContext,h)}}return i},e}(),O=function(){function e(){}return e.prototype.getCollectionObserver=function(t,e){return t.getMapObserver(e)},e.prototype.instanceChanged=function(e,n){var r=this,i=e.removeAllViews(!0,!e.viewsRequireLifecycle);i instanceof t?i.then((function(){return r._standardProcessItems(e,n)})):this._standardProcessItems(e,n)},e.prototype._standardProcessItems=function(t,e){var n,r=0;e.forEach((function(i,o){n=k(t,i,r,e.size,o),t.addView(n.bindingContext,n),++r}))},e.prototype.instanceMutated=function(e,n,r){var i,o,a,s,c,u,l,h,d=[];for(o=0,a=r.length;o<a;++o)switch(i=(l=r[o]).key,l.type){case"update":c=this._getViewIndexByKey(e,i),(h=e.removeView(c,!0,!e.viewsRequireLifecycle))instanceof t&&d.push(h),s=k(e,n.get(i),c,n.size,i),e.insertView(c,s.bindingContext,s);break;case"add":u=e.viewCount()<=n.size-1?e.viewCount():n.size-1,s=k(e,n.get(i),u,n.size,i),e.insertView(n.size-1,s.bindingContext,s);break;case"delete":if(void 0===l.oldValue)return;c=this._getViewIndexByKey(e,i),(h=e.removeView(c,!0,!e.viewsRequireLifecycle))instanceof t&&d.push(h);break;case"clear":e.removeAllViews(!0,!e.viewsRequireLifecycle);break;default:continue}d.length>0?t.all(d).then((function(){S(e.views(),0)})):S(e.views(),0)},e.prototype._getViewIndexByKey=function(t,e){var n,r;for(n=0,r=t.viewCount();n<r;++n)if(t.view(n).bindingContext[t.key]===e)return n},e}(),N=function(){function t(){}return t.prototype.instanceChanged=function(t,e){t.removeAllViews(!0)},t.prototype.getCollectionObserver=function(t,e){},t}(),L=function(){function e(){}return e.prototype.getCollectionObserver=function(){return null},e.prototype.instanceChanged=function(e,n){var r=this,i=e.removeAllViews(!0,!e.viewsRequireLifecycle);i instanceof t?i.then((function(){return r._standardProcessItems(e,n)})):this._standardProcessItems(e,n)},e.prototype._standardProcessItems=function(t,e){var n,r,i,o,a=t.viewCount();if((o=a-(e=Math.floor(e)))>0)for(o>a&&(o=a),n=0,r=o;n<r;++n)t.removeView(a-(n+1),!0,!t.viewsRequireLifecycle);else{for(n=a,r=e;n<r;++n)i=k(t,n,n,r),t.addView(i.bindingContext,i);S(t.views(),0)}},e}(),j=function(){function e(){}return e.prototype.getCollectionObserver=function(t,e){return t.getSetObserver(e)},e.prototype.instanceChanged=function(e,n){var r=this,i=e.removeAllViews(!0,!e.viewsRequireLifecycle);i instanceof t?i.then((function(){return r._standardProcessItems(e,n)})):this._standardProcessItems(e,n)},e.prototype._standardProcessItems=function(t,e){var n,r=0;e.forEach((function(i){n=k(t,i,r,e.size),t.addView(n.bindingContext,n),++r}))},e.prototype.instanceMutated=function(e,n,r){var i,o,a,s,c,u,l,h=[];for(o=0,a=r.length;o<a;++o)switch(i=(u=r[o]).value,u.type){case"add":var d=Math.max(n.size-1,0);s=k(e,i,d,n.size),e.insertView(d,s.bindingContext,s);break;case"delete":c=this._getViewIndexByValue(e,i),(l=e.removeView(c,!0,!e.viewsRequireLifecycle))instanceof t&&h.push(l);break;case"clear":e.removeAllViews(!0,!e.viewsRequireLifecycle);break;default:continue}h.length>0?t.all(h).then((function(){S(e.views(),0)})):S(e.views(),0)},e.prototype._getViewIndexByValue=function(t,e){var n,r;for(n=0,r=t.viewCount();n<r;++n)if(t.view(n).bindingContext[t.local]===e)return n},e}(),B=function(){function t(){this.matchers=[],this.strategies=[],this.addStrategy((function(t){return null==t}),new N),this.addStrategy((function(t){return t instanceof Array}),new R),this.addStrategy((function(t){return t instanceof Map}),new O),this.addStrategy((function(t){return t instanceof Set}),new j),this.addStrategy((function(t){return"number"==typeof t}),new L)}return t.prototype.addStrategy=function(t,e){this.matchers.push(t),this.strategies.push(e)},t.prototype.getStrategy=function(t){for(var e=this.matchers,n=0,r=e.length;n<r;++n)if(e[n](t))return this.strategies[n];return null},t}(),M=["focus","if","else","repeat","show","hide","with"];function D(t){var e=t.type,n=null!==e.elementName?e.elementName:e.attributeName;return-1===M.indexOf(n)&&(e.handlesAttached||e.handlesBind||e.handlesCreated||e.handlesDetached||e.handlesUnbind)||e.viewFactory&&F(e.viewFactory)||t.viewFactory&&F(t.viewFactory)}function P(t){var e=t.behaviorInstructions;if(e)for(var n=e.length;n--;)if(D(e[n]))return!0;return t.viewFactory&&F(t.viewFactory)}function F(t){if("_viewsRequireLifecycle"in t)return t._viewsRequireLifecycle;if(t._viewsRequireLifecycle=!1,t.viewFactory)return t._viewsRequireLifecycle=F(t.viewFactory),t._viewsRequireLifecycle;if(t.template.querySelector(".au-animate"))return t._viewsRequireLifecycle=!0,!0;for(var e in t.instructions)if(P(t.instructions[e]))return t._viewsRequireLifecycle=!0,!0;return t._viewsRequireLifecycle=!1,!1}var V=function(t){function e(e,n,r,i,o,a){var s=t.call(this,{local:"item",viewsRequireLifecycle:F(e)})||this;return s.viewFactory=e,s.instruction=n,s.viewSlot=r,s.lookupFunctions=i.lookupFunctions,s.observerLocator=o,s.key="key",s.value="value",s.strategyLocator=a,s.ignoreMutation=!1,s.sourceExpression=function(t,e){return t.behaviorInstructions.filter((function(t){return t.originalAttrName===e}))[0].attributes.items.sourceExpression}(s.instruction,"repeat.for"),s.isOneTime=function(t){for(;t instanceof c.a;){if("oneTime"===t.name)return!0;t=t.expression}return!1}(s.sourceExpression),s.viewsRequireLifecycle=F(e),s}var n;return f(e,t),n=e,e.prototype.call=function(t,e){this[t](this.items,e)},e.prototype.bind=function(t,e){this.scope={bindingContext:t,overrideContext:e},this.matcherBinding=this._captureAndRemoveMatcherBinding(),this.itemsChanged()},e.prototype.unbind=function(){this.scope=null,this.items=null,this.matcherBinding=null,this.viewSlot.removeAll(!0,!0),this._unsubscribeCollection()},e.prototype._unsubscribeCollection=function(){this.collectionObserver&&(this.collectionObserver.unsubscribe(this.callContext,this),this.collectionObserver=null,this.callContext=null)},e.prototype.itemsChanged=function(){var t=this;if(this._unsubscribeCollection(),this.scope){var e=this.items;if(this.strategy=this.strategyLocator.getStrategy(e),!this.strategy)throw new Error("Value for '"+this.sourceExpression+"' is non-repeatable");this.isOneTime||this._observeInnerCollection()||this._observeCollection(),this.ignoreMutation=!0,this.strategy.instanceChanged(this,e),this.observerLocator.taskQueue.queueMicroTask((function(){t.ignoreMutation=!1}))}},e.prototype._getInnerCollection=function(){var t=function(t){for(var e=!1;t instanceof c.a;)t=t.expression;for(;t instanceof c.n;)t=t.expression,e=!0;return e?t:null}(this.sourceExpression);return t?t.evaluate(this.scope,null):null},e.prototype.handleCollectionMutated=function(t,e){this.collectionObserver&&(this.ignoreMutation||this.strategy.instanceMutated(this,t,e))},e.prototype.handleInnerCollectionMutated=function(t,e){var n=this;if(this.collectionObserver&&!this.ignoreMutation){this.ignoreMutation=!0;var r=this.sourceExpression.evaluate(this.scope,this.lookupFunctions);this.observerLocator.taskQueue.queueMicroTask((function(){return n.ignoreMutation=!1})),r===this.items?this.itemsChanged():this.items=r}},e.prototype._observeInnerCollection=function(){var t=this._getInnerCollection(),e=this.strategyLocator.getStrategy(t);return!!e&&(this.collectionObserver=e.getCollectionObserver(this.observerLocator,t),!!this.collectionObserver&&(this.callContext="handleInnerCollectionMutated",this.collectionObserver.subscribe(this.callContext,this),!0))},e.prototype._observeCollection=function(){var t=this.items;this.collectionObserver=this.strategy.getCollectionObserver(this.observerLocator,t),this.collectionObserver&&(this.callContext="handleCollectionMutated",this.collectionObserver.subscribe(this.callContext,this))},e.prototype._captureAndRemoveMatcherBinding=function(){var t=this.viewFactory.viewFactory;if(t){var e=t.template,r=t.instructions;if(n.useInnerMatcher)return q(r);if(e.children.length>1)return;var i=e.firstElementChild;if(!i.hasAttribute("au-target-id"))return;var o=i.getAttribute("au-target-id");return q(r,o)}},e.prototype.viewCount=function(){return this.viewSlot.children.length},e.prototype.views=function(){return this.viewSlot.children},e.prototype.view=function(t){return this.viewSlot.children[t]},e.prototype.matcher=function(){var t=this.matcherBinding;return t?t.sourceExpression.evaluate(this.scope,t.lookupFunctions):null},e.prototype.addView=function(t,e){var n=this.viewFactory.create();n.bind(t,e),this.viewSlot.add(n)},e.prototype.insertView=function(t,e,n){var r=this.viewFactory.create();r.bind(e,n),this.viewSlot.insert(t,r)},e.prototype.moveView=function(t,e){this.viewSlot.move(t,e)},e.prototype.removeAllViews=function(t,e){return this.viewSlot.removeAll(t,e)},e.prototype.removeViews=function(t,e,n){return this.viewSlot.removeMany(t,e,n)},e.prototype.removeView=function(t,e,n){return this.viewSlot.removeAt(t,e,n)},e.prototype.updateBindings=function(t){for(var e=t,n=e.bindings.length;n--;)T(e.bindings[n]);for(n=e.controllers.length;n--;)for(var r=e.controllers[n].boundProperties.length;r--;){T(e.controllers[n].boundProperties[r].binding)}},e.useInnerMatcher=!0,v([s.q],e.prototype,"items",void 0),v([s.q],e.prototype,"local",void 0),v([s.q],e.prototype,"key",void 0),v([s.q],e.prototype,"value",void 0),e=n=v([Object(s.r)("repeat"),s.w,Object(i.c)(s.d,s.j,s.p,s.o,c.k,B)],e)}(function(){function t(t){Object.assign(this,{local:"items",viewsRequireLifecycle:!0},t)}return t.prototype.viewCount=function(){throw new Error("subclass must implement `viewCount`")},t.prototype.views=function(){throw new Error("subclass must implement `views`")},t.prototype.view=function(t){throw new Error("subclass must implement `view`")},t.prototype.matcher=function(){throw new Error("subclass must implement `matcher`")},t.prototype.addView=function(t,e){throw new Error("subclass must implement `addView`")},t.prototype.insertView=function(t,e,n){throw new Error("subclass must implement `insertView`")},t.prototype.moveView=function(t,e){throw new Error("subclass must implement `moveView`")},t.prototype.removeAllViews=function(t,e){throw new Error("subclass must implement `removeAllViews`")},t.prototype.removeViews=function(t,e,n){throw new Error("subclass must implement `removeView`")},t.prototype.removeView=function(t,e,n){throw new Error("subclass must implement `removeView`")},t.prototype.updateBindings=function(t){throw new Error("subclass must implement `updateBindings`")},t}()),q=function(t,e){for(var n=Object.keys(t),r=0;r<n.length;r++){var i=n[r];if(void 0===e||i===e){var o=t[i].expressions;if(o)for(var a=0;a<o.length;a++)if("matcher"===o[a].targetProperty){var s=o[a];return o.splice(a,1),s}}}};function G(t){o.c.shadowDOM&&t&&!t.hasAureliaHideStyle&&(t.hasAureliaHideStyle=!0,o.b.injectStyles(".aurelia-hide { display:none !important; }",t))}var U=function(){function t(t,e,n){this.element=t,this.animator=e,this.domBoundary=n}return t.inject=function(){return[o.b.Element,s.a,i.b.of(o.b.boundary,!0)]},t.prototype.created=function(){G(this.domBoundary)},t.prototype.valueChanged=function(t){var e=this.element,n=this.animator;t?n.removeClass(e,"aurelia-hide"):n.addClass(e,"aurelia-hide")},t.prototype.bind=function(t){this.valueChanged(this.value)},t=v([Object(s.r)("show")],t)}(),H=function(){function t(t,e,n){this.element=t,this.animator=e,this.domBoundary=n}return t.inject=function(){return[o.b.Element,s.a,i.b.of(o.b.boundary,!0)]},t.prototype.created=function(){G(this.domBoundary)},t.prototype.valueChanged=function(t){t?this.animator.addClass(this.element,"aurelia-hide"):this.animator.removeClass(this.element,"aurelia-hide")},t.prototype.bind=function(t){this.valueChanged(this.value)},t.prototype.value=function(t){throw new Error("Method not implemented.")},t=v([Object(s.r)("hide")],t)}(),z=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,$=!0,W=function(){function t(){}return t.prototype.sanitize=function(t){return $&&($=!1,Object(u.getLogger)("html-sanitizer").warn("CAUTION: The default HTMLSanitizer does NOT provide security against a wide variety of sophisticated XSS attacks,\nand should not be relied on for sanitizing input from unknown sources.\nPlease see https://aurelia.io/docs/binding/basics#element-content for instructions on how to use a secure solution like DOMPurify or sanitize-html.")),t.replace(z,"")},t}(),Q=function(){function t(t){this.sanitizer=t}return t.prototype.toView=function(t){return null==t?null:this.sanitizer.sanitize(t)},t=v([Object(c.A)("sanitizeHTML"),Object(i.c)(W)],t)}(),K=function(){function t(t,e){this.viewFactory=t,this.viewSlot=e,this.view=null}return t.prototype.bind=function(t,e){null===this.view&&(this.view=this.viewFactory.create(),this.viewSlot.add(this.view)),this.view.bind(t,e)},t.prototype.unbind=function(){this.view.unbind()},t=v([Object(s.r)("replaceable"),s.w,Object(i.c)(s.d,s.p)],t)}(),J=function(){function t(t,e){this.element=t,this.taskQueue=e,this.isAttached=!1,this.needsApply=!1}return t.inject=function(){return[o.b.Element,a.a]},t.prototype.valueChanged=function(t){this.isAttached?this._apply():this.needsApply=!0},t.prototype._apply=function(){var t=this;this.value?this.taskQueue.queueMicroTask((function(){t.value&&t.element.focus()})):this.element.blur()},t.prototype.attached=function(){this.isAttached=!0,this.needsApply&&(this.needsApply=!1,this._apply()),this.element.addEventListener("focus",this),this.element.addEventListener("blur",this)},t.prototype.detached=function(){this.isAttached=!1,this.element.removeEventListener("focus",this),this.element.removeEventListener("blur",this)},t.prototype.handleEvent=function(t){"focus"===t.type?this.value=!0:o.b.activeElement!==this.element&&(this.value=!1)},t=v([Object(s.r)("focus",c.q.twoWay)],t)}(),X=/url\((?!['"]data)([^)]+)\)/gi;var Y=function(){function t(t){this.address=t,this._scoped=null,this._global=!1,this._alreadyGloballyInjected=!1}return t.prototype.initialize=function(t,e){this._scoped=new e(this)},t.prototype.register=function(t,e){"scoped"===e?t.registerViewEngineHooks(this._scoped):this._global=!0},t.prototype.load=function(t){var e=this;return t.get(l.a).loadText(this.address).catch((function(t){return null})).then((function(t){t=function(t,e){if("string"!=typeof e)throw new Error("Failed loading required CSS file: "+t);return e.replace(X,(function(e,n){var r=n.charAt(0);return"'"!==r&&'"'!==r||(n=n.substr(1,n.length-2)),"url('"+Object(h.d)(n,t)+"')"}))}(e.address,t),e._scoped.css=t,e._global&&(e._alreadyGloballyInjected=!0,o.b.injectStyles(t))}))},t}(),Z=function(){function t(t){this.owner=t,this.css=null}return t.prototype.beforeCompile=function(t,e,n){if(n.targetShadowDOM)o.b.injectStyles(this.css,t,!0);else if(o.c.scopedCSS){o.b.injectStyles(this.css,t,!0).setAttribute("scoped","scoped")}else this._global&&!this.owner._alreadyGloballyInjected&&(o.b.injectStyles(this.css),this.owner._alreadyGloballyInjected=!0)},t}();var tt=function(){function t(){}return t.prototype.bind=function(t,e){t.targetObserver=new c.e(t.target,t.targetProperty)},t.prototype.unbind=function(t,e){},t=v([Object(c.p)("attr")],t)}(),et={bind:function(t,e,n){t.originalMode=t.mode,t.mode=this.mode},unbind:function(t,e){t.mode=t.originalMode,t.originalMode=null}},nt=function(){function t(){this.mode=c.q.oneTime}return t=v([Object(d.c)(et),Object(c.p)("oneTime")],t)}(),rt=function(){function t(){this.mode=c.q.toView}return t=v([Object(d.c)(et),Object(c.p)("oneWay")],t)}(),it=function(){function t(){this.mode=c.q.toView}return t=v([Object(d.c)(et),Object(c.p)("toView")],t)}(),ot=function(){function t(){this.mode=c.q.fromView}return t=v([Object(d.c)(et),Object(c.p)("fromView")],t)}(),at=function(){function t(){this.mode=c.q.twoWay}return t=v([Object(d.c)(et),Object(c.p)("twoWay")],t)}();function st(t){var e=this,n=this.throttleState,r=+new Date-n.last;if(r>=n.delay)return clearTimeout(n.timeoutId),n.timeoutId=null,n.last=+new Date,void this.throttledMethod(t);n.newValue=t,null===n.timeoutId&&(n.timeoutId=setTimeout((function(){n.timeoutId=null,n.last=+new Date,e.throttledMethod(n.newValue)}),n.delay-r))}var ct=function(){function t(){}return t.prototype.bind=function(t,e,n){void 0===n&&(n=200);var r="updateTarget";t.callSource?r="callSource":t.updateSource&&t.mode===c.q.twoWay&&(r="updateSource"),t.throttledMethod=t[r],t.throttledMethod.originalName=r,t[r]=st,t.throttleState={delay:n,last:0,timeoutId:null}},t.prototype.unbind=function(t,e){t[t.throttledMethod.originalName]=t.throttledMethod,t.throttledMethod=null,clearTimeout(t.throttleState.timeoutId),t.throttleState=null},t=v([Object(c.p)("throttle")],t)}(),ut={};function lt(t){var e=this,n=this.debounceState;clearTimeout(n.timeoutId),n.timeoutId=setTimeout((function(){return e.debouncedMethod(t)}),n.delay)}function ht(t,e,n){var r=this,i=this.debounceState;if(clearTimeout(i.timeoutId),t!==i.callContextToDebounce)return i.oldValue=ut,void this.debouncedMethod(t,e,n);i.oldValue===ut&&(i.oldValue=n),i.timeoutId=setTimeout((function(){var n=i.oldValue;i.oldValue=ut,r.debouncedMethod(t,e,n)}),i.delay)}var dt=function(){function t(){}return t.prototype.bind=function(t,e,n){void 0===n&&(n=200);var r=void 0!==t.callSource,i=r?"callSource":"call",o=r?lt:ht,a=t.mode,s=a===c.q.twoWay||a===c.q.fromView?c.z:c.x;t.debouncedMethod=t[i],t.debouncedMethod.originalName=i,t[i]=o,t.debounceState={callContextToDebounce:s,delay:n,timeoutId:0,oldValue:ut}},t.prototype.unbind=function(t,e){t[t.debouncedMethod.originalName]=t.debouncedMethod,t.debouncedMethod=null,clearTimeout(t.debounceState.timeoutId),t.debounceState=null},t=v([Object(c.p)("debounce")],t)}();function pt(t){var e=function(t){return t.path&&t.path[0]||t.deepPath&&t.deepPath[0]||t.target}(t);this.target===e&&this.selfEventCallSource(t)}var ft=function(){function t(){}return t.prototype.bind=function(t,e){if(!t.callSource||!t.targetEvent)throw new Error("Self binding behavior only supports event.");t.selfEventCallSource=t.callSource,t.callSource=pt},t.prototype.unbind=function(t,e){t.callSource=t.selfEventCallSource,t.selfEventCallSource=null},t=v([Object(c.p)("self")],t)}(),vt=function(){function t(){this.signals={}}return t.prototype.signal=function(t){var e=this.signals[t];if(e)for(var n=e.length;n--;)e[n].call(c.x)},t}(),gt=function(){function t(t){this.signals=t.signals}return t.inject=function(){return[vt]},t.prototype.bind=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!t.updateTarget)throw new Error("Only property bindings and string interpolation bindings can be signaled.  Trigger, delegate and call bindings cannot be signaled.");var i=this.signals;if(1===n.length){var o=n[0];(i[o]||(i[o]=[])).push(t),t.signalName=o}else{if(!(n.length>1))throw new Error("Signal name is required.");for(var a=n.length;a--;){var s=n[a];(i[s]||(i[s]=[])).push(t)}t.signalName=n}},t.prototype.unbind=function(t,e){var n=this.signals,r=t.signalName;if(t.signalName=null,Array.isArray(r))for(var i=r,o=i.length;o--;){var a;(a=n[i[o]]).splice(a.indexOf(t),1)}else(a=n[r]).splice(a.indexOf(t),1)},t=v([Object(c.p)("signal")],t)}(),yt="The updateTrigger binding behavior requires at least one event name argument: eg <input value.bind=\"firstName & updateTrigger:'blur'\">",mt="The updateTrigger binding behavior can only be applied to two-way/ from-view bindings on input/select elements.",bt=function(){function t(){}return t.prototype.bind=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(0===n.length)throw new Error(yt);if(t.mode!==c.q.twoWay&&t.mode!==c.q.fromView)throw new Error(mt);var i=t.observerLocator.getObserver(t.target,t.targetProperty);if(!i.handler)throw new Error(mt);t.targetObserver=i,i.originalHandler=t.targetObserver.handler;var o=new c.g(n);i.handler=o},t.prototype.unbind=function(t,e){var n=t.targetObserver;n.handler.dispose(),n.handler=n.originalHandler,n.originalHandler=null},t=v([Object(c.p)("updateTrigger")],t)}();function wt(t){var e=t.container.get(s.m),n=t.aurelia.loader;e.addResourcePlugin(".html",{fetch:function(t){return n.loadTemplate(t).then((function(e){var n,r=e.template.getAttribute("bindable"),i=e.template.getAttribute("use-shadow-dom"),o=/([^\/^\?]+)\.html/i.exec(t)[1].toLowerCase();return r?(r=r.split(",").map((function(t){return t.trim()})),e.template.removeAttribute("bindable")):r=[],(n={})[o]=function(t){for(var e=t.name,n=t.viewUrl,r=t.bindableNames,i=t.useShadowDOMmode,o=function(){function t(){}return t.prototype.bind=function(t){this.$parent=t},t=v([Object(s.s)(e),Object(s.y)(n)],t)}(),a=0,c=r.length;a<c;++a)Object(s.q)(r[a])(o);switch(i){case"open":Object(s.x)({mode:"open"})(o);break;case"closed":Object(s.x)({mode:"closed"})(o);break;case"":Object(s.x)(o);break;case null:break;default:Object(u.getLogger)("aurelia-html-only-element").warn('Expected \'use-shadow-dom\' value to be "close", "open" or "", received '+i)}return o}({name:o,viewUrl:t,bindableNames:r,useShadowDOMmode:i}),n}))}})}function _t(t){o.b.injectStyles(".aurelia-hide { display:none !important; }"),t.globalResources(g,_,x,E,V,U,H,K,J,Q,nt,rt,it,ot,at,ct,dt,ft,gt,bt,tt),wt(t);var e=t.container.get(s.m),n={fetch:function(t){var e;return(e={})[t]=function(t){return function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return f(n,e),n=v([Object(s.v)(new Y(t))],n)}(Z)}(t),e}};[".css",".less",".sass",".scss",".styl"].forEach((function(t){return e.addResourcePlugin(t,n)}))}}).call(this,n(7))},"aurelia-templating-router":function(t,e,n){"use strict";(function(t){n.d(e,"configure",(function(){return b}));var r=n(13),i=n(1),o=n(8),a=n(3),s=n(6),c=n(2),u=n(0),l=n(5),h=function(t,e){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var d=function(){},p=function(){function e(t,e,n,r,i,o,a){this.element=t,this.container=e,this.viewSlot=n,this.router=r,this.viewLocator=i,this.compositionTransaction=o,this.compositionEngine=a,this.router.registerViewPort(this,this.element.getAttribute("name")),"initialComposition"in o||(o.initialComposition=!0,this.compositionTransactionNotifier=o.enlist())}return e.inject=function(){return[u.b.Element,s.a,a.p,r.c,a.n,a.f,a.e]},e.prototype.created=function(t){this.owningView=t},e.prototype.bind=function(t,e){this.container.viewModel=t,this.overrideContext=e},e.prototype.process=function(t,e){var n=this,r=t,o=r.component,s=o.childContainer,c=o.viewModel,u=o.viewModelResource,l=u.metadata,h=o.router.currentInstruction.config,d=h.viewPorts&&h.viewPorts[r.name]||{};s.get(f)._notify(this);var p={viewModel:d.layoutViewModel||h.layoutViewModel||this.layoutViewModel,view:d.layoutView||h.layoutView||this.layoutView,model:d.layoutModel||h.layoutModel||this.layoutModel,router:r.component.router,childContainer:s,viewSlot:this.viewSlot},v=this.viewLocator.getViewStrategy(o.view||c);return v&&o.view&&v.makeRelativeTo(i.a.get(o.router.container.viewModel.constructor).moduleId),l.load(s,u.value,null,v,!0).then((function(t){n.compositionTransactionNotifier||(n.compositionTransactionOwnershipToken=n.compositionTransaction.tryCapture()),(p.viewModel||p.view)&&(r.layoutInstruction=p);var i=a.b.dynamic(n.element,c,t);if(r.controller=l.create(s,i),e)return null;n.swap(r)}))},e.prototype.swap=function(e){var n=this,r=e,i=r.controller,o=r.layoutInstruction,s=this.view,u=function(){var e=a.i[n.swapOrder]||a.i.after,r=n.viewSlot;e(r,s,(function(){return t.resolve(r.add(n.view))})).then((function(){n._notify()}))},l=function(t){i.automate(n.overrideContext,t);var e=n.compositionTransactionOwnershipToken;return e?e.waitForCompositionComplete().then((function(){return n.compositionTransactionOwnershipToken=null,u()})):u()};return o?(o.viewModel||(o.viewModel=new d),this.compositionEngine.createController(o).then((function(t){var e=t.view;return a.h.distributeView(i.view,t.slots||e.slots),t.automate(Object(c.t)(o.viewModel),n.owningView),e.children.push(i.view),e||t})).then((function(t){return n.view=t,l(t)}))):(this.view=i.view,l(this.owningView))},e.prototype._notify=function(){var t=this.compositionTransactionNotifier;t&&(t.done(),this.compositionTransactionNotifier=null)},e.$view=null,e.$resource={name:"router-view",bindables:["swapOrder","layoutView","layoutViewModel","layoutModel","inherit-binding-context"]},e}(),f=function(){function e(){var e=this;this.promise=new t((function(t){return e.resolve=t}))}return e.prototype.findNearest=function(){return this.promise},e.prototype._notify=function(t){this.resolve(t)},e}(),v=function(){};a.t("<template></template>")(v);var g=function(e){function n(t){var n=e.call(this)||this;return n.compositionEngine=t,n}return function(t,e){function n(){this.constructor=t}h(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(n,e),n.prototype.resolveViewModel=function(e,n){return new t((function(t,r){var s;if("moduleId"in n){var c=n.moduleId;return null===c?s=v:(c=Object(o.d)(c,i.a.get(e.container.viewModel.constructor).moduleId),s=/\.html/i.test(c)?function(t){var e=/([^\/^\?]+)\.html/i.exec(t)[1],n=function(){function t(){}return t.prototype.bind=function(t){this.$parent=t},t}();return Object(a.s)(e)(n),Object(a.y)(t)(n),n}(c):c),t(s)}r(new Error('Invalid route config. No "moduleId" found.'))}))},n.prototype.createChildContainer=function(t){var e=t.container.createChild();return e.registerSingleton(f),e.getChildRouter=function(){var n;return e.registerHandler(r.c,(function(){return n||(n=t.createChild(e))})),e.get(r.c)},e},n.prototype.loadRoute=function(t,e,n){var r=this;return this.resolveViewModel(t,e).then((function(n){return r.compositionEngine.ensureViewModel({viewModel:n,childContainer:r.createChildContainer(t),view:e.view||e.viewStrategy,router:t})}))},n.inject=[a.e],n}(r.b);var y=Object(l.getLogger)("route-href"),m=function(){function t(t,e){this.router=t,this.element=e,this.attribute="href"}return t.inject=function(){return[r.c,u.b.Element]},t.prototype.bind=function(){this.isActive=!0,this.processChange()},t.prototype.unbind=function(){this.isActive=!1},t.prototype.attributeChanged=function(t,e){return e&&this.element.removeAttribute(e),this.processChange()},t.prototype.processChange=function(){var t=this;return this.router.ensureConfigured().then((function(){if(!t.isActive)return null;var e=t.element,n=t.router.generate(t.route,t.params);return e.au.controller?e.au.controller.viewModel[t.attribute]=n:e.setAttribute(t.attribute,n),null})).catch((function(t){y.error(t)}))},t.$resource={type:"attribute",name:"route-href",bindables:[{name:"route",changeHandler:"processChange",primaryProperty:!0},{name:"params",changeHandler:"processChange"},"attribute"]},t}();function b(t){t.singleton(r.b,g).singleton(r.c,r.a).globalResources(p,m),t.container.registerAlias(r.c,r.a)}}).call(this,n(7))},"aurelia-testing":function(t,e,n){"use strict";n.r(e),n.d(e,"configure",(function(){return s}));var r=n("aurelia-testing/compile-spy");n.d(e,"CompileSpy",(function(){return r.CompileSpy}));var i=n("aurelia-testing/view-spy");n.d(e,"ViewSpy",(function(){return i.ViewSpy}));var o=n(24);n.d(e,"StageComponent",(function(){return o.b})),n.d(e,"ComponentTester",(function(){return o.a}));var a=n(17);function s(t){t.globalResources(["./compile-spy","./view-spy"])}n.d(e,"waitFor",(function(){return a.a})),n.d(e,"waitForDocumentElement",(function(){return a.b})),n.d(e,"waitForDocumentElements",(function(){return a.c}))},"aurelia-testing/compile-spy":function(t,e,n){"use strict";n.r(e),n.d(e,"CompileSpy",(function(){return c}));var r=n(3),i=n(6),o=n(5),a=n(0),s=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},c=function(){function t(t,e){Object(o.getLogger)("compile-spy").info(t.toString(),e)}return t=s([Object(r.r)("compile-spy"),Object(i.c)(a.b.Element,r.j)],t)}()},"aurelia-testing/view-spy":function(t,e,n){"use strict";n.r(e),n.d(e,"ViewSpy",(function(){return a}));var r=n(3),i=n(5),o=function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a},a=function(){function t(){this.logger=Object(i.getLogger)("view-spy")}return t.prototype._log=function(t,e){this.value||"created"!==t?this.value&&-1!==this.value.indexOf(t)&&this.logger.info(t,this.view,e):this.logger.info(t,this.view)},t.prototype.created=function(t){this.view=t,this._log("created")},t.prototype.bind=function(t){this._log("bind",t)},t.prototype.attached=function(){this._log("attached")},t.prototype.detached=function(){this._log("detached")},t.prototype.unbind=function(){this._log("unbind")},t=o([Object(r.r)("view-spy")],t)}()},main:function(t,e,n){"use strict";var r=!1,i=!1,o=(n(0),n(7));function a(t){t.use.standardConfiguration().feature("resources/index"),r&&t.use.developmentLogging(),i&&t.use.plugin("aurelia-testing"),t.start().then(()=>t.setRoot("app"))}n.d(e,"configure",(function(){return a})),o.config({warnings:{wForgottenReturn:!1}})},"resources/index":function(t,e,n){"use strict";function r(t){}n.r(e),n.d(e,"configure",(function(){return r}))}});
//# sourceMappingURL=app.6dfce2250a64542aeb20.bundle.map