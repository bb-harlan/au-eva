<template>
  <require from="au-views/au-icon-nav-left.html"></require>
  <require from="au-views/au-vertical-gridline.html"></require>
  <require from="au-views/au-grid-bchg-cells-spacer.html"></require>
  <require from="au-components/au-tran-bchg-row-data"></require>

  <div class="aaPanel aaPanelBoxShadow">
    <div class="aaPanelHeader aaPanelHeaderModule">Transaction Journal</div>
    <div class="aaPanelBody">
      <div class="aaGridContainer">
        <div class="aaGridTitleBar">Transactions</div>
        <div class="aaGridScrollableRows" style="height: 33pc;" id="jrnlGridBodyContainer">
          <template repeat.for="tran of app.data.jrnl.tranList">
            <div id="${tran.id}"
                 class="aaRow"
                 style="border-bottom: none;"
                 mouseenter.trigger="onRowEnter($event, tran)"
                 mouseleave.trigger="onRowLeave($event, tran)">
              <div class="aaRowOps aaBgColorToolbar aaFontSizeLabel"
                   style="border-bottom: 1px solid #ccc;">

                <div class="aaRowOpsOpacity">
                    <span class="aaBtn"
                          click.delegate="onGoTran($event, tran)">
                      <au-icon-nav-left></au-icon-nav-left>
                    </span>
                </div>
              </div>
              <!--</template>-->
              <div class="aaVerticalGridline"></div>
              <div style="display: inline-flex; flex-direction: column; align-items: flex-start; justify-content: flex-start">
                <div class="aaRowBgColorData"
                     style="display: inline-flex; align-items: center; justify-content: center; border-bottom: 1px solid #ccc;">
                  <span class="aaFormItemLabel aaCell">Date:</span>
                  <div class="aaCell aaFontData"><input type="text" disabled class="aaFormInputText aaCellTranDate"
                                                            value="${tran.date}"></div>
                </div>
                <div class="aaRowBgColorData"
                     style="display: flex; flex-direction: column; align-items: flex-start; justify-content: flex-start">
                  <template repeat.for="bchg of tran.bchgList">
                    <div class="aaRow">
                      <div
                        class="aaRowData ${bchg.id == app.selectedBchg.id ? 'aaMostRecentlySelectedRow' : ''}">
                        <au-tran-bchg-row-data bchg.bind="bchg"></au-tran-bchg-row-data>
                      </div>
                    </div>
                  </template>
                </div>
              </div>
              <div class="aaVerticalGridline"></div>
            </div>
            <!-- End of tran -->
            <div class="aaRow" style="background-color: #ccc;">
              <div class="aaRowOps aaBgColorToolbar" style="background-color: inherit;">
                <span class="aaBtn aaHidden">
                    <au-icon-nav-left></au-icon-nav-left>
                  </span>
              </div>
              <div class="aaVerticalGridline"></div>
              <div class="aaRowData" style="background-color: inherit;">
                <div class="aaCell aaFontData" style="position: absolute;"><span
                  class="aaSansSerif aaCellTextEOL">&nbsp;</span></div>
                <au-tran-bchg-cells-spacer></au-tran-bchg-cells-spacer>
                <au-vertical-gridline-spacer></au-vertical-gridline-spacer>
                <au-tran-bchg-cells-spacer></au-tran-bchg-cells-spacer>
              </div>
              <div class="aaVerticalGridline"></div>
            </div>
          </template>
        </div>
        <div class="aaGridFooterBar"></div>
      </div>
    </div>
  </div>
</template>
