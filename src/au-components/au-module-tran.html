<template>
  <require from="au-views/au-icon-nav-right.html"></require>
  <require from="au-views/au-icon-nav-up.html"></require>
  <require from="au-views/au-icon-nav-down.html"></require>
  <require from="au-views/au-icon-nav-left.html"></require>
  <require from="au-views/au-icon-nav-left-left.html"></require>
  <require from="au-views/au-icon-edit.html"></require>
  <require from="au-views/au-icon-row-mover.html"></require>
  <require from="au-views/au-bchg-grid-header.html"></require>
  <require from="au-views/au-vertical-gridline.html"></require>
  <require from="au-views/au-vertical-gridline-spacer.html"></require>
  <require from="au-views/au-tran-bchg-cells-spacer.html"></require>
  <require from="au-components/au-tran-bchg-row-data"></require>
  <require from="au-components/au-tran-bchg-mover"></require>
  <require from="au-converters/au-currency-converter"></require>

  <template if.bind="app.selectedModuleMode == app.MODULE_MODE_NAVIGATING">
  </template>
  <template if.bind="app.selectedModuleMode == app.MODULE_MODE_EDITING">
    <p>${app.MODULE_MODE_EDITING}</p>
  </template>
  <template if.bind="app.selectedModuleMode == app.MODULE_MODE_MOVING_ROWS">
    <p>${app.MODULE_MODE_MOVING_ROWS}</p>
  </template>
  <div class="aaPanel aaPanelBoxShadow">

    <div class="aaPanelHeader aaPanelHeaderModule">Transaction</div>
    <div class="aaPanelToolBar" if.bind="!app.isEditing">
      <button type="button"
              class="aaBtn"
              click.trigger="onGoUp($event)">
        <au-icon-nav-up></au-icon-nav-up>
      </button>
      <button type="button"
              class="aaBtn"
              click.trigger="onGoDown($event)">
        <au-icon-nav-down></au-icon-nav-down>
      </button>
      <button type="button"
              class="aaBtn"
              click.trigger="onGoJrnl($event)">
        Transaction journal
        <au-icon-nav-right></au-icon-nav-right>
      </button>
      <!--
       <span class="aaToolBarDivider">.</span>
       <span click.trigger="onEdit($event)" class="aaBtn">
            <au-icon-edit></au-icon-edit> Edit
       </span>
       <span click.trigger="onDelete($event)" class="aaBtn" style="margin-left: 1pc;">
            <i class="fa fa-minus-circle fa-fw aaIconRed" aria-hidden="true"></i> Delete
       </span>
       <span class="aaToolBarDivider">.</span>
       -->
    </div>
    <!--
        <div class="aaPanelToolBar" if.bind="app.isEditing">
          <div style="text-align: left;">
            <div class="aaInlineBlock" style="visibility: hidden;">
              <span class="aaBtn"><i class="fa fa-chevron-up fa-fw" aria-hidden="true"></i></span>
              <span class="aaBtn"><i class="fa fa-chevron-down fa-fw" aria-hidden="true"></i></span>
              <span class="aaBtn">Transaction journal <i class="fa fa-chevron-right fa-fw" aria-hidden="true"></i></span>
            </div>
            <span class="aaToolBarDivider">.</span>
            <span click.trigger="onSaveEdits($event)" class="aaBtn">Save</span>
            <span click.trigger="onCancelEdits($event)" class="aaBtn" style="margin-left: 3em;">Cancel</span>
            <span class="aaToolBarDivider">.</span>
          </div>
        </div>
    -->
    <div class="aaPanelBody">
      <table border="0" style="border-collapse: collapse;">
        <tr>
          <td class="aaFormItemLabel">Date:</td>
          <template if.bind="!app.isEditing">
            <td class="aaFormItemData">
              <input type="text" disabled class="aaFormInputText aaCellTranDate" value="${app.selectedTran.date}">
            </td>
          </template>
          <template if.bind="app.isEditing">
            <td class="aaFormItemData">
              <input type="text" class="aaFormInputText aaCellTranDate" value="${app.selectedTran.date}">
            </td>
          </template>
        </tr>
      </table>

      <div
        element.ref="proxyForMoverPositionTop"
        class="aaGridContainer">
        <div class="aaGridTitleBar">Account balance changes</div>
        <div class="aaPanelToolBar">
          <button
            type="button"
            class="aaBtn"
            click.trigger="onEditRows($event)">
            <span class="fa fa-pencil-square-o fa-fw aaIconBlue" aria-hidden="true"></span> Edit rows...
          </button>
          <button
            type="button"
            class="aaBtn"
            click.trigger="viewmodelTranBchgMover.dialogOpen($event, proxyForMoverPositionTop, proxyForMoverPositionLeft)">
            <au-icon-row-mover></au-icon-row-mover>Move rows...
          </button>
        </div>
        <div class="aaGridScrollableRows" id="tranModule-${app.selectedTran.id}" style="height: 25pc;">
          <template repeat.for="bchg of app.selectedTran.bchgList">
            <div class="aaRow aaRowBgColorToolbar"
                 mouseenter.trigger="onRowEnter($event, bchg)"
                 mouseleave.trigger="onRowLeave($event, bchg)">
              <template if.bind="!app.isEditing">
                <div class="aaRowOps">
                  <span class="aaBtn aaBtnInRowOps" click.delegate="showBchgInAcct($event, bchg)">
                    <au-icon-nav-left-left></au-icon-nav-left-left>
                  </span>
                  <span class="aaBtn aaBtnInRowOps" click.delegate="showBchgDetail($event, bchg)">
                    <au-icon-nav-left></au-icon-nav-left>
                  </span>
                </div>
              </template>
              <au-vertical-gridline></au-vertical-gridline>
              <div class="aaRowData aaRowBgColorData ${bchg.id == app.selectedBchg.id ? 'aaMostRecentlySelectedRow' : ''}">
                <au-tran-bchg-row-data bchg.bind="bchg"></au-tran-bchg-row-data>
              </div>
              <au-vertical-gridline></au-vertical-gridline>
            </div>
          </template>

          <!-- End of list row -->
          <template if.bind="!app.isEditing">
            <div class="aaRow aaRowBgColorNonData">
              <template if.bind="!app.isEditing">
                <div class="aaRowOps">
                  <span class="aaBtn aaHidden">
                    <au-icon-nav-left-left></au-icon-nav-left-left>
                  </span>
                  <span class="aaBtn aaBtnInRowOps aaHidden">
                    <au-icon-nav-left></au-icon-nav-left>
                  </span>
                </div>
              </template>
              <template if.bind="app.isEditing">
                <div class="aaRowOps">
                <span class="aaBtn aaBtnInRowOps aaHidden" click.delegate="onMenuClick($event, bchg)">
                    <i class="fa fa-bars fa-fw" aria-hidden="true"></i>
                  </span>
                </div>
              </template>
              <au-vertical-gridline></au-vertical-gridline>
              <div element.ref="proxyForMoverPositionLeft" class="aaRowData aaRowBgColorNonData">
                <div class="aaInlineBlock aaCellText aaFontData" style="position: absolute;"><span
                  class="aaSansSerif aaCellTextEOL">${app.END_OF_LIST}</span></div>
                <au-tran-bchg-cells-spacer></au-tran-bchg-cells-spacer>
                <au-vertical-gridline-spacer></au-vertical-gridline-spacer>
                <au-tran-bchg-cells-spacer></au-tran-bchg-cells-spacer>
              </div>
              <au-vertical-gridline></au-vertical-gridline>
            </div>
          </template>
        </div>
        <div class="aaGridFooterBar"></div>
      </div>
    </div>

    <!-- net change amt for eash side -->
    <div class="aaGridContainer" style="border-color: transparent;">
      <div class="aaRowTotals">
        <div class="aaRowOps">
          <div class="aaRowOps">
                  <span class="aaBtn aaBtnInRowOps" click.delegate="showBchgInAcct($event, bchg)">
                    <au-icon-nav-left-left></au-icon-nav-left-left>
                  </span>
            <span class="aaBtn aaBtnInRowOps" click.delegate="showBchgDetail($event, bchg)">
                    <au-icon-nav-left></au-icon-nav-left>
                  </span>
          </div>
<!--
          <span class="aaBtn aaHidden"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></span>
-->
        </div>
        <au-vertical-gridline-spacer></au-vertical-gridline-spacer>
        <div class="aaCellText aaCellRowSelectedChar" style="visibility: hidden;">${app.ROW_SELECTED_CHAR}</div>
        <div class="aaInlineBlock">
          <div class="aaCellText aaFontData aaTranBchgRow2Indent">
            <input type="text" disabled class="aaCellBchgDesc aaFontLabel"
                   style="text-align: right; border-color: transparent; background-color: inherit;"
                   value="Total change(s) to assets:">
          </div>
          <au-vertical-gridline-spacer></au-vertical-gridline-spacer>
          <div class="aaCellText aaFontData">
            <input type="text" disabled class="aaFormInputText aaCellBchgAmt"
                   value="${app.selectedTran.totalChangesAssets | auCurrencyConverter}">
          </div>
          <au-vertical-gridline-spacer></au-vertical-gridline-spacer>
          <div class="aaCellText aaFontData aaTranBchgRow2Indent">
            <input type="text" disabled class="aaCellBchgDesc aaFontLabel"
                   style="text-align: right; border-color: transparent; background-color: inherit;"
                   value="Total change(s) to equities:">
          </div>
          <au-vertical-gridline-spacer></au-vertical-gridline-spacer>
          <div class="aaCellText aaFontData">
            <input type="text" disabled class="aaFormInputText aaCellBchgAmt"
                   value="${app.selectedTran.totalChangesEquities | auCurrencyConverter}">
          </div>
        </div>
        <au-vertical-gridline-spacer></au-vertical-gridline-spacer>
      </div>
    </div>
  </div>
  </div>

  <au-tran-bchg-mover view-model.ref="viewmodelTranBchgMover"></au-tran-bchg-mover>
</template>
