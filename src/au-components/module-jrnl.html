<template>
  <require from="../au-views/column-gridline.html"></require>
  <require from="./tran-bchg"></require>
  <require from="./gh-tran-bchg"></require>
  <require from="./cell-bchg.html"></require>

  <div class="aaPanel aaPanelBoxShadow">
    <div class="aaPanelHeader aaPanelHeaderModule">Transaction Journal</div>
    <div class="aaPanelBody">
      <div class="aaGridContainer">
        <div class="aaGridTitleBar">Transactions</div>
        <div class="aaGridHeader aaFontLabel">
          <div class="aaRow aaFontLabel">
            <div class="aaCellRowOps"
                 click.delegate="onNewTran($event)">
              <span class="aaBtn">
                <i class="fa fa-plus-circle fa-fw aaIconGreen" aria-hidden="true"></i>
              </span>
            </div>
            <column-gridline
                gridline-width="${eva.GRIDLINE_THIN}"
                gridline-color="${eva.GRIDLINE_COLOR}"></column-gridline>
            <div class="aaCellText aaCellRowSelectedChar" style="visibility: hidden;">${eva.ROW_SELECTED_CHAR}</div>
            <column-gridline
                gridline-width="${eva.GRIDLINE_THIN}"
                gridline-color="${eva.GRIDLINE_COLOR}"></column-gridline>
            <div class="aaCellText aaFontSizeLabel aaCellId">ID</div>
            <column-gridline
                gridline-width="${eva.GRIDLINE_THIN}"
                gridline-color="${eva.GRIDLINE_COLOR}"></column-gridline>
            <div class="aaCellText aaFontSizeLabel aaCellTranDate">Date</div>
            <gh-tran-bchg></gh-tran-bchg>
          </div>
        </div>
        <div class="aaGridScrollableRows"
             style="height: 33pc;"
             id="jrnlGridBodyContainer">
          <template repeat.for="tran of eva.tranList">
            <div id="${tran.id}"
                 class="aaRow aaRowJrnl"
                 xcss="border-top: 5px solid ${eva.GRIDLINE_COLOR};
                      border-bottom: 5px solid ${eva.GRIDLINE_COLOR};
                      margin: 5px 0;"
                 mouseenter.trigger="onRowEnter($event, tran)"
                 mouseleave.trigger="onRowLeave($event, tran)">
              <div class="aaCellRowOps">
                  <span class="aaBtn aaBtnHidden"
                        click.delegate="onGoTran($event, tran)">
                    <i class="fa fa-chevron-left fa-fw" aria-hidden="true"></i>
                  </span>
              </div>
              <column-gridline
                  gridline-width="${eva.GRIDLINE_THIN}"
                  gridline-color="${eva.GRIDLINE_COLOR}"></column-gridline>
              <div class="aaCellText aaCellRowSelectedChar" css="visibility: ${tran.id == eva.selectedTran.id ? 'visible' : 'hidden'};">${eva.ROW_SELECTED_CHAR}</div>
              <div class="aaRowDataCells">
                <column-gridline
                    gridline-width="${eva.GRIDLINE_THIN}"
                    gridline-color="${eva.GRIDLINE_COLOR}"></column-gridline>
                <div class="aaCellText aaFontData aaCellId">${tran.id}</div>
                <column-gridline
                    gridline-width="${eva.GRIDLINE_THIN}"
                    gridline-color="${eva.GRIDLINE_COLOR}"></column-gridline>
                <div class="aaCellText aaFontData aaCellTranDate">${tran.date}</div>
                <div class="aaInlineBlock">
                  <div class="aaInlineBlock"
                       css="border-bottom: 1px solid ${eva.GRIDLINE_COLOR};">
                    <template repeat.for="bchg of tran.bchgList.slice(0, 1)">
                      <tran-bchg bchg.bind="bchg"></tran-bchg>
                    </template>
                  </div>
                  <template repeat.for="bchg of tran.bchgList.slice(1)">
                    <div class="aaSubRow"
                         xcss="border-top: ${eva.GRIDLINE_THICK} solid ${eva.GRIDLINE_COLOR};">
                      <tran-bchg bchg.bind="bchg"></tran-bchg>
                    </div>
                  </template>
                </div>
              </div>
            </div>
          </template>
        </div>
        <div class="aaGridFooterBar"></div>
      </div>
    </div>
  </div>
</template>
