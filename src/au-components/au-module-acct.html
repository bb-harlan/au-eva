<template>
  <require from="au-views/au-icon-nav-left.html"></require>
  <require from="au-views/au-icon-nav-up.html"></require>
  <require from="au-views/au-icon-nav-down.html"></require>
  <require from="au-views/au-icon-nav-right.html"></require>
  <require from="au-views/au-icon-nav-right-right.html"></require>
  <require from="au-views/au-icon-edit.html"></require>
  <require from="au-views/au-icon-radio-unselected.html"></require>
  <require from="au-views/au-icon-radio-selected.html"></require>
  <require from="au-converters/au-currency-converter"></require>
  <require from="au-converters/au-equation-side-converter"></require>

  <div class="aaPanel aaPanelBoxShadow">
    <div class="aaPanelHeader aaPanelHeaderModule">${app.selectedAcct.isAcct() ? 'Account' : 'Annotation'}</div>
    <div class="aaPanelToolBar" if.bind="!app.isEditing">
      <button type="button"
              class="aaBtn"
              click.trigger="onGoUp($event)">
        <au-icon-nav-up></au-icon-nav-up>
      </button>
      <button type="button"
              class="aaBtn"
              click.trigger="onGoDown($event)">
        <au-icon-nav-down></au-icon-nav-down>
      </button>
      <span class="aaToolBarDivider">.</span>
      <button type="button"
              class="aaBtn"
              click.trigger="onEdit($event)">
        <au-icon-edit></au-icon-edit>
        Edit
      </button>
      <button type="button"
              class="aaBtn"
              style="margin-left: 1pc;"
              click.trigger="onDelete($event)">
        <span class="fa fa-minus-circle fa-fw aaIconRed" aria-hidden="true"></span> Delete
      </button>
      <span class="aaToolBarDivider">.</span>
      <!--
      <div class="btn-group">
        <a class="aaBtn dropdown-toggle" data-toggle="dropdown" click.trigger="onMenuClick($event, app.selectedAcct)">
          <span class="fa fa-bars fa-fw" aria-hidden="true"></span>
        </a>
        <ul class="dropdown-menu aaSansSerif">
          <li><a><i class="fa fa-plus-circle fa-fw aaIconGreen"></i> Insert new account row</a></li>
          <li><a><i class="fa fa-plus-circle fa-fw aaIconGreen"></i> Insert new annotation row</a></li>
          <li class="divider"></li>
          <li><a><i class="fa fa-minus-circle fa-fw aaIconRed"></i> Delete row...</a></li>
          <li class="divider"></li>
          <li><a><i class="fa fa-arrows-v fa-fw aaIconBlue"></i> Re-position row...</a>
          </li>
        </ul>
      </div>
-->
    </div>
    <div class="aaPanelToolBar" if.bind="app.isEditing">
      <div style="text-align: left;">
        <span class="aaToolBarDivider">.</span>
        <button type="button"
                class="aaBtn"
                click.trigger="onSaveEdits($event)">Save
        </button>
        <button type="button"
                class="aaBtn"
                style="margin-left: 3pc;"
                click.trigger="onCancelEdits($event)">Cancel
        </button>
        <span class="aaToolBarDivider">.</span>
      </div>
    </div>
    <div class="aaPanelBody">
      <div class="aaForm">
        <table border="0" style="border-collapse: collapse;">
          <tr>
            <td class="aaFormItemLabel">Equation side:</td>
            <td class="aaFormItemData">${app.selectedAcct.parentFaeSide.id | auEquationSideConverter:true:true}</td>
          </tr>
          <tr>
            <td class="aaFormItemLabel">Title:</td>
            <template if.bind="!app.isEditing">
              <td class="aaFormItemData">
                <input type="text" disabled class="aaFormInputText aaCellAcctTitle" value="${app.selectedAcct.title}">
              </td>
            </template>
            <template if.bind="app.isEditing">
              <td class="aaFormItemData">
                <input type="text" class="aaFormInputText aaCellAcctTitle" value="${app.selectedAcct.title}">
              </td>
            </template>
          </tr>
        </table>
      </div>
      <div class="aaGridContainer">
        <div class="aaGridTitleBar">Balance changes</div>
        <div class="aaRow aaRowColumnHeaders aaFontLabel aaFontBold">
          <div class="aaRowOps aaFontLabel aaHidden">
            <div class="aaRadioBtn">
                <au-icon-radio-unselected></au-icon-radio-unselected>
            </div>
          </div>
          <div class="aaVerticalGridline" style="background-color: #fff"></div>
          <div class="aaRowData">
            <div class="aaCell aaCellTranDate">Date</div>
            <div class="aaVerticalGridline" style="background-color: #fff"></div>
            <div class="aaCell aaCellBchgDesc">Change description</div>
            <div class="aaVerticalGridline" style="background-color: #fff"></div>
            <div class="aaCell aaCellBchgAmt">Change amount</div>
            <div class="aaVerticalGridline" style="background-color: #fff"></div>
            <div class="aaCell aaCellBchgBal">New balance</div>
            <div class="aaVerticalGridline" style="background-color: #fff"></div>
          </div>
        </div>
        <div class="aaGridScrollableRows" id="acctModule-${app.selectedAcct.id}">
          <template repeat.for="bchg of app.selectedAcct.bchgList">
            <div class="aaRow aaRowBgColorToolbar"
                 id="${bchg.id}"
                 mouseenter.trigger="onRowEnter($event, bchg)"
                 mouseleave.trigger="onRowLeave($event, bchg)"
                 click.trigger="app.selectBchg(bchg)"
                 dblclick.trigger="app.selectAcctBchgGoTran(bchg)">
              <div class="aaRowOps aaBgColorToolbar aaFontSizeLabel">
                <div class="aaRadioBtn">
                  <template if.bind="app.selectedBchg.id == bchg.id">
                    <au-icon-radio-selected></au-icon-radio-selected>
                  </template>
                  <template if.bind="app.selectedBchg.id != bchg.id">
                    <au-icon-radio-unselected></au-icon-radio-unselected>
                  </template>
                </div>
              </div>
              <div class="aaVerticalGridline"></div>
              <div
                class="aaRowData aaRowBgColorData">
                <div class="aaCell aaFontSizeData aaCellTranDate">${bchg.sourceTran.date}</div>
                <div class="aaVerticalGridline"></div>
                <div class="aaCell aaFontSizeData aaCellBchgDesc">${bchg.desc}</div>
                <div class="aaVerticalGridline"></div>
                <div class="aaCell aaFontSizeData aaCellBchgAmt">${bchg.amt | auCurrencyConverter}</div>
                <div class="aaVerticalGridline"></div>
                <div class="aaCell aaFontSizeData aaCellBchgBal">${bchg.newBalance | auCurrencyConverter}</div>
              </div>
              <div class="aaVerticalGridline"></div>
            </div>
          </template>
          <!--
          The purpose of having the following invisible end-of-list row
          is to provide an invisible horizontal spacer if acct.bchgList is empty
          so as to display the column headings row properly..
          -->
          <div class="aaRow aaHidden">
            <div class="aaRadioBtn">
              <au-icon-radio-unselected></au-icon-radio-unselected>
            </div>
            </div>
            <div class="aaVerticalGridline"></div>
            <div class="aaCell aaFontData aaCellTranDate"></div>
            <div class="aaVerticalGridline"></div>
            <div class="aaCell aaFontData aaCellBchgDesc"></div>
            <div class="aaVerticalGridline"></div>
            <div class="aaCell aaFontData aaCellBchgAmt"></div>
            <div class="aaVerticalGridline"></div>
            <div class="aaCell aaFontData aaCellBchgBal"></div>
            <div class="aaVerticalGridline"></div>
          </div>
        <div class="aaGridFooterBar"></div>
        </div>
      </div>
    </div>
  </div>
</template>
