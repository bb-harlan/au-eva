<template>
  <require from="au-views/au-tran-bchg-cells-spacer.html"></require>
  <require from="au-views/au-vertical-gridline.html"></require>
  <require from="au-views/au-icon-ellipsis.html"></require>
  <require from="au-views/au-icon-balance-scale.html"></require>
  <require from="au-components/au-input-currency"></require>

 <div class="aaInlineFlex">
    <!-- spacer if equities side -->
    <template if.bind="bchg.targetAcct.parentFaeSide.id == 'Equities'">
      <!-- put blank space in change-to-asset column -->
      <au-tran-bchg-cells-spacer></au-tran-bchg-cells-spacer>
      <div class="aaVerticalGridline"></div>
    </template>

    <!-- bchg data cells -->
    <div class="aaInlineBlock">
      <!-- cell for target account title -->
      <div class="aaCell aaFontSizeData">
        <input type="text" readonly class="aaFormInputText aaCellAcctTitle"
               css="vertical-align: middle; border-color: ${eva.GRIDLINE_COLOR};"
               value.to-view="bchg.targetAcct.title">
        <button type="button"
                class="aaBtn"
                click.trigger="auTranBchgAcctPicker.open($event, bchg)">
          <au-icon-ellipsis></au-icon-ellipsis>
        </button>
        <button type="button"
                class="aaBtn"
                click.trigger="auTranBchgAcctPicker.open($event, bchg)">
          <au-icon-balance-scale></au-icon-balance-scale>
        </button>

        <template if.bind="!app.isEditing">
          <span class="aaBtn aaHidden" style="vertical-align: middle; border-color: #999;">
            <i class="fa fa-ellipsis-h fa-fw" aria-hidden="true"></i>
          </span>
        </template>
        <template if.bind="app.isEditing">
          <input type="button"
                 class="aaBtn"
                 click.delegate="moduleTran.onPickAcct($event, bchg)"
                 style="vertical-align: middle; border-color: #999; font-family: FontAwesome;"
                 value="&#xf141;">
          <span class="aaBtn" click.delegate="moduleTran.onPickAcct($event, bchg)"
                style="vertical-align: middle; border-color: #999;">
            <i class="fa fa-ellipsis-h fa-fw" aria-hidden="true"></i>
          </span>
        </template>
      </div>
      <div class="aaTranBchgRow2Indent">
        <!-- cell for bchg desc -->
        <div class="aaCell aaFontSizeData">
          <template if.bind="!app.isEditing">
            <input type="text" readonly class="aaFormInputText aaCellBchgDesc" value.to-view="bchg.desc">
          </template>
          <template if.bind="app.isEditing">
            <input type="text" class="aaFormInputText aaCellBchgDesc" value.two-way="bchg.desc">
          </template>
        </div>
        <!-- cell for bchg amt -->
        <div class="aaCell aaFontSizeData">
          <template if.bind="!app.isEditing">
            <au-input-currency currency-amount.to-view="bchg.amt" is-readonly.to-view="true"
                               classes-string.to-view="'aaFormInputText aaCellBchgAmt'"></au-input-currency>
          </template>
          <template if.bind="app.isEditing">
            <template if.bind="bchg.intraTranSorter != 0">
              <au-input-currency currency-amount.to-view="bchg.amt" is-readonly.to-view="false"
                                 classes-string.to-view="'aaFormInputText aaCellBchgAmt'"
                                 inputcurrencycompleted.delegate="onInputCurrencyCompleted($event)"></au-input-currency>
            </template>
            <template if.bind="bchg.intraTranSorter == 0">
              <au-input-currency currency-amount.to-view="bchg.amt" is-readonly.to-view="true"
                                 classes-string.to-view="'aaFormInputText aaCellBchgAmt aaBchgAmtComputed'"></au-input-currency>
            </template>
          </template>
        </div>
      </div>
      <template if.bind="app.selectedModule == app.MODULE_TRAN && bchg.intraTranSorter == 0 && app.isEditing">
        <div style="text-align: right;">
          <div class="aaCell aaFontLabel">NOTE: The change amount in this first row is automatically computed to
            balance the transaction.
          </div>
        </div>
      </template>
    </div>

    <!-- spacer if assets side -->
    <template if.bind="bchg.targetAcct.parentFaeSide.id == app.data.faeSideAssets.id">
      <!-- put blank space in change-to-equity column -->
      <div class="aaVerticalGridline"></div>
      <au-tran-bchg-cells-spacer></au-tran-bchg-cells-spacer>
    </template>
  </div>
</template>
