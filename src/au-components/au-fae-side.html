<template>
  <require from="au-views/au-icon-nav-right.html"></require>
  <require from="au-views/au-vertical-gridline.html"></require>
  <require from="au-views/au-vertical-gridline-spacer.html"></require>
  <require from="au-converters/au-currency-converter"></require>
  <require from="au-converters/au-equation-side-converter"></require>
  <require from="au-components/au-acct-mover"></require>

  <h1 css="text-align: ${faeSide.id == app.data.SIDE_ID_ASSETS ? 'right' : 'left'};">
    ${faeSide.id}
  </h1>
  <div element.ref="moverDialogPositionElement"
       class="aaGridContainer">
    <div class="aaGridTitleBar" style="font-size: larger;">${faeSide.id | auEquationSideConverter:true: false}
      accounts
    </div>
    <div class="aaPanelToolBar">
      <au-acct-mover
        acct-list.bind="acctList"
        mover-dialog-position-element.bind="moverDialogPositionElement"></au-acct-mover>
      <div class="btn-group">
        <a class="aaBtn mdropdown-toggle" data-toggle="dropdown">
          <span class="fa fa-bars fa-fw" aria-hidden="true"></span>
        </a>
        <ul class="dropdown-menu aaSansSerif">
          <li><a><i class="fa fa-plus-circle fa-fw aaIconGreen"></i> Insert new account row</a></li>
          <li><a><i class="fa fa-plus-circle fa-fw aaIconGreen"></i> Insert new annotation row</a></li>
          <li class="divider"></li>
          <li><a><i class="fa fa-minus-circle fa-fw aaIconRed"></i> Delete row...</a></li>
        </ul>
      </div>
    </div>
    <div id="gridHeader${equationSide}" class="aaGridHeader">
      <div class="aaFontLabel aaRow" style="background-color: #eee;">
        <div class="aaRowOps" style="visibility: hidden;">
          <button type="button" class="aaBtn" click.trigger="onRowOpsOpen($event, listItem)">
            <i class="fa fa-bars fa-fw" aria-hidden="true"></i>
          </button>
          <button type="button" class="aaBtn" click.delegate="onGoAcct($event, listItem)">
            <au-icon-nav-right></au-icon-nav-right>
          </button>
        </div>
        <div class="aaRowData aaRowBgColorNonData">
          <au-vertical-gridline></au-vertical-gridline>
          <div class="aaCellText aaFontSizeLabel aaCellAcctTitle"><span class=" aaSansSerif">Title</span></div>
          <au-vertical-gridline></au-vertical-gridline>
          <div class="aaCellText aaFontSizeLabel aaCellBchgBal"><span class=" aaSansSerif">Balance</span></div>
          <au-vertical-gridline></au-vertical-gridline>
        </div>
      </div>
    </div>
    <div class="aaGridScrollableRows">
      <template repeat.for="listItem of faeSide.acctList">
        <div id="${listItem.id}" class="aaRow aaBgColorToolbar"
             style="background-color: #ddd;"
             mouseenter.trigger="onRowEnter($event, listItem)"
             mouseleave.trigger="onRowLeave($event, listItem)">
          <template if.bind="listItem.isAcct()">
            <div class="aaRowOps">
              <button type="button" class="aaBtn" click.trigger="onRowOpsOpen($event, listItem)">
                <i class="fa fa-bars fa-fw" aria-hidden="true"></i>
              </button>
              <button type="button" class="aaBtn" click.delegate="onGoAcct($event, listItem)">
                <au-icon-nav-right></au-icon-nav-right>
              </button>
            </div>
            <au-vertical-gridline></au-vertical-gridline>
            <div class="aaRowData aaRowBgColorData ${listItem.id == app.selectedAcct.id ? 'aaMostRecentlySelectedRow' : ''}">
              <span class="aaCellText aaFontSizeData aaCellAcctTitle">${listItem.title}</span>
              <au-vertical-gridline></au-vertical-gridline>
              <span
                class="aaCellText aaFontSizeData aaCellBchgBal">${listItem.endingBalance | auCurrencyConverter}</span>
            </div>
            <au-vertical-gridline></au-vertical-gridline>
          </template>
          <template if.bind="listItem.isAnnotation()">
            <div class="aaRowOps">
              <button type="button" class="aaBtn" click.trigger="onRowOpsOpen($event, listItem)">
                <i class="fa fa-bars fa-fw" aria-hidden="true"></i>
              </button>
              <button type="button" class="aaBtn" click.delegate="onGoAcct($event, listItem)">
                <au-icon-nav-right></au-icon-nav-right>
              </button>
            </div>
            <au-vertical-gridline></au-vertical-gridline>
            <div class="aaRowData aaRowBgColorData ${listItem.id == app.selectedAcct.id ? 'aaMostRecentlySelectedRow' : ''}">
              <span class="aaCellText aaFontSizeData aaCellAnnoTitle">${listItem.annoText}</span>
              <au-vertical-gridline></au-vertical-gridline>
              <span class="aaCellText aaFontSizeData aaCellBchgBal"></span>
            </div>
            <au-vertical-gridline></au-vertical-gridline>
          </template>
        </div>
      </template>

      <!--
          Following is the coding for an end-of-list row that is not associated
          with any account. Since "insertion" is the facility provided to a user
          for creating a new account in the list, this end-of-list row provides
          a point to insert a new account at the end of the list.
      -->
      <div id="End of equation side ${faeSide.id}"
           class="aaRow aaRowBgColorNonData"
           mouseenter.trigger="onRowEnter($event, null)"
           mouseleave.trigger="onRowLeave($event, null)">
        <div class="aaRowOps">
          <button type="button" class="aaBtn" click.trigger="onRowOpsOpen($event, listItem)">
            <span class="fa fa-bars fa-fw" aria-hidden="true"></span>
          </button>
          <button type="button" class="aaBtn aaHidden">
            <au-icon-nav-right></au-icon-nav-right>
          </button>
        </div>
        <au-vertical-gridline></au-vertical-gridline>
        <div class="aaRowData aaRowBgColorNonData">
          <span class="aaCellText aaFontData aaCellAcctTitle"><span
            class="aaSansSerif aaCellTextEOL">${app.END_OF_LIST}</span></span>
          <au-vertical-gridline-spacer></au-vertical-gridline-spacer>
          <span class="aaCellText aaFontData aaCellBchgBal"></span>
        </div>
        <au-vertical-gridline></au-vertical-gridline>
      </div>
    </div>
    <div class="aaGridFooterBar"></div>
  </div>
  <!--
  Following is the coding for a row that shows the total of
  all account balances. It is coded with invisible menu and nav buttons
  as horizontal space holders to result in proper horizontal positioning
  of the "Total" label amd the total amt.
  -->
  </div>
  <!--<div class="aaGridTotals">-->
    <div class="aaGridContainer" style="border-color: transparent;">
    <div class="aaRow" style="border-bottom-color: transparent; background-color: transparent;">
      <div class="aaRowOps">
        <button type="button" class="aaBtn">
          <span class="fa fa-bars fa-fw" aria-hidden="true"></span>
        </button>
        <button type="button" class="aaBtn">
          <au-icon-nav-right></au-icon-nav-right>
        </button>
      </div>
      <au-vertical-gridline-spacer></au-vertical-gridline-spacer>
      <div class="aaRowData">
        <span class="aaCellText aaFontData aaCellAcctTitle" style="text-align: right;"><span
          class="aaFontLabel">Total:</span></span>
        <au-vertical-gridline-spacer></au-vertical-gridline-spacer>
        <span class="aaCellText aaFontData aaCellBchgBal">${faeSide.listTotal | auCurrencyConverter}</span>
      </div>
      <au-vertical-gridline-spacer></au-vertical-gridline-spacer>
    </div>
  </div>


  <div element.ref="rowOpsMenuModal" class="aaModal"
       style="background: transparent;"
       click.delegate="onRowOpsCancel($event)">
    <div element.ref="rowOpsMenuContent"
         css="display: inline-block;
         text-align: left;
         position: fixed;
         top: ${rowOpsBoundingClientRect.top}px;
         left: ${rowOpsBoundingClientRect.left}px">
      <!--
              <span class="aaBtn" click.delegate="onRowOpsClose($event)">
                  <i class="fa fa-bars fa-fw" aria-hidden="true"></i></span>
      -->
      <div class="btn-group">
        <!--
                <a class="aaBtn dropdown-toggle" data-toggle="dropdown">
                  <span class="fa fa-bars fa-fw" aria-hidden="true"></span>
                </a>
        -->
        <ul class="dropdown-menu aaSansSerif" style="display: block;">
          <li><a><i class="fa fa-plus-circle fa-fw aaIconGreen"></i> Insert new account row</a></li>
          <li><a><i class="fa fa-plus-circle fa-fw aaIconGreen"></i> Insert new annotation row</a></li>
          <li class="divider"></li>
          <li><a><i class="fa fa-minus-circle fa-fw aaIconRed"></i> Delete row...</a></li>
        </ul>
      </div>
    </div>
  </div>

</template>
