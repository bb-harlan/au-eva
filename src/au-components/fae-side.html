<template>
  <require from="../au-views/vertical-gridline.html"></require>
  <require from="../au-views/vertical-gridline-spacer.html"></require>
  <require from="../au-converters/currency-converter"></require>
  <require from="../au-converters/equation-side-converter"></require>
  <require from="../au-components/acct-mover"></require>

  <h1 id="moverAnchor-${equationSide}"
      css="text-align: ${equationSide == eva.SIDE_ASSETS ? 'right' : 'left'};">${equationSide |
    equationSideConverter:true:true}</h1>
  <div class="aaGridContainer">
    <div class="aaGridTitleBar" style="font-size: larger;">${equationSide | equationSideConverter:true:false} accounts
    </div>
    <div class="aaPanelToolBar">
      <span click.trigger="onMoverDialogOpen($event)" class="aaBtn">
         <i class="fa fa-arrows-v fa-fw aaIconBlue" aria-hidden="true"></i> Move rows
      </span>
      <au-acct-mover></au-acct-mover>
    </div>
    <div id="gridHeader${equationSide}" class="aaGridHeader">
      <div class="aaFontLabel aaRow">
        <div class="aaFontLabel aaCellRowOps" click.delegate="onMoverDialogOpen($event)">
          <!--<span class="aaBtn"><i class="fa fa-arrows-v fa-fw aaIconBlue" aria-hidden="true"></i></span>-->
        </div>
        <div class="aaCellRowOps ">
          <span class="aaBtn aaBtnHidden">
                      <i class="fa fa-chevron-right fa-fw" aria-hidden="true"></i>
          </span>
        </div>
        <vertical-gridline></vertical-gridline>
        <div class="aaCellText aaCellRowSelectedChar" style="visibility: hidden;">${eva.ROW_SELECTED_CHAR}</div>
        <vertical-gridline></vertical-gridline>
        <div class="aaCellText aaFontSizeLabel aaCellAcctTitle"><span class=" aaSansSerif">Title</span></div>
        <vertical-gridline></vertical-gridline>
        <div class="aaCellText aaFontSizeLabel aaCellBchgBal"><span class=" aaSansSerif">Balance</span></div>
        <vertical-gridline></vertical-gridline>
      </div>
    </div>
    <div class="aaGridScrollableRows">
      <template repeat.for="listItem of sideAcctList">
        <div id="${listItem.id}" class="aaRow" mouseenter.trigger="onRowEnter($event, listItem)"
             mouseleave.trigger="onRowLeave($event, listItem)">
          <template if.bind="listItem.isAcct()">
            <div class="aaCellRowOps">
              <span class="aaBtn aaBtnHidden" click.delegate="onMenuClick($event, listItem)">
                <i class="fa fa-bars fa-fw" aria-hidden="true"></i>
              </span>
            </div>
            <div class="aaCellRowOps">
              <span class="aaBtn aaBtnHidden" click.delegate="onGoAcct($event, listItem)">
                <i class="fa fa-chevron-right fa-fw" aria-hidden="true"></i>
              </span>
            </div>
            <vertical-gridline></vertical-gridline>
            <div class="aaCellText aaCellRowSelectedChar"
                 css="visibility: ${listItem.id == eva.selectedAcct.id ? 'visible' : 'hidden'};">
              ${eva.ROW_SELECTED_CHAR}
            </div>
            <vertical-gridline></vertical-gridline>
            <div class="aaRowDataCells">
              <span class="aaCellText aaFontSizeData aaCellAcctTitle">${listItem.title}</span>
              <vertical-gridline></vertical-gridline>
              <span class="aaCellText aaFontSizeData aaCellBchgBal">${listItem.bchgList.endingBalance | currencyConverter}</span>
              <vertical-gridline></vertical-gridline>
            </div>
          </template>
          <template if.bind="listItem.isAnnotation()">
            <div class="aaCellRowOps">
              <span class="aaBtn aaBtnHidden" click.delegate="onMenuClick($event, listItem)">
                    <i class="fa fa-bars fa-fw" aria-hidden="true"></i>
                </span>
            </div>
            <div class="aaCellRowOps">
              <span class="aaBtn aaBtnHidden" click.delegate="onGoAcct($event, listItem)">
                <i class="fa fa-chevron-right fa-fw" aria-hidden="true"></i>
              </span>
            </div>
            <vertical-gridline></vertical-gridline>
            <div class="aaCellText aaCellRowSelectedChar"
                 css="visibility: ${listItem.id == eva.selectedAcct.id ? 'visible' : 'hidden'};">
              ${eva.ROW_SELECTED_CHAR}
            </div>
            <vertical-gridline></vertical-gridline>
            <div class="aaRowDataCells">
              <span class="aaCellText aaFontSizeData aaCellAnnoTitle">${listItem.annoText}</span>
              <vertical-gridline></vertical-gridline>
              <span class="aaCellText aaFontSizeData aaCellBchgBal"></span>
              <vertical-gridline></vertical-gridline>
            </div>
          </template>
        </div>
      </template>

      <!--
          Following is the coding for an end-of-list row that is not associated
          with any account. Since "insertion" is the facility provided to a user
          for creating a new account in the list, this end-of-list row provides
          a point to insert a new account at the end of the list.
      -->
      <div class="aaRow" id="End of equation side ${sideAcctList.equationSide}"
           mouseenter.trigger="onRowEnter($event, null)" mouseleave.trigger="onRowLeave($event, null)">
        <div class="aaCellRowOps">
          <span class="aaBtn aaBtnHidden" click.delegate="onMenuClick($event, listItem)">
            <i class="fa fa-bars fa-fw" aria-hidden="true"></i>
          </span>
        </div>
        <div class="aaCellRowOps">
          <span class="aaBtn aaBtnHidden">
            <i class="fa fa-chevron-right fa-fw" aria-hidden="true"></i>
          </span>
        </div>
        <vertical-gridline></vertical-gridline>
        <div class="aaCellText aaCellRowSelectedChar" style="visibility: hidden;">${eva.ROW_SELECTED_CHAR}</div>
        <vertical-gridline></vertical-gridline>
        <div class="aaInlineBlock">
          <span class="aaCellText aaFontData aaCellAcctTitle"><span
            class="aaSansSerif aaCellTextEOL">${eva.END_OF_LIST}</span></span>
          <vertical-gridline></vertical-gridline>
          <span class="aaCellText aaFontData aaCellBchgBal"></span>
          <vertical-gridline></vertical-gridline>
        </div>
      </div>
    </div>
    <div class="aaGridFooterBar"></div>
    <!--
    Following is the coding for a row that shows the total of
    all account balances. It is code with invisible menu and nav buttons
    as horizontal space holders to result in proper horizontal positioning
    of the "Total" label amd the total amt.
    -->
  </div>
  <div class="aaGridTotals">
    <div class="aaRowTotals">
      <div class="aaCellRowOps">
        <span class="aaBtn aaBtnHidden"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></span>
      </div>
      <div class="aaCellRowOps">
        <span class="aaBtn aaBtnHidden"><i class="fa fa-chevron-right fa-fw" aria-hidden="true"></i></span>
      </div>
      <vertical-gridline-spacer></vertical-gridline-spacer>
      <div class="aaCellText aaCellRowSelectedChar" style="visibility: hidden;">${eva.ROW_SELECTED_CHAR}</div>
      <vertical-gridline-spacer></vertical-gridline-spacer>
      <span class="aaCellText aaFontData aaCellAcctTitle" style="text-align: right;"><span
        class="aaSansSerif">Total:</span></span>
      <vertical-gridline-spacer></vertical-gridline-spacer>
      <span class="aaCellText aaFontData aaCellBchgBal">${sideAcctList.listTotal | currencyConverter}</span>
      <vertical-gridline-spacer></vertical-gridline-spacer>
    </div>
  </div>

  <template if.bind="bindMoverDialog">
    <div id="moverDialogModal${equationSide}" class="aaModal">
      <div
        id="moverDialogContent${equationSide}"
        class="aaPanel aaPanelBoxShadow"
        css="position: absolute; top: ${moverDialogPositionElement.offsetTop}px; left: ${moverDialogPositionElement.offsetLeft}px;"
      >
        <div class="aaPanelHeader aaPanelHeaderModule">Row mover</div>
        <div class="aaPanelBody">
          <div class="aaGridContainer aaInlineBlock">
            <div class="aaGridTitleBar" style="font-size: larger;">${equationSide | equationSideConverter:true:false}
              accounts
            </div>
            <div class="aaPanelToolBar">
              <div style="text-align: center;">
                <span class="aaFontLabel">Drag & drop any row to desired list position.</span>
              </div>
            </div>
            <div id="${equationSide}-mover-row-list"
                 class="aaGridScrollableRows"
                 mousemove.trigger="onMouseMove($event)">
              <template repeat.for="listItem of sideAcctList">
                <div
                  class="aaRow"
                  data-acct-id="${listItem.id}"
                  mouseenter.trigger="onMoveRowMouseEnter($event, listItem)"
                  mouseleave.trigger="onMoveRowMouseLeave($event, listItem)"
                  mousedown.trigger="onMoveRowMouseDown($event)"
                  mouseup.trigger="onMoveRowMouseUp($event)">
                  <div class="aaRowDataCells">
                    <template if.bind="listItem.isAcct()">
                      <span class="aaCellText aaFontSizeData aaCellAcctTitle">${listItem.title}</span>
                      <vertical-gridline></vertical-gridline>
                      <span class="aaCellText aaFontSizeData aaCellBchgBal">${listItem.bchgList.endingBalance | currencyConverter}</span>
                    </template>
                    <template if.bind="listItem.isAnnotation()">
                      <span class="aaCellText aaFontSizeData aaCellAnnoTitle">${listItem.annoText}</span>
                      <vertical-gridline></vertical-gridline>
                      <span class="aaCellText aaFontSizeData aaCellBchgBal"></span>
                    </template>
                    <vertical-gridline></vertical-gridline>
                  </div>
                </div>
              </template>
            </div>
            <div class="aaGridFooterBar"></div>
          </div>
        </div>
        <div class="aaPanelToolBar">
          <div style="text-align: center;">
            <span click.trigger="onMoverDialogDone($event)" class="aaBtn">Done</span>
            <span click.trigger="onMoverDialogCancel($event)" class="aaBtn" style="margin-left: 4pc;">Cancel</span>
          </div>
        </div>
      </div>
    </div>
    </div>
  </template>
</template>
